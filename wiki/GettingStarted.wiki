#summary Guide for quickly getting VMT up and running
#labels Featured
<wiki:toc /> 
=Getting Started With VMT=

==Data Preparation:==
There are several steps that the user should take prior to running VMT to ensure that all input data files are available for processing.  These steps include:
  # Perform preprocessing (QA/QC) in WinRiver II and generate ascii export files ({{{*_ASC.txt}}}).
  # Download or generate a background image if required.  If the user prefers to overlay the data on a background image (e.g. aerial imagery), a background image is required.  The required coordinate system for any georeferenced background is UTM coordinates in meters.  Acceptable file input formats include GeoTIFF, Shapefile,  TIFF/JPEG/PNG (with a world file), ARC ASCII GRID, or SDTS raster.  Aerial imagery in UTM coordinates can be obtained from [http://nationalmap.gov/viewer.html The National Map]  or other sources. 
  # Create a shoreline file if necessary.  Use this option in place of a background image to delineate the shoreline in the figures.  A shoreline file is a csv text file ({{{.txt}}} or {{{.csv}}}) with two columns (UTM easting and UTM northing) representing the coordinate pairs of the shoreline points.  Note: the shoreline is represented as a continuous line (closed loop).  If a break is necessary, i.e. to plot the shoreline of an island within the main channel, insert ‘-9999’ in the text file at the point where each break should occur.  Multiple breaks are supported.    Below is an example of a method to generate such a file using an aerial photo and ArcGIS:
   # Download DOQQ or aerial photo from [http://nationalmap.gov/viewer.html The National Map]
   # Import into ArcGIS
   # Use ET GeoWizards (free download http://www.ianko.com/) to create new shape file 
    # Choose point file type
    # Use edit toolbar to edit new shapefile by digitizing shoreline (pencil tool)
    # Save edits 
   # Use ET GeoWizards to export shapefile to txt file (comma delimited)
   # In Excel or other program, remove first column (point numbers) to leave txt file as only northing and easting in two columns.
   # Save file as .csv
  # Determine the mean water surface elevation (in meters) at each cross section (if required).  
  # Determine the UTM coordinates of the start and end points of each cross section (if using the “user defined endpoints” option).
  # Estimate the maximum depth in the study reach in meters (can use WinRiver II for this).  

==Processing a Set of Transects in VMT:==
With the required files and input data collected, one can start processing transects with VMT.  The following steps are required to process a set of repeat transects (at one cross section) in VMT:
  # Launch VMT in Matlab or run the executable.  The VMT GUI interface window will be displayed.
  # Begin by processing ASCII files (select ASCII output as data type option in the upper left hand corner).  Ensure that the ‘Matlab Files (.mat)’ option is not selected. 
  # Check “Save Data” if you wish to save the processed data as a .mat file—recommended).  Do not choose “Output KMZ File” until you are happy with the scaling (see below).
  # Select “Manually set cross-section ends points” if you wish to manually force the mean cross section line (to which the data re mapped) to have fixed, user defined ends points (rather than a best fit line to the data).  Requires a text file with UTM coordinates of end points (2 X 2 matrix; i.e. row 1:  x1, y1; row 2: x2, y2).
  # Select “Correct for variations in streamwise depth” if you wish to have VMT correct streamwise velocities by enforcing continuity of mass in the along channel coordinate. This correction occurs before computation of the secondary flow definitions. See [WikiPageNotBuiltYet] for more information.
  # Choose plotting options (defaults recommended for initial run) and whether you will import a shoreline file.  Leave scaling, spacing, vertical exaggeration and smoothing options at default values for the first run (you will adjust these based on your cross section).  You should leave “Map Depth-Averaged Velocities” checked for every set of transects you process if you intend to compile all the transects into one plan view flow map after processing (see step 12).  Leaving this checked makes sure the code completes the necessary computations and saves the data to a Matlab data structure for future use.
  # Click “Load Data” to select the files and run the processing routines
   * You will be prompted to browse to the directory with the data
   * Select the repeat transect data files for a single cross section 
   * Click “OK”
   * Browse to the shoreline file if prompted to do so (only if ‘Plot Shoreline’ is selected)
  # Review the plan-view and cross section figures.  If unhappy with plot settings, adjust vertical exaggeration and scaling, vector spacing parameters and smoothing windows and select “Replot”.  Repeat until you are satisfied with the figures.
  # Change plotting variables by selecting the desired variable from the listboxes and selecting ‘Replot’.  Version 2.1 and later also allows the user to select the desired velocity components for the vector field overlay.  The vertical component of velocity can be removed from the secondary flow vectors by unchecking the ‘Include Vert. Vel. Comp. in Sec. Flow Vectors’ box.    
  # If required, select “Output KMZ File” and choose a vertical offset (set >= to the maximum depth of the cross section or reach).  Google Earth will open and display the 3-D mean cross section (you will have to rotate your view from the default plan view in Google earth to see it).  It is recommended that the user set the vertical exaggeration and vertical offset for the deepest site and leave it constant while processing data from additional cross sections within the study reach.  (i.e. if mapping a river bend, determine the deepest portion and set the vertical offset greater than this value and the vertical exaggeration appropriate for the width, then leave these values constant for all other transects on the bend).  Outputting data to GE may cause issues in VMT when this option is selected and one replots the data several times.  I have noticed that a previously loaded data set may reappear when replotting.  It is unclear why this is happening, but closing GE and unselecting the GE output checkbox after each data set is loaded seems to solve the problem.  If GE is left open, the data set which it was first opened may reappear when running the “replot” command even after a new data set has been loaded.  
  # Repeat steps 4-10 to process data for set of transects at another cross section
  # If you saved the .mat files, they will be saved to the directory ‘VMTProcData’ in the current data directory.  The file name for the process cross section {{{*.mat}}} file is auto generated using the file format of the input transects and a suffix made up of the first and last transect numbers of the set processed (i.e. ClintonLake_000_003.mat).  You can reload the files by selecting “Matlab Files” as the data type and pressing the load button.  This option does not reprocess the data, it simply loads the processed data files.  KMZ files are in this directory as well.
  # If a plan view map showing depth-averaged vectors for more than one cross section is desired (i.e. showing depth-averaged flow through a bend), load the processed data (step 11) and select all the processed data files (i.e. cross  sections) you wish to view, ensuring that “Map Depth-Averaged Velocities” and “Plot shoreline” (if you loaded a shoreline file when processing the ascii data files) are selected.  
  # For any plan view plot currently displayed, the user can press the “Add Background” button and overlay the vectors on a georeferenced background image. The required coordinate system for any georeferenced background is UTM coordinates in meters.  Acceptable file input formats include GeoTIFF, Shapefile,  TIFF/JPEG/PNG (with a world file), ARC ASCII GRID, or SDTS raster.  If the “replot” button is pressed after adding a background, the background will be lost and the user will need to add the background again.  It is recommended that a background be added only once the user is satisfied with the plot.  Zooming and panning are allowed within the background image; however, the aspect ratio of the original background image is locked by the plotting routine.
  # At any time, the user can choose to save the current figures by selecting the figure numbers in the ‘Graphics Export’ pane and pushing the ‘Save Figures’ button.  It is recommended that the user only export the figures when they are happy with the scaling, vertical exaggeration, and vector spacing.  The figures will be saved to the VMTProcFiles directory within the user’s data directory in a PNG or EPS format (user choice).  The user also has the option to export a figure directly from the figure window in a variety of formats and resolutions.