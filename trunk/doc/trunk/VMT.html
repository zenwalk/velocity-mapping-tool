<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html trunk -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>	Computes the layer averaged mean of y over the depth range.</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function WSE_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub91" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub92" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub93" class="code">function initGUI(handles)</a></li><li><a href="#_sub94" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub95" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub96" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub97" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub98" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub99" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub100" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub101" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub102" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a></li><li><a href="#_sub103" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub104" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub105" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub106" class="code">function icons = getIcons</a></li><li><a href="#_sub107" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub108" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub109" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0037     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0038     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039     <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0045 <span class="keyword">try</span>
0046 <span class="keyword">if</span> nargout
0047     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">else</span>
0049     gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">catch</span> err
0053     <span class="keyword">if</span> isdeployed
0054         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0055             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0056         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0057             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0058             errLogFileName},<span class="keyword">...</span>
0059             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0060             <span class="string">'error'</span>);
0061         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0062         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0063         fclose(fid);
0064         rethrow(err)
0065     <span class="keyword">else</span>
0066         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0067             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0068             <span class="string">'error'</span>);
0069         rethrow(err);
0070     <span class="keyword">end</span>
0071 <span class="keyword">end</span>
0072 <span class="comment">% End initialization code - DO NOT EDIT</span>
0073 
0074 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0075 
0076 <span class="comment">% --- Executes just before VMT is made visible.</span>
0077 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0078 <span class="comment">% This function has no output args, see OutputFcn.</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0083 
0084 <span class="comment">% Choose default command line output for VMT</span>
0085 handles.output = hObject;
0086 
0087 <span class="comment">% Build the GUI toolbar:</span>
0088 <span class="comment">% ----------------------</span>
0089 handles = <a href="#_sub90" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0090 
0091 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0092 <span class="comment">% ----------------------------------------</span>
0093 <span class="keyword">if</span> ~isdeployed
0094     filesep = <span class="string">'\'</span>; <span class="comment">% windows</span>
0095     utilspath = [pwd filesep <span class="string">'utils'</span>];
0096     docspath  = [pwd filesep <span class="string">'doc'</span>];
0097     toolspath = [pwd filesep <span class="string">'tools'</span>];
0098     addpath(utilspath,docspath,toolspath)
0099 <span class="keyword">end</span>
0100 
0101 <span class="comment">% Update handles structure</span>
0102 <span class="comment">% ------------------------</span>
0103 guidata(hObject, handles);
0104 
0105 <span class="comment">% Load the GUI preferences:</span>
0106 <span class="comment">% -------------------------</span>
0107 <a href="#_sub91" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0108 
0109 <span class="comment">% Initialize the GUI parameters:</span>
0110 <span class="comment">% ------------------------------</span>
0111 guiparams = <a href="#_sub107" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0112 guiparams.vmt_version = <span class="string">'v4.06'</span>;
0113 
0114 <span class="comment">% Draw the VMT Background</span>
0115 <span class="comment">% -----------------</span>
0116 pos = get(handles.figure1,<span class="string">'position'</span>);
0117 axes(handles.VMTBackground);
0118 <span class="keyword">if</span> ~isdeployed <span class="comment">%isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0119     X = imread(<span class="string">'VMT_Background.png'</span>);
0120     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0121 <span class="keyword">else</span>
0122     X = imread(<span class="string">'VMT_Background.png'</span>);
0123     X = imresize(X, [pos(4) pos(3)]);
0124     X = uint8(X);
0125     imshow(X,<span class="string">'Border'</span>,<span class="string">'tight'</span>)
0126 <span class="keyword">end</span>
0127 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0128 
0129 <span class="comment">% Store the application data:</span>
0130 <span class="comment">% ---------------------------</span>
0131 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0132 
0133 <span class="comment">% Initialize the GUI:</span>
0134 <span class="comment">% -------------------</span>
0135 <a href="#_sub93" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0136 <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0137 <span class="comment">% set(handles.GraphicsExportPanel,'Visible','off')</span>
0138 <span class="comment">% set(handles.ProcessingPanel,'Visible','off')</span>
0139 pos = get(handles.figure1,<span class="string">'Position'</span>);
0140 <span class="comment">% pos(3) = 545;</span>
0141 <span class="comment">% set(handles.figure1,'Position',pos)</span>
0142 movegui(handles.figure1,<span class="string">'center'</span>)
0143 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0144 
0145 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0146 <span class="comment">% the root</span>
0147 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0148 
0149 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0150 <span class="comment">% uiwait(handles.figure1);</span>
0151 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0152 
0153 
0154 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0155 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0156 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0157 <span class="comment">% hObject    handle to figure</span>
0158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0160 
0161 <span class="comment">% Get default command line output from handles structure</span>
0162 varargout{1} = handles.output;
0163 <span class="comment">% [EOF] VMT_OutputFcn</span>
0164 
0165 <span class="comment">% --- Executes when figure1 is resized.</span>
0166 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0167 
0168 <span class="comment">% Draw the VMT Background</span>
0169 <span class="comment">% -----------------</span>
0170 pos = get(handles.figure1,<span class="string">'position'</span>);
0171 axes(handles.VMTBackground);
0172 <span class="keyword">if</span> ~isdeployed <span class="comment">%isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0173     X = imread(<span class="string">'VMT_Background.png'</span>);
0174     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0175 <span class="keyword">else</span>
0176     X = imread(<span class="string">'VMT_Background.png'</span>);
0177     X = imresize(X, [pos(4) pos(3)]);
0178     X = uint8(X);
0179     imshow(X,<span class="string">'Border'</span>,<span class="string">'tight'</span>)
0180 <span class="keyword">end</span>
0181 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0182 
0183 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0184 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0185 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0186 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0187 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0188 
0189 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0190 close_button = questdlg(<span class="keyword">...</span>
0191     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0192     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0193 <span class="keyword">switch</span> close_button
0194     <span class="keyword">case</span> <span class="string">'Yes'</span>
0195         delete(hObject)
0196         close all hidden
0197     <span class="keyword">otherwise</span>
0198         <span class="keyword">return</span>
0199 <span class="keyword">end</span>
0200 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0201 
0202 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0203 <span class="comment">% MENU BAR CALLBACKS %</span>
0204 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0205 
0206 <span class="comment">% --------------------------------------------------------------------</span>
0207 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0208 <span class="comment">% Empty</span>
0209 
0210 <span class="comment">% --------------------------------------------------------------------</span>
0211 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0212 <span class="comment">% Empty</span>
0213 
0214 <span class="comment">% --------------------------------------------------------------------</span>
0215 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0216 <a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0217 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0221 
0222 <span class="comment">% Get the Application data:</span>
0223 <span class="comment">% -------------------------</span>
0224 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0225 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0226 
0227 <span class="comment">% Ask the user to select files:</span>
0228 <span class="comment">% -----------------------------</span>
0229 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0230 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0231 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0232     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0233 <span class="keyword">else</span>
0234     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0235 <span class="keyword">end</span>
0236 [filename,pathname] = <span class="keyword">...</span>
0237     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0238     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0239     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0240 
0241 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0242     <span class="comment">% Load the data:</span>
0243     <span class="comment">% --------------</span>
0244     vars = load(fullfile(pathname,filename));
0245     
0246     <span class="comment">% Make sure the selected file is a valid file:</span>
0247     <span class="comment">% --------------------------------------------</span>
0248     varnames = fieldnames(vars);
0249     <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0250         guiparams.mat_path = pathname;
0251         guiparams.mat_file = filename;
0252         guiparams.z = vars.z;
0253         guiparams.A = vars.A;
0254         guiparams.V = vars.V;
0255         
0256         <span class="comment">% Update the preferences:</span>
0257         <span class="comment">% -----------------------</span>
0258         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0259         guiprefs.mat_path = pathname;
0260         guiprefs.mat_file = filename;
0261         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0262         <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0263                      
0264         <span class="comment">% Re-store the Application Data:</span>
0265         <span class="comment">% ------------------------------</span>
0266         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0267         
0268         <span class="comment">% Update the GUI:</span>
0269         <span class="comment">% ---------------</span>
0270         set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0271         <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0272     <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0273         errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0274             <span class="string">'Invalid File...'</span>)
0275     <span class="keyword">end</span>
0276     
0277 <span class="keyword">elseif</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0278     <span class="comment">% Set the filenames</span>
0279     <span class="comment">% -----------------</span>
0280     guiparams.mat_path = pathname;
0281     guiparams.mat_file = filename;
0282     
0283     <span class="comment">% Push status to log window</span>
0284     <span class="comment">% -------------------------</span>
0285     log_text = {<span class="keyword">...</span>
0286         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0287         <span class="string">'Directory:'</span>};
0288     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0289     statusLogging(handles.LogWindow,log_text)
0290     
0291     <span class="comment">% Update the Application Data:</span>
0292     <span class="comment">% ------------------------------</span>
0293     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0294     
0295     <span class="comment">% Update the persistent preferences:</span>
0296     <span class="comment">% ----------------------------------</span>
0297     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0298     guiprefs.mat_path = pathname;
0299     guiprefs.mat_file = filename;
0300     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0301     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0302         
0303     <span class="comment">% Update the GUI:</span>
0304     <span class="comment">% ---------------</span>
0305     <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0306 <span class="keyword">end</span>
0307 
0308 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0309 
0310 <span class="comment">% --------------------------------------------------------------------</span>
0311 <a name="_sub9" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0312 <span class="comment">% Empty</span>
0313 
0314 <span class="comment">% --------------------------------------------------------------------</span>
0315 <a name="_sub10" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0316 <a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0317 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0318 
0319 <span class="comment">% --------------------------------------------------------------------</span>
0320 <a name="_sub11" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0321 <a href="#_sub59" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0322 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0323 
0324 <span class="comment">% --------------------------------------------------------------------</span>
0325 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0326 <a href="#_sub60" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0327 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0328 
0329 <span class="comment">% --------------------------------------------------------------------</span>
0330 <a name="_sub13" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0331 <span class="comment">% Empty</span>
0332 
0333 <span class="comment">% --------------------------------------------------------------------</span>
0334 <a name="_sub14" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0335 <span class="comment">% Empty</span>
0336 
0337 <span class="comment">% --------------------------------------------------------------------</span>
0338 <a name="_sub15" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0339 
0340 <span class="comment">% Get the Application Data:</span>
0341 <span class="comment">% -------------------------</span>
0342 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0343 
0344 <span class="comment">% Update the Application Data:</span>
0345 <span class="comment">% ----------------------------</span>
0346 guiparams.print        = true;
0347 guiparams.presentation = false;
0348 
0349 <span class="comment">% Re-store the Application data:</span>
0350 <span class="comment">% ------------------------------</span>
0351 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0352 
0353 <span class="comment">% Update the GUI:</span>
0354 <span class="comment">% ---------------</span>
0355 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0356 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0357 
0358 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0359 
0360 
0361 <span class="comment">% --------------------------------------------------------------------</span>
0362 <a name="_sub16" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0363 
0364 <span class="comment">% Get the Application Data:</span>
0365 <span class="comment">% -------------------------</span>
0366 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0367 
0368 <span class="comment">% Update the Application Data:</span>
0369 <span class="comment">% ----------------------------</span>
0370 guiparams.print        = false;
0371 guiparams.presentation = true;
0372 
0373 <span class="comment">% Re-store the Application data:</span>
0374 <span class="comment">% ------------------------------</span>
0375 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0376 
0377 <span class="comment">% Update the GUI:</span>
0378 <span class="comment">% ---------------</span>
0379 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0380 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0381 
0382 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0383 
0384 <span class="comment">% --------------------------------------------------------------------</span>
0385 <a name="_sub17" href="#_subfunctions" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a>
0386 <span class="comment">%  --- Empty ---</span>
0387 
0388 <span class="comment">% --------------------------------------------------------------------</span>
0389 <a name="_sub18" href="#_subfunctions" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a>
0390 <span class="comment">% Get the Application Data:</span>
0391 <span class="comment">% -------------------------</span>
0392 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0393 
0394 <span class="comment">% Update the Application Data:</span>
0395 <span class="comment">% ----------------------------</span>
0396 guiparams.renderer  = <span class="string">'OpenGL'</span>;
0397 
0398 <span class="comment">% Re-store the Application data:</span>
0399 <span class="comment">% ------------------------------</span>
0400 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0401 
0402 <span class="comment">% Update the GUI:</span>
0403 <span class="comment">% ---------------</span>
0404 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0405 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0406 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0407 
0408 <span class="comment">% Modify the existing figures</span>
0409 <span class="comment">% ---------------------------</span>
0410 <span class="comment">% Find what plots exist already</span>
0411 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0412 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0413 
0414 <span class="comment">% Loop through valid figures and adjust</span>
0415 <span class="comment">% -------------------------------------</span>
0416 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0417     <span class="keyword">for</span> i = 1:length(valid_names)
0418         <span class="comment">% Focus the figure</span>
0419         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0420         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0421             figure(hff)
0422             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0423         <span class="keyword">end</span>
0424         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0425         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0426             figure(hff)
0427             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0428         <span class="keyword">end</span>
0429     <span class="keyword">end</span>
0430 <span class="keyword">end</span>
0431 <span class="comment">% [EOF] menuOpenGL_Callback</span>
0432 
0433 
0434 <span class="comment">% --------------------------------------------------------------------</span>
0435 <a name="_sub19" href="#_subfunctions" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a>
0436 <span class="comment">% Get the Application Data:</span>
0437 <span class="comment">% -------------------------</span>
0438 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0439 
0440 <span class="comment">% Update the Application Data:</span>
0441 <span class="comment">% ----------------------------</span>
0442 guiparams.renderer  = <span class="string">'painters'</span>;
0443 
0444 <span class="comment">% Re-store the Application data:</span>
0445 <span class="comment">% ------------------------------</span>
0446 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0447 
0448 <span class="comment">% Update the GUI:</span>
0449 <span class="comment">% ---------------</span>
0450 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0451 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0452 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0453 
0454 <span class="comment">% Modify the existing figures</span>
0455 <span class="comment">% ---------------------------</span>
0456 <span class="comment">% Find what plots exist already</span>
0457 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0458 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0459 
0460 <span class="comment">% Loop through valid figures and adjust</span>
0461 <span class="comment">% -------------------------------------</span>
0462 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0463     <span class="keyword">for</span> i = 1:length(valid_names)
0464         <span class="comment">% Focus the figure</span>
0465         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0466         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0467             figure(hff)
0468             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0469         <span class="keyword">end</span>
0470         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0471         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0472             figure(hff)
0473             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0474         <span class="keyword">end</span>
0475     <span class="keyword">end</span>
0476 <span class="keyword">end</span>
0477 <span class="comment">% [EOF] menuPainters_Callback</span>
0478 
0479 <span class="comment">% --------------------------------------------------------------------</span>
0480 <a name="_sub20" href="#_subfunctions" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a>
0481 <span class="comment">% Get the Application Data:</span>
0482 <span class="comment">% -------------------------</span>
0483 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0484 
0485 <span class="comment">% Update the Application Data:</span>
0486 <span class="comment">% ----------------------------</span>
0487 guiparams.renderer  = <span class="string">'zbuffer'</span>;
0488 
0489 <span class="comment">% Re-store the Application data:</span>
0490 <span class="comment">% ------------------------------</span>
0491 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0492 
0493 <span class="comment">% Update the GUI:</span>
0494 <span class="comment">% ---------------</span>
0495 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0496 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0497 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0498 
0499 <span class="comment">% Modify the existing figures</span>
0500 <span class="comment">% ---------------------------</span>
0501 <span class="comment">% Find what plots exist already</span>
0502 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0503 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0504 
0505 <span class="comment">% Loop through valid figures and adjust</span>
0506 <span class="comment">% -------------------------------------</span>
0507 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0508     <span class="keyword">for</span> i = 1:length(valid_names)
0509         <span class="comment">% Focus the figure</span>
0510         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0511         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0512             figure(hff)
0513             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0514         <span class="keyword">end</span>
0515         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0516         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0517             figure(hff)
0518             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0519         <span class="keyword">end</span>
0520     <span class="keyword">end</span>
0521 <span class="keyword">end</span>
0522 <span class="comment">% [EOF] menuZbuffer_Callback</span>
0523 
0524 <span class="comment">% --------------------------------------------------------------------</span>
0525 <a name="_sub21" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0526 <span class="comment">% Get the Application data:</span>
0527 <span class="comment">% -------------------------</span>
0528 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0529 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0530 
0531 <span class="comment">% Find what plots exist already</span>
0532 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0533 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0534 
0535 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0536 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0537 <span class="keyword">if</span> ~isempty(idx)
0538     fig_names(idx) = [];
0539 <span class="keyword">end</span>
0540 
0541 <span class="keyword">if</span> guiparams.presentation
0542     figure_style = <span class="string">'presentation'</span>;
0543 <span class="keyword">else</span>
0544     figure_style = <span class="string">'print'</span>;
0545 <span class="keyword">end</span>
0546 
0547 [selected_figures] = <a href="#_sub104" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0548 
0549 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0550     <span class="keyword">return</span>
0551 <span class="keyword">else</span>
0552     <span class="keyword">for</span> i = 1:length(selected_figures)
0553         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0554     <span class="keyword">end</span>
0555 <span class="keyword">end</span>
0556 
0557 
0558 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0559 
0560 <span class="comment">% --------------------------------------------------------------------</span>
0561 <a name="_sub22" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0562 <span class="comment">% Get the Application data:</span>
0563 <span class="comment">% -------------------------</span>
0564 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0565 beam_angle             = guiparams.beam_angle; 
0566 magnetic_variation     = guiparams.magnetic_variation; 
0567 wse                    = guiparams.wse;
0568 output_auxiliary_data = guiparams.output_auxiliary_data; 
0569 
0570 <span class="comment">% Open dialog and allow user to select settings</span>
0571 <span class="comment">% ---------------------------------------------</span>
0572 [beam_angle,<span class="keyword">...</span>
0573     magnetic_variation,<span class="keyword">...</span>
0574     wse,<span class="keyword">...</span>
0575     output_auxiliary_data] = <span class="keyword">...</span>
0576     <a href="#_sub102" class="code" title="subfunction [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)">exportSettingsDialog</a>(beam_angle,magnetic_variation,wse,output_auxiliary_data,handles.figure1);
0577 
0578 <span class="comment">% Re-store the Application data:</span>
0579 <span class="comment">% ------------------------------</span>
0580 guiparams.beam_angle            = beam_angle;
0581 guiparams.magnetic_variation    = magnetic_variation; 
0582 guiparams.wse                   = wse;
0583 guiparams.output_auxiliary_data = output_auxiliary_data;
0584 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0585 
0586 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0587 
0588 <span class="comment">% --------------------------------------------------------------------</span>
0589 <a name="_sub23" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0590 <a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0591 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0592 
0593 
0594 <span class="comment">% --------------------------------------------------------------------</span>
0595 <a name="_sub24" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0596 
0597 <span class="comment">% Get the Application Data:</span>
0598 <span class="comment">% -------------------------</span>
0599 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0600 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0601 PVdata    = guiparams.iric_anv_planview_data;
0602 iric_path = guiprefs.iric_path;
0603 iric_file = guiprefs.iric_file;
0604 
0605 <span class="comment">% Is there any planview data?</span>
0606 <span class="keyword">if</span> isempty(PVdata)
0607     <span class="comment">% Nothing to do, warn user</span>
0608     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0609     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0610 <span class="keyword">else</span>
0611     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0612     <span class="comment">% and smoothing (for iRiC)</span>
0613     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0614     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0615         fullfile(iric_path,iric_file));
0616     
0617     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0618         outfile = fullfile(iric_path,iric_file);
0619         log_text = vertcat(log_text,{outfile});
0620         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0621         outcount = fprintf(ofid,<span class="keyword">...</span>
0622             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0623         fclose(ofid);
0624     <span class="keyword">else</span>
0625         <span class="comment">% Return default iric_path and iric_file</span>
0626         iric_path = guiprefs.iric_path;
0627         iric_file = guiprefs.iric_file;
0628     <span class="keyword">end</span>
0629 <span class="keyword">end</span>
0630 
0631 <span class="comment">% Push messages to Log Window:</span>
0632 <span class="comment">% ----------------------------</span>
0633 statusLogging(handles.LogWindow, log_text)
0634 
0635 <span class="comment">% Store the persistent preferences:</span>
0636 <span class="comment">% ---------------------------------</span>
0637 guiprefs.iric_file = iric_file;
0638 guiprefs.iric_path = iric_path;
0639 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0640 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0641 
0642 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0643 
0644 <span class="comment">% --------------------------------------------------------------------</span>
0645 <a name="_sub25" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0646 <span class="comment">% Get the Application Data:</span>
0647 <span class="comment">% -------------------------</span>
0648 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0649 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0650 excel_path  = guiprefs.excel_path;
0651 excel_file  = guiprefs.excel_file;
0652 
0653 <span class="comment">% Push messages to Log Window:</span>
0654 <span class="comment">% ----------------------------</span>
0655 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0656 statusLogging(handles.LogWindow, log_text)
0657 
0658 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0659 <span class="comment">% data.</span>
0660 <span class="keyword">if</span> iscell(guiparams.mat_file)
0661     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0662     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0663     <span class="comment">% Refresh the Application Data:</span>
0664     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0665     z           = guiparams.z;
0666     A           = guiparams.A;
0667     V           = guiparams.V;
0668     Map         = guiparams.Map;
0669     wse         = guiparams.wse;
0670     PVdata      = guiparams.iric_anv_planview_data;
0671     log_text = {<span class="string">'Writing data to Excel file...'</span>;<span class="keyword">...</span>
0672         <span class="string">'Multiple transected loaded. Will export Planview Data Only!'</span>};
0673     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0674         fullfile(excel_path,excel_file));
0675     
0676     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0677         outfile = fullfile(excel_path,excel_file);
0678         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0679         
0680     <span class="keyword">else</span>
0681         <span class="comment">% Return default excel_path and excel_file</span>
0682         excel_path = guiprefs.excel_path;
0683         excel_file = guiprefs.excel_file;
0684         outfile = fullfile(excel_path,excel_file);
0685         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0686     <span class="keyword">end</span>
0687     
0688     <span class="comment">% Delete the old file if it exists</span>
0689     <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0690         log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0691             [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0692             <span class="string">'already exists. Overwriting file...'</span>});
0693         delete(outfile)
0694     <span class="keyword">end</span>
0695     
0696     <span class="comment">% Save DAV data to an Excel File</span>
0697     hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0698     vmin = num2str(guiparams.depth_range_min);
0699     vmax = num2str(guiparams.depth_range_max);
0700     pvheaders = {<span class="keyword">...</span>
0701         <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0702         [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0703         [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0704         <span class="string">'Vel_mag_cm/s'</span> <span class="string">'Vel_dir_deg'</span>};
0705     
0706 
0707     <span class="comment">% Initialize Variables</span>
0708     pvdata = []; Dist = [];
0709     X = []; Y = []; E = [];
0710     Ve = []; Vn =[]; Vm = []; Vd = [];
0711     
0712     <span class="comment">% Concatenate data from all MAT files into arrays</span>
0713     <span class="keyword">for</span> i = 1:length(guiparams.mat_file)
0714         <span class="comment">% Load current MAT-file</span>
0715         load(fullfile(guiparams.mat_path, guiparams.mat_file{i}))
0716         
0717         <span class="comment">% Location and Bathy</span>
0718         X = [X V.mcsX(1,:)];
0719         Y = [Y V.mcsY(1,:)];
0720         Dist = [Dist sort(V.mcsDist(1,:),<span class="string">'descend'</span>)];
0721         E = [E V.mcsBedElev];
0722         
0723         <span class="comment">% Build layer-averaged velocities</span>
0724         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0725         V.mcsX(indx,:) = nan;
0726         V.mcsY(indx,:) = nan;
0727         V.mcsEast(indx,:) = nan;
0728         V.mcsNorth(indx,:) = nan;
0729         Ve = [Ve <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast)];
0730         Vn = [Vn <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth)];
0731         Vm = [Vm sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2)];
0732         Vd = [Vd ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth),<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0733         
0734         waitbar(i/(length(guiparams.mat_file)+1),hwait)
0735     <span class="keyword">end</span>
0736     
0737     <span class="comment">% Put output into 1 matrix</span>
0738     pvdata = [<span class="keyword">...</span>
0739         X; Y; Dist; E;<span class="keyword">...</span><span class="comment"> % Bathy and locations</span>
0740         Ve; Vn; Vm; Vd<span class="keyword">...</span><span class="comment"> % Velocity</span>
0741         ];
0742     pvdata(isnan(pvdata)) = -9999;
0743     
0744     <span class="comment">% Create table and write to Excel</span>
0745     pvout = num2cell(pvdata');
0746     pvout = vertcat(pvheaders,pvout);
0747     xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0748     
0749     <span class="comment">% Close out waitbar</span>
0750     waitbar(1,hwait)
0751     delete(hwait)
0752     
0753     <span class="comment">% Push messages to Log Window:</span>
0754     <span class="comment">% ----------------------------</span>
0755     statusLogging(handles.LogWindow, log_text)
0756 <span class="keyword">else</span>
0757     
0758     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0759     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0760     <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0761     <span class="comment">% Refresh the Application Data:</span>
0762     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0763     z           = guiparams.z;
0764     A           = guiparams.A;
0765     V           = guiparams.V;
0766     Map         = guiparams.Map;
0767     wse         = guiparams.wse;
0768     PVdata      = guiparams.iric_anv_planview_data;
0769     
0770     
0771     log_text = {<span class="string">'Writing data to Excel file...'</span>};
0772     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0773         fullfile(excel_path,excel_file));
0774     
0775     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0776         outfile = fullfile(excel_path,excel_file);
0777         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0778         
0779         <span class="comment">% Delete the old file if it exists</span>
0780         <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0781             log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0782                 [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0783                 <span class="string">'already exists. Overwriting file...'</span>});
0784             delete(outfile)
0785         <span class="keyword">end</span>
0786         
0787         <span class="comment">% Push messages to Log Window:</span>
0788         <span class="comment">% ----------------------------</span>
0789         statusLogging(handles.LogWindow, log_text)
0790         
0791         <span class="comment">% Save MCS Summary to an Excel File</span>
0792         hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0793         xlswrite(outfile,{<span class="string">'Files:'</span>},<span class="string">'VMTSummary'</span>,<span class="string">'H4'</span>); waitbar(1/5,hwait)
0794         sout = guiparams.data_files';
0795         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'I4'</span>); waitbar(2/5,hwait)
0796         sout = {<span class="keyword">...</span>
0797             <span class="string">'VMT: Summary of Mean Cross Section'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0798             <span class="string">'VMT '</span> guiparams.vmt_version <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0799             <span class="string">'Date Processed: '</span> datestr(now) <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0800             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0801             <span class="string">'Mean Cross Section (MCS) Properties'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0802             <span class="string">'Horz. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> guiparams.horizontal_grid_node_spacing;<span class="keyword">...</span>
0803             <span class="string">'Vert. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> single(guiparams.A(1).Sup.binSize_cm)/100;<span class="keyword">...</span>
0804             <span class="string">'Endpoints:'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">'UTM_East'</span>    <span class="string">'UTM_North'</span>;<span class="keyword">...</span>
0805             <span class="string">'Left Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xLeftBank V.yLeftBank;<span class="keyword">...</span>
0806             <span class="string">'Right Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xRightBank V.yRightBank;<span class="keyword">...</span>
0807             <span class="string">'Total Length in meters'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.dl;<span class="keyword">...</span>
0808             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0809             <span class="string">'Mean Flow Direction (deg)'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.mfd;<span class="keyword">...</span>
0810             <span class="string">'in geographic coordinates'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0811             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0812             <span class="string">'Slope'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.m;<span class="keyword">...</span>
0813             <span class="string">'Intercept'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.b;<span class="keyword">...</span>
0814             <span class="string">'Theta (deg)'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.theta};
0815         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'A1'</span>); waitbar(3/5,hwait)
0816         
0817         <span class="comment">% Save DAV data to an Excel File</span>
0818         vmin = num2str(guiparams.depth_range_min);
0819         vmax = num2str(guiparams.depth_range_max);
0820         pvheaders = {<span class="keyword">...</span>
0821             <span class="string">'UTM_East_WGS84'</span> <span class="string">'UTM_North_WGS84'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0822             [<span class="string">'EastDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0823             [<span class="string">'NorthDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0824             <span class="string">'Vel_mag_cms'</span> <span class="string">'Vel_dir_deg'</span>};
0825         
0826         <span class="comment">% Create block style matrix of all processed data</span>
0827         pvdata = [];
0828         
0829         <span class="comment">% Sort the Distances such that when plotting in 2D (Dist. vs. Depth),</span>
0830         <span class="comment">% you are looking upstream into the transect</span>
0831         Dist = sort(V.mcsDist,2,<span class="string">'descend'</span>);
0832         
0833         <span class="comment">% Build bathy data matrix</span>
0834         pvdata = [V.mcsX(1,:); V.mcsY(1,:); Dist(1,:); V.mcsBedElev];
0835         
0836         <span class="comment">% Build layer-averaged velocities</span>
0837         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0838         V.mcsX(indx,:) = nan;
0839         V.mcsY(indx,:) = nan;
0840         V.mcsEast(indx,:) = nan;
0841         V.mcsNorth(indx,:) = nan;
0842         pvdata = [<span class="keyword">...</span>
0843             pvdata;<span class="keyword">...</span>
0844             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast);<span class="keyword">...</span>
0845             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth);<span class="keyword">...</span>
0846             sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2);<span class="keyword">...</span>
0847             ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth), <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0848         pvdata(isnan(pvdata)) = -9999;
0849         pvout = num2cell(pvdata');
0850         pvout = vertcat(pvheaders,pvout);
0851         xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0852         waitbar(4/5,hwait)
0853         
0854         <span class="comment">% Save MCS data to an Excel File</span>
0855         mcsheaders = {<span class="keyword">...</span>
0856             <span class="string">'UTM_East'</span> <span class="keyword">...</span>
0857             <span class="string">'UTM_North'</span><span class="keyword">...</span>
0858             <span class="string">'Distance from Left Bank, in meters'</span><span class="keyword">...</span>
0859             <span class="string">'Elevation, in meters'</span><span class="keyword">...</span>
0860             <span class="keyword">...</span><span class="comment">'Bed Elevation, in meters'...</span>
0861             <span class="string">'East Velocity, in cm/s'</span><span class="keyword">...</span>
0862             <span class="string">'North Velocity, in cm/s'</span><span class="keyword">...</span>
0863             <span class="string">'Vertical Velocity, in cm/s'</span><span class="keyword">...</span>
0864             <span class="string">'Velocity Magnitude, in cm/s'</span><span class="keyword">...</span>
0865             <span class="string">'Velocity Direction, in degrees (geographic coordinates)'</span><span class="keyword">...</span>
0866             <span class="string">'Streamwise Velocity, in cm/s'</span><span class="keyword">...</span>
0867             <span class="string">'Transverse Velocity, in cm/s'</span><span class="keyword">...</span>
0868             <span class="string">'Primary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0869             <span class="string">'Secondary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0870             <span class="string">'Primary Velocity (roz), in cm/s'</span><span class="keyword">...</span>
0871             <span class="string">'Secondary Velocity (roz), in cm/s'</span>};
0872         
0873         mcsdata = [<span class="keyword">...</span>
0874             V.mcsX(:)<span class="keyword">...</span>
0875             V.mcsY(:)<span class="keyword">...</span>
0876             V.mcsDist(:)<span class="keyword">...</span>
0877             (wse - V.mcsDepth(:))<span class="keyword">...</span>
0878             <span class="keyword">...</span><span class="comment">repmat((wse - V.mcsBed(:)),size(V.mcsX,1),1)...</span>
0879             V.mcsEast(:)<span class="keyword">...</span>
0880             V.mcsNorth(:)<span class="keyword">...</span>
0881             V.mcsVert(:)<span class="keyword">...</span>
0882             V.mcsMag(:)<span class="keyword">...</span>
0883             V.mcsDir(:)<span class="keyword">...</span>
0884             V.u(:)<span class="keyword">...</span>
0885             V.v(:)<span class="keyword">...</span>
0886             V.vp(:)<span class="keyword">...</span>
0887             V.vs(:)<span class="keyword">...</span>
0888             V.Roz.up(:)<span class="keyword">...</span>
0889             V.Roz.us(:)];
0890         mcsdata(isnan(mcsdata)) = -9999;
0891         
0892         mcsout = vertcat(mcsheaders,num2cell(mcsdata));
0893         xlswrite(outfile,mcsout,<span class="string">'MeanCrossSection'</span>);
0894         waitbar(1,hwait)
0895         delete(hwait)
0896         
0897     <span class="keyword">else</span>
0898         <span class="comment">% Return default excel_path and excel_file</span>
0899         excel_path = guiprefs.excel_path;
0900         excel_file = guiprefs.excel_file;
0901         outfile = fullfile(excel_path,excel_file);
0902         log_text = {<span class="string">'User aborted Excel export...'</span>};
0903     <span class="keyword">end</span>
0904     
0905     
0906     
0907 <span class="keyword">end</span>
0908 
0909 <span class="comment">% Push messages to Log Window:</span>
0910 <span class="comment">% ----------------------------</span>
0911 statusLogging(handles.LogWindow, log_text)
0912 
0913 <span class="comment">% Store the persistent preferences:</span>
0914 <span class="comment">% ---------------------------------</span>
0915 guiprefs.excel_file = excel_file;
0916 guiprefs.excel_path = excel_path;
0917 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0918 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0919 
0920 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0921 
0922 <span class="comment">% --------------------------------------------------------------------</span>
0923 <a name="_sub26" href="#_subfunctions" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a>
0924 <span class="comment">% Empty</span>
0925 
0926 <span class="comment">% --------------------------------------------------------------------</span>
0927 <a name="_sub27" href="#_subfunctions" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a>
0928 <span class="comment">% Empty</span>
0929 
0930 <span class="comment">% --------------------------------------------------------------------</span>
0931 <a name="_sub28" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0932 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0933 
0934 <span class="comment">% Get the Application Data:</span>
0935 <span class="comment">% -------------------------</span>
0936 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0937 
0938 <span class="comment">% Update the GUI &amp; Application Data:</span>
0939 <span class="comment">% ----------------------------------</span>
0940 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0941 <span class="keyword">switch</span> status
0942     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0943         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0944         guiparams.unit_discharge_correction = false;
0945     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0946         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0947         guiparams.unit_discharge_correction = true;
0948 <span class="keyword">end</span>
0949 
0950 <span class="comment">% Re-store the Application data:</span>
0951 <span class="comment">% ------------------------------</span>
0952 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0953 
0954 
0955 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0956 
0957 <span class="comment">% --------------------------------------------------------------------</span>
0958 <a name="_sub29" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0959 <span class="comment">% Empty</span>
0960 
0961 <span class="comment">% --------------------------------------------------------------------</span>
0962 <a name="_sub30" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0963 <span class="comment">% Empty</span>
0964 
0965 <span class="comment">% --------------------------------------------------------------------</span>
0966 <a name="_sub31" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
0967 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
0968 
0969 <span class="comment">% Get the Application Data:</span>
0970 <span class="comment">% -------------------------</span>
0971 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0972 
0973 <span class="comment">% Update the Application Data:</span>
0974 <span class="comment">% ----------------------------</span>
0975 guiparams.english_units = false;
0976 
0977 <span class="comment">% Re-store the Application data:</span>
0978 <span class="comment">% ------------------------------</span>
0979 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0980 
0981 <span class="comment">% Update the GUI:</span>
0982 <span class="comment">% ---------------</span>
0983 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0984 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0985 
0986 <span class="comment">% [EOF] menuMetric_Callback</span>
0987 
0988 
0989 <span class="comment">% --------------------------------------------------------------------</span>
0990 <a name="_sub32" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
0991 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
0992 
0993 <span class="comment">% Get the Application Data:</span>
0994 <span class="comment">% -------------------------</span>
0995 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0996 
0997 <span class="comment">% Update the Application Data:</span>
0998 <span class="comment">% ----------------------------</span>
0999 guiparams.english_units = true;
1000 
1001 <span class="comment">% Re-store the Application data:</span>
1002 <span class="comment">% ------------------------------</span>
1003 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1004 
1005 <span class="comment">% Update the GUI:</span>
1006 <span class="comment">% ---------------</span>
1007 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1008 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1009 
1010 <span class="comment">% [EOF] menuEnglish_Callback</span>
1011 
1012 
1013 <span class="comment">% --------------------------------------------------------------------</span>
1014 <a name="_sub33" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
1015 <span class="comment">% Empty</span>
1016 
1017 <span class="comment">% --------------------------------------------------------------------</span>
1018 <a name="_sub34" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
1019 <span class="comment">% Set cross-section endpoints automatically</span>
1020 
1021 <span class="comment">% Get the Application Data:</span>
1022 <span class="comment">% -------------------------</span>
1023 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1024 
1025 <span class="comment">% Update the Application Data:</span>
1026 <span class="comment">% ----------------------------</span>
1027 guiparams.set_cross_section_endpoints = false;
1028 
1029 <span class="comment">% Re-store the Application data:</span>
1030 <span class="comment">% ------------------------------</span>
1031 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1032 
1033 <span class="comment">% Update the GUI:</span>
1034 <span class="comment">% ---------------</span>
1035 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1036 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1037 
1038 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
1039 
1040 
1041 <span class="comment">% --------------------------------------------------------------------</span>
1042 <a name="_sub35" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
1043 <span class="comment">% Set cross-section endpoints manually</span>
1044 
1045 <span class="comment">% Get the Application Data:</span>
1046 <span class="comment">% -------------------------</span>
1047 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1048 
1049 <span class="comment">% Update the Application Data:</span>
1050 <span class="comment">% ----------------------------</span>
1051 guiparams.set_cross_section_endpoints = true;
1052 
1053 <span class="comment">% Re-store the Application data:</span>
1054 <span class="comment">% ------------------------------</span>
1055 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1056 
1057 <span class="comment">% Update the GUI:</span>
1058 <span class="comment">% ---------------</span>
1059 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1060 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1061 
1062 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
1063 
1064 
1065 
1066 
1067 <span class="comment">% --------------------------------------------------------------------</span>
1068 <a name="_sub36" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
1069 <span class="comment">% Empty</span>
1070 
1071 <span class="comment">% --------------------------------------------------------------------</span>
1072 <a name="_sub37" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
1073 
1074 <span class="comment">% Get the Application Data:</span>
1075 <span class="comment">% -------------------------</span>
1076 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1077 
1078 <span class="comment">% Update the Application Data:</span>
1079 <span class="comment">% ----------------------------</span>
1080 guiparams.print        = true;
1081 guiparams.presentation = false;
1082 
1083 <span class="comment">% Re-store the Application data:</span>
1084 <span class="comment">% ------------------------------</span>
1085 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1086 
1087 <span class="comment">% Update the GUI:</span>
1088 <span class="comment">% ---------------</span>
1089 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1090 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1091 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1092 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1093 
1094 <span class="comment">% Modify the existing figures</span>
1095 <span class="comment">% ---------------------------</span>
1096 <span class="comment">% Find what plots exist already</span>
1097 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1098 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1099 
1100 <span class="comment">% Defaults for Print Stlye Figure</span>
1101 BkgdColor   = <span class="string">'white'</span>;
1102 AxColor     = <span class="string">'black'</span>;
1103 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1104 FntSize     = 14;
1105 
1106 <span class="comment">% Loop through valid figures and adjust</span>
1107 <span class="comment">% -------------------------------------</span>
1108 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1109     
1110     <span class="keyword">for</span> i = 1:length(valid_names)
1111         <span class="keyword">switch</span> valid_names{i}
1112             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1113                 <span class="comment">% Focus the figure</span>
1114                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1115                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1116                     figure(hff)
1117                     
1118                     <span class="comment">% Make the changes to figure</span>
1119                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1120                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1121                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1122                     set(gca,<span class="string">'Color'</span>,FigColor)
1123                     set(gca,<span class="string">'XColor'</span>,AxColor)
1124                     set(gca,<span class="string">'YColor'</span>,AxColor)
1125                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1126                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1127                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1128                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1129                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1130                 <span class="keyword">end</span>
1131             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1132                 <span class="comment">% Focus the figure</span>
1133                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1134                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1135                     figure(hff)
1136                     
1137                     <span class="comment">% Make the changes to figure</span>
1138                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1139                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1140                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1141                     set(gca,<span class="string">'Color'</span>,FigColor)
1142                     set(gca,<span class="string">'XColor'</span>,AxColor)
1143                     set(gca,<span class="string">'YColor'</span>,AxColor)
1144                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1145                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1146                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1147                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1148                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1149                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1150                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1151                 <span class="keyword">end</span>
1152             <span class="keyword">otherwise</span>
1153         <span class="keyword">end</span>
1154     <span class="keyword">end</span>
1155     
1156     
1157 <span class="keyword">end</span>
1158 
1159 
1160 <span class="comment">%[EOF] menuStylePrint_Callback</span>
1161 
1162 
1163 <span class="comment">% --------------------------------------------------------------------</span>
1164 <a name="_sub38" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
1165 <span class="comment">% Get the Application Data:</span>
1166 <span class="comment">% -------------------------</span>
1167 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1168 
1169 <span class="comment">% Update the Application Data:</span>
1170 <span class="comment">% ----------------------------</span>
1171 guiparams.print        = false;
1172 guiparams.presentation = true;
1173 
1174 <span class="comment">% Re-store the Application data:</span>
1175 <span class="comment">% ------------------------------</span>
1176 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1177 
1178 <span class="comment">% Update the GUI:</span>
1179 <span class="comment">% ---------------</span>
1180 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1181 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1182 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1183 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1184 
1185 <span class="comment">% Modify the existing figures</span>
1186 <span class="comment">% ---------------------------</span>
1187 <span class="comment">% Find what plots exist already</span>
1188 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1189 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1190 
1191 <span class="comment">% Defaults for Presentation Stlye Figure</span>
1192 <span class="comment">% --------------------------------------</span>
1193 BkgdColor   = <span class="string">'black'</span>;
1194 AxColor     = <span class="string">'white'</span>;
1195 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1196 FntSize     = 14;
1197 
1198 <span class="comment">% Loop through valid figures and adjust</span>
1199 <span class="comment">% -------------------------------------</span>
1200 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1201     
1202     <span class="keyword">for</span> i = 1:length(valid_names)
1203         <span class="keyword">switch</span> valid_names{i}
1204             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1205                 <span class="comment">% Focus the figure</span>
1206                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1207                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1208                     figure(hff)
1209                     
1210                     <span class="comment">% Make the changes to figure</span>
1211                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1212                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1213                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1214                     set(gca,<span class="string">'Color'</span>,FigColor)
1215                     set(gca,<span class="string">'XColor'</span>,AxColor)
1216                     set(gca,<span class="string">'YColor'</span>,AxColor)
1217                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1218                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1219                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1220                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1221                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1222                 <span class="keyword">end</span>
1223             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1224                 <span class="comment">% Focus the figure</span>
1225                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1226                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1227                     figure(hff)
1228                     
1229                     <span class="comment">% Make the changes to figure</span>
1230                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1231                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1232                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1233                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1234                     set(gca,<span class="string">'XColor'</span>,AxColor)
1235                     set(gca,<span class="string">'YColor'</span>,AxColor)
1236                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1237                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1238                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1239                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1240                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1241                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1242                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1243                 <span class="keyword">end</span>
1244             <span class="keyword">otherwise</span>
1245         <span class="keyword">end</span>
1246     <span class="keyword">end</span>
1247     
1248     
1249 <span class="keyword">end</span>
1250 
1251 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1252 
1253 <span class="comment">% --------------------------------------------------------------------</span>
1254 <a name="_sub39" href="#_subfunctions" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a>
1255 
1256 <span class="comment">% Get the Application data:</span>
1257 <span class="comment">% -------------------------</span>
1258 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1259 
1260 <span class="comment">% Initialize the answer:</span>
1261 <span class="comment">% ----------------------</span>
1262 numstr = {num2str(guiparams.vertical_offset)};
1263 answer = NaN;
1264 <span class="keyword">while</span> isnan(answer)
1265     answer = inputdlg(<span class="string">'Vertical Offset (m)'</span>,<span class="string">'KMZ Export'</span>,1,numstr);
1266     
1267     <span class="keyword">if</span> isempty(answer) <span class="comment">% User hits &quot;Cancel&quot;</span>
1268         <span class="keyword">return</span>
1269     <span class="keyword">end</span>
1270     
1271     answer = str2double(answer); <span class="comment">% A non-numeric char will be NaN</span>
1272     <span class="comment">% A numeric char will be a double</span>
1273 <span class="keyword">end</span>
1274 
1275 <span class="comment">% Re-store the Application data:</span>
1276 <span class="comment">% ------------------------------</span>
1277 guiparams.vertical_offset = answer;
1278 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1279 
1280 <span class="comment">% [EOF] menuKMZExport_Callback</span>
1281 
1282 <span class="comment">% --------------------------------------------------------------------</span>
1283 <a name="_sub40" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1284 <span class="comment">% Not implemented</span>
1285 
1286 <span class="comment">% --------------------------------------------------------------------</span>
1287 <a name="_sub41" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1288 <span class="comment">% Empty</span>
1289 
1290 <span class="comment">% --------------------------------------------------------------------</span>
1291 <a name="_sub42" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1292 ASCII2GIS_GUI
1293 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1294 
1295 <span class="comment">% --------------------------------------------------------------------</span>
1296 <a name="_sub43" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1297 
1298 <span class="comment">% Get the Application preferences:</span>
1299 <span class="comment">% --------------------------------</span>
1300 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1301 
1302 inpath = guiprefs.kmz_path;
1303 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1304     infile = guiprefs.kmz_file{1};
1305 <span class="keyword">else</span>
1306     infile = guiprefs.kmz_file;
1307 <span class="keyword">end</span>
1308 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1309 
1310 guiprefs.kmz_path = outpath;
1311 guiprefs.kmz_file = outfile;
1312 
1313 <span class="comment">% Update persistent preferences</span>
1314 <span class="comment">% -----------------------------</span>
1315 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1316 
1317 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1318 
1319 <span class="comment">% --------------------------------------------------------------------</span>
1320 <a name="_sub44" href="#_subfunctions" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a>
1321 <span class="comment">% Get the Application preferences:</span>
1322 <span class="comment">% --------------------------------</span>
1323 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1324 
1325 VMT_BatchMode;
1326 <span class="comment">% [EOF] menuOpenBatchMode_Callback</span>
1327 
1328 <span class="comment">% --------------------------------------------------------------------</span>
1329 <a name="_sub45" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1330 <span class="comment">% Empty</span>
1331 
1332 <span class="comment">% --------------------------------------------------------------------</span>
1333 <a name="_sub46" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1334 <span class="keyword">try</span>
1335     web(<span class="string">'http://code.google.com/p/velocity-mapping-tool/wiki/UserGuide?tm=6'</span>)
1336 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1337     <span class="keyword">if</span> isdeployed
1338         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1339             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1340         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1341             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1342             errLogFileName},<span class="keyword">...</span>
1343             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1344             <span class="string">'error'</span>);
1345         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1346         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1347         fclose(fid);
1348         rethrow(err)
1349     <span class="keyword">else</span>
1350         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1351             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1352             <span class="string">'error'</span>);
1353         rethrow(err);
1354     <span class="keyword">end</span>
1355 <span class="keyword">end</span>
1356 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1357 
1358 <span class="comment">% --------------------------------------------------------------------</span>
1359 <a name="_sub47" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1360 <span class="comment">% Get the Application data:</span>
1361 <span class="comment">% -------------------------</span>
1362 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1363 
1364 <span class="keyword">try</span>
1365     <span class="comment">% Construct a URL to a local file which can be interpreted by any</span>
1366     <span class="comment">% web-browser</span>
1367     rootpath = strrep(pwd,filesep,<span class="string">'/'</span>);
1368     webaddress = [<span class="string">'file:///'</span> rootpath <span class="string">'/doc/index.html'</span>];
1369     system([<span class="string">'start '</span> webaddress]);
1370 <span class="comment">%     [stat,h,url] = web(webaddress) % Produced with m2html (FEX)</span>
1371 <span class="keyword">catch</span> err 
1372     <span class="keyword">if</span> isdeployed
1373         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1374             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1375         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1376             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1377             errLogFileName},<span class="keyword">...</span>
1378             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1379             <span class="string">'error'</span>);
1380         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1381         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1382         fclose(fid);
1383         rethrow(err)
1384     <span class="keyword">else</span>
1385         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1386             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1387             <span class="string">'error'</span>);
1388         rethrow(err);
1389     <span class="keyword">end</span>
1390 <span class="keyword">end</span>
1391 
1392 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1393 
1394 <span class="comment">% --------------------------------------------------------------------</span>
1395 <a name="_sub48" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1396 
1397 <span class="comment">% Get the Application data:</span>
1398 <span class="comment">% -------------------------</span>
1399 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1400 
1401 <span class="comment">% Check version tag against the web, and display a message</span>
1402 <span class="keyword">try</span>
1403     current_vmt_version = urlread(<span class="string">'http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1404     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1405 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1406     <span class="keyword">if</span> isdeployed
1407         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1408             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1409         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1410             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1411             errLogFileName},<span class="keyword">...</span>
1412             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1413             <span class="string">'error'</span>);
1414         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1415         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1416         fclose(fid);
1417         rethrow(err)
1418     <span class="keyword">else</span>
1419         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1420             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1421             <span class="string">'error'</span>);
1422         rethrow(err);
1423     <span class="keyword">end</span>
1424 <span class="keyword">end</span>
1425 
1426 <span class="keyword">if</span> strcmpi(guiparams.vmt_version,current_vmt_version)
1427     h = msgbox(<span class="string">'VMT is currently up to date, no updates available.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1428 <span class="keyword">else</span>
1429     h = msgbox(<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1430 <span class="keyword">end</span>
1431 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1432 
1433 <span class="comment">% --------------------------------------------------------------------</span>
1434 <a name="_sub49" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1435 
1436 <span class="comment">% Get the Application data:</span>
1437 <span class="comment">% -------------------------</span>
1438 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1439 messagestr = <span class="keyword">...</span>
1440     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1441     [<span class="string">'   Version: '</span> guiparams.vmt_version];<span class="keyword">...</span>
1442     <span class="string">''</span>;<span class="keyword">...</span>
1443     <span class="string">''</span>;<span class="keyword">...</span>
1444     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1445     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1446     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1447     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1448     <span class="string">''</span>;<span class="keyword">...</span>
1449     <span class="string">''</span>;<span class="keyword">...</span>
1450     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1451     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1452     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1453     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1454     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1455     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1456     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1457 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1458 <span class="comment">% [EOF] menuAbout_Callback</span>
1459 
1460 
1461 
1462 
1463 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1464 <span class="comment">% TOOLBAR CALLBACKS %</span>
1465 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1466 
1467 <span class="comment">% --------------------------------------------------------------------</span>
1468 <a name="_sub50" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1469 <span class="comment">% Read Files into Data Structure using tfile.</span>
1470 
1471 <span class="comment">% Get the Application data:</span>
1472 <span class="comment">% -------------------------</span>
1473 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1474 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1475 
1476 <span class="comment">% Ask the user to select files:</span>
1477 <span class="comment">% -----------------------------</span>
1478 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1479 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1480     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1481     current_file, <span class="keyword">...</span>
1482     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1483 
1484 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1485     guiparams.data_folder = pathname;
1486     <span class="keyword">if</span> ischar(filename)
1487         filename = {filename};
1488     <span class="keyword">end</span>
1489     guiparams.data_files = filename;
1490     guiparams.mat_file = <span class="string">''</span>;
1491     
1492     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1493     
1494    
1495     
1496     <span class="comment">% Update the preferences:</span>
1497     <span class="comment">% -----------------------</span>
1498     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1499     guiprefs.ascii_path = pathname;
1500     guiprefs.ascii_file = filename;
1501     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1502     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1503     
1504     <span class="comment">% Push messages to Log Window:</span>
1505     <span class="comment">% ----------------------------</span>
1506     log_text = {<span class="keyword">...</span>
1507         <span class="string">''</span>;<span class="keyword">...</span>
1508         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1509         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1510         guiparams.data_folder;
1511         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1512         char(filename)};
1513     statusLogging(handles.LogWindow, log_text)
1514     
1515     <span class="comment">% Read the file(s)</span>
1516     <span class="comment">% ----------------</span>
1517     [~,~,savefile,A,z] = <span class="keyword">...</span>
1518         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1519     guiparams.savefile = savefile;
1520     guiparams.A        = A;
1521     guiparams.z        = z;
1522     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1523 <span class="comment">%</span>
1524 <span class="comment">%     % Preprocess the data:</span>
1525 <span class="comment">%     % --------------------</span>
1526 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1527 <span class="comment">%</span>
1528 <span class="comment">%     % Push messages to Log Window:</span>
1529 <span class="comment">%     % ----------------------------</span>
1530 <span class="comment">%     log_text = {...</span>
1531 <span class="comment">%         '   Preprocessing complete.';...</span>
1532 <span class="comment">%         '   Begin Data Processing...'};</span>
1533 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1534 <span class="comment">%</span>
1535 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1536 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1537 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1538 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1539 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1540 <span class="comment">%</span>
1541 <span class="comment">%     % Push messages to Log Window:</span>
1542 <span class="comment">%     % ----------------------------</span>
1543 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1544 <span class="comment">%</span>
1545 <span class="comment">%     % Store the data:</span>
1546 <span class="comment">%     % ---------------</span>
1547 <span class="comment">%     guiparams.z = z;</span>
1548 <span class="comment">%     guiparams.A = A;</span>
1549 <span class="comment">%     guiparams.V = V;</span>
1550 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1551     
1552           
1553     <span class="comment">% Update the GUI:</span>
1554     <span class="comment">% ---------------</span>
1555     <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1556 <span class="keyword">end</span>
1557 <span class="comment">% [EOF] loadDataCallback</span>
1558 
1559 
1560 
1561 <span class="comment">% --------------------------------------------------------------------</span>
1562 <a name="_sub51" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1563 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1564 
1565 <span class="comment">% Get the Application data:</span>
1566 <span class="comment">% -------------------------</span>
1567 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1568 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1569 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1570 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1571 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1572 
1573 [the_file,the_path] = <span class="keyword">...</span>
1574     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1575     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1576     fullfile(guiparams.mat_path,guiparams.savefile));
1577 
1578 <span class="comment">% Save the processed data to a MAT file:</span>
1579 <span class="comment">% --------------------------------------</span>
1580 <span class="keyword">if</span> ischar(the_file)
1581     guiparams.mat_path = the_path;
1582     guiparams.mat_file = the_file;
1583     guiparams.savefile = the_file;
1584     
1585     <span class="comment">% Re-store the Application data:</span>
1586     <span class="comment">% ------------------------------</span>
1587     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1588     
1589     <span class="comment">% Update the preferences:</span>
1590     <span class="comment">% -----------------------</span>
1591     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1592     guiprefs.mat_path = the_path;
1593     guiprefs.mat_file = the_file;
1594     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1595     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1596     
1597     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1598     savefile = fullfile(pathstr,[filename extension]);
1599     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1600     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1601     log_text = {<span class="keyword">...</span>
1602         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1603         savefile};
1604     statusLogging(handles.LogWindow,log_text)
1605     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1606 <span class="keyword">end</span>
1607 
1608 <span class="comment">% [EOF] saveDataCallback</span>
1609 
1610 
1611 <span class="comment">% --------------------------------------------------------------------</span>
1612 <a name="_sub52" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1613 
1614 <span class="comment">% Get the Application data:</span>
1615 <span class="comment">% -------------------------</span>
1616 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1617 z   = guiparams.z;
1618 A   = guiparams.A;
1619 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1620 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1621 
1622 <span class="comment">% Compute multibeam bathymetry:</span>
1623 <span class="comment">% -----------------------------</span>
1624 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1625 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1626 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1627     guiparams.beam_angle, <span class="keyword">...</span>
1628     guiparams.magnetic_variation, <span class="keyword">...</span>
1629     guiparams.wse, <span class="keyword">...</span>
1630     guiparams.output_auxiliary_data);
1631 
1632 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1633 
1634 <span class="comment">% [EOF] saveBathymetryCallback</span>
1635 
1636 <span class="comment">% --------------------------------------------------------------------</span>
1637 <a name="_sub53" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1638 
1639 <span class="comment">% Get the Application data:</span>
1640 <span class="comment">% -------------------------</span>
1641 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1642 
1643 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1644     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1645     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1646     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1647     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1648     handles.figure1);
1649 
1650 <span class="comment">% Update the GUI:</span>
1651 <span class="comment">% ---------------</span>
1652 <span class="keyword">if</span> guiparams.english_units
1653     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1654     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1655 <span class="keyword">else</span>
1656     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1657     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1658 <span class="keyword">end</span>
1659 
1660 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1661     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1662     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1663 <span class="keyword">else</span>
1664     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1665     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1666 <span class="keyword">end</span>
1667 
1668 <span class="keyword">if</span> guiparams.presentation
1669     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1670 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1671 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1672 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1673 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1674 <span class="keyword">else</span>
1675     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1676 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1677 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1678 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1679 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1680 <span class="keyword">end</span>
1681 
1682 <span class="comment">% Re-store the Application data:</span>
1683 <span class="comment">% ------------------------------</span>
1684 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1685 
1686 <span class="comment">% [EOF] plottingParametersCallback</span>
1687 
1688 
1689 <span class="comment">% --------------------------------------------------------------------</span>
1690 <a name="_sub54" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1691 
1692 <span class="comment">% Get the Application data:</span>
1693 <span class="comment">% -------------------------</span>
1694 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1695 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1696 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1697 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1698 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1699 
1700 <span class="comment">% [EOF] processingParametersCallback</span>
1701 
1702 
1703 <span class="comment">% --------------------------------------------------------------------</span>
1704 <a name="_sub55" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1705 <span class="comment">% Plot 1</span>
1706 
1707 <span class="comment">% Get the Application data:</span>
1708 <span class="comment">% -------------------------</span>
1709 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1710 z = guiparams.z;
1711 A = guiparams.A;
1712 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1713 <span class="comment">% Map = guiparams.Map;</span>
1714 setends = guiparams.set_cross_section_endpoints;
1715 
1716 <span class="comment">% Preprocess the data:</span>
1717 <span class="comment">% --------------------</span>
1718 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1719 
1720 <span class="comment">% Push messages to Log Window:</span>
1721 <span class="comment">% ----------------------------</span>
1722 log_text = {<span class="keyword">...</span>
1723     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1724     <span class="string">'   Begin Data Processing...'</span>};
1725 statusLogging(handles.LogWindow, log_text)
1726 
1727 <span class="comment">% Process the transects:</span>
1728 <span class="comment">% ----------------------</span>
1729 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1730 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1731 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1732     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1733 
1734 <span class="comment">% Compute the smoothed variables</span>
1735 <span class="comment">% ------------------------------</span>
1736 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1737 <span class="comment">% runtime.</span>
1738 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1739     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1740     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1741     guiparams.vertical_smoothing_window);
1742 
1743 <span class="comment">% Push messages to Log Window:</span>
1744 <span class="comment">% ----------------------------</span>
1745 statusLogging(handles.LogWindow, processing_log_text)
1746 
1747 <span class="comment">% Store the data:</span>
1748 <span class="comment">% ---------------</span>
1749 guiparams.z = z;
1750 guiparams.A = A;
1751 guiparams.V = V;
1752 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1753 
1754 <span class="comment">% Push messages to Log Window:</span>
1755 <span class="comment">% ----------------------------</span>
1756 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1757 statusLogging(handles.LogWindow, log_text)
1758 
1759 <span class="comment">% Create or replot the Shiptracks</span>
1760 <span class="comment">% -------------------------------</span>
1761 <span class="comment">% Grab the axes to the plot</span>
1762 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1763 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1764 
1765 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1766 <span class="comment">% New plot display window</span>
1767 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1768 <span class="comment">% h = figure(1); clf</span>
1769 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1770 
1771 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1772 
1773 
1774 <span class="comment">% --------------------------------------------------------------------</span>
1775 <a name="_sub56" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1776 <span class="comment">% Plot 2</span>
1777 
1778 <span class="comment">% Get the Application data:</span>
1779 <span class="comment">% -------------------------</span>
1780 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1781 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1782 
1783 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1784     <span class="comment">% Push messages to Log Window:</span>
1785     <span class="comment">% ----------------------------</span>
1786     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1787     statusLogging(handles.LogWindow, log_text)
1788     
1789        
1790     <span class="comment">% Push plotting parameters to log window:</span>
1791     <span class="comment">% ---------------------------------------</span>
1792     log_text = {<span class="keyword">...</span>
1793         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1794         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1795         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1796         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1797         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1798         };
1799     statusLogging(handles.LogWindow, log_text)
1800     
1801     <span class="comment">% Plot the data:</span>
1802     <span class="comment">% --------------</span>
1803     z = [];
1804     A = [];
1805     V = [];
1806     Map = [];
1807     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1808     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1809         depth_range, <span class="keyword">...</span>
1810         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1811         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1812         guiparams.smoothing_window_size, <span class="keyword">...</span>
1813         guiparams.display_shoreline, <span class="keyword">...</span>
1814         guiparams.english_units, <span class="keyword">...</span>
1815         guiparams.mat_file, <span class="keyword">...</span>
1816         guiparams.mat_path); <span class="comment">% PLOT2</span>
1817     statusLogging(handles.LogWindow, log_text)
1818     
1819     <span class="comment">% Plot a Shoreline Map:</span>
1820     <span class="comment">% ---------------------</span>
1821     <span class="keyword">if</span> guiparams.display_shoreline
1822         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1823             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1824             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1825             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1826         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1827             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1828             Map.UTMe   = mapdata(:,1);
1829             Map.UTMn   = mapdata(:,2);
1830             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1831             <span class="comment">%Map.UTMzone = zone;</span>
1832         <span class="keyword">else</span>
1833             Map = [];
1834         <span class="keyword">end</span>
1835         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1836         log_text = {<span class="keyword">...</span>
1837             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1838             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1839             };
1840         statusLogging(handles.LogWindow, log_text)
1841     <span class="keyword">else</span>
1842         Map = [];
1843     <span class="keyword">end</span>
1844     
1845 <span class="keyword">else</span>
1846     z = guiparams.z;
1847     A = guiparams.A;
1848     <span class="comment">% V = guiparams.V;</span>
1849     Map = guiparams.Map;
1850     
1851     <span class="comment">% Push messages to Log Window:</span>
1852     <span class="comment">% ----------------------------</span>
1853     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
1854     statusLogging(handles.LogWindow, log_text)
1855     
1856         
1857     <span class="comment">% Preprocess the data:</span>
1858     <span class="comment">% --------------------</span>
1859     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1860     
1861     <span class="comment">% Process the transects:</span>
1862     <span class="comment">% ----------------------</span>
1863     A(1).hgns = guiparams.horizontal_grid_node_spacing;
1864     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1865     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1866         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1867     
1868     <span class="comment">% Compute the smoothed variables</span>
1869     <span class="comment">% ------------------------------</span>
1870     <span class="comment">% This is required so that the V struc is complete at any point during</span>
1871     <span class="comment">% runtime.</span>
1872     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1873         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1874         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1875         guiparams.vertical_smoothing_window);
1876     
1877     <span class="comment">% Push messages to Log Window:</span>
1878     <span class="comment">% ----------------------------</span>
1879     statusLogging(handles.LogWindow, processing_log_text)
1880     
1881     <span class="comment">% Plot the cross section:</span>
1882     <span class="comment">% -----------------------</span>
1883     log_text = {<span class="keyword">...</span>
1884         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1885         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1886         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1887         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1888         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1889         };
1890     statusLogging(handles.LogWindow, log_text)
1891     
1892     <span class="comment">% Plot the data:</span>
1893     <span class="comment">% --------------</span>
1894     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
1895     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1896     
1897     
1898     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1899         depth_range, <span class="keyword">...</span>
1900         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1901         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1902         guiparams.smoothing_window_size, <span class="keyword">...</span>
1903         guiparams.display_shoreline, <span class="keyword">...</span>
1904         guiparams.english_units, <span class="keyword">...</span>
1905         guiparams.mat_file, <span class="keyword">...</span>
1906         guiparams.mat_path); <span class="comment">% PLOT2</span>
1907     statusLogging(handles.LogWindow, log_text)
1908     
1909     <span class="comment">% Plot a Shoreline Map:</span>
1910     <span class="comment">% ---------------------</span>
1911     <span class="keyword">if</span> guiparams.display_shoreline
1912         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1913             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1914             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1915             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1916         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1917             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1918             Map.UTMe   = mapdata(:,1);
1919             Map.UTMn   = mapdata(:,2);
1920             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1921             <span class="comment">%Map.UTMzone = zone;</span>
1922         <span class="keyword">else</span>
1923             Map = [];
1924         <span class="keyword">end</span>
1925         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1926         log_text = {<span class="keyword">...</span>
1927             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1928             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1929             };
1930         statusLogging(handles.LogWindow, log_text)
1931     <span class="keyword">else</span>
1932         Map = [];
1933     <span class="keyword">end</span>
1934     
1935 <span class="keyword">end</span>
1936 
1937 <span class="keyword">if</span> guiparams.add_background
1938     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
1939     statusLogging(handles.LogWindow, log_text)
1940 <span class="keyword">end</span>
1941 
1942 <span class="comment">% Update guiparams</span>
1943 <span class="comment">% ----------------</span>
1944 guiparams.z   = z;
1945 guiparams.A   = A;
1946 guiparams.V   = V;
1947 guiparams.Map = Map;
1948 guiparams.iric_anv_planview_data = PVdata;
1949 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
1950 
1951 <span class="comment">% Update preferences</span>
1952 <span class="comment">% ------------------</span>
1953 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1954 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
1955 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
1956 
1957 <span class="comment">% Force plot to be formated properly</span>
1958 <span class="comment">% ----------------------------------</span>
1959 <span class="keyword">if</span> guiparams.presentation
1960     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1961 <span class="keyword">else</span>
1962     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1963 <span class="keyword">end</span>
1964 <span class="keyword">switch</span> guiparams.renderer
1965     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
1966         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
1967     <span class="keyword">case</span> <span class="string">'painters'</span>
1968         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
1969     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
1970         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
1971 <span class="keyword">end</span>
1972 
1973 <span class="comment">% Start the Graphics Control Gui</span>
1974 <span class="comment">% ------------------------------</span>
1975 VMT_GraphicsControl
1976 
1977 <span class="comment">% [EOF] planviewPlotCallback</span>
1978 
1979 
1980 <span class="comment">% --------------------------------------------------------------------</span>
1981 <a name="_sub57" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
1982 <span class="comment">% Plot 3</span>
1983 
1984 <span class="comment">% Get the Application data:</span>
1985 <span class="comment">% -------------------------</span>
1986 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1987 z = guiparams.z;
1988 A = guiparams.A;
1989 <span class="comment">% V = guiparams.V;</span>
1990 <span class="comment">% Map = guiparams.Map;</span>
1991 
1992 <span class="comment">% Preprocess the data:</span>
1993 <span class="comment">% --------------------</span>
1994 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1995 
1996 <span class="comment">% Push messages to Log Window:</span>
1997 <span class="comment">% ----------------------------</span>
1998 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
1999 statusLogging(handles.LogWindow, log_text)
2000 
2001 <span class="comment">% Process the transects:</span>
2002 <span class="comment">% ----------------------</span>
2003 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2004 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2005 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2006     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2007 
2008 <span class="comment">% Push messages to Log Window:</span>
2009 <span class="comment">% ----------------------------</span>
2010 statusLogging(handles.LogWindow, processing_log_text)
2011 
2012 <span class="comment">% Plot the cross section:</span>
2013 <span class="comment">% -----------------------</span>
2014 log_text = {<span class="keyword">...</span>
2015     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
2016     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
2017     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
2018     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
2019     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
2020     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
2021     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
2022     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
2023     };
2024 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2025     log_text = vertcat(log_text, {<span class="keyword">...</span>
2026         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
2027         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
2028         });
2029 <span class="keyword">end</span>
2030 <span class="comment">% Push messages to Log Window:</span>
2031 <span class="comment">% ----------------------------</span>
2032 statusLogging(handles.LogWindow, log_text)
2033 
2034 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2035     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
2036 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
2037 <span class="comment">%         ...guiparams.contour, ...</span>
2038 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
2039 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
2040     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2041         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
2042         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2043         guiparams.vertical_smoothing_window);
2044     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
2045         guiparams.contour, <span class="keyword">...</span>
2046         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
2047         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2048         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
2049         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
2050         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
2051         guiparams.include_vertical_velocity, <span class="keyword">...</span>
2052         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2053     
2054 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
2055     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2056         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2057         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2058         guiparams.vertical_smoothing_window);
2059     
2060     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
2061         guiparams.contour, <span class="keyword">...</span>
2062         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2063         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
2064     
2065     guiparams.zmin = zmin;
2066     guiparams.zmax = zmax;
2067     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2068 <span class="keyword">end</span>
2069 
2070 <span class="comment">% Force plot to be formated properly</span>
2071 <span class="comment">% ----------------------------------</span>
2072 <span class="keyword">if</span> guiparams.presentation
2073     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2074 <span class="keyword">else</span>
2075     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2076 <span class="keyword">end</span>
2077 <span class="keyword">switch</span> guiparams.renderer
2078     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2079         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2080     <span class="keyword">case</span> <span class="string">'painters'</span>
2081         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2082     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2083         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2084 <span class="keyword">end</span>
2085 
2086 <span class="comment">% Re-store the Application data:</span>
2087 <span class="comment">% ------------------------------</span>
2088 guiparams.V = V;
2089 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2090 
2091 <span class="comment">% Start the Graphics Control Gui</span>
2092 <span class="comment">% ------------------------------</span>
2093 VMT_GraphicsControl
2094 
2095 <span class="comment">% Push messages to Log Window:</span>
2096 <span class="comment">% ----------------------------</span>
2097 statusLogging(handles.LogWindow, plot_cont_log_text)
2098 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2099 
2100 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2101 
2102 
2103 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2104 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2105 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2106 
2107 <span class="comment">% --------------------------------------------------------------------</span>
2108 <a name="_sub58" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2109 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2110 
2111 <span class="comment">% Get the Application data:</span>
2112 <span class="comment">% -------------------------</span>
2113 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2114 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2115 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2116 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2117 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2118 
2119 [the_file,the_path] = <span class="keyword">...</span>
2120     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2121     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2122     fullfile(guiparams.mat_path,guiparams.savefile));
2123 
2124 <span class="comment">% Save the processed data to a MAT file:</span>
2125 <span class="comment">% --------------------------------------</span>
2126 <span class="keyword">if</span> ischar(the_file)
2127     guiparams.mat_path = the_path;
2128     guiparams.mat_file = the_file;
2129     guiparams.savefile = the_file;
2130     
2131     <span class="comment">% Re-store the Application data:</span>
2132     <span class="comment">% ------------------------------</span>
2133     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2134     
2135     <span class="comment">% Update the preferences:</span>
2136     <span class="comment">% -----------------------</span>
2137     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2138     guiprefs.mat_path = the_path;
2139     guiprefs.mat_file = the_file;
2140     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2141     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2142     
2143     [~,filename,extension] = fileparts(guiparams.savefile);
2144     savefile = [filename extension];
2145     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2146         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2147     disp(<span class="string">'Saving Processed Data File...'</span>)
2148     disp(savefile)
2149     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2150 <span class="keyword">end</span>
2151 
2152 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2153 
2154 
2155 <span class="comment">% --------------------------------------------------------------------</span>
2156 <a name="_sub59" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2157 
2158 <span class="comment">% Get the Application data:</span>
2159 <span class="comment">% -------------------------</span>
2160 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2161 <span class="comment">% z   = guiparams.z;</span>
2162 <span class="comment">% A   = guiparams.A;</span>
2163 V   = guiparams.V;
2164 <span class="comment">% Map = guiparams.Map;</span>
2165 
2166 [the_file,the_path] = <span class="keyword">...</span>
2167     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2168     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2169     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2170 
2171 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2172 <span class="comment">% ------------------------------------------</span>
2173 <span class="keyword">if</span> ischar(the_file)
2174     guiparams.tecplot_path = the_path;
2175     guiparams.tecplot_file = the_file;
2176     
2177     <span class="comment">% Re-store the Application data:</span>
2178     <span class="comment">% ------------------------------</span>
2179     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2180     
2181     <span class="comment">% Update the preferences:</span>
2182     <span class="comment">% -----------------------</span>
2183     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2184     guiprefs.tecplot_path = the_path;
2185     guiprefs.tecplot_file = the_file;
2186     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2187     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2188     
2189     <span class="comment">% Push to log window</span>
2190     <span class="comment">% ------------------</span>
2191     log_text = {<span class="keyword">...</span>
2192         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2193         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2194         the_path;<span class="keyword">...</span>
2195         [<span class="string">'Filename: '</span> the_file]};
2196     statusLogging(handles.LogWindow,log_text)
2197         
2198     <span class="keyword">if</span> isempty(V)
2199         A = guiparams.A;
2200         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2201         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2202         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2203             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2204             guiparams.unit_discharge_correction);
2205     <span class="keyword">end</span>
2206     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2207     
2208     <span class="comment">% Push to log window</span>
2209     <span class="comment">% ------------------</span>
2210     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2211     statusLogging(handles.LogWindow,log_text)
2212     
2213     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2214     
2215     <span class="comment">% Push to log window</span>
2216     <span class="comment">% ------------------</span>
2217     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2218     statusLogging(handles.LogWindow,log_text)
2219    
2220 <span class="keyword">end</span>
2221 
2222 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2223 
2224 
2225 <span class="comment">% --------------------------------------------------------------------</span>
2226 <a name="_sub60" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2227 
2228 <span class="comment">% Get the Application data:</span>
2229 <span class="comment">% -------------------------</span>
2230 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2231 <span class="comment">% z   = guiparams.z;</span>
2232 A   = guiparams.A;
2233 V   = guiparams.V;
2234 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2235 
2236 [the_file,the_path] = <span class="keyword">...</span>
2237     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2238     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2239     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2240 
2241 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2242 <span class="comment">% -----------------------------------------------------</span>
2243 <span class="keyword">if</span> ischar(the_file)
2244     guiparams.kmz_path = the_path;
2245     guiparams.kmz_file = the_file;
2246     
2247     <span class="comment">% Re-store the Application data:</span>
2248     <span class="comment">% ------------------------------</span>
2249     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2250     
2251     <span class="comment">% Update the preferences:</span>
2252     <span class="comment">% -----------------------</span>
2253     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2254     guiprefs.kmz_path = the_path;
2255     guiprefs.kmz_file = the_file;
2256     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2257     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2258     
2259     <span class="comment">%     if guiparams.display_shoreline</span>
2260     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2261     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2262     <span class="comment">%                             guiparams.vertical_offset);</span>
2263     <span class="comment">%     end</span>
2264     <span class="keyword">if</span> isempty(V)
2265         A = guiparams.A;
2266         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2267         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2268         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2269             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2270             guiparams.unit_discharge_correction);
2271     <span class="keyword">end</span>
2272     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2273         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2274         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2275         guiparams.vertical_offset);
2276 <span class="keyword">end</span>
2277 
2278 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2279 
2280 
2281 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2282 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2283 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2284 
2285 <span class="comment">% --------------------------------------------------------------------</span>
2286 <a name="_sub61" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2287 
2288 <span class="comment">% Get the Application data:</span>
2289 <span class="comment">% -------------------------</span>
2290 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2291 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2292 z = guiparams.z;
2293 A = guiparams.A;
2294 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2295 <span class="comment">% Map = guiparams.Map;</span>
2296 setends = guiparams.set_cross_section_endpoints;
2297 
2298 [the_file,the_path] = <span class="keyword">...</span>
2299     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2300     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2301     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2302     guiprefs.multibeambathymetry_file));
2303 
2304 <span class="keyword">if</span> ischar(the_file)
2305     guiparams.multibeambathymetry_path = the_path;
2306     guiparams.multibeambathymetry_file = the_file;
2307     
2308     <span class="comment">% Re-store the Application data:</span>
2309     <span class="comment">% ------------------------------</span>
2310     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2311     
2312     <span class="comment">% Update the preferences:</span>
2313     <span class="comment">% -----------------------</span>
2314     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2315     guiprefs.multibeambathymetry_path = the_path;
2316     guiprefs.multibeambathymetry_file = the_file;
2317     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2318     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2319     
2320     <span class="keyword">if</span> guiparams.output_auxiliary_data
2321     <span class="keyword">end</span>
2322     
2323     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2324     
2325     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2326         guiparams.multibeambathymetry_file);
2327     
2328     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2329         [<span class="string">'   '</span> savefile]};
2330     statusLogging(handles.LogWindow,log_text)
2331     
2332     <span class="comment">% Process the transects:</span>
2333     <span class="comment">% ----------------------</span>
2334     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2335     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2336     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2337         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2338     
2339     <span class="comment">% Compute the smoothed variables</span>
2340     <span class="comment">% ------------------------------</span>
2341     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2342     <span class="comment">% runtime.</span>
2343     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2344         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2345         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2346         guiparams.vertical_smoothing_window);
2347     
2348     <span class="comment">% Push messages to Log Window:</span>
2349     <span class="comment">% ----------------------------</span>
2350     statusLogging(handles.LogWindow, processing_log_text)
2351 
2352     
2353     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2354         guiparams.A, <span class="keyword">...</span>
2355         savefile, <span class="keyword">...</span>
2356         guiparams.beam_angle, <span class="keyword">...</span>
2357         guiparams.magnetic_variation, <span class="keyword">...</span>
2358         guiparams.wse, <span class="keyword">...</span>
2359         guiparams.output_auxiliary_data);
2360     
2361     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2362     
2363 <span class="keyword">end</span>
2364 
2365 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2366 
2367 
2368 <span class="comment">% --------------------------------------------------------------------</span>
2369 <a name="_sub62" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2370 <span class="comment">% Get the beam angle</span>
2371 
2372 <span class="comment">% Get the Application data:</span>
2373 <span class="comment">% -------------------------</span>
2374 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2375 
2376 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2377 <span class="comment">% ----------------------------------------------------------------</span>
2378 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2379 is_a_number = ~isnan(new_beam_angle);
2380 is_positive = new_beam_angle&gt;=0;
2381 
2382 <span class="comment">% Modify the Application data:</span>
2383 <span class="comment">% ----------------------------</span>
2384 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2385     guiparams.beam_angle = new_beam_angle;
2386     
2387     <span class="comment">% Re-store the Application data:</span>
2388     <span class="comment">% ------------------------------</span>
2389     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2390     
2391 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2392     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2393 <span class="keyword">end</span>
2394 
2395 <span class="comment">% [EOF] BeamAngle_Callback</span>
2396 
2397 
2398 <span class="comment">% --------------------------------------------------------------------</span>
2399 <a name="_sub63" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2400 <span class="comment">% Get the Magnetic Variation</span>
2401 
2402 <span class="comment">% Get the Application data:</span>
2403 <span class="comment">% -------------------------</span>
2404 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2405 
2406 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2407 <span class="comment">% ----------------------------------------------------------------</span>
2408 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2409 is_a_number = ~isnan(new_magnetic_variation);
2410 is_positive = new_magnetic_variation&gt;=0;
2411 
2412 <span class="comment">% Modify the Application data:</span>
2413 <span class="comment">% ----------------------------</span>
2414 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2415     guiparams.magnetic_variation = new_magnetic_variation;
2416     
2417     <span class="comment">% Re-store the Application data:</span>
2418     <span class="comment">% ------------------------------</span>
2419     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2420     
2421 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2422     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2423 <span class="keyword">end</span>
2424 
2425 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2426 
2427 
2428 <span class="comment">% --------------------------------------------------------------------</span>
2429 <a name="_sub64" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2430 
2431 <span class="comment">% Get the Application data:</span>
2432 <span class="comment">% -------------------------</span>
2433 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2434 
2435 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2436 <span class="comment">% ----------------------------------------------------------------</span>
2437 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2438 is_a_number = ~isnan(new_wse);
2439 is_positive = new_wse&gt;=0;
2440 
2441 <span class="comment">% Modify the Application data:</span>
2442 <span class="comment">% ----------------------------</span>
2443 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2444     guiparams.wse = new_wse;
2445     
2446     <span class="comment">% Re-store the Application data:</span>
2447     <span class="comment">% ------------------------------</span>
2448     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2449     
2450 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2451     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2452 <span class="keyword">end</span>
2453 
2454 <span class="comment">% [EOF] WSE_Callback</span>
2455 
2456 
2457 <span class="comment">% --------------------------------------------------------------------</span>
2458 <a name="_sub65" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2459 <span class="comment">% Bathymetry Auxiliary Data</span>
2460 
2461 <span class="comment">% Get the Application data:</span>
2462 <span class="comment">% -------------------------</span>
2463 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2464 
2465 <span class="comment">% Modify the Application data:</span>
2466 <span class="comment">% ----------------------------</span>
2467 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2468 
2469 <span class="comment">% Re-store the Application data:</span>
2470 <span class="comment">% ------------------------------</span>
2471 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2472 
2473 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2474 
2475 
2476 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2477 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2478 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2479 
2480 <span class="comment">% --------------------------------------------------------------------</span>
2481 <a name="_sub66" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2482 
2483 <span class="comment">% Get the Application data:</span>
2484 <span class="comment">% -------------------------</span>
2485 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2486 
2487 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2488 <span class="comment">% ----------------------------------------------------------------</span>
2489 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2490 is_a_number = ~isnan(new_depth_range_min);
2491 is_positive = new_depth_range_min&gt;=0;
2492 
2493 <span class="comment">% Modify the Application data:</span>
2494 <span class="comment">% ----------------------------</span>
2495 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2496     guiparams.depth_range_min = new_depth_range_min;
2497     
2498     <span class="comment">% Re-store the Application data:</span>
2499     <span class="comment">% ------------------------------</span>
2500     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2501     
2502 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2503     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2504 <span class="keyword">end</span>
2505 
2506 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2507 
2508 
2509 <span class="comment">% --------------------------------------------------------------------</span>
2510 <a name="_sub67" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2511 
2512 <span class="comment">% Get the Application data:</span>
2513 <span class="comment">% -------------------------</span>
2514 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2515 
2516 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2517 <span class="comment">% ----------------------------------------------------------------</span>
2518 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2519 is_a_number = ~isnan(new_depth_range_max);
2520 is_positive = new_depth_range_max&gt;=0;
2521 
2522 <span class="comment">% Modify the Application data:</span>
2523 <span class="comment">% ----------------------------</span>
2524 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2525     guiparams.depth_range_max = new_depth_range_max;
2526     
2527     <span class="comment">% Re-store the Application data:</span>
2528     <span class="comment">% ------------------------------</span>
2529     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2530     
2531 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2532     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2533 <span class="keyword">end</span>
2534 
2535 <span class="comment">% [EOF] DepthMax_Callback</span>
2536 
2537 
2538 <span class="comment">% --------------------------------------------------------------------</span>
2539 <a name="_sub68" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2540 <span class="comment">% Set quiver scale (contour)</span>
2541 
2542 <span class="comment">% Get the Application data:</span>
2543 <span class="comment">% -------------------------</span>
2544 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2545 
2546 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2547 <span class="comment">% ----------------------------------------------------------------</span>
2548 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2549 is_a_number = ~isnan(new_vector_scale_plan_view);
2550 is_positive = new_vector_scale_plan_view&gt;=0;
2551 
2552 <span class="comment">% Modify the Application data:</span>
2553 <span class="comment">% ----------------------------</span>
2554 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2555     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2556     
2557     <span class="comment">% Re-store the Application data:</span>
2558     <span class="comment">% ------------------------------</span>
2559     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2560     
2561 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2562     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2563 <span class="keyword">end</span>
2564 
2565 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2566 
2567 
2568 <span class="comment">% --------------------------------------------------------------------</span>
2569 <a name="_sub69" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2570 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2571 
2572 <span class="comment">% Get the Application data:</span>
2573 <span class="comment">% -------------------------</span>
2574 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2575 
2576 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2577 <span class="comment">% ----------------------------------------------------------------</span>
2578 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2579 is_a_number = ~isnan(new_vector_spacing_plan_view);
2580 is_positive = new_vector_spacing_plan_view&gt;=0;
2581 
2582 <span class="comment">% Modify the Application data:</span>
2583 <span class="comment">% ----------------------------</span>
2584 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2585     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2586     
2587     <span class="comment">% Re-store the Application data:</span>
2588     <span class="comment">% ------------------------------</span>
2589     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2590     
2591 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2592     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2593 <span class="keyword">end</span>
2594 
2595 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2596 
2597 
2598 <span class="comment">% --------------------------------------------------------------------</span>
2599 <a name="_sub70" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2600 <span class="comment">% Plan View smoothing window size</span>
2601 
2602 <span class="comment">% Get the Application data:</span>
2603 <span class="comment">% -------------------------</span>
2604 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2605 
2606 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2607 <span class="comment">% ----------------------------------------------------------------</span>
2608 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2609 is_a_number = ~isnan(new_smoothing_window_size);
2610 is_positive = new_smoothing_window_size&gt;=0;
2611 
2612 <span class="comment">% Modify the Application data:</span>
2613 <span class="comment">% ----------------------------</span>
2614 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2615     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2616     
2617     <span class="comment">% Re-store the Application data:</span>
2618     <span class="comment">% ------------------------------</span>
2619     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2620     
2621 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2622     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2623 <span class="keyword">end</span>
2624 
2625 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
2626 
2627 
2628 <span class="comment">% --------------------------------------------------------------------</span>
2629 <a name="_sub71" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2630 
2631 <span class="comment">% Get the Application data:</span>
2632 <span class="comment">% -------------------------</span>
2633 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2634 
2635 <span class="comment">% Modify the Application data:</span>
2636 <span class="comment">% ----------------------------</span>
2637 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2638 
2639 <span class="comment">% Re-store the Application data:</span>
2640 <span class="comment">% ------------------------------</span>
2641 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2642 
2643 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
2644 
2645 
2646 <span class="comment">% --------------------------------------------------------------------</span>
2647 <a name="_sub72" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2648 
2649 <span class="comment">% Get the Application data:</span>
2650 <span class="comment">% -------------------------</span>
2651 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2652 
2653 <span class="comment">% Modify the Application data:</span>
2654 <span class="comment">% ----------------------------</span>
2655 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2656 
2657 <span class="comment">% Re-store the Application data:</span>
2658 <span class="comment">% ------------------------------</span>
2659 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2660 
2661 <span class="comment">% [EOF] AddBackground_Callback</span>
2662 
2663 
2664 <span class="comment">% --------------------------------------------------------------------</span>
2665 <a name="_sub73" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2666 <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2667 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2668 
2669 
2670 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2671 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2672 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2673 
2674 <span class="comment">% --------------------------------------------------------------------</span>
2675 <a name="_sub74" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2676 <span class="comment">% Set the horizontal grid node spacing</span>
2677 
2678 <span class="comment">% Get the Application data:</span>
2679 <span class="comment">% -------------------------</span>
2680 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2681 
2682 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2683 <span class="comment">% ----------------------------------------------------------------</span>
2684 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2685 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2686 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2687 
2688 <span class="comment">% Modify the Application data:</span>
2689 <span class="comment">% ----------------------------</span>
2690 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2691     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2692     
2693     <span class="comment">% Re-store the Application data:</span>
2694     <span class="comment">% ------------------------------</span>
2695     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2696     
2697 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2698     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2699 <span class="keyword">end</span>
2700 
2701 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2702 
2703 
2704 <span class="comment">% --------------------------------------------------------------------</span>
2705 <a name="_sub75" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2706 <span class="comment">% Set the cross section endpoints manually</span>
2707 
2708 <span class="comment">% Get the Application data:</span>
2709 <span class="comment">% -------------------------</span>
2710 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2711 
2712 <span class="comment">% Modify the Application data:</span>
2713 <span class="comment">% ----------------------------</span>
2714 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2715 
2716 <span class="comment">% Re-store the Application data:</span>
2717 <span class="comment">% ------------------------------</span>
2718 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2719 
2720 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2721 
2722 
2723 <span class="comment">% --------------------------------------------------------------------</span>
2724 <a name="_sub76" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2725 <a href="#_sub55" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2726 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2727 
2728 
2729 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2730 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2731 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2732 
2733 <span class="comment">% --------------------------------------------------------------------</span>
2734 <a name="_sub77" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2735 
2736 <span class="comment">% Get the Application data:</span>
2737 <span class="comment">% -------------------------</span>
2738 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2739 
2740 <span class="comment">% Modify the Application data:</span>
2741 <span class="comment">% ----------------------------</span>
2742 idx_variable = get(hObject,<span class="string">'Value'</span>);
2743 guiparams.idx_contour = idx_variable;
2744 guiparams.contour = guiparams.contours(idx_variable).variable;
2745 
2746 <span class="comment">% Re-store the Application data:</span>
2747 <span class="comment">% ------------------------------</span>
2748 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2749 
2750 <span class="comment">% [EOF] Contour_Callback</span>
2751 
2752 
2753 <span class="comment">% --------------------------------------------------------------------</span>
2754 <a name="_sub78" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2755 <span class="comment">% Set vertical exaggeration</span>
2756 
2757 <span class="comment">% Get the Application data:</span>
2758 <span class="comment">% -------------------------</span>
2759 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2760 
2761 <span class="comment">% Modify the Application data:</span>
2762 <span class="comment">% ----------------------------</span>
2763 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
2764 
2765 <span class="comment">% Re-store the Application data:</span>
2766 <span class="comment">% ------------------------------</span>
2767 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2768 
2769 <span class="comment">% Update the GUI:</span>
2770 <span class="comment">% ---------------</span>
2771 <span class="comment">% updateGUI(handles,guiparams)</span>
2772 
2773 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
2774 
2775 
2776 <span class="comment">% --------------------------------------------------------------------</span>
2777 <a name="_sub79" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
2778 
2779 <span class="comment">% Get the Application data:</span>
2780 <span class="comment">% -------------------------</span>
2781 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2782 
2783 <span class="comment">% Modify the Application data:</span>
2784 <span class="comment">% ----------------------------</span>
2785 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
2786 
2787 <span class="comment">% Re-store the Application data:</span>
2788 <span class="comment">% ------------------------------</span>
2789 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2790 
2791 <span class="comment">% Update the GUI:</span>
2792 <span class="comment">% ---------------</span>
2793 <span class="comment">% updateGUI(handles,guiparams)</span>
2794 
2795 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
2796 
2797 
2798 <span class="comment">% --------------------------------------------------------------------</span>
2799 <a name="_sub80" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2800 
2801 <span class="comment">% Get the Application data:</span>
2802 <span class="comment">% -------------------------</span>
2803 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2804 
2805 <span class="comment">% Modify the Application data:</span>
2806 <span class="comment">% ----------------------------</span>
2807 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2808 
2809 <span class="comment">% Re-store the Application data:</span>
2810 <span class="comment">% ------------------------------</span>
2811 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2812 
2813 <span class="comment">% Update the GUI:</span>
2814 <span class="comment">% ---------------</span>
2815 <span class="comment">% updateGUI(handles,guiparams)</span>
2816 
2817 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
2818 
2819 
2820 <span class="comment">% --------------------------------------------------------------------</span>
2821 <a name="_sub81" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2822 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
2823 
2824 <span class="comment">% Get the Application data:</span>
2825 <span class="comment">% -------------------------</span>
2826 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2827 
2828 <span class="comment">% Modify the Application data:</span>
2829 <span class="comment">% ----------------------------</span>
2830 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2831 
2832 <span class="comment">% Re-store the Application data:</span>
2833 <span class="comment">% ------------------------------</span>
2834 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2835 
2836 <span class="comment">% Update the GUI:</span>
2837 <span class="comment">% ---------------</span>
2838 <span class="comment">% updateGUI(handles,guiparams)</span>
2839 
2840 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
2841 
2842 
2843 <span class="comment">% --------------------------------------------------------------------</span>
2844 <a name="_sub82" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2845 <span class="comment">% Horizontal Smoothing</span>
2846 
2847 <span class="comment">% Get the Application data:</span>
2848 <span class="comment">% -------------------------</span>
2849 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2850 
2851 <span class="comment">% Modify the Application data:</span>
2852 <span class="comment">% ----------------------------</span>
2853 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
2854 
2855 <span class="comment">% Re-store the Application data:</span>
2856 <span class="comment">% ------------------------------</span>
2857 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2858 
2859 <span class="comment">% Update the GUI:</span>
2860 <span class="comment">% ---------------</span>
2861 <span class="comment">% updateGUI(handles,guiparams)</span>
2862 
2863 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
2864 
2865 
2866 <span class="comment">% --------------------------------------------------------------------</span>
2867 <a name="_sub83" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2868 <span class="comment">% Vertical Smoothing</span>
2869 
2870 <span class="comment">% Get the Application data:</span>
2871 <span class="comment">% -------------------------</span>
2872 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2873 
2874 <span class="comment">% Modify the Application data:</span>
2875 <span class="comment">% ----------------------------</span>
2876 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
2877 
2878 <span class="comment">% Re-store the Application data:</span>
2879 <span class="comment">% ------------------------------</span>
2880 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2881 
2882 <span class="comment">% Update the GUI:</span>
2883 <span class="comment">% ---------------</span>
2884 <span class="comment">% updateGUI(handles,guiparams)</span>
2885 
2886 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
2887 
2888 
2889 <span class="comment">% --------------------------------------------------------------------</span>
2890 <a name="_sub84" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
2891 
2892 <span class="comment">% Get the Application data:</span>
2893 <span class="comment">% -------------------------</span>
2894 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2895 
2896 <span class="comment">% Modify the Application data:</span>
2897 <span class="comment">% ----------------------------</span>
2898 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2899 
2900 <span class="comment">% Re-store the Application data:</span>
2901 <span class="comment">% ------------------------------</span>
2902 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2903 
2904 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
2905 
2906 
2907 <span class="comment">% --------------------------------------------------------------------</span>
2908 <a name="_sub85" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
2909 
2910 <span class="comment">% Get the Application data:</span>
2911 <span class="comment">% -------------------------</span>
2912 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2913 
2914 <span class="comment">% Modify the Application data:</span>
2915 <span class="comment">% ----------------------------</span>
2916 idx_variable = get(hObject,<span class="string">'Value'</span>);
2917 guiparams.idx_secondary_flow_vector_variable = idx_variable;
2918 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
2919 
2920 <span class="comment">% Re-store the Application data:</span>
2921 <span class="comment">% ------------------------------</span>
2922 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2923 
2924 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
2925 
2926 
2927 <span class="comment">% --------------------------------------------------------------------</span>
2928 <a name="_sub86" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
2929 
2930 <span class="comment">% Get the Application data:</span>
2931 <span class="comment">% -------------------------</span>
2932 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2933 
2934 <span class="comment">% Modify the Application data:</span>
2935 <span class="comment">% ----------------------------</span>
2936 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2937 
2938 <span class="comment">% Re-store the Application data:</span>
2939 <span class="comment">% ------------------------------</span>
2940 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2941 
2942 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
2943 
2944 
2945 <span class="comment">% --------------------------------------------------------------------</span>
2946 <a name="_sub87" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
2947 <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
2948 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
2949 
2950 
2951 <span class="comment">% --------------------------------------------------------------------</span>
2952 <a name="_sub88" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
2953 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
2954 <span class="comment">% [EOF] ClearLog_Callback</span>
2955 
2956 <span class="comment">% --------------------------------------------------------------------</span>
2957 <a name="_sub89" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
2958 
2959 <span class="comment">% Get the Application data:</span>
2960 <span class="comment">% -------------------------</span>
2961 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2962 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2963 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
2964 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
2965 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
2966 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
2967 
2968 [the_file,the_path] = <span class="keyword">...</span>
2969     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
2970     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
2971     fullfile(guiprefs.log_path,guiprefs.log_file));
2972 
2973 <span class="comment">% Save the log to a TXT file:</span>
2974 <span class="comment">% ---------------------------</span>
2975 <span class="keyword">if</span> ischar(the_file)
2976     guiparams.log_path = the_path;
2977     guiparams.log_file = the_file;
2978     <span class="comment">%guiparams.savefile = the_file;</span>
2979     
2980     <span class="comment">% Re-store the Application data:</span>
2981     <span class="comment">% ------------------------------</span>
2982     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2983     
2984     <span class="comment">% Update the preferences:</span>
2985     <span class="comment">% -----------------------</span>
2986     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2987     guiprefs.log_path = the_path;
2988     guiprefs.log_file = the_file;
2989     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2990     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
2991     
2992     [~,filename,extension] = fileparts(the_file);
2993     savefile = [the_path filename extension];
2994     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2995         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2996     
2997     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
2998     [nrows,~]= size(logfile);
2999     fid = fopen(savefile, <span class="string">'w'</span>);
3000     <span class="keyword">for</span> row=1:nrows
3001         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
3002     <span class="keyword">end</span>
3003     fclose(fid);
3004 <span class="keyword">end</span>
3005 <span class="comment">% [EOF] SaveLog_Callback</span>
3006 
3007 <span class="comment">%%%%%%%%%%%%%%%%</span>
3008 <span class="comment">% SUBFUNCTIONS %</span>
3009 <span class="comment">%%%%%%%%%%%%%%%%</span>
3010 
3011 <span class="comment">% --------------------------------------------------------------------</span>
3012 <a name="_sub90" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
3013 
3014 icons = <a href="#_sub106" class="code" title="subfunction icons = getIcons">getIcons</a>;
3015 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
3016 
3017 <span class="comment">% Load data</span>
3018 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
3019 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3020 <span class="comment">% icon(icon==0) = NaN;</span>
3021 handles.toolbarLoadData = <span class="keyword">...</span>
3022     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3023     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
3024     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
3025 
3026 <span class="comment">% Save data</span>
3027 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
3028 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3029 <span class="comment">% icon(icon==0) = NaN;</span>
3030 handles.toolbarSaveMatFile = <span class="keyword">...</span>
3031     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3032     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
3033     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
3034     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3035 
3036 
3037 <span class="comment">% Save bathymetry</span>
3038 <span class="comment">%icon = ones(16,16,3);</span>
3039 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
3040     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3041     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
3042     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
3043 
3044 <span class="comment">% Save figures</span>
3045 <span class="comment">% icon = ones(16,16,3);</span>
3046 handles.toolbarSaveFigures = <span class="keyword">...</span>
3047     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3048     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
3049     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
3050 
3051 <span class="comment">% Save Excel File</span>
3052 <span class="comment">% icon = ones(16,16,3);</span>
3053 handles.toolbarSaveExcel = <span class="keyword">...</span>
3054     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3055     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
3056     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
3057 
3058 
3059 <span class="comment">% Plotting parameters</span>
3060 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
3061 <span class="comment">% icon = ind2rgb(icon,map);</span>
3062 handles.toolbarPlottingParameters = <span class="keyword">...</span>
3063     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3064     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
3065     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3066     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3067 
3068 <span class="comment">% Processing parameters</span>
3069 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3070 <span class="comment">% icon = ind2rgb(icon,map);</span>
3071 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3072     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3073     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3074     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3075 
3076 <span class="comment">% Zoom In</span>
3077 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3078 <span class="comment">% icon = ind2rgb(icon,map);</span>
3079 <span class="comment">% handles.toolbarZoomIn = ...</span>
3080 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3081 <span class="comment">%     'CData',        icons(8).data, ...</span>
3082 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3083 <span class="comment">%     'Separator',     'on');</span>
3084 
3085 <span class="comment">% Zoom Out</span>
3086 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3087 <span class="comment">% icon = ind2rgb(icon,map);</span>
3088 <span class="comment">% handles.toolbarZoomOut = ...</span>
3089 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3090 <span class="comment">%     'CData',        icons(9).data, ...</span>
3091 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3092 
3093 <span class="comment">% Pan</span>
3094 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3095 <span class="comment">% icon = ind2rgb(icon,map);</span>
3096 <span class="comment">% handles.toolbarPan = ...</span>
3097 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3098 <span class="comment">%     'CData',        icons(10).data, ...</span>
3099 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3100 
3101 
3102 
3103 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3104 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3105 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3106 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3107 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub25" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3108 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub53" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3109 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub54" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3110 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3111 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3112 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3113 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3114 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3115 
3116 <span class="comment">% [EOF] buildtoolbar</span>
3117 
3118 
3119 <span class="comment">% --------------------------------------------------------------------</span>
3120 <a name="_sub91" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3121 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3122 <span class="comment">% already exist.</span>
3123 
3124 <span class="comment">% Preferences:</span>
3125 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3126 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3127 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3128 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3129 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3130 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3131 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3132 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3133 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3134 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3135 
3136 <span class="comment">% Originals</span>
3137 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3138 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3139 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3140 
3141 <span class="comment">% ASCII</span>
3142 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3143     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3144     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3145         guiprefs.ascii_path = ascii.path;
3146     <span class="keyword">else</span>
3147         guiprefs.ascii_path = pwd;
3148     <span class="keyword">end</span>
3149     does_exist = false(1,length(ascii.file));
3150     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3151         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3152     <span class="keyword">end</span>
3153     <span class="keyword">if</span> any(does_exist)
3154         guiprefs.ascii_file = ascii.file(does_exist);
3155     <span class="keyword">else</span>
3156         guiprefs.ascii_file = {<span class="string">''</span>};
3157     <span class="keyword">end</span>
3158 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3159     guiprefs.ascii_path = pwd;
3160     guiprefs.ascii_file = {<span class="string">''</span>};
3161     
3162     ascii.path = pwd;
3163     ascii.file = {<span class="string">''</span>};
3164     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3165 <span class="keyword">end</span>
3166 
3167 <span class="comment">% MAT</span>
3168 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3169     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3170     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3171         guiprefs.mat_path = mat.path;
3172     <span class="keyword">else</span>
3173         guiprefs.mat_path = pwd;
3174     <span class="keyword">end</span>
3175     
3176     <span class="keyword">if</span> iscell(mat.file)
3177         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3178             guiprefs.mat_file = mat.file;
3179         <span class="keyword">else</span>
3180             guiprefs.mat_file = <span class="string">''</span>;
3181         <span class="keyword">end</span>
3182     <span class="keyword">else</span>
3183         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3184             guiprefs.mat_file = mat.file;
3185         <span class="keyword">else</span>
3186             guiprefs.mat_file = <span class="string">''</span>;
3187         <span class="keyword">end</span>
3188     <span class="keyword">end</span>
3189 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3190     guiprefs.mat_path = pwd;
3191     guiprefs.mat_file = <span class="string">''</span>;
3192     
3193     mat.path = pwd;
3194     mat.file = <span class="string">''</span>;
3195     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3196 <span class="keyword">end</span>
3197 
3198 <span class="comment">% TECPLOT</span>
3199 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3200     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3201     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3202         guiprefs.tecplot_path = tecplot.path;
3203     <span class="keyword">else</span>
3204         guiprefs.tecplot_path = pwd;
3205     <span class="keyword">end</span>
3206     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3207         guiprefs.tecplot_file = tecplot.file;
3208     <span class="keyword">else</span>
3209         guiprefs.tecplot_file = <span class="string">''</span>;
3210     <span class="keyword">end</span>
3211 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3212     guiprefs.tecplot_path = pwd;
3213     guiprefs.tecplot_file = <span class="string">''</span>;
3214     
3215     tecplot.path = pwd;
3216     tecplot.file = <span class="string">''</span>;
3217     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3218 <span class="keyword">end</span>
3219 
3220 <span class="comment">% KMZ</span>
3221 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3222     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3223     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3224         guiprefs.kmz_path = kmz.path;
3225     <span class="keyword">else</span>
3226         guiprefs.kmz_path = pwd;
3227     <span class="keyword">end</span>
3228     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3229         guiprefs.kmz_file = kmz.file;
3230     <span class="keyword">else</span>
3231         guiprefs.kmz_file = <span class="string">''</span>;
3232     <span class="keyword">end</span>
3233 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3234     guiprefs.kmz_path = pwd;
3235     guiprefs.kmz_file = <span class="string">''</span>;
3236     
3237     kmz.path = pwd;
3238     kmz.file = <span class="string">''</span>;
3239     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3240 <span class="keyword">end</span>
3241 
3242 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3243 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3244     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3245     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3246         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3247     <span class="keyword">else</span>
3248         guiprefs.multibeambathymetry_path = pwd;
3249     <span class="keyword">end</span>
3250     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3251         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3252     <span class="keyword">else</span>
3253         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3254     <span class="keyword">end</span>
3255 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3256     guiprefs.multibeambathymetry_path = pwd;
3257     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3258     
3259     multibeambathymetry.path = pwd;
3260     multibeambathymetry.file = <span class="string">''</span>;
3261     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3262 <span class="keyword">end</span>
3263 
3264 <span class="comment">% Log</span>
3265 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3266     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3267     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3268         guiprefs.log_path = log.path;
3269     <span class="keyword">else</span>
3270         guiprefs.log_path = pwd;
3271     <span class="keyword">end</span>
3272     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3273         guiprefs.log_file = log.file;
3274     <span class="keyword">else</span>
3275         guiprefs.log_file = <span class="string">''</span>;
3276     <span class="keyword">end</span>
3277 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3278     guiprefs.log_path = pwd;
3279     guiprefs.log_file = <span class="string">''</span>;
3280     
3281     log.path = pwd;
3282     log.file = <span class="string">''</span>;
3283     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3284 <span class="keyword">end</span>
3285 
3286 <span class="comment">% iRic</span>
3287 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3288     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3289     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3290         guiprefs.iric_path = iric.path;
3291     <span class="keyword">else</span>
3292         guiprefs.iric_path = pwd;
3293     <span class="keyword">end</span>
3294     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3295         guiprefs.iric_file = iric.file;
3296     <span class="keyword">else</span>
3297         guiprefs.iric_file = <span class="string">''</span>;
3298     <span class="keyword">end</span>
3299 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3300     guiprefs.iric_path = pwd;
3301     guiprefs.iric_file = <span class="string">''</span>;
3302     
3303     iric.path = pwd;
3304     iric.file = <span class="string">''</span>;
3305     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3306 <span class="keyword">end</span>
3307 
3308 <span class="comment">% excel</span>
3309 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3310     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3311     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3312         guiprefs.excel_path = excel.path;
3313     <span class="keyword">else</span>
3314         guiprefs.excel_path = pwd;
3315     <span class="keyword">end</span>
3316     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3317         guiprefs.excel_file = excel.file;
3318     <span class="keyword">else</span>
3319         guiprefs.excel_file = <span class="string">''</span>;
3320     <span class="keyword">end</span>
3321 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3322     guiprefs.excel_path = pwd;
3323     guiprefs.excel_file = <span class="string">''</span>;
3324     
3325     excel.path = pwd;
3326     excel.file = <span class="string">''</span>;
3327     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3328 <span class="keyword">end</span>
3329 
3330 <span class="comment">% aerial</span>
3331 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3332     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3333     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3334         guiprefs.aerial_path = aerial.path;
3335     <span class="keyword">else</span>
3336         guiprefs.aerial_path = pwd;
3337     <span class="keyword">end</span>
3338     does_exist = false(1,length(aerial.file));
3339     <span class="keyword">if</span> iscell(aerial.file)
3340     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3341         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3342     <span class="keyword">end</span>
3343     <span class="keyword">else</span>
3344         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3345     <span class="keyword">end</span>
3346     <span class="keyword">if</span> any(does_exist)
3347         guiprefs.aerial_file = aerial.file;
3348     <span class="keyword">else</span>
3349         guiprefs.aerial_file = {<span class="string">''</span>};
3350     <span class="keyword">end</span>
3351 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3352     guiprefs.aerial_path = pwd;
3353     guiprefs.aerial_file = {<span class="string">''</span>};
3354     
3355     aerial.path = pwd;
3356     aerial.file = {<span class="string">''</span>};
3357     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3358 <span class="keyword">end</span>
3359 
3360 <span class="comment">% shoreline</span>
3361 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3362     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3363     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3364         guiprefs.shoreline_path = shoreline.path;
3365     <span class="keyword">else</span>
3366         guiprefs.shoreline_path = pwd;
3367     <span class="keyword">end</span>
3368     
3369     <span class="keyword">if</span> iscell(shoreline.file)
3370         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3371             guiprefs.shoreline_file = shoreline.file;
3372         <span class="keyword">else</span>
3373             guiprefs.shoreline_file = <span class="string">''</span>;
3374         <span class="keyword">end</span>
3375     <span class="keyword">else</span>
3376         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3377             guiprefs.shoreline_file = shoreline.file;
3378         <span class="keyword">else</span>
3379             guiprefs.shoreline_file = <span class="string">''</span>;
3380         <span class="keyword">end</span>
3381     <span class="keyword">end</span>
3382 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3383     guiprefs.shoreline_path = pwd;
3384     guiprefs.shoreline_file = <span class="string">''</span>;
3385     
3386     shoreline.path = pwd;
3387     shoreline.file = <span class="string">''</span>;
3388     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3389 <span class="keyword">end</span>
3390 <span class="comment">% guiprefs.presentation = true;</span>
3391 <span class="comment">% guiprefs.print        = false;</span>
3392 
3393 <span class="comment">% for k = 1:length(prefs)</span>
3394 <span class="comment">%     newpref = '';</span>
3395 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3396 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3397 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3398 <span class="comment">%             newpref = stored_newpref;</span>
3399 <span class="comment">%         else</span>
3400 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3401 <span class="comment">%         end</span>
3402 <span class="comment">%     end</span>
3403 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3404 <span class="comment">% end</span>
3405 
3406 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3407 
3408 <span class="comment">% [EOF] load_prefs</span>
3409 
3410 
3411 <span class="comment">% --------------------------------------------------------------------</span>
3412 <a name="_sub92" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3413 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3414 <span class="comment">% preferences data.</span>
3415 
3416 <span class="comment">% Preferences:</span>
3417 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3418 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3419 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3420 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3421 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3422 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3423 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3424 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3425 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3426 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3427 
3428 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3429 
3430 <span class="keyword">switch</span> pref
3431     <span class="keyword">case</span> <span class="string">'ascii'</span>
3432         ascii.path = guiprefs.ascii_path;
3433         ascii.file = guiprefs.ascii_file;
3434         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3435     <span class="keyword">case</span> <span class="string">'mat'</span>
3436         mat.path = guiprefs.mat_path;
3437         mat.file = guiprefs.mat_file;
3438         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3439     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3440         tecplot.path = guiprefs.tecplot_path;
3441         tecplot.file = guiprefs.tecplot_file;
3442         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3443     <span class="keyword">case</span> <span class="string">'kmz'</span>
3444         kmz.path = guiprefs.kmz_path;
3445         kmz.file = guiprefs.kmz_file;
3446         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3447     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3448         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3449         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3450         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3451     <span class="keyword">case</span> <span class="string">'log'</span>
3452         log.path = guiprefs.log_path;
3453         log.file = guiprefs.log_file;
3454         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3455     <span class="keyword">case</span> <span class="string">'iric'</span>
3456         iric.path = guiprefs.iric_path;
3457         iric.file = guiprefs.iric_file;
3458         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3459     <span class="keyword">case</span> <span class="string">'excel'</span>
3460         excel.path = guiprefs.excel_path;
3461         excel.file = guiprefs.excel_file;
3462         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3463     <span class="keyword">case</span> <span class="string">'aerial'</span>
3464         aerial.path = guiprefs.aerial_path;
3465         aerial.file = guiprefs.aerial_file;
3466         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3467     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3468         shoreline.path = guiprefs.shoreline_path;
3469         shoreline.file = guiprefs.shoreline_file;
3470         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3471     <span class="keyword">otherwise</span>
3472 <span class="keyword">end</span>
3473 
3474 <span class="comment">% if ismember(pref,prefs)</span>
3475 <span class="comment">%     setpref('VMT',pref,value)</span>
3476 <span class="comment">%</span>
3477 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3478 <span class="comment">%     guiprefs.(pref) = value;</span>
3479 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3480 <span class="comment">% end</span>
3481 
3482 <span class="comment">% [EOF] store_prefs</span>
3483 
3484 
3485 <span class="comment">% --------------------------------------------------------------------</span>
3486 <a name="_sub93" href="#_subfunctions" class="code">function initGUI(handles)</a>
3487 <span class="comment">% Initialize the UI controls in the GUI.</span>
3488 
3489 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3490 
3491 <span class="comment">% Set the name and version</span>
3492 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3493     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3494 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3495 
3496 <span class="comment">% Set the PLOT 1 axis labels</span>
3497 axes(handles.Plot1Shiptracks);
3498 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3499 xlabel(<span class="string">'UTM Easting (m)'</span>)
3500 ylabel(<span class="string">'UTM Northing (m)'</span>)
3501 box on
3502 grid on
3503 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3504 
3505 <span class="comment">%%%%%%%%%%%%</span>
3506 <span class="comment">% MENU BAR %</span>
3507 <span class="comment">%%%%%%%%%%%%</span>
3508 <span class="keyword">if</span> guiparams.english_units
3509     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3510     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3511 <span class="keyword">else</span>
3512     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3513     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3514 <span class="keyword">end</span>
3515 
3516 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3517     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3518     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3519 <span class="keyword">else</span>
3520     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3521     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3522 <span class="keyword">end</span>
3523 
3524 
3525 <span class="keyword">if</span> guiparams.print
3526     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3527     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3528     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3529     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3530 <span class="keyword">elseif</span> guiparams.presentation
3531     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3532     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3533     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3534     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3535 <span class="keyword">else</span>
3536 <span class="keyword">end</span>
3537 
3538 <span class="keyword">switch</span> guiparams.renderer
3539     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
3540         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3541         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3542         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3543     <span class="keyword">case</span> <span class="string">'painters'</span>
3544         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3545         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3546         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3547     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
3548         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3549         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3550         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3551 <span class="keyword">end</span>
3552 
3553 
3554 <span class="comment">%%%%%%%%%%%%%%%</span>
3555 <span class="comment">% DATA EXPORT %</span>
3556 <span class="comment">%%%%%%%%%%%%%%%</span>
3557 <span class="comment">% BathymetryPanel</span>
3558 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3559 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3560 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3561 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3562 
3563 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3564 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3565 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3566 <span class="comment">% PlanViewPanel</span>
3567 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3568 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3569 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3570 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3571 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3572 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3573 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3574 
3575 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3576 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3577 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3578 <span class="comment">% ShiptracksPanel</span>
3579 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3580 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3581 
3582 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3583 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3584 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3585 <span class="comment">% CrossSectionsPanel</span>
3586 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3587     <span class="string">'Value'</span>, guiparams.idx_contour)
3588 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3589 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3590 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3591 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3592 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3593 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3594 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3595 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3596     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3597 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3598 
3599 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3600 
3601 <span class="comment">% [EOF] initGUI</span>
3602 
3603 
3604 <span class="comment">% --------------------------------------------------------------------</span>
3605 <a name="_sub94" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3606 
3607 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3608 
3609 <span class="keyword">switch</span> enable_state
3610     <span class="keyword">case</span> <span class="string">'init'</span>
3611         set([handles.menuFile
3612             handles.menuOpen
3613             handles.menuOpenASCII
3614             handles.menuOpenMAT
3615             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3616         
3617         set([handles.toolbarLoadData
3618             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3619         set([handles.toolbarSaveMatFile
3620             handles.toolbarSaveBathymetry
3621             handles.toolbarSaveFigures
3622             handles.toolbarSaveExcel
3623             handles.toolbarPlottingParameters
3624             handles.toolbarProcessingParameters
3625             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3626         
3627         set([handles.DepthRangeMin
3628             handles.DepthRangeMax
3629             handles.VectorScalePlanView
3630             handles.VectorSpacingPlanview
3631             handles.SmoothingWindowSize
3632             handles.DisplayShoreline
3633             handles.AddBackground
3634             handles.PlotPlanView
3635             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3636         
3637         set([handles.HorizontalGridNodeSpacing
3638             handles.PlotShiptracks
3639             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3640         
3641         set([handles.Contour
3642             handles.VerticalExaggeration
3643             handles.VectorScaleCrossSection
3644             handles.HorizontalVectorSpacing
3645             handles.VerticalVectorSpacing
3646             handles.HorizontalSmoothingWindow
3647             handles.VerticalSmoothingWindow
3648             handles.PlotSecondaryFlowVectors
3649             handles.SecondaryFlowVectorVariable
3650             handles.IncludeVerticalVelocity
3651             handles.PlotCrossSection
3652             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3653         
3654     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3655         set([handles.menuFile
3656             handles.menuOpen
3657             handles.menuOpenASCII
3658             handles.menuOpenMAT
3659             handles.menuSaveMAT
3660             handles.menuSaveTecplot
3661             handles.menuSaveKMZFile
3662             handles.menuParameters
3663             handles.menuPlottingParameters
3664             handles.menuMetric
3665             handles.menuEnglish
3666             handles.menuBathymetryExportSettings
3667             handles.menuExportMultibeamBathymetry
3668             handles.menuKMZVerticalOffset
3669             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3670         
3671         set([handles.toolbarLoadData
3672             handles.toolbarSaveMatFile
3673             handles.toolbarSaveBathymetry
3674             handles.toolbarSaveExcel
3675             handles.toolbarSaveFigures
3676             handles.toolbarPlottingParameters
3677             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3678         set([handles.toolbarProcessingParameters
3679             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3680         
3681            
3682         set([handles.DepthRangeMin
3683             handles.DepthRangeMax
3684             handles.VectorScalePlanView
3685             handles.VectorSpacingPlanview
3686             handles.SmoothingWindowSize
3687             handles.DisplayShoreline
3688             handles.PlotPlanView
3689             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3690         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3691             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3692         <span class="keyword">else</span>
3693             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3694         <span class="keyword">end</span>
3695         
3696         set([handles.HorizontalGridNodeSpacing
3697             handles.PlotShiptracks
3698             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3699         
3700         set([handles.Contour
3701             handles.VerticalExaggeration
3702             handles.VectorScaleCrossSection
3703             handles.HorizontalVectorSpacing
3704             handles.VerticalVectorSpacing
3705             handles.HorizontalSmoothingWindow
3706             handles.VerticalSmoothingWindow
3707             handles.PlotSecondaryFlowVectors
3708             handles.SecondaryFlowVectorVariable
3709             handles.IncludeVerticalVelocity
3710             handles.PlotCrossSection
3711             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3712     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
3713         set([handles.menuFile
3714             handles.menuOpen
3715             handles.menuOpenASCII
3716             handles.menuOpenMAT
3717             handles.menuParameters
3718             handles.menuPlottingParameters
3719             handles.menuMetric
3720             handles.menuEnglish
3721             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3722         set([handles.menuSaveMAT
3723             handles.menuBathymetryExportSettings
3724             handles.menuExportMultibeamBathymetry
3725             handles.menuKMZVerticalOffset
3726             handles.menuSaveKMZFile
3727             handles.menuSaveTecplot
3728             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3729         
3730         set([handles.toolbarLoadData
3731             handles.toolbarSaveFigures
3732             handles.toolbarPlottingParameters
3733             handles.toolbarSaveExcel
3734             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3735         set([handles.toolbarProcessingParameters
3736             handles.toolbarSaveMatFile
3737             handles.toolbarSaveBathymetry
3738             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3739         
3740         set([handles.DepthRangeMin
3741             handles.DepthRangeMax
3742             handles.VectorScalePlanView
3743             handles.VectorSpacingPlanview
3744             handles.SmoothingWindowSize
3745             handles.DisplayShoreline
3746             handles.PlotPlanView
3747             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3748         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3749             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3750         <span class="keyword">else</span>
3751             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3752         <span class="keyword">end</span>
3753         
3754         set([handles.HorizontalGridNodeSpacing
3755             handles.PlotShiptracks
3756             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3757         
3758         set([handles.Contour
3759             handles.VerticalExaggeration
3760             handles.VectorScaleCrossSection
3761             handles.HorizontalVectorSpacing
3762             handles.VerticalVectorSpacing
3763             handles.HorizontalSmoothingWindow
3764             handles.VerticalSmoothingWindow
3765             handles.PlotSecondaryFlowVectors
3766             handles.SecondaryFlowVectorVariable
3767             handles.IncludeVerticalVelocity
3768             handles.PlotCrossSection
3769             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3770     <span class="keyword">otherwise</span>
3771 <span class="keyword">end</span>
3772 
3773 <span class="comment">% [EOF] set_enable</span>
3774 
3775 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
3776 
3777 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
3778 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
3779 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
3780 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3781 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3782 
3783 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
3784 
3785 
3786 <span class="comment">% --------------------------------------------------------------------</span>
3787 <a name="_sub95" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
3788     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
3789 
3790 w = 500;
3791 h = 110;
3792 dx = 10;
3793 dy = 35;
3794 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3795 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3796     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3797     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3798     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3799     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3800     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3801     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3802     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3803     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3804     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3805     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3806 dialog_params.english_units               = english_units;
3807 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
3808 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
3809 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
3810 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3811 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
3812 
3813 <span class="comment">% Build the graphics:</span>
3814 <span class="comment">% -------------------</span>
3815 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3816     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
3817     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3818     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
3819 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3820     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
3821     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
3822     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3823     <span class="string">'Position'</span>,[15 35 100 22]);
3824 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3825     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
3826     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
3827     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3828     <span class="string">'Position'</span>,[15 10 100 22]);
3829 
3830 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3831     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
3832     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3833     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
3834 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3835     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
3836     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
3837     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3838     <span class="string">'Position'</span>,[15 35 100 22]);
3839 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3840     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
3841     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
3842     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3843     <span class="string">'Position'</span>,[15 10 100 22]);
3844 
3845 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3846     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
3847     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3848     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
3849 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3850     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
3851     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
3852     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3853     <span class="string">'Position'</span>,[15 35 100 22]);
3854 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3855     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
3856     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
3857     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3858     <span class="string">'Position'</span>,[15 10 100 22]);
3859 
3860 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3861     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3862     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
3863     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3864     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
3865 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3866     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3867     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
3868     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3869     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
3870 
3871 <span class="comment">% Update the UI controls:</span>
3872 <span class="comment">% -----------------------</span>
3873 <span class="keyword">if</span> dialog_params.english_units
3874     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
3875     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
3876 <span class="keyword">else</span>
3877     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
3878     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
3879 <span class="keyword">end</span>
3880 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
3881     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
3882     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
3883 <span class="keyword">else</span>
3884     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
3885     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
3886 <span class="keyword">end</span>
3887 <span class="keyword">if</span> dialog_params.presentation
3888     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
3889     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
3890 <span class="keyword">else</span>
3891     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
3892     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
3893 <span class="keyword">end</span>
3894 
3895 <span class="comment">% Set the callbacks:</span>
3896 <span class="comment">% ------------------</span>
3897 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub101" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
3898 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub96" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
3899 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub96" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
3900 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
3901 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
3902 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
3903 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
3904 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
3905 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
3906 
3907 <span class="comment">% Position the dialog and make it visible:</span>
3908 <span class="comment">% ----------------------------------------</span>
3909 fpos = get(hf,<span class="string">'Position'</span>);
3910 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
3911 movegui(handles.Figure,dpos)
3912 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
3913 
3914 <span class="comment">% Hold the dialog open:</span>
3915 <span class="comment">% ---------------------</span>
3916 waitfor(handles.OK)
3917 
3918 <span class="comment">% Return the outputs and close the dialog:</span>
3919 <span class="comment">% ----------------------------------------</span>
3920 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3921 english_units = dialog_params.english_units;
3922 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
3923 plot_presentation_style =  dialog_params.presentation;
3924 plot_print_style =  dialog_params.print;
3925 
3926 delete(handles.Figure)
3927 
3928 <span class="comment">% [EOF] plotParametersDialog</span>
3929 
3930 
3931 <span class="comment">% --------------------------------------------------------------------</span>
3932 <a name="_sub96" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
3933 
3934 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3935 <span class="keyword">switch</span> the_units
3936     <span class="keyword">case</span> <span class="string">'metric'</span>
3937         dialog_params.english_units = false;
3938         
3939         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
3940         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
3941     <span class="keyword">case</span> <span class="string">'english'</span>
3942         dialog_params.english_units = true;
3943         
3944         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
3945         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
3946     <span class="keyword">otherwise</span>
3947 <span class="keyword">end</span>
3948 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3949 
3950 <span class="comment">% [EOF] dialogUnits</span>
3951 
3952 <span class="comment">% --------------------------------------------------------------------</span>
3953 <a name="_sub97" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
3954 
3955 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3956 <span class="keyword">switch</span> the_endpoints
3957     <span class="keyword">case</span> <span class="string">'auto'</span>
3958         dialog_params.set_cross_section_endpoints = false;
3959         
3960         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
3961         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
3962     <span class="keyword">case</span> <span class="string">'manual'</span>
3963         dialog_params.set_cross_section_endpoints = true;
3964         
3965         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
3966         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
3967     <span class="keyword">otherwise</span>
3968 <span class="keyword">end</span>
3969 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3970 
3971 <span class="comment">% [EOF] dialogEnpoints</span>
3972 
3973 <a name="_sub98" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
3974 
3975 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3976 <span class="keyword">switch</span> the_style
3977     <span class="keyword">case</span> <span class="string">'presentation'</span>
3978         dialog_params.presentation  = true;
3979         dialog_params.print         = false;
3980         
3981         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
3982         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
3983     <span class="keyword">case</span> <span class="string">'print'</span>
3984         dialog_params.presentation  = false;
3985         dialog_params.print         = true;
3986         
3987         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
3988         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
3989     <span class="keyword">otherwise</span>
3990 <span class="keyword">end</span>
3991 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3992 
3993 <span class="comment">% [EOF] dialogEnpoints</span>
3994 
3995 <span class="comment">% --------------------------------------------------------------------</span>
3996 <a name="_sub99" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
3997 
3998 delete(h_OK)
3999 
4000 <span class="comment">% [EOF] dialogOK</span>
4001 
4002 <span class="comment">% --------------------------------------------------------------------</span>
4003 <a name="_sub100" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
4004 <span class="comment">% Return the original inputs</span>
4005 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
4006 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4007 delete(handles.OK)
4008 
4009 <span class="comment">% [EOF] dialogCancel</span>
4010 
4011 <span class="comment">% --------------------------------------------------------------------</span>
4012 <a name="_sub101" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
4013 
4014 delete(h_OK)
4015 
4016 <span class="comment">% [EOF] dialogCloseReq</span>
4017 
4018 <a name="_sub102" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
4019 w = 230;
4020 h = 200;
4021 dx = 10;
4022 dy = 35;
4023 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4024 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
4025     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4026     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4027     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4028     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4029     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4030     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4031     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4032     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4033     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4034     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4035 dialog_params.beam_angle             = beam_angle;
4036 dialog_params.magnetic_variation     = magnetic_variation;
4037 dialog_params.wse                    = wse;
4038 dialog_params.output_auxiliary_data = output_auxiliary_data;
4039 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4040 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4041 
4042 <span class="comment">% Build the graphics:</span>
4043 <span class="comment">% -------------------</span>
4044 ph = 150;
4045 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4046     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
4047     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4048     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4049 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4050     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4051     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
4052     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4053     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4054     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4055     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
4056 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4057     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4058     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
4059     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
4060     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4061     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4062     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
4063 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4064     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4065     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4066     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4067     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4068     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4069     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4070 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4071     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4072     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4073     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4074     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4075     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4076     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4077 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4078     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4079     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4080     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4081     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4082     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4083     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4084 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4085     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4086     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4087     <span class="string">'String'</span>,wse,<span class="keyword">...</span>
4088     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4089     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4090     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4091 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4092     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4093     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4094     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4095     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4096 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4097     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4098     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4099     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4100     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4101 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4102     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4103     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4104     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4105     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4106 
4107 <span class="comment">% Update the UI controls:</span>
4108 <span class="comment">% -----------------------</span>
4109 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4110 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4111 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4112 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4113 
4114 <span class="comment">% Set the callbacks:</span>
4115 <span class="comment">% ------------------</span>
4116 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub101" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4117 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4118 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4119 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4120 set(handles.OutputauxiliaryData,        <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4121 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4122 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4123 
4124 <span class="comment">% Position the dialog and make it visible:</span>
4125 <span class="comment">% ----------------------------------------</span>
4126 fpos = get(hf,<span class="string">'Position'</span>);
4127 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4128 movegui(handles.Figure,dpos)
4129 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4130 
4131 <span class="comment">% Hold the dialog open:</span>
4132 <span class="comment">% ---------------------</span>
4133 waitfor(handles.OK)
4134 
4135 <span class="comment">% Return the outputs and close the dialog:</span>
4136 <span class="comment">% ----------------------------------------</span>
4137 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4138 beam_angle              = dialog_params.beam_angle;
4139 magnetic_variation      = dialog_params.magnetic_variation;
4140 wse                     = str2double(dialog_params.wse);
4141 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
4142 
4143 delete(handles.Figure)
4144 
4145 <span class="comment">% [EOF] exportSettingsDialog</span>
4146 
4147 <span class="comment">% --------------------------------------------------------------------</span>
4148 <a name="_sub103" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4149 
4150 <span class="comment">% Grab the current data</span>
4151 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4152 
4153 <span class="comment">% Set it according to the dialog box values</span>
4154 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4155 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4156 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4157 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
4158 
4159 <span class="comment">% Re-store the application data</span>
4160 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4161 
4162 <span class="comment">% [EOF] dialogExportSettings</span>
4163 
4164 <a name="_sub104" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4165 
4166 w = 230;
4167 h = 200;
4168 dx = 10;
4169 dy = 35;
4170 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4171 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4172     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4173     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4174     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4175     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4176     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4177     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4178     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4179     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4180     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4181     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4182 dialog_params.figure_names               = figure_names;
4183 dialog_params.selected_figures           = <span class="string">''</span>;
4184 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4185 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4186 
4187 <span class="comment">% Build the graphics:</span>
4188 <span class="comment">% -------------------</span>
4189 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4190     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4191     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4192     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4193 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4194     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4195     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4196     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4197     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4198     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4199     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4200     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4201 
4202 
4203 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4204     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4205     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4206     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4207     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4208 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4209     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4210     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4211     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4212     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4213 
4214 <span class="comment">% Update the UI controls:</span>
4215 <span class="comment">% -----------------------</span>
4216 
4217 
4218 <span class="comment">% Set the callbacks:</span>
4219 <span class="comment">% ------------------</span>
4220 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub101" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4221 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub105" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4222 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4223 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4224 
4225 <span class="comment">% Position the dialog and make it visible:</span>
4226 <span class="comment">% ----------------------------------------</span>
4227 fpos = get(hf,<span class="string">'Position'</span>);
4228 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4229 movegui(handles.Figure,dpos)
4230 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4231 
4232 <span class="comment">% Hold the dialog open:</span>
4233 <span class="comment">% ---------------------</span>
4234 waitfor(handles.OK)
4235 
4236 <span class="comment">% Return the outputs and close the dialog:</span>
4237 <span class="comment">% ----------------------------------------</span>
4238 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4239 selected_figures = dialog_params.selected_figures;
4240 
4241 delete(handles.Figure)
4242 
4243 <span class="comment">% [EOF] openFiguresDialog</span>
4244 
4245 <span class="comment">% --------------------------------------------------------------------</span>
4246 <a name="_sub105" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4247 
4248 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4249 
4250 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4251 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4252 selected     = fig_names(idx_selected);
4253 dialog_params.selected_figures = selected;
4254 
4255 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4256 
4257 
4258 
4259 <span class="comment">% --------------------------------------------------------------------</span>
4260 <a name="_sub106" href="#_subfunctions" class="code">function icons = getIcons</a>
4261 
4262 <span class="comment">% Load data</span>
4263 idx = 1;
4264 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4265     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4266     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4267     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4268     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4269     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4270     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4271     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4272     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4273     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4274     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4275     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4276     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4277     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4278     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4279     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4280     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4281 
4282 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4283     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4284     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4285     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4286     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4287     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4288     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4289     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4290     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4291     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4292     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4293     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4294     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4295     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4296     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4297     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4298     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4299 
4300 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4301     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4302     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4303     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4304     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4305     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4306     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4307     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4308     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4309     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4310     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4311     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4312     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4313     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4314     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4315     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4316     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4317 
4318 <span class="comment">% Save data</span>
4319 idx = idx+1;
4320 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4321     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4322     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4323     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4324     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4325     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4326     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4327     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4328     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4329     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4330     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4331     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4332     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4333     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4334     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4335     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4336     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4337 
4338 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4339     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4340     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4341     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4342     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4343     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4344     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4345     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4346     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4347     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4348     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4349     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4350     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4351     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4352     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4353     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4354     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4355 
4356 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4357     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4358     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4359     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4360     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4361     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4362     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4363     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4364     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4365     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4366     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4367     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4368     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4369     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4370     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4371     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4372     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4373 
4374 <span class="comment">% Plotting parameters</span>
4375 idx = idx+1;
4376 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4377     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4378     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4379     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4380     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4381     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4382     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4383     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4384     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4385     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4386     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4387     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4388     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4389     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4390     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4391     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4392     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4393 
4394 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4395     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4396     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4397     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4398     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4399     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4400     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4401     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4402     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4403     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4404     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4405     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4406     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4407     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4408     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4409     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4410     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4411 
4412 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4413     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4414     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4415     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4416     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4417     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4418     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4419     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4420     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4421     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4422     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4423     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4424     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4425     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4426     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4427     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4428     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4429 
4430 <span class="comment">% Processing parameters</span>
4431 idx = idx+1;
4432 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4433     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4434     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4435     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4436     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4437     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4438     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4439     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4440     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4441     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4442     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4443     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4444     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4445     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4446     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4447     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4448     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4449 
4450 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4451     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4452     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4453     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4454     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4455     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4456     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4457     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4458     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4459     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4460     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4461     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4462     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4463     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4464     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4465     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4466     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4467 
4468 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4469     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4470     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4471     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4472     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4473     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4474     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4475     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4476     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4477     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4478     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4479     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4480     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4481     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4482     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4483     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4484     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4485 
4486 <span class="comment">% Export bathymetry dialog</span>
4487 idx = idx+1;
4488 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4489     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4490     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4491     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4492     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4493     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4494     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4495     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4496     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4497     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4498     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4499     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4500     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4501     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4502     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4503     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4504     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4505     ]/255;
4506 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4507     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4508     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4509     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4510     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4511     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4512     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4513     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4514     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4515     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4516     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4517     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4518     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4519     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4520     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4521     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4522     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4523     ]/255;
4524 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4525     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4526     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4527     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4528     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4529     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4530     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4531     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4532     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4533     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4534     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4535     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4536     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4537     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4538     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4539     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4540     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4541     ]/255;
4542 
4543 <span class="comment">% Export Figures Dialog</span>
4544 idx = idx + 1;
4545 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4546     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4547     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4548     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4549     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4550     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4551     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4552     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4553     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4554     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4555     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4556     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4557     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4558     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4559     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4560     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4561 
4562 
4563 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4564     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4565     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4566     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4567     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4568     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4569     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4570     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4571     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4572     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4573     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4574     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4575     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4576     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4577     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4578     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4579 
4580 
4581 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4582     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4583     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4584     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4585     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4586     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4587     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4588     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4589     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4590     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4591     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4592     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4593     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4594     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4595     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4596     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4597 
4598 <span class="comment">% Export Excel File</span>
4599 idx = idx + 1;
4600 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4601     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4602    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4603    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4604    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4605    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4606    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4607    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4608    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4609    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4610    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4611    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4612    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4613    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4614    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4615    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4616     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4617 
4618 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4619     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4620    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4621    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4622    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4623    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4624    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4625    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4626    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4627    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4628    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4629    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4630    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4631    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4632    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4633    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4634     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4635 
4636 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4637     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4638    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4639    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4640    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4641    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4642    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4643    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4644    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4645    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4646    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4647    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4648    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4649    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4650    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4651    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4652     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4653 
4654 <span class="comment">% Zoom In</span>
4655 idx = idx + 1;
4656 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4657     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4658 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4659     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4660 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4661     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4662 
4663 <span class="comment">% Zoom Out</span>
4664 idx = idx + 1;
4665 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4666     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4667 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4668     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4669 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4670     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4671 
4672 <span class="comment">% Pan</span>
4673 idx = idx + 1;
4674 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4675     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4676 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4677     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4678 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4679     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4680 <span class="comment">% [EOF] getIcons</span>
4681 
4682 <a name="_sub107" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4683 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4684 
4685 <span class="comment">% Organized by GUI panels</span>
4686 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4687 <span class="comment">% SHIPTRACKS PLOT %</span>
4688 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4689 guiparams.horizontal_grid_node_spacing       = 1.0;
4690 
4691 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4692 <span class="comment">% CROSS SECTION PLOT %</span>
4693 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4694 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4695 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4696 guiparams.idx_contour                        = 1;
4697 guiparams.vertical_exaggeration              = 10;
4698 guiparams.vector_scale_cross_section         = 0.2;
4699 guiparams.horizontal_vector_spacing          = 1;
4700 guiparams.vertical_vector_spacing            = 1;
4701 guiparams.horizontal_smoothing_window        = 1;
4702 guiparams.vertical_smoothing_window          = 1;
4703 guiparams.plot_secondary_flow_vectors        = true;
4704 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
4705 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
4706 guiparams.idx_secondary_flow_vector_variable = 1;
4707 guiparams.include_vertical_velocity          = true;
4708 
4709 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4710 <span class="comment">% PLAN VIEW PLOT %</span>
4711 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4712 guiparams.depth_range_min                    = 0;
4713 guiparams.depth_range_max                    = inf;
4714 guiparams.vector_scale_plan_view             = 1;
4715 guiparams.vector_spacing_plan_view           = 1;
4716 guiparams.smoothing_window_size              = 1;
4717 guiparams.display_shoreline                  = false;
4718 guiparams.add_background                     = false;
4719 
4720 <span class="comment">%%%%%%%%%%%%%%%</span>
4721 <span class="comment">% DATA EXPORT %</span>
4722 <span class="comment">%%%%%%%%%%%%%%%</span>
4723 guiparams.beam_angle                         = 20.0;
4724 guiparams.magnetic_variation                 = 0.0;
4725 guiparams.wse                                = 0.0;
4726 guiparams.output_auxiliary_data              = false;
4727 
4728 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4729 <span class="comment">% Contour variables %</span>
4730 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4731 idx = 1;
4732 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
4733 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
4734 idx = idx + 1;
4735 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
4736 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
4737 idx = idx + 1;
4738 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
4739 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
4740 idx = idx + 1;
4741 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
4742 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
4743 idx = idx + 1;
4744 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
4745 guiparams.contours(idx).variable = <span class="string">'east'</span>;
4746 idx = idx + 1;
4747 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
4748 guiparams.contours(idx).variable = <span class="string">'north'</span>;
4749 idx = idx + 1;
4750 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
4751 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
4752 idx = idx + 1;
4753 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
4754 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
4755 idx = idx + 1;
4756 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
4757 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
4758 idx = idx + 1;
4759 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
4760 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
4761 idx = idx + 1;
4762 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
4763 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
4764 idx = idx + 1;
4765 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
4766 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
4767 idx = idx + 1;
4768 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
4769 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
4770 idx = idx + 1;
4771 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
4772 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
4773 idx = idx + 1;
4774 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
4775 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
4776 idx = idx + 1;
4777 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
4778 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
4779 
4780 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
4781 
4782 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4783 <span class="comment">% Secondary Flow Vector Variables %</span>
4784 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4785 idx = 1;
4786 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
4787 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
4788 idx = idx + 1;
4789 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
4790 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
4791 idx = idx + 1;
4792 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
4793 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
4794 idx = idx + 1;
4795 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
4796 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
4797 idx = idx + 1;
4798 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
4799 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
4800 
4801 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
4802     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
4803 
4804 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4805 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
4806 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4807 <span class="comment">% Menu bar options</span>
4808 guiparams.presentation                       = true;
4809 guiparams.print                              = false;
4810 guiparams.set_cross_section_endpoints        = false;
4811 guiparams.unit_discharge_correction          = false;
4812 guiparams.english_units                      = false;
4813 guiparams.vertical_offset                    = 0;
4814 guiparams.renderer                           = <span class="string">'OpenGL'</span>;
4815 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
4816 <span class="comment">% guiparams.plot_planview                      = false;</span>
4817 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
4818 
4819 <span class="comment">% File location defaults</span>
4820 guiparams.ascii_path                        = pwd;
4821 guiparams.ascii_file                        = <span class="string">''</span>;
4822 guiparams.mat_path                          = pwd;
4823 guiparams.mat_file                          = <span class="string">''</span>;
4824 guiparams.tecplot_path                      = pwd;
4825 guiparams.tecplot_file                      = <span class="string">''</span>;
4826 guiparams.kmz_path                          = pwd;
4827 guiparams.kmz_file                          = <span class="string">''</span>;
4828 guiparams.multibeambathymetry_path          = pwd;
4829 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
4830 guiparams.log_path                          = pwd;
4831 guiparams.log_file                          = <span class="string">''</span>;
4832 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
4833 <span class="comment">% application</span>
4834 <span class="keyword">if</span> isdeployed 
4835     guiparams.has_mapping_toolbox           = true;
4836 <span class="keyword">else</span>
4837     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
4838         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
4839 <span class="keyword">end</span>
4840 
4841 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4842 <span class="comment">% IN MEMORY DATA STORAGE %</span>
4843 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4844 guiparams.z                      = [];
4845 guiparams.A                      = [];
4846 guiparams.V                      = [];
4847 guiparams.Map                    = [];
4848 guiparams.savefile               = [];
4849 guiparams.iric_anv_planview_data = [];
4850 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
4851 <span class="comment">% guiparams.zmax = [];</span>
4852 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
4853 guiparams.data_folder = <span class="string">''</span>;
4854 guiparams.data_files  = {<span class="string">''</span>};
4855 
4856 <span class="comment">% [EOF] createGUIparams</span>
4857 
4858 <a name="_sub108" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
4859 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
4860 
4861 <a name="_sub109" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
4862 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
4863 
4864 <span class="comment">% [EOF] VMT</span>
4865 
4866 
4867 
4868 
4869 
4870</pre></div>
<hr><address>Generated on Tue 18-Mar-2014 15:13:16 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>