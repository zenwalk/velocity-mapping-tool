<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html trunk -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuKMZExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function WSE_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub86" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub87" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub88" class="code">function initGUI(handles)</a></li><li><a href="#_sub89" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub90" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub91" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub92" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub93" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub94" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub95" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub96" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub97" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a></li><li><a href="#_sub98" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub99" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub100" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub101" class="code">function icons = getIcons</a></li><li><a href="#_sub102" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub103" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub104" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0037     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0038     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039     <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0045 <span class="keyword">try</span>
0046 <span class="keyword">if</span> nargout
0047     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">else</span>
0049     gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">catch</span> err
0053     <span class="keyword">if</span> isdeployed
0054         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0055             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0056         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0057             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0058             errLogFileName},<span class="keyword">...</span>
0059             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0060             <span class="string">'error'</span>);
0061         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0062         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0063         fclose(fid);
0064         rethrow(err)
0065     <span class="keyword">else</span>
0066         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0067             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0068             <span class="string">'error'</span>);
0069         rethrow(err);
0070     <span class="keyword">end</span>
0071 <span class="keyword">end</span>
0072 <span class="comment">% End initialization code - DO NOT EDIT</span>
0073 
0074 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0075 
0076 <span class="comment">% --- Executes just before VMT is made visible.</span>
0077 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0078 <span class="comment">% This function has no output args, see OutputFcn.</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0083 
0084 <span class="comment">% Choose default command line output for VMT</span>
0085 handles.output = hObject;
0086 
0087 <span class="comment">% Build the GUI toolbar:</span>
0088 <span class="comment">% ----------------------</span>
0089 handles = <a href="#_sub85" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0090 
0091 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0092 <span class="comment">% ----------------------------------------</span>
0093 <span class="keyword">if</span> ~isdeployed
0094     filesep = <span class="string">'\'</span>; <span class="comment">% windows</span>
0095     utilspath = [pwd filesep <span class="string">'utils'</span>];
0096     docspath  = [pwd filesep <span class="string">'doc'</span>];
0097     toolspath = [pwd filesep <span class="string">'tools'</span>];
0098     addpath(utilspath,docspath,toolspath)
0099 <span class="keyword">end</span>
0100 
0101 <span class="comment">% Update handles structure</span>
0102 <span class="comment">% ------------------------</span>
0103 guidata(hObject, handles);
0104 
0105 <span class="comment">% Load the GUI preferences:</span>
0106 <span class="comment">% -------------------------</span>
0107 <a href="#_sub86" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0108 
0109 <span class="comment">% Initialize the GUI parameters:</span>
0110 <span class="comment">% ------------------------------</span>
0111 guiparams = <a href="#_sub102" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0112 guiparams.vmt_version = <span class="string">'v4.04'</span>;
0113 
0114 <span class="comment">% Draw the VMT Background</span>
0115 <span class="comment">% -----------------</span>
0116 pos = get(handles.figure1,<span class="string">'position'</span>);
0117 axes(handles.VMTBackground);
0118 <span class="keyword">if</span> ~isdeployed <span class="comment">%isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0119     X = imread(<span class="string">'VMT_Background.png'</span>);
0120     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0121 <span class="keyword">else</span>
0122     X = imread(<span class="string">'VMT_Background.png'</span>);
0123     X = imresize(X, [pos(4) pos(3)]);
0124     X = uint8(X);
0125     imshow(X,<span class="string">'Border'</span>,<span class="string">'tight'</span>)
0126 <span class="keyword">end</span>
0127 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0128 
0129 <span class="comment">% Store the application data:</span>
0130 <span class="comment">% ---------------------------</span>
0131 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0132 
0133 <span class="comment">% Initialize the GUI:</span>
0134 <span class="comment">% -------------------</span>
0135 <a href="#_sub88" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0136 <a href="#_sub89" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0137 <span class="comment">% set(handles.GraphicsExportPanel,'Visible','off')</span>
0138 <span class="comment">% set(handles.ProcessingPanel,'Visible','off')</span>
0139 pos = get(handles.figure1,<span class="string">'Position'</span>);
0140 <span class="comment">% pos(3) = 545;</span>
0141 <span class="comment">% set(handles.figure1,'Position',pos)</span>
0142 movegui(handles.figure1,<span class="string">'center'</span>)
0143 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0144 
0145 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0146 <span class="comment">% the root</span>
0147 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0148 
0149 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0150 <span class="comment">% uiwait(handles.figure1);</span>
0151 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0152 
0153 
0154 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0155 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0156 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0157 <span class="comment">% hObject    handle to figure</span>
0158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0160 
0161 <span class="comment">% Get default command line output from handles structure</span>
0162 varargout{1} = handles.output;
0163 <span class="comment">% [EOF] VMT_OutputFcn</span>
0164 
0165 <span class="comment">% --- Executes when figure1 is resized.</span>
0166 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0167 
0168 <span class="comment">% Draw the VMT Background</span>
0169 <span class="comment">% -----------------</span>
0170 pos = get(handles.figure1,<span class="string">'position'</span>);
0171 axes(handles.VMTBackground);
0172 <span class="keyword">if</span> ~isdeployed <span class="comment">%isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0173     X = imread(<span class="string">'VMT_Background.png'</span>);
0174     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0175 <span class="keyword">else</span>
0176     X = imread(<span class="string">'VMT_Background.png'</span>);
0177     X = imresize(X, [pos(4) pos(3)]);
0178     X = uint8(X);
0179     imshow(X,<span class="string">'Border'</span>,<span class="string">'tight'</span>)
0180 <span class="keyword">end</span>
0181 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0182 
0183 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0184 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0185 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0186 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0187 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0188 
0189 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0190 close_button = questdlg(<span class="keyword">...</span>
0191     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0192     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0193 <span class="keyword">switch</span> close_button
0194     <span class="keyword">case</span> <span class="string">'Yes'</span>
0195         delete(hObject)
0196         close all hidden
0197     <span class="keyword">otherwise</span>
0198         <span class="keyword">return</span>
0199 <span class="keyword">end</span>
0200 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0201 
0202 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0203 <span class="comment">% MENU BAR CALLBACKS %</span>
0204 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0205 
0206 <span class="comment">% --------------------------------------------------------------------</span>
0207 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0208 <span class="comment">% Empty</span>
0209 
0210 <span class="comment">% --------------------------------------------------------------------</span>
0211 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0212 <span class="comment">% Empty</span>
0213 
0214 <span class="comment">% --------------------------------------------------------------------</span>
0215 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0216 <a href="#_sub45" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0217 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0221 
0222 <span class="comment">% Get the Application data:</span>
0223 <span class="comment">% -------------------------</span>
0224 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0225 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0226 
0227 <span class="comment">% Ask the user to select files:</span>
0228 <span class="comment">% -----------------------------</span>
0229 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0230 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0231 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0232     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0233 <span class="keyword">else</span>
0234     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0235 <span class="keyword">end</span>
0236 [filename,pathname] = <span class="keyword">...</span>
0237     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0238     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0239     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0240 
0241 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0242     <span class="comment">% Load the data:</span>
0243     <span class="comment">% --------------</span>
0244     vars = load(fullfile(pathname,filename));
0245     
0246     <span class="comment">% Make sure the selected file is a valid file:</span>
0247     <span class="comment">% --------------------------------------------</span>
0248     varnames = fieldnames(vars);
0249     <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0250         guiparams.mat_path = pathname;
0251         guiparams.mat_file = filename;
0252         guiparams.z = vars.z;
0253         guiparams.A = vars.A;
0254         guiparams.V = vars.V;
0255         
0256         <span class="comment">% Update the preferences:</span>
0257         <span class="comment">% -----------------------</span>
0258         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0259         guiprefs.mat_path = pathname;
0260         guiprefs.mat_file = filename;
0261         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0262         <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0263                      
0264         <span class="comment">% Re-store the Application Data:</span>
0265         <span class="comment">% ------------------------------</span>
0266         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0267         
0268         <span class="comment">% Update the GUI:</span>
0269         <span class="comment">% ---------------</span>
0270         set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0271         <a href="#_sub89" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0272     <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0273         errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0274             <span class="string">'Invalid File...'</span>)
0275     <span class="keyword">end</span>
0276     
0277 <span class="keyword">elseif</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0278     <span class="comment">% Set the filenames</span>
0279     <span class="comment">% -----------------</span>
0280     guiparams.mat_path = pathname;
0281     guiparams.mat_file = filename;
0282     
0283     <span class="comment">% Push status to log window</span>
0284     <span class="comment">% -------------------------</span>
0285     log_text = {<span class="keyword">...</span>
0286         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0287         <span class="string">'Directory:'</span>};
0288     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0289     statusLogging(handles.LogWindow,log_text)
0290     
0291     <span class="comment">% Update the Application Data:</span>
0292     <span class="comment">% ------------------------------</span>
0293     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0294     
0295     <span class="comment">% Update the persistent preferences:</span>
0296     <span class="comment">% ----------------------------------</span>
0297     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0298     guiprefs.mat_path = pathname;
0299     guiprefs.mat_file = filename;
0300     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0301     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0302         
0303     <span class="comment">% Update the GUI:</span>
0304     <span class="comment">% ---------------</span>
0305     <a href="#_sub89" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0306 <span class="keyword">end</span>
0307 
0308 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0309 
0310 <span class="comment">% --------------------------------------------------------------------</span>
0311 <a name="_sub9" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0312 <span class="comment">% Empty</span>
0313 
0314 <span class="comment">% --------------------------------------------------------------------</span>
0315 <a name="_sub10" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0316 <a href="#_sub46" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0317 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0318 
0319 <span class="comment">% --------------------------------------------------------------------</span>
0320 <a name="_sub11" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0321 <a href="#_sub54" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0322 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0323 
0324 <span class="comment">% --------------------------------------------------------------------</span>
0325 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0326 <a href="#_sub55" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0327 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0328 
0329 <span class="comment">% --------------------------------------------------------------------</span>
0330 <a name="_sub13" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0331 <span class="comment">% Empty</span>
0332 
0333 <span class="comment">% --------------------------------------------------------------------</span>
0334 <a name="_sub14" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0335 <span class="comment">% Empty</span>
0336 
0337 <span class="comment">% --------------------------------------------------------------------</span>
0338 <a name="_sub15" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0339 
0340 <span class="comment">% Get the Application Data:</span>
0341 <span class="comment">% -------------------------</span>
0342 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0343 
0344 <span class="comment">% Update the Application Data:</span>
0345 <span class="comment">% ----------------------------</span>
0346 guiparams.print        = true;
0347 guiparams.presentation = false;
0348 
0349 <span class="comment">% Re-store the Application data:</span>
0350 <span class="comment">% ------------------------------</span>
0351 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0352 
0353 <span class="comment">% Update the GUI:</span>
0354 <span class="comment">% ---------------</span>
0355 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0356 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0357 
0358 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0359 
0360 
0361 <span class="comment">% --------------------------------------------------------------------</span>
0362 <a name="_sub16" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0363 
0364 <span class="comment">% Get the Application Data:</span>
0365 <span class="comment">% -------------------------</span>
0366 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0367 
0368 <span class="comment">% Update the Application Data:</span>
0369 <span class="comment">% ----------------------------</span>
0370 guiparams.print        = false;
0371 guiparams.presentation = true;
0372 
0373 <span class="comment">% Re-store the Application data:</span>
0374 <span class="comment">% ------------------------------</span>
0375 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0376 
0377 <span class="comment">% Update the GUI:</span>
0378 <span class="comment">% ---------------</span>
0379 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0380 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0381 
0382 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0383 
0384 <span class="comment">% --------------------------------------------------------------------</span>
0385 <a name="_sub17" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0386 <span class="comment">% Get the Application data:</span>
0387 <span class="comment">% -------------------------</span>
0388 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0389 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0390 
0391 <span class="comment">% Find what plots exist already</span>
0392 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0393 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0394 
0395 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0396 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0397 <span class="keyword">if</span> ~isempty(idx)
0398     fig_names(idx) = [];
0399 <span class="keyword">end</span>
0400 
0401 <span class="keyword">if</span> guiparams.presentation
0402     figure_style = <span class="string">'presentation'</span>;
0403 <span class="keyword">else</span>
0404     figure_style = <span class="string">'print'</span>;
0405 <span class="keyword">end</span>
0406 
0407 [selected_figures] = <a href="#_sub99" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0408 
0409 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0410     <span class="keyword">return</span>
0411 <span class="keyword">else</span>
0412     <span class="keyword">for</span> i = 1:length(selected_figures)
0413         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0414     <span class="keyword">end</span>
0415 <span class="keyword">end</span>
0416 
0417 
0418 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0419 
0420 <span class="comment">% --------------------------------------------------------------------</span>
0421 <a name="_sub18" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0422 <span class="comment">% Get the Application data:</span>
0423 <span class="comment">% -------------------------</span>
0424 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0425 beam_angle             = guiparams.beam_angle; 
0426 magnetic_variation     = guiparams.magnetic_variation; 
0427 wse                    = guiparams.wse;
0428 output_auxiliary_data = guiparams.output_auxiliary_data; 
0429 
0430 <span class="comment">% Open dialog and allow user to select settings</span>
0431 <span class="comment">% ---------------------------------------------</span>
0432 [beam_angle,<span class="keyword">...</span>
0433     magnetic_variation,<span class="keyword">...</span>
0434     wse,<span class="keyword">...</span>
0435     output_auxiliary_data] = <span class="keyword">...</span>
0436     <a href="#_sub97" class="code" title="subfunction [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)">exportSettingsDialog</a>(beam_angle,magnetic_variation,wse,output_auxiliary_data,handles.figure1);
0437 
0438 <span class="comment">% Re-store the Application data:</span>
0439 <span class="comment">% ------------------------------</span>
0440 guiparams.beam_angle            = beam_angle;
0441 guiparams.magnetic_variation    = magnetic_variation; 
0442 guiparams.wse                   = wse;
0443 guiparams.output_auxiliary_data = output_auxiliary_data;
0444 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0445 
0446 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0447 
0448 <span class="comment">% --------------------------------------------------------------------</span>
0449 <a name="_sub19" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0450 <a href="#_sub56" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0451 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0452 
0453 
0454 <span class="comment">% --------------------------------------------------------------------</span>
0455 <a name="_sub20" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0456 
0457 <span class="comment">% Get the Application Data:</span>
0458 <span class="comment">% -------------------------</span>
0459 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0460 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0461 PVdata    = guiparams.iric_anv_planview_data;
0462 iric_path = guiprefs.iric_path;
0463 iric_file = guiprefs.iric_file;
0464 
0465 <span class="comment">% Is there any planview data?</span>
0466 <span class="keyword">if</span> isempty(PVdata)
0467     <span class="comment">% Nothing to do, warn user</span>
0468     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0469     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0470 <span class="keyword">else</span>
0471     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0472     <span class="comment">% and smoothing (for iRiC)</span>
0473     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0474     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0475         fullfile(iric_path,iric_file));
0476     
0477     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0478         outfile = fullfile(iric_path,iric_file);
0479         log_text = vertcat(log_text,{outfile});
0480         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0481         outcount = fprintf(ofid,<span class="keyword">...</span>
0482             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0483         fclose(ofid);
0484     <span class="keyword">else</span>
0485         <span class="comment">% Return default iric_path and iric_file</span>
0486         iric_path = guiprefs.iric_path;
0487         iric_file = guiprefs.iric_file;
0488     <span class="keyword">end</span>
0489 <span class="keyword">end</span>
0490 
0491 <span class="comment">% Push messages to Log Window:</span>
0492 <span class="comment">% ----------------------------</span>
0493 statusLogging(handles.LogWindow, log_text)
0494 
0495 <span class="comment">% Store the persistent preferences:</span>
0496 <span class="comment">% ---------------------------------</span>
0497 guiprefs.iric_file = iric_file;
0498 guiprefs.iric_path = iric_path;
0499 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0500 <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0501 
0502 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0503 
0504 <span class="comment">% --------------------------------------------------------------------</span>
0505 <a name="_sub21" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0506 <span class="comment">% Get the Application Data:</span>
0507 <span class="comment">% -------------------------</span>
0508 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0509 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0510 excel_path  = guiprefs.excel_path;
0511 excel_file  = guiprefs.excel_file;
0512 
0513 <span class="comment">% Push messages to Log Window:</span>
0514 <span class="comment">% ----------------------------</span>
0515 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0516 statusLogging(handles.LogWindow, log_text)
0517 
0518 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0519 <span class="comment">% data.</span>
0520 <span class="keyword">if</span> iscell(guiparams.mat_file)
0521     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0522     <a href="#_sub51" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0523     <span class="comment">% Refresh the Application Data:</span>
0524     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0525     z           = guiparams.z;
0526     A           = guiparams.A;
0527     V           = guiparams.V;
0528     Map         = guiparams.Map;
0529     wse         = guiparams.wse;
0530     PVdata      = guiparams.iric_anv_planview_data;
0531     log_text = {<span class="string">'Writing data to Excel file...'</span>;<span class="keyword">...</span>
0532         <span class="string">'Multiple transected loaded. Will export Planview Data Only!'</span>};
0533     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0534         fullfile(excel_path,excel_file));
0535     
0536     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0537         outfile = fullfile(excel_path,excel_file);
0538         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0539         
0540     <span class="keyword">else</span>
0541         <span class="comment">% Return default excel_path and excel_file</span>
0542         excel_path = guiprefs.excel_path;
0543         excel_file = guiprefs.excel_file;
0544         outfile = fullfile(excel_path,excel_file);
0545         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0546     <span class="keyword">end</span>
0547     
0548     <span class="comment">% Delete the old file if it exists</span>
0549     <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0550         log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0551             [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0552             <span class="string">'already exists. Overwriting file...'</span>});
0553         delete(outfile)
0554     <span class="keyword">end</span>
0555     
0556     <span class="comment">% Save DAV data to an Excel File</span>
0557     hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0558     vmin = num2str(guiparams.depth_range_min);
0559     vmax = num2str(guiparams.depth_range_max);
0560     pvheaders = {<span class="keyword">...</span>
0561         <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Elev_m'</span><span class="keyword">...</span>
0562         [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0563         [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]};
0564     PVdata.outmat(4:5,:) = PVdata.outmat(4:5,:).*100; <span class="comment">% velocities in cm/s</span>
0565     pvdata = num2cell(PVdata.outmat');
0566     pvout = vertcat(pvheaders,pvdata);
0567     xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0568     waitbar(1,hwait)
0569     delete(hwait)
0570     
0571     <span class="comment">% Push messages to Log Window:</span>
0572     <span class="comment">% ----------------------------</span>
0573     statusLogging(handles.LogWindow, log_text)
0574 <span class="keyword">else</span>
0575     
0576     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0577     <a href="#_sub51" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0578     <a href="#_sub52" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0579     <span class="comment">% Refresh the Application Data:</span>
0580     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0581     z           = guiparams.z;
0582     A           = guiparams.A;
0583     V           = guiparams.V;
0584     Map         = guiparams.Map;
0585     wse         = guiparams.wse;
0586     PVdata      = guiparams.iric_anv_planview_data;
0587     
0588     
0589     log_text = {<span class="string">'Writing data to Excel file...'</span>};
0590     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0591         fullfile(excel_path,excel_file));
0592     
0593     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0594         outfile = fullfile(excel_path,excel_file);
0595         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0596         
0597         <span class="comment">% Delete the old file if it exists</span>
0598         <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0599             log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0600                 [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0601                 <span class="string">'already exists. Overwriting file...'</span>});
0602             delete(outfile)
0603         <span class="keyword">end</span>
0604         
0605         <span class="comment">% Push messages to Log Window:</span>
0606         <span class="comment">% ----------------------------</span>
0607         statusLogging(handles.LogWindow, log_text)
0608         
0609         <span class="comment">% Save MCS Summary to an Excel File</span>
0610         hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0611         xlswrite(outfile,{<span class="string">'Files:'</span>},<span class="string">'VMTSummary'</span>,<span class="string">'H4'</span>); waitbar(1/5,hwait)
0612         sout = guiparams.data_files';
0613         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'I4'</span>); waitbar(2/5,hwait)
0614         sout = {<span class="keyword">...</span>
0615             <span class="string">'VMT: Summary of Mean Cross Section'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0616             <span class="string">'VMT '</span> guiparams.vmt_version <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0617             <span class="string">'Date Processed: '</span> datestr(now) <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0618             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0619             <span class="string">'Mean Cross Section (MCS) Properties'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0620             <span class="string">'Horz. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> guiparams.horizontal_grid_node_spacing;<span class="keyword">...</span>
0621             <span class="string">'Vert. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> single(guiparams.A(1).Sup.binSize_cm)/100;<span class="keyword">...</span>
0622             <span class="string">'Endpoints:'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">'UTM_East'</span>    <span class="string">'UTM_North'</span>;<span class="keyword">...</span>
0623             <span class="string">'Left Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xLeftBank V.yLeftBank;<span class="keyword">...</span>
0624             <span class="string">'Right Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xRightBank V.yRightBank;<span class="keyword">...</span>
0625             <span class="string">'Total Length in meters'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.dl;<span class="keyword">...</span>
0626             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0627             <span class="string">'Mean Flow Direction (deg)'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.mfd;<span class="keyword">...</span>
0628             <span class="string">'in geographic coordinates'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0629             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0630             <span class="string">'Slope'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.m;<span class="keyword">...</span>
0631             <span class="string">'Intercept'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.b;<span class="keyword">...</span>
0632             <span class="string">'Theta (deg)'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.theta};
0633         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'A1'</span>); waitbar(3/5,hwait)
0634         
0635         <span class="comment">% Save DAV data to an Excel File</span>
0636         vmin = num2str(guiparams.depth_range_min);
0637         vmax = num2str(guiparams.depth_range_max);
0638         pvheaders = {<span class="keyword">...</span>
0639             <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Elev_m'</span><span class="keyword">...</span>
0640             [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0641             [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]};
0642         PVdata.outmat(4:5,:) = PVdata.outmat(4:5,:).*100; <span class="comment">% velocities in cm/s</span>
0643         pvdata = num2cell(PVdata.outmat');
0644         pvout = vertcat(pvheaders,pvdata);
0645         xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0646         waitbar(4/5,hwait)
0647         
0648         <span class="comment">% Save MCS data to an Excel File</span>
0649         mcsheaders = {<span class="keyword">...</span>
0650             <span class="string">'UTM_East'</span> <span class="keyword">...</span>
0651             <span class="string">'UTM_North'</span><span class="keyword">...</span>
0652             <span class="string">'Distance from Left Bank, in meters'</span><span class="keyword">...</span>
0653             <span class="string">'Elevation, in meters'</span><span class="keyword">...</span>
0654             <span class="string">'Bed Elevation, in meters'</span><span class="keyword">...</span>
0655             <span class="string">'East Velocity, in cm/s'</span><span class="keyword">...</span>
0656             <span class="string">'North Velocity, in cm/s'</span><span class="keyword">...</span>
0657             <span class="string">'Vertical Velocity, in cm/s'</span><span class="keyword">...</span>
0658             <span class="string">'Velocity Magnitude, in cm/s'</span><span class="keyword">...</span>
0659             <span class="string">'Velocity Direction, in degrees (geographic coordinates)'</span><span class="keyword">...</span>
0660             <span class="string">'Streamwise Velocity, in cm/s'</span><span class="keyword">...</span>
0661             <span class="string">'Transverse Velocity, in cm/s'</span><span class="keyword">...</span>
0662             <span class="string">'Primary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0663             <span class="string">'Secondary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0664             <span class="string">'Primary Velocity (roz), in cm/s'</span><span class="keyword">...</span>
0665             <span class="string">'Secondary Velocity (roz), in cm/s'</span>};
0666         
0667         mcsdata = [<span class="keyword">...</span>
0668             V.mcsX(:)<span class="keyword">...</span>
0669             V.mcsY(:)<span class="keyword">...</span>
0670             V.mcsDist(:)<span class="keyword">...</span>
0671             (wse - V.mcsDepth(:))<span class="keyword">...</span>
0672             repmat((wse - V.mcsBed(:)),size(V.mcsX,1),1)<span class="keyword">...</span>
0673             V.mcsEast(:)<span class="keyword">...</span>
0674             V.mcsNorth(:)<span class="keyword">...</span>
0675             V.mcsVert(:)<span class="keyword">...</span>
0676             V.mcsMag(:)<span class="keyword">...</span>
0677             V.mcsDir(:)<span class="keyword">...</span>
0678             V.u(:)<span class="keyword">...</span>
0679             V.v(:)<span class="keyword">...</span>
0680             V.vp(:)<span class="keyword">...</span>
0681             V.vs(:)<span class="keyword">...</span>
0682             V.Roz.up(:)<span class="keyword">...</span>
0683             V.Roz.us(:)];
0684         mcsdata(isnan(mcsdata)) = -9999;
0685         
0686         mcsout = vertcat(mcsheaders,num2cell(mcsdata));
0687         xlswrite(outfile,mcsout,<span class="string">'MeanCrossSection'</span>);
0688         waitbar(1,hwait)
0689         delete(hwait)
0690         
0691     <span class="keyword">else</span>
0692         <span class="comment">% Return default excel_path and excel_file</span>
0693         excel_path = guiprefs.excel_path;
0694         excel_file = guiprefs.excel_file;
0695         outfile = fullfile(excel_path,excel_file);
0696         log_text = {<span class="string">'User aborted Excel export...'</span>};
0697     <span class="keyword">end</span>
0698     
0699     
0700     
0701 <span class="keyword">end</span>
0702 
0703 <span class="comment">% Push messages to Log Window:</span>
0704 <span class="comment">% ----------------------------</span>
0705 statusLogging(handles.LogWindow, log_text)
0706 
0707 <span class="comment">% Store the persistent preferences:</span>
0708 <span class="comment">% ---------------------------------</span>
0709 guiprefs.excel_file = excel_file;
0710 guiprefs.excel_path = excel_path;
0711 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0712 <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0713 
0714 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0715 
0716 <span class="comment">% --------------------------------------------------------------------</span>
0717 <a name="_sub22" href="#_subfunctions" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a>
0718 <span class="comment">% Empty</span>
0719 
0720 <span class="comment">% --------------------------------------------------------------------</span>
0721 <a name="_sub23" href="#_subfunctions" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a>
0722 <span class="comment">% Empty</span>
0723 
0724 <span class="comment">% --------------------------------------------------------------------</span>
0725 <a name="_sub24" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0726 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0727 
0728 <span class="comment">% Get the Application Data:</span>
0729 <span class="comment">% -------------------------</span>
0730 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0731 
0732 <span class="comment">% Update the GUI &amp; Application Data:</span>
0733 <span class="comment">% ----------------------------------</span>
0734 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0735 <span class="keyword">switch</span> status
0736     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0737         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0738         guiparams.unit_discharge_correction = false;
0739     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0740         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0741         guiparams.unit_discharge_correction = true;
0742 <span class="keyword">end</span>
0743 
0744 <span class="comment">% Re-store the Application data:</span>
0745 <span class="comment">% ------------------------------</span>
0746 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0747 
0748 
0749 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0750 
0751 <span class="comment">% --------------------------------------------------------------------</span>
0752 <a name="_sub25" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0753 <span class="comment">% Empty</span>
0754 
0755 <span class="comment">% --------------------------------------------------------------------</span>
0756 <a name="_sub26" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0757 <span class="comment">% Empty</span>
0758 
0759 <span class="comment">% --------------------------------------------------------------------</span>
0760 <a name="_sub27" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
0761 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
0762 
0763 <span class="comment">% Get the Application Data:</span>
0764 <span class="comment">% -------------------------</span>
0765 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0766 
0767 <span class="comment">% Update the Application Data:</span>
0768 <span class="comment">% ----------------------------</span>
0769 guiparams.english_units = false;
0770 
0771 <span class="comment">% Re-store the Application data:</span>
0772 <span class="comment">% ------------------------------</span>
0773 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0774 
0775 <span class="comment">% Update the GUI:</span>
0776 <span class="comment">% ---------------</span>
0777 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0778 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0779 
0780 <span class="comment">% [EOF] menuMetric_Callback</span>
0781 
0782 
0783 <span class="comment">% --------------------------------------------------------------------</span>
0784 <a name="_sub28" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
0785 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
0786 
0787 <span class="comment">% Get the Application Data:</span>
0788 <span class="comment">% -------------------------</span>
0789 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0790 
0791 <span class="comment">% Update the Application Data:</span>
0792 <span class="comment">% ----------------------------</span>
0793 guiparams.english_units = true;
0794 
0795 <span class="comment">% Re-store the Application data:</span>
0796 <span class="comment">% ------------------------------</span>
0797 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0798 
0799 <span class="comment">% Update the GUI:</span>
0800 <span class="comment">% ---------------</span>
0801 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0802 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0803 
0804 <span class="comment">% [EOF] menuEnglish_Callback</span>
0805 
0806 
0807 <span class="comment">% --------------------------------------------------------------------</span>
0808 <a name="_sub29" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
0809 <span class="comment">% Empty</span>
0810 
0811 <span class="comment">% --------------------------------------------------------------------</span>
0812 <a name="_sub30" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
0813 <span class="comment">% Set cross-section endpoints automatically</span>
0814 
0815 <span class="comment">% Get the Application Data:</span>
0816 <span class="comment">% -------------------------</span>
0817 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0818 
0819 <span class="comment">% Update the Application Data:</span>
0820 <span class="comment">% ----------------------------</span>
0821 guiparams.set_cross_section_endpoints = false;
0822 
0823 <span class="comment">% Re-store the Application data:</span>
0824 <span class="comment">% ------------------------------</span>
0825 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0826 
0827 <span class="comment">% Update the GUI:</span>
0828 <span class="comment">% ---------------</span>
0829 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0830 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0831 
0832 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
0833 
0834 
0835 <span class="comment">% --------------------------------------------------------------------</span>
0836 <a name="_sub31" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
0837 <span class="comment">% Set cross-section endpoints manually</span>
0838 
0839 <span class="comment">% Get the Application Data:</span>
0840 <span class="comment">% -------------------------</span>
0841 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0842 
0843 <span class="comment">% Update the Application Data:</span>
0844 <span class="comment">% ----------------------------</span>
0845 guiparams.set_cross_section_endpoints = true;
0846 
0847 <span class="comment">% Re-store the Application data:</span>
0848 <span class="comment">% ------------------------------</span>
0849 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0850 
0851 <span class="comment">% Update the GUI:</span>
0852 <span class="comment">% ---------------</span>
0853 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0854 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0855 
0856 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
0857 
0858 
0859 
0860 
0861 <span class="comment">% --------------------------------------------------------------------</span>
0862 <a name="_sub32" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
0863 <span class="comment">% Empty</span>
0864 
0865 <span class="comment">% --------------------------------------------------------------------</span>
0866 <a name="_sub33" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
0867 
0868 <span class="comment">% Get the Application Data:</span>
0869 <span class="comment">% -------------------------</span>
0870 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0871 
0872 <span class="comment">% Update the Application Data:</span>
0873 <span class="comment">% ----------------------------</span>
0874 guiparams.print        = true;
0875 guiparams.presentation = false;
0876 
0877 <span class="comment">% Re-store the Application data:</span>
0878 <span class="comment">% ------------------------------</span>
0879 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0880 
0881 <span class="comment">% Update the GUI:</span>
0882 <span class="comment">% ---------------</span>
0883 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0884 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0885 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0886 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0887 
0888 <span class="comment">% Modify the existing figures</span>
0889 <span class="comment">% ---------------------------</span>
0890 <span class="comment">% Find what plots exist already</span>
0891 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0892 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0893 
0894 <span class="comment">% Defaults for Print Stlye Figure</span>
0895 BkgdColor   = <span class="string">'white'</span>;
0896 AxColor     = <span class="string">'black'</span>;
0897 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
0898 FntSize     = 14;
0899 
0900 <span class="comment">% Loop through valid figures and adjust</span>
0901 <span class="comment">% -------------------------------------</span>
0902 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0903     
0904     <span class="keyword">for</span> i = 1:length(valid_names)
0905         <span class="keyword">switch</span> valid_names{i}
0906             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
0907                 <span class="comment">% Focus the figure</span>
0908                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0909                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0910                     figure(hff)
0911                     
0912                     <span class="comment">% Make the changes to figure</span>
0913                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
0914                     set(gca,<span class="string">'FontSize'</span>,FntSize)
0915                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
0916                     set(gca,<span class="string">'Color'</span>,FigColor)
0917                     set(gca,<span class="string">'XColor'</span>,AxColor)
0918                     set(gca,<span class="string">'YColor'</span>,AxColor)
0919                     set(gca,<span class="string">'ZColor'</span>,AxColor)
0920                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
0921                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
0922                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
0923                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
0924                 <span class="keyword">end</span>
0925             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
0926                 <span class="comment">% Focus the figure</span>
0927                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0928                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0929                     figure(hff)
0930                     
0931                     <span class="comment">% Make the changes to figure</span>
0932                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
0933                     set(gca,<span class="string">'FontSize'</span>,FntSize)
0934                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
0935                     set(gca,<span class="string">'Color'</span>,FigColor)
0936                     set(gca,<span class="string">'XColor'</span>,AxColor)
0937                     set(gca,<span class="string">'YColor'</span>,AxColor)
0938                     set(gca,<span class="string">'ZColor'</span>,AxColor)
0939                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
0940                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
0941                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
0942                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
0943                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
0944                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
0945                 <span class="keyword">end</span>
0946             <span class="keyword">otherwise</span>
0947         <span class="keyword">end</span>
0948     <span class="keyword">end</span>
0949     
0950     
0951 <span class="keyword">end</span>
0952 
0953 
0954 <span class="comment">%[EOF] menuStylePrint_Callback</span>
0955 
0956 
0957 <span class="comment">% --------------------------------------------------------------------</span>
0958 <a name="_sub34" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
0959 <span class="comment">% Get the Application Data:</span>
0960 <span class="comment">% -------------------------</span>
0961 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0962 
0963 <span class="comment">% Update the Application Data:</span>
0964 <span class="comment">% ----------------------------</span>
0965 guiparams.print        = false;
0966 guiparams.presentation = true;
0967 
0968 <span class="comment">% Re-store the Application data:</span>
0969 <span class="comment">% ------------------------------</span>
0970 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0971 
0972 <span class="comment">% Update the GUI:</span>
0973 <span class="comment">% ---------------</span>
0974 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0975 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0976 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0977 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0978 
0979 <span class="comment">% Modify the existing figures</span>
0980 <span class="comment">% ---------------------------</span>
0981 <span class="comment">% Find what plots exist already</span>
0982 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0983 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0984 
0985 <span class="comment">% Defaults for Presentation Stlye Figure</span>
0986 <span class="comment">% --------------------------------------</span>
0987 BkgdColor   = <span class="string">'black'</span>;
0988 AxColor     = <span class="string">'white'</span>;
0989 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
0990 FntSize     = 14;
0991 
0992 <span class="comment">% Loop through valid figures and adjust</span>
0993 <span class="comment">% -------------------------------------</span>
0994 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0995     
0996     <span class="keyword">for</span> i = 1:length(valid_names)
0997         <span class="keyword">switch</span> valid_names{i}
0998             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
0999                 <span class="comment">% Focus the figure</span>
1000                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1001                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1002                     figure(hff)
1003                     
1004                     <span class="comment">% Make the changes to figure</span>
1005                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1006                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1007                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1008                     set(gca,<span class="string">'Color'</span>,FigColor)
1009                     set(gca,<span class="string">'XColor'</span>,AxColor)
1010                     set(gca,<span class="string">'YColor'</span>,AxColor)
1011                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1012                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1013                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1014                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1015                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1016                 <span class="keyword">end</span>
1017             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1018                 <span class="comment">% Focus the figure</span>
1019                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1020                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1021                     figure(hff)
1022                     
1023                     <span class="comment">% Make the changes to figure</span>
1024                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1025                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1026                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1027                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1028                     set(gca,<span class="string">'XColor'</span>,AxColor)
1029                     set(gca,<span class="string">'YColor'</span>,AxColor)
1030                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1031                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1032                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1033                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1034                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1035                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1036                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1037                 <span class="keyword">end</span>
1038             <span class="keyword">otherwise</span>
1039         <span class="keyword">end</span>
1040     <span class="keyword">end</span>
1041     
1042     
1043 <span class="keyword">end</span>
1044 
1045 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1046 
1047 <span class="comment">% --------------------------------------------------------------------</span>
1048 <a name="_sub35" href="#_subfunctions" class="code">function menuKMZExport_Callback(hObject, eventdata, handles)</a>
1049 
1050 <span class="comment">% Get the Application data:</span>
1051 <span class="comment">% -------------------------</span>
1052 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1053 
1054 <span class="comment">% Initialize the answer:</span>
1055 <span class="comment">% ----------------------</span>
1056 numstr = {num2str(guiparams.vertical_offset)};
1057 answer = NaN;
1058 <span class="keyword">while</span> isnan(answer)
1059     answer = inputdlg(<span class="string">'Vertical Offset (m)'</span>,<span class="string">'KMZ Export'</span>,1,numstr);
1060     
1061     <span class="keyword">if</span> isempty(answer) <span class="comment">% User hits &quot;Cancel&quot;</span>
1062         <span class="keyword">return</span>
1063     <span class="keyword">end</span>
1064     
1065     answer = str2double(answer); <span class="comment">% A non-numeric char will be NaN</span>
1066     <span class="comment">% A numeric char will be a double</span>
1067 <span class="keyword">end</span>
1068 
1069 <span class="comment">% Re-store the Application data:</span>
1070 <span class="comment">% ------------------------------</span>
1071 guiparams.vertical_offset = answer;
1072 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1073 
1074 <span class="comment">% [EOF] menuKMZExport_Callback</span>
1075 
1076 <span class="comment">% --------------------------------------------------------------------</span>
1077 <a name="_sub36" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1078 <span class="comment">% Not implemented</span>
1079 
1080 <span class="comment">% --------------------------------------------------------------------</span>
1081 <a name="_sub37" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1082 <span class="comment">% Empty</span>
1083 
1084 <span class="comment">% --------------------------------------------------------------------</span>
1085 <a name="_sub38" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1086 ASCII2GIS_GUI
1087 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1088 
1089 <span class="comment">% --------------------------------------------------------------------</span>
1090 <a name="_sub39" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1091 
1092 <span class="comment">% Get the Application preferences:</span>
1093 <span class="comment">% --------------------------------</span>
1094 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1095 
1096 inpath = guiprefs.kmz_path;
1097 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1098     infile = guiprefs.kmz_file{1};
1099 <span class="keyword">else</span>
1100     infile = guiprefs.kmz_file;
1101 <span class="keyword">end</span>
1102 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1103 
1104 guiprefs.kmz_path = outpath;
1105 guiprefs.kmz_file = outfile;
1106 
1107 <span class="comment">% Update persistent preferences</span>
1108 <span class="comment">% -----------------------------</span>
1109 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1110 
1111 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1112 
1113 <span class="comment">% --------------------------------------------------------------------</span>
1114 <a name="_sub40" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1115 <span class="comment">% Empty</span>
1116 
1117 <span class="comment">% --------------------------------------------------------------------</span>
1118 <a name="_sub41" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1119 <span class="keyword">try</span>
1120     web(<span class="string">'http://code.google.com/p/velocity-mapping-tool/wiki/UserGuide?tm=6'</span>)
1121 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1122     <span class="keyword">if</span> isdeployed
1123         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1124             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1125         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1126             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1127             errLogFileName},<span class="keyword">...</span>
1128             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1129             <span class="string">'error'</span>);
1130         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1131         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1132         fclose(fid);
1133         rethrow(err)
1134     <span class="keyword">else</span>
1135         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1136             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1137             <span class="string">'error'</span>);
1138         rethrow(err);
1139     <span class="keyword">end</span>
1140 <span class="keyword">end</span>
1141 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1142 
1143 <span class="comment">% --------------------------------------------------------------------</span>
1144 <a name="_sub42" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1145 <span class="comment">% Get the Application data:</span>
1146 <span class="comment">% -------------------------</span>
1147 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1148 
1149 <span class="keyword">try</span>
1150     <span class="comment">% Construct a URL to a local file which can be interpreted by any</span>
1151     <span class="comment">% web-browser</span>
1152     rootpath = strrep(pwd,filesep,<span class="string">'/'</span>);
1153     webaddress = [<span class="string">'file:///'</span> rootpath <span class="string">'/doc/index.html'</span>];
1154     system([<span class="string">'start '</span> webaddress]);
1155 <span class="comment">%     [stat,h,url] = web(webaddress) % Produced with m2html (FEX)</span>
1156 <span class="keyword">catch</span> err 
1157     <span class="keyword">if</span> isdeployed
1158         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1159             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1160         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1161             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1162             errLogFileName},<span class="keyword">...</span>
1163             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1164             <span class="string">'error'</span>);
1165         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1166         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1167         fclose(fid);
1168         rethrow(err)
1169     <span class="keyword">else</span>
1170         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1171             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1172             <span class="string">'error'</span>);
1173         rethrow(err);
1174     <span class="keyword">end</span>
1175 <span class="keyword">end</span>
1176 
1177 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1178 
1179 <span class="comment">% --------------------------------------------------------------------</span>
1180 <a name="_sub43" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1181 
1182 <span class="comment">% Get the Application data:</span>
1183 <span class="comment">% -------------------------</span>
1184 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1185 
1186 <span class="comment">% Check version tag against the web, and display a message</span>
1187 <span class="keyword">try</span>
1188     current_vmt_version = urlread(<span class="string">'http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1189     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1190 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1191     <span class="keyword">if</span> isdeployed
1192         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1193             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1194         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1195             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1196             errLogFileName},<span class="keyword">...</span>
1197             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1198             <span class="string">'error'</span>);
1199         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1200         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1201         fclose(fid);
1202         rethrow(err)
1203     <span class="keyword">else</span>
1204         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1205             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1206             <span class="string">'error'</span>);
1207         rethrow(err);
1208     <span class="keyword">end</span>
1209 <span class="keyword">end</span>
1210 
1211 <span class="keyword">if</span> strcmpi(guiparams.vmt_version,current_vmt_version)
1212     h = msgbox(<span class="string">'VMT is currently up to date, no updates available.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1213 <span class="keyword">else</span>
1214     h = msgbox(<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1215 <span class="keyword">end</span>
1216 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1217 
1218 <span class="comment">% --------------------------------------------------------------------</span>
1219 <a name="_sub44" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1220 
1221 <span class="comment">% Get the Application data:</span>
1222 <span class="comment">% -------------------------</span>
1223 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1224 messagestr = <span class="keyword">...</span>
1225     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1226     [<span class="string">'   Version: '</span> guiparams.vmt_version];<span class="keyword">...</span>
1227     <span class="string">''</span>;<span class="keyword">...</span>
1228     <span class="string">''</span>;<span class="keyword">...</span>
1229     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1230     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1231     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1232     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1233     <span class="string">''</span>;<span class="keyword">...</span>
1234     <span class="string">''</span>;<span class="keyword">...</span>
1235     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1236     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1237     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1238     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1239     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1240     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1241     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1242 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1243 <span class="comment">% [EOF] menuAbout_Callback</span>
1244 
1245 
1246 
1247 
1248 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1249 <span class="comment">% TOOLBAR CALLBACKS %</span>
1250 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1251 
1252 <span class="comment">% --------------------------------------------------------------------</span>
1253 <a name="_sub45" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1254 <span class="comment">% Read Files into Data Structure using tfile.</span>
1255 
1256 <span class="comment">% Get the Application data:</span>
1257 <span class="comment">% -------------------------</span>
1258 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1259 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1260 
1261 <span class="comment">% Ask the user to select files:</span>
1262 <span class="comment">% -----------------------------</span>
1263 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1264 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1265     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1266     current_file, <span class="keyword">...</span>
1267     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1268 
1269 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1270     guiparams.data_folder = pathname;
1271     <span class="keyword">if</span> ischar(filename)
1272         filename = {filename};
1273     <span class="keyword">end</span>
1274     guiparams.data_files = filename;
1275     guiparams.mat_file = <span class="string">''</span>;
1276     
1277     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1278     
1279    
1280     
1281     <span class="comment">% Update the preferences:</span>
1282     <span class="comment">% -----------------------</span>
1283     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1284     guiprefs.ascii_path = pathname;
1285     guiprefs.ascii_file = filename;
1286     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1287     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1288     
1289     <span class="comment">% Push messages to Log Window:</span>
1290     <span class="comment">% ----------------------------</span>
1291     log_text = {<span class="keyword">...</span>
1292         <span class="string">''</span>;<span class="keyword">...</span>
1293         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1294         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1295         guiparams.data_folder;
1296         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1297         char(filename)};
1298     statusLogging(handles.LogWindow, log_text)
1299     
1300     <span class="comment">% Read the file(s)</span>
1301     <span class="comment">% ----------------</span>
1302     [~,~,savefile,A,z] = <span class="keyword">...</span>
1303         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1304     guiparams.savefile = savefile;
1305     guiparams.A        = A;
1306     guiparams.z        = z;
1307     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1308 <span class="comment">%</span>
1309 <span class="comment">%     % Preprocess the data:</span>
1310 <span class="comment">%     % --------------------</span>
1311 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1312 <span class="comment">%</span>
1313 <span class="comment">%     % Push messages to Log Window:</span>
1314 <span class="comment">%     % ----------------------------</span>
1315 <span class="comment">%     log_text = {...</span>
1316 <span class="comment">%         '   Preprocessing complete.';...</span>
1317 <span class="comment">%         '   Begin Data Processing...'};</span>
1318 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1319 <span class="comment">%</span>
1320 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1321 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1322 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1323 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1324 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1325 <span class="comment">%</span>
1326 <span class="comment">%     % Push messages to Log Window:</span>
1327 <span class="comment">%     % ----------------------------</span>
1328 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1329 <span class="comment">%</span>
1330 <span class="comment">%     % Store the data:</span>
1331 <span class="comment">%     % ---------------</span>
1332 <span class="comment">%     guiparams.z = z;</span>
1333 <span class="comment">%     guiparams.A = A;</span>
1334 <span class="comment">%     guiparams.V = V;</span>
1335 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1336     
1337           
1338     <span class="comment">% Update the GUI:</span>
1339     <span class="comment">% ---------------</span>
1340     <a href="#_sub89" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1341 <span class="keyword">end</span>
1342 <span class="comment">% [EOF] loadDataCallback</span>
1343 
1344 
1345 
1346 <span class="comment">% --------------------------------------------------------------------</span>
1347 <a name="_sub46" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1348 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1349 
1350 <span class="comment">% Get the Application data:</span>
1351 <span class="comment">% -------------------------</span>
1352 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1353 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1354 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1355 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1356 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1357 
1358 [the_file,the_path] = <span class="keyword">...</span>
1359     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1360     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1361     fullfile(guiparams.mat_path,guiparams.savefile));
1362 
1363 <span class="comment">% Save the processed data to a MAT file:</span>
1364 <span class="comment">% --------------------------------------</span>
1365 <span class="keyword">if</span> ischar(the_file)
1366     guiparams.mat_path = the_path;
1367     guiparams.mat_file = the_file;
1368     guiparams.savefile = the_file;
1369     
1370     <span class="comment">% Re-store the Application data:</span>
1371     <span class="comment">% ------------------------------</span>
1372     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1373     
1374     <span class="comment">% Update the preferences:</span>
1375     <span class="comment">% -----------------------</span>
1376     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1377     guiprefs.mat_path = the_path;
1378     guiprefs.mat_file = the_file;
1379     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1380     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1381     
1382     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1383     savefile = fullfile(pathstr,[filename extension]);
1384     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1385     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1386     log_text = {<span class="keyword">...</span>
1387         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1388         savefile};
1389     statusLogging(handles.LogWindow,log_text)
1390     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1391 <span class="keyword">end</span>
1392 
1393 <span class="comment">% [EOF] saveDataCallback</span>
1394 
1395 
1396 <span class="comment">% --------------------------------------------------------------------</span>
1397 <a name="_sub47" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1398 
1399 <span class="comment">% Get the Application data:</span>
1400 <span class="comment">% -------------------------</span>
1401 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1402 z   = guiparams.z;
1403 A   = guiparams.A;
1404 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1405 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1406 
1407 <span class="comment">% Compute multibeam bathymetry:</span>
1408 <span class="comment">% -----------------------------</span>
1409 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1410 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1411 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1412     guiparams.beam_angle, <span class="keyword">...</span>
1413     guiparams.magnetic_variation, <span class="keyword">...</span>
1414     guiparams.wse, <span class="keyword">...</span>
1415     guiparams.output_auxiliary_data);
1416 
1417 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1418 
1419 <span class="comment">% [EOF] saveBathymetryCallback</span>
1420 
1421 <span class="comment">% --------------------------------------------------------------------</span>
1422 <a name="_sub48" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1423 
1424 <span class="comment">% Get the Application data:</span>
1425 <span class="comment">% -------------------------</span>
1426 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1427 
1428 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1429     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1430     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1431     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1432     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1433     handles.figure1);
1434 
1435 <span class="comment">% Update the GUI:</span>
1436 <span class="comment">% ---------------</span>
1437 <span class="keyword">if</span> guiparams.english_units
1438     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1439     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1440 <span class="keyword">else</span>
1441     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1442     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1443 <span class="keyword">end</span>
1444 
1445 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1446     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1447     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1448 <span class="keyword">else</span>
1449     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1450     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1451 <span class="keyword">end</span>
1452 
1453 <span class="keyword">if</span> guiparams.presentation
1454     <a href="#_sub34" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1455 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1456 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1457 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1458 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1459 <span class="keyword">else</span>
1460     <a href="#_sub33" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1461 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1462 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1463 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1464 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1465 <span class="keyword">end</span>
1466 
1467 <span class="comment">% Re-store the Application data:</span>
1468 <span class="comment">% ------------------------------</span>
1469 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1470 
1471 <span class="comment">% [EOF] plottingParametersCallback</span>
1472 
1473 
1474 <span class="comment">% --------------------------------------------------------------------</span>
1475 <a name="_sub49" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1476 
1477 <span class="comment">% Get the Application data:</span>
1478 <span class="comment">% -------------------------</span>
1479 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1480 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1481 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1482 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1483 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1484 
1485 <span class="comment">% [EOF] processingParametersCallback</span>
1486 
1487 
1488 <span class="comment">% --------------------------------------------------------------------</span>
1489 <a name="_sub50" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1490 <span class="comment">% Plot 1</span>
1491 
1492 <span class="comment">% Get the Application data:</span>
1493 <span class="comment">% -------------------------</span>
1494 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1495 z = guiparams.z;
1496 A = guiparams.A;
1497 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1498 <span class="comment">% Map = guiparams.Map;</span>
1499 setends = guiparams.set_cross_section_endpoints;
1500 
1501 <span class="comment">% Preprocess the data:</span>
1502 <span class="comment">% --------------------</span>
1503 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1504 
1505 <span class="comment">% Push messages to Log Window:</span>
1506 <span class="comment">% ----------------------------</span>
1507 log_text = {<span class="keyword">...</span>
1508     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1509     <span class="string">'   Begin Data Processing...'</span>};
1510 statusLogging(handles.LogWindow, log_text)
1511 
1512 <span class="comment">% Process the transects:</span>
1513 <span class="comment">% ----------------------</span>
1514 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1515 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1516 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1517     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1518 
1519 <span class="comment">% Compute the smoothed variables</span>
1520 <span class="comment">% ------------------------------</span>
1521 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1522 <span class="comment">% runtime.</span>
1523 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1524     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1525     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1526     guiparams.vertical_smoothing_window);
1527 
1528 <span class="comment">% Push messages to Log Window:</span>
1529 <span class="comment">% ----------------------------</span>
1530 statusLogging(handles.LogWindow, processing_log_text)
1531 
1532 <span class="comment">% Store the data:</span>
1533 <span class="comment">% ---------------</span>
1534 guiparams.z = z;
1535 guiparams.A = A;
1536 guiparams.V = V;
1537 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1538 
1539 <span class="comment">% Push messages to Log Window:</span>
1540 <span class="comment">% ----------------------------</span>
1541 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1542 statusLogging(handles.LogWindow, log_text)
1543 
1544 <span class="comment">% Create or replot the Shiptracks</span>
1545 <span class="comment">% -------------------------------</span>
1546 <span class="comment">% Grab the axes to the plot</span>
1547 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1548 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1549 
1550 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1551 <span class="comment">% New plot display window</span>
1552 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1553 <span class="comment">% h = figure(1); clf</span>
1554 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1555 
1556 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1557 
1558 
1559 <span class="comment">% --------------------------------------------------------------------</span>
1560 <a name="_sub51" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1561 <span class="comment">% Plot 2</span>
1562 
1563 <span class="comment">% Get the Application data:</span>
1564 <span class="comment">% -------------------------</span>
1565 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1566 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1567 
1568 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1569     <span class="comment">% Push messages to Log Window:</span>
1570     <span class="comment">% ----------------------------</span>
1571     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1572     statusLogging(handles.LogWindow, log_text)
1573     
1574        
1575     <span class="comment">% Push plotting parameters to log window:</span>
1576     <span class="comment">% ---------------------------------------</span>
1577     log_text = {<span class="keyword">...</span>
1578         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1579         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1580         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1581         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1582         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1583         };
1584     statusLogging(handles.LogWindow, log_text)
1585     
1586     <span class="comment">% Plot the data:</span>
1587     <span class="comment">% --------------</span>
1588     z = [];
1589     A = [];
1590     V = [];
1591     Map = [];
1592     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1593     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1594         depth_range, <span class="keyword">...</span>
1595         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1596         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1597         guiparams.smoothing_window_size, <span class="keyword">...</span>
1598         guiparams.display_shoreline, <span class="keyword">...</span>
1599         guiparams.english_units, <span class="keyword">...</span>
1600         guiparams.mat_file, <span class="keyword">...</span>
1601         guiparams.mat_path); <span class="comment">% PLOT2</span>
1602     statusLogging(handles.LogWindow, log_text)
1603     
1604     <span class="comment">% Plot a Shoreline Map:</span>
1605     <span class="comment">% ---------------------</span>
1606     <span class="keyword">if</span> guiparams.display_shoreline
1607         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1608             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1609             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1610             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1611         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1612             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1613             Map.UTMe   = mapdata(:,1);
1614             Map.UTMn   = mapdata(:,2);
1615             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1616             <span class="comment">%Map.UTMzone = zone;</span>
1617         <span class="keyword">else</span>
1618             Map = [];
1619         <span class="keyword">end</span>
1620         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1621         log_text = {<span class="keyword">...</span>
1622             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1623             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1624             };
1625         statusLogging(handles.LogWindow, log_text)
1626     <span class="keyword">else</span>
1627         Map = [];
1628     <span class="keyword">end</span>
1629     
1630 <span class="keyword">else</span>
1631     z = guiparams.z;
1632     A = guiparams.A;
1633     <span class="comment">% V = guiparams.V;</span>
1634     Map = guiparams.Map;
1635     
1636     <span class="comment">% Push messages to Log Window:</span>
1637     <span class="comment">% ----------------------------</span>
1638     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
1639     statusLogging(handles.LogWindow, log_text)
1640     
1641         
1642     <span class="comment">% Preprocess the data:</span>
1643     <span class="comment">% --------------------</span>
1644     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1645     
1646     <span class="comment">% Process the transects:</span>
1647     <span class="comment">% ----------------------</span>
1648     A(1).hgns = guiparams.horizontal_grid_node_spacing;
1649     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1650     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1651         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1652     
1653     <span class="comment">% Compute the smoothed variables</span>
1654     <span class="comment">% ------------------------------</span>
1655     <span class="comment">% This is required so that the V struc is complete at any point during</span>
1656     <span class="comment">% runtime.</span>
1657     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1658         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1659         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1660         guiparams.vertical_smoothing_window);
1661     
1662     <span class="comment">% Push messages to Log Window:</span>
1663     <span class="comment">% ----------------------------</span>
1664     statusLogging(handles.LogWindow, processing_log_text)
1665     
1666     <span class="comment">% Plot the cross section:</span>
1667     <span class="comment">% -----------------------</span>
1668     log_text = {<span class="keyword">...</span>
1669         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1670         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1671         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1672         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1673         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1674         };
1675     statusLogging(handles.LogWindow, log_text)
1676     
1677     <span class="comment">% Plot the data:</span>
1678     <span class="comment">% --------------</span>
1679     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
1680     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1681     
1682     
1683     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1684         depth_range, <span class="keyword">...</span>
1685         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1686         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1687         guiparams.smoothing_window_size, <span class="keyword">...</span>
1688         guiparams.display_shoreline, <span class="keyword">...</span>
1689         guiparams.english_units, <span class="keyword">...</span>
1690         guiparams.mat_file, <span class="keyword">...</span>
1691         guiparams.mat_path); <span class="comment">% PLOT2</span>
1692     statusLogging(handles.LogWindow, log_text)
1693     
1694     <span class="comment">% Plot a Shoreline Map:</span>
1695     <span class="comment">% ---------------------</span>
1696     <span class="keyword">if</span> guiparams.display_shoreline
1697         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1698             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1699             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1700             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1701         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1702             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1703             Map.UTMe   = mapdata(:,1);
1704             Map.UTMn   = mapdata(:,2);
1705             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1706             <span class="comment">%Map.UTMzone = zone;</span>
1707         <span class="keyword">else</span>
1708             Map = [];
1709         <span class="keyword">end</span>
1710         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1711         log_text = {<span class="keyword">...</span>
1712             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1713             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1714             };
1715         statusLogging(handles.LogWindow, log_text)
1716     <span class="keyword">else</span>
1717         Map = [];
1718     <span class="keyword">end</span>
1719     
1720 <span class="keyword">end</span>
1721 
1722 <span class="keyword">if</span> guiparams.add_background
1723     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
1724     statusLogging(handles.LogWindow, log_text)
1725 <span class="keyword">end</span>
1726 
1727 <span class="comment">% Update guiparams</span>
1728 <span class="comment">% ----------------</span>
1729 guiparams.z   = z;
1730 guiparams.A   = A;
1731 guiparams.V   = V;
1732 guiparams.Map = Map;
1733 guiparams.iric_anv_planview_data = PVdata;
1734 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
1735 
1736 <span class="comment">% Update preferences</span>
1737 <span class="comment">% ------------------</span>
1738 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1739 <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
1740 <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
1741 
1742 <span class="comment">% Force plot to be formated properly</span>
1743 <span class="comment">% ----------------------------------</span>
1744 <span class="keyword">if</span> guiparams.presentation
1745     <a href="#_sub34" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1746 <span class="keyword">else</span>
1747     <a href="#_sub33" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1748 <span class="keyword">end</span>
1749 
1750 <span class="comment">% Start the Graphics Control Gui</span>
1751 <span class="comment">% ------------------------------</span>
1752 VMT_GraphicsControl
1753 
1754 <span class="comment">% [EOF] planviewPlotCallback</span>
1755 
1756 
1757 <span class="comment">% --------------------------------------------------------------------</span>
1758 <a name="_sub52" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
1759 <span class="comment">% Plot 3</span>
1760 
1761 <span class="comment">% Get the Application data:</span>
1762 <span class="comment">% -------------------------</span>
1763 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1764 z = guiparams.z;
1765 A = guiparams.A;
1766 <span class="comment">% V = guiparams.V;</span>
1767 <span class="comment">% Map = guiparams.Map;</span>
1768 
1769 <span class="comment">% Preprocess the data:</span>
1770 <span class="comment">% --------------------</span>
1771 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1772 
1773 <span class="comment">% Push messages to Log Window:</span>
1774 <span class="comment">% ----------------------------</span>
1775 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
1776 statusLogging(handles.LogWindow, log_text)
1777 
1778 <span class="comment">% Process the transects:</span>
1779 <span class="comment">% ----------------------</span>
1780 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1781 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1782 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1783     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1784 
1785 <span class="comment">% Push messages to Log Window:</span>
1786 <span class="comment">% ----------------------------</span>
1787 statusLogging(handles.LogWindow, processing_log_text)
1788 
1789 <span class="comment">% Plot the cross section:</span>
1790 <span class="comment">% -----------------------</span>
1791 log_text = {<span class="keyword">...</span>
1792     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
1793     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
1794     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
1795     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
1796     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
1797     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
1798     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
1799     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
1800     };
1801 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
1802     log_text = vertcat(log_text, {<span class="keyword">...</span>
1803         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
1804         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
1805         });
1806 <span class="keyword">end</span>
1807 <span class="comment">% Push messages to Log Window:</span>
1808 <span class="comment">% ----------------------------</span>
1809 statusLogging(handles.LogWindow, log_text)
1810 
1811 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
1812     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
1813 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
1814 <span class="comment">%         ...guiparams.contour, ...</span>
1815 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
1816 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
1817     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1818         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
1819         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1820         guiparams.vertical_smoothing_window);
1821     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
1822         guiparams.contour, <span class="keyword">...</span>
1823         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
1824         guiparams.vertical_exaggeration, <span class="keyword">...</span>
1825         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
1826         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
1827         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
1828         guiparams.include_vertical_velocity, <span class="keyword">...</span>
1829         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
1830     
1831 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
1832     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1833         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1834         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1835         guiparams.vertical_smoothing_window);
1836     
1837     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
1838         guiparams.contour, <span class="keyword">...</span>
1839         guiparams.vertical_exaggeration, <span class="keyword">...</span>
1840         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
1841     
1842     guiparams.zmin = zmin;
1843     guiparams.zmax = zmax;
1844     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1845 <span class="keyword">end</span>
1846 
1847 <span class="comment">% Force plot to be formated properly</span>
1848 <span class="comment">% ----------------------------------</span>
1849 <span class="keyword">if</span> guiparams.presentation
1850     <a href="#_sub34" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1851 <span class="keyword">else</span>
1852     <a href="#_sub33" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1853 <span class="keyword">end</span>
1854 
1855 <span class="comment">% Re-store the Application data:</span>
1856 <span class="comment">% ------------------------------</span>
1857 guiparams.V = V;
1858 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1859 
1860 <span class="comment">% Start the Graphics Control Gui</span>
1861 <span class="comment">% ------------------------------</span>
1862 VMT_GraphicsControl
1863 
1864 <span class="comment">% Push messages to Log Window:</span>
1865 <span class="comment">% ----------------------------</span>
1866 statusLogging(handles.LogWindow, plot_cont_log_text)
1867 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
1868 
1869 <span class="comment">% [EOF] crosssectionPlotCallback</span>
1870 
1871 
1872 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1873 <span class="comment">% DATA EXPORT CALLBACKS %</span>
1874 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1875 
1876 <span class="comment">% --------------------------------------------------------------------</span>
1877 <a name="_sub53" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
1878 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
1879 
1880 <span class="comment">% Get the Application data:</span>
1881 <span class="comment">% -------------------------</span>
1882 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1883 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1884 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1885 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1886 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1887 
1888 [the_file,the_path] = <span class="keyword">...</span>
1889     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1890     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1891     fullfile(guiparams.mat_path,guiparams.savefile));
1892 
1893 <span class="comment">% Save the processed data to a MAT file:</span>
1894 <span class="comment">% --------------------------------------</span>
1895 <span class="keyword">if</span> ischar(the_file)
1896     guiparams.mat_path = the_path;
1897     guiparams.mat_file = the_file;
1898     guiparams.savefile = the_file;
1899     
1900     <span class="comment">% Re-store the Application data:</span>
1901     <span class="comment">% ------------------------------</span>
1902     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1903     
1904     <span class="comment">% Update the preferences:</span>
1905     <span class="comment">% -----------------------</span>
1906     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1907     guiprefs.mat_path = the_path;
1908     guiprefs.mat_file = the_file;
1909     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1910     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1911     
1912     [~,filename,extension] = fileparts(guiparams.savefile);
1913     savefile = [filename extension];
1914     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
1915         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1916     disp(<span class="string">'Saving Processed Data File...'</span>)
1917     disp(savefile)
1918     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1919 <span class="keyword">end</span>
1920 
1921 <span class="comment">% [EOF] SaveMATFile_Callback</span>
1922 
1923 
1924 <span class="comment">% --------------------------------------------------------------------</span>
1925 <a name="_sub54" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
1926 
1927 <span class="comment">% Get the Application data:</span>
1928 <span class="comment">% -------------------------</span>
1929 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1930 <span class="comment">% z   = guiparams.z;</span>
1931 <span class="comment">% A   = guiparams.A;</span>
1932 V   = guiparams.V;
1933 <span class="comment">% Map = guiparams.Map;</span>
1934 
1935 [the_file,the_path] = <span class="keyword">...</span>
1936     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
1937     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
1938     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
1939 
1940 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
1941 <span class="comment">% ------------------------------------------</span>
1942 <span class="keyword">if</span> ischar(the_file)
1943     guiparams.tecplot_path = the_path;
1944     guiparams.tecplot_file = the_file;
1945     
1946     <span class="comment">% Re-store the Application data:</span>
1947     <span class="comment">% ------------------------------</span>
1948     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1949     
1950     <span class="comment">% Update the preferences:</span>
1951     <span class="comment">% -----------------------</span>
1952     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1953     guiprefs.tecplot_path = the_path;
1954     guiprefs.tecplot_file = the_file;
1955     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1956     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
1957     
1958     <span class="comment">% Push to log window</span>
1959     <span class="comment">% ------------------</span>
1960     log_text = {<span class="keyword">...</span>
1961         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
1962         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
1963         the_path;<span class="keyword">...</span>
1964         [<span class="string">'Filename: '</span> the_file]};
1965     statusLogging(handles.LogWindow,log_text)
1966         
1967     <span class="keyword">if</span> isempty(V)
1968         A = guiparams.A;
1969         A(1).hgns = guiparams.horizontal_grid_node_spacing;
1970         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1971         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1972             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1973             guiparams.unit_discharge_correction);
1974     <span class="keyword">end</span>
1975     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
1976     
1977     <span class="comment">% Push to log window</span>
1978     <span class="comment">% ------------------</span>
1979     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
1980     statusLogging(handles.LogWindow,log_text)
1981     
1982     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
1983     
1984     <span class="comment">% Push to log window</span>
1985     <span class="comment">% ------------------</span>
1986     log_text = {<span class="string">'Tecplot Export Complete'</span>};
1987     statusLogging(handles.LogWindow,log_text)
1988    
1989 <span class="keyword">end</span>
1990 
1991 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
1992 
1993 
1994 <span class="comment">% --------------------------------------------------------------------</span>
1995 <a name="_sub55" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
1996 
1997 <span class="comment">% Get the Application data:</span>
1998 <span class="comment">% -------------------------</span>
1999 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2000 <span class="comment">% z   = guiparams.z;</span>
2001 A   = guiparams.A;
2002 V   = guiparams.V;
2003 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2004 
2005 [the_file,the_path] = <span class="keyword">...</span>
2006     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2007     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2008     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2009 
2010 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2011 <span class="comment">% -----------------------------------------------------</span>
2012 <span class="keyword">if</span> ischar(the_file)
2013     guiparams.kmz_path = the_path;
2014     guiparams.kmz_file = the_file;
2015     
2016     <span class="comment">% Re-store the Application data:</span>
2017     <span class="comment">% ------------------------------</span>
2018     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2019     
2020     <span class="comment">% Update the preferences:</span>
2021     <span class="comment">% -----------------------</span>
2022     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2023     guiprefs.kmz_path = the_path;
2024     guiprefs.kmz_file = the_file;
2025     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2026     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2027     
2028     <span class="comment">%     if guiparams.display_shoreline</span>
2029     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2030     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2031     <span class="comment">%                             guiparams.vertical_offset);</span>
2032     <span class="comment">%     end</span>
2033     <span class="keyword">if</span> isempty(V)
2034         A = guiparams.A;
2035         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2036         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2037         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2038             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2039             guiparams.unit_discharge_correction);
2040     <span class="keyword">end</span>
2041     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2042         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2043         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2044         guiparams.vertical_offset);
2045 <span class="keyword">end</span>
2046 
2047 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2048 
2049 
2050 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2051 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2052 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2053 
2054 <span class="comment">% --------------------------------------------------------------------</span>
2055 <a name="_sub56" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2056 
2057 <span class="comment">% Get the Application data:</span>
2058 <span class="comment">% -------------------------</span>
2059 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2060 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2061 z = guiparams.z;
2062 A = guiparams.A;
2063 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2064 <span class="comment">% Map = guiparams.Map;</span>
2065 setends = guiparams.set_cross_section_endpoints;
2066 
2067 [the_file,the_path] = <span class="keyword">...</span>
2068     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2069     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2070     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2071     guiprefs.multibeambathymetry_file));
2072 
2073 <span class="keyword">if</span> ischar(the_file)
2074     guiparams.multibeambathymetry_path = the_path;
2075     guiparams.multibeambathymetry_file = the_file;
2076     
2077     <span class="comment">% Re-store the Application data:</span>
2078     <span class="comment">% ------------------------------</span>
2079     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2080     
2081     <span class="comment">% Update the preferences:</span>
2082     <span class="comment">% -----------------------</span>
2083     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2084     guiprefs.multibeambathymetry_path = the_path;
2085     guiprefs.multibeambathymetry_file = the_file;
2086     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2087     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2088     
2089     <span class="keyword">if</span> guiparams.output_auxiliary_data
2090     <span class="keyword">end</span>
2091     
2092     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2093     
2094     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2095         guiparams.multibeambathymetry_file);
2096     
2097     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2098         [<span class="string">'   '</span> savefile]};
2099     statusLogging(handles.LogWindow,log_text)
2100     
2101     <span class="comment">% Process the transects:</span>
2102     <span class="comment">% ----------------------</span>
2103     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2104     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2105     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2106         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2107     
2108     <span class="comment">% Compute the smoothed variables</span>
2109     <span class="comment">% ------------------------------</span>
2110     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2111     <span class="comment">% runtime.</span>
2112     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2113         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2114         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2115         guiparams.vertical_smoothing_window);
2116     
2117     <span class="comment">% Push messages to Log Window:</span>
2118     <span class="comment">% ----------------------------</span>
2119     statusLogging(handles.LogWindow, processing_log_text)
2120 
2121     
2122     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2123         guiparams.A, <span class="keyword">...</span>
2124         savefile, <span class="keyword">...</span>
2125         guiparams.beam_angle, <span class="keyword">...</span>
2126         guiparams.magnetic_variation, <span class="keyword">...</span>
2127         guiparams.wse, <span class="keyword">...</span>
2128         guiparams.output_auxiliary_data);
2129     
2130     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2131     
2132 <span class="keyword">end</span>
2133 
2134 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2135 
2136 
2137 <span class="comment">% --------------------------------------------------------------------</span>
2138 <a name="_sub57" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2139 <span class="comment">% Get the beam angle</span>
2140 
2141 <span class="comment">% Get the Application data:</span>
2142 <span class="comment">% -------------------------</span>
2143 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2144 
2145 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2146 <span class="comment">% ----------------------------------------------------------------</span>
2147 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2148 is_a_number = ~isnan(new_beam_angle);
2149 is_positive = new_beam_angle&gt;=0;
2150 
2151 <span class="comment">% Modify the Application data:</span>
2152 <span class="comment">% ----------------------------</span>
2153 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2154     guiparams.beam_angle = new_beam_angle;
2155     
2156     <span class="comment">% Re-store the Application data:</span>
2157     <span class="comment">% ------------------------------</span>
2158     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2159     
2160 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2161     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2162 <span class="keyword">end</span>
2163 
2164 <span class="comment">% [EOF] BeamAngle_Callback</span>
2165 
2166 
2167 <span class="comment">% --------------------------------------------------------------------</span>
2168 <a name="_sub58" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2169 <span class="comment">% Get the Magnetic Variation</span>
2170 
2171 <span class="comment">% Get the Application data:</span>
2172 <span class="comment">% -------------------------</span>
2173 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2174 
2175 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2176 <span class="comment">% ----------------------------------------------------------------</span>
2177 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2178 is_a_number = ~isnan(new_magnetic_variation);
2179 is_positive = new_magnetic_variation&gt;=0;
2180 
2181 <span class="comment">% Modify the Application data:</span>
2182 <span class="comment">% ----------------------------</span>
2183 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2184     guiparams.magnetic_variation = new_magnetic_variation;
2185     
2186     <span class="comment">% Re-store the Application data:</span>
2187     <span class="comment">% ------------------------------</span>
2188     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2189     
2190 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2191     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2192 <span class="keyword">end</span>
2193 
2194 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2195 
2196 
2197 <span class="comment">% --------------------------------------------------------------------</span>
2198 <a name="_sub59" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2199 
2200 <span class="comment">% Get the Application data:</span>
2201 <span class="comment">% -------------------------</span>
2202 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2203 
2204 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2205 <span class="comment">% ----------------------------------------------------------------</span>
2206 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2207 is_a_number = ~isnan(new_wse);
2208 is_positive = new_wse&gt;=0;
2209 
2210 <span class="comment">% Modify the Application data:</span>
2211 <span class="comment">% ----------------------------</span>
2212 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2213     guiparams.wse = new_wse;
2214     
2215     <span class="comment">% Re-store the Application data:</span>
2216     <span class="comment">% ------------------------------</span>
2217     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2218     
2219 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2220     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2221 <span class="keyword">end</span>
2222 
2223 <span class="comment">% [EOF] WSE_Callback</span>
2224 
2225 
2226 <span class="comment">% --------------------------------------------------------------------</span>
2227 <a name="_sub60" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2228 <span class="comment">% Bathymetry Auxiliary Data</span>
2229 
2230 <span class="comment">% Get the Application data:</span>
2231 <span class="comment">% -------------------------</span>
2232 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2233 
2234 <span class="comment">% Modify the Application data:</span>
2235 <span class="comment">% ----------------------------</span>
2236 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2237 
2238 <span class="comment">% Re-store the Application data:</span>
2239 <span class="comment">% ------------------------------</span>
2240 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2241 
2242 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2243 
2244 
2245 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2246 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2247 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2248 
2249 <span class="comment">% --------------------------------------------------------------------</span>
2250 <a name="_sub61" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2251 
2252 <span class="comment">% Get the Application data:</span>
2253 <span class="comment">% -------------------------</span>
2254 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2255 
2256 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2257 <span class="comment">% ----------------------------------------------------------------</span>
2258 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2259 is_a_number = ~isnan(new_depth_range_min);
2260 is_positive = new_depth_range_min&gt;=0;
2261 
2262 <span class="comment">% Modify the Application data:</span>
2263 <span class="comment">% ----------------------------</span>
2264 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2265     guiparams.depth_range_min = new_depth_range_min;
2266     
2267     <span class="comment">% Re-store the Application data:</span>
2268     <span class="comment">% ------------------------------</span>
2269     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2270     
2271 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2272     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2273 <span class="keyword">end</span>
2274 
2275 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2276 
2277 
2278 <span class="comment">% --------------------------------------------------------------------</span>
2279 <a name="_sub62" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2280 
2281 <span class="comment">% Get the Application data:</span>
2282 <span class="comment">% -------------------------</span>
2283 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2284 
2285 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2286 <span class="comment">% ----------------------------------------------------------------</span>
2287 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2288 is_a_number = ~isnan(new_depth_range_max);
2289 is_positive = new_depth_range_max&gt;=0;
2290 
2291 <span class="comment">% Modify the Application data:</span>
2292 <span class="comment">% ----------------------------</span>
2293 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2294     guiparams.depth_range_max = new_depth_range_max;
2295     
2296     <span class="comment">% Re-store the Application data:</span>
2297     <span class="comment">% ------------------------------</span>
2298     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2299     
2300 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2301     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2302 <span class="keyword">end</span>
2303 
2304 <span class="comment">% [EOF] DepthMax_Callback</span>
2305 
2306 
2307 <span class="comment">% --------------------------------------------------------------------</span>
2308 <a name="_sub63" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2309 <span class="comment">% Set quiver scale (contour)</span>
2310 
2311 <span class="comment">% Get the Application data:</span>
2312 <span class="comment">% -------------------------</span>
2313 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2314 
2315 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2316 <span class="comment">% ----------------------------------------------------------------</span>
2317 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2318 is_a_number = ~isnan(new_vector_scale_plan_view);
2319 is_positive = new_vector_scale_plan_view&gt;=0;
2320 
2321 <span class="comment">% Modify the Application data:</span>
2322 <span class="comment">% ----------------------------</span>
2323 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2324     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2325     
2326     <span class="comment">% Re-store the Application data:</span>
2327     <span class="comment">% ------------------------------</span>
2328     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2329     
2330 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2331     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2332 <span class="keyword">end</span>
2333 
2334 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2335 
2336 
2337 <span class="comment">% --------------------------------------------------------------------</span>
2338 <a name="_sub64" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2339 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2340 
2341 <span class="comment">% Get the Application data:</span>
2342 <span class="comment">% -------------------------</span>
2343 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2344 
2345 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2346 <span class="comment">% ----------------------------------------------------------------</span>
2347 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2348 is_a_number = ~isnan(new_vector_spacing_plan_view);
2349 is_positive = new_vector_spacing_plan_view&gt;=0;
2350 
2351 <span class="comment">% Modify the Application data:</span>
2352 <span class="comment">% ----------------------------</span>
2353 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2354     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2355     
2356     <span class="comment">% Re-store the Application data:</span>
2357     <span class="comment">% ------------------------------</span>
2358     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2359     
2360 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2361     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2362 <span class="keyword">end</span>
2363 
2364 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2365 
2366 
2367 <span class="comment">% --------------------------------------------------------------------</span>
2368 <a name="_sub65" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2369 <span class="comment">% Plan View smoothing window size</span>
2370 
2371 <span class="comment">% Get the Application data:</span>
2372 <span class="comment">% -------------------------</span>
2373 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2374 
2375 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2376 <span class="comment">% ----------------------------------------------------------------</span>
2377 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2378 is_a_number = ~isnan(new_smoothing_window_size);
2379 is_positive = new_smoothing_window_size&gt;=0;
2380 
2381 <span class="comment">% Modify the Application data:</span>
2382 <span class="comment">% ----------------------------</span>
2383 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2384     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2385     
2386     <span class="comment">% Re-store the Application data:</span>
2387     <span class="comment">% ------------------------------</span>
2388     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2389     
2390 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2391     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2392 <span class="keyword">end</span>
2393 
2394 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
2395 
2396 
2397 <span class="comment">% --------------------------------------------------------------------</span>
2398 <a name="_sub66" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2399 
2400 <span class="comment">% Get the Application data:</span>
2401 <span class="comment">% -------------------------</span>
2402 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2403 
2404 <span class="comment">% Modify the Application data:</span>
2405 <span class="comment">% ----------------------------</span>
2406 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2407 
2408 <span class="comment">% Re-store the Application data:</span>
2409 <span class="comment">% ------------------------------</span>
2410 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2411 
2412 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
2413 
2414 
2415 <span class="comment">% --------------------------------------------------------------------</span>
2416 <a name="_sub67" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2417 
2418 <span class="comment">% Get the Application data:</span>
2419 <span class="comment">% -------------------------</span>
2420 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2421 
2422 <span class="comment">% Modify the Application data:</span>
2423 <span class="comment">% ----------------------------</span>
2424 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2425 
2426 <span class="comment">% Re-store the Application data:</span>
2427 <span class="comment">% ------------------------------</span>
2428 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2429 
2430 <span class="comment">% [EOF] AddBackground_Callback</span>
2431 
2432 
2433 <span class="comment">% --------------------------------------------------------------------</span>
2434 <a name="_sub68" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2435 <a href="#_sub51" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2436 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2437 
2438 
2439 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2440 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2441 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2442 
2443 <span class="comment">% --------------------------------------------------------------------</span>
2444 <a name="_sub69" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2445 <span class="comment">% Set the horizontal grid node spacing</span>
2446 
2447 <span class="comment">% Get the Application data:</span>
2448 <span class="comment">% -------------------------</span>
2449 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2450 
2451 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2452 <span class="comment">% ----------------------------------------------------------------</span>
2453 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2454 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2455 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2456 
2457 <span class="comment">% Modify the Application data:</span>
2458 <span class="comment">% ----------------------------</span>
2459 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2460     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2461     
2462     <span class="comment">% Re-store the Application data:</span>
2463     <span class="comment">% ------------------------------</span>
2464     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2465     
2466 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2467     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2468 <span class="keyword">end</span>
2469 
2470 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2471 
2472 
2473 <span class="comment">% --------------------------------------------------------------------</span>
2474 <a name="_sub70" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2475 <span class="comment">% Set the cross section endpoints manually</span>
2476 
2477 <span class="comment">% Get the Application data:</span>
2478 <span class="comment">% -------------------------</span>
2479 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2480 
2481 <span class="comment">% Modify the Application data:</span>
2482 <span class="comment">% ----------------------------</span>
2483 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2484 
2485 <span class="comment">% Re-store the Application data:</span>
2486 <span class="comment">% ------------------------------</span>
2487 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2488 
2489 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2490 
2491 
2492 <span class="comment">% --------------------------------------------------------------------</span>
2493 <a name="_sub71" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2494 <a href="#_sub50" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2495 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2496 
2497 
2498 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2499 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2500 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2501 
2502 <span class="comment">% --------------------------------------------------------------------</span>
2503 <a name="_sub72" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2504 
2505 <span class="comment">% Get the Application data:</span>
2506 <span class="comment">% -------------------------</span>
2507 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2508 
2509 <span class="comment">% Modify the Application data:</span>
2510 <span class="comment">% ----------------------------</span>
2511 idx_variable = get(hObject,<span class="string">'Value'</span>);
2512 guiparams.idx_contour = idx_variable;
2513 guiparams.contour = guiparams.contours(idx_variable).variable;
2514 
2515 <span class="comment">% Re-store the Application data:</span>
2516 <span class="comment">% ------------------------------</span>
2517 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2518 
2519 <span class="comment">% [EOF] Contour_Callback</span>
2520 
2521 
2522 <span class="comment">% --------------------------------------------------------------------</span>
2523 <a name="_sub73" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2524 <span class="comment">% Set vertical exaggeration</span>
2525 
2526 <span class="comment">% Get the Application data:</span>
2527 <span class="comment">% -------------------------</span>
2528 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2529 
2530 <span class="comment">% Modify the Application data:</span>
2531 <span class="comment">% ----------------------------</span>
2532 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
2533 
2534 <span class="comment">% Re-store the Application data:</span>
2535 <span class="comment">% ------------------------------</span>
2536 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2537 
2538 <span class="comment">% Update the GUI:</span>
2539 <span class="comment">% ---------------</span>
2540 <span class="comment">% updateGUI(handles,guiparams)</span>
2541 
2542 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
2543 
2544 
2545 <span class="comment">% --------------------------------------------------------------------</span>
2546 <a name="_sub74" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
2547 
2548 <span class="comment">% Get the Application data:</span>
2549 <span class="comment">% -------------------------</span>
2550 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2551 
2552 <span class="comment">% Modify the Application data:</span>
2553 <span class="comment">% ----------------------------</span>
2554 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
2555 
2556 <span class="comment">% Re-store the Application data:</span>
2557 <span class="comment">% ------------------------------</span>
2558 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2559 
2560 <span class="comment">% Update the GUI:</span>
2561 <span class="comment">% ---------------</span>
2562 <span class="comment">% updateGUI(handles,guiparams)</span>
2563 
2564 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
2565 
2566 
2567 <span class="comment">% --------------------------------------------------------------------</span>
2568 <a name="_sub75" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2569 
2570 <span class="comment">% Get the Application data:</span>
2571 <span class="comment">% -------------------------</span>
2572 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2573 
2574 <span class="comment">% Modify the Application data:</span>
2575 <span class="comment">% ----------------------------</span>
2576 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2577 
2578 <span class="comment">% Re-store the Application data:</span>
2579 <span class="comment">% ------------------------------</span>
2580 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2581 
2582 <span class="comment">% Update the GUI:</span>
2583 <span class="comment">% ---------------</span>
2584 <span class="comment">% updateGUI(handles,guiparams)</span>
2585 
2586 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
2587 
2588 
2589 <span class="comment">% --------------------------------------------------------------------</span>
2590 <a name="_sub76" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2591 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
2592 
2593 <span class="comment">% Get the Application data:</span>
2594 <span class="comment">% -------------------------</span>
2595 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2596 
2597 <span class="comment">% Modify the Application data:</span>
2598 <span class="comment">% ----------------------------</span>
2599 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2600 
2601 <span class="comment">% Re-store the Application data:</span>
2602 <span class="comment">% ------------------------------</span>
2603 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2604 
2605 <span class="comment">% Update the GUI:</span>
2606 <span class="comment">% ---------------</span>
2607 <span class="comment">% updateGUI(handles,guiparams)</span>
2608 
2609 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
2610 
2611 
2612 <span class="comment">% --------------------------------------------------------------------</span>
2613 <a name="_sub77" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2614 <span class="comment">% Horizontal Smoothing</span>
2615 
2616 <span class="comment">% Get the Application data:</span>
2617 <span class="comment">% -------------------------</span>
2618 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2619 
2620 <span class="comment">% Modify the Application data:</span>
2621 <span class="comment">% ----------------------------</span>
2622 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
2623 
2624 <span class="comment">% Re-store the Application data:</span>
2625 <span class="comment">% ------------------------------</span>
2626 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2627 
2628 <span class="comment">% Update the GUI:</span>
2629 <span class="comment">% ---------------</span>
2630 <span class="comment">% updateGUI(handles,guiparams)</span>
2631 
2632 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
2633 
2634 
2635 <span class="comment">% --------------------------------------------------------------------</span>
2636 <a name="_sub78" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2637 <span class="comment">% Vertical Smoothing</span>
2638 
2639 <span class="comment">% Get the Application data:</span>
2640 <span class="comment">% -------------------------</span>
2641 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2642 
2643 <span class="comment">% Modify the Application data:</span>
2644 <span class="comment">% ----------------------------</span>
2645 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
2646 
2647 <span class="comment">% Re-store the Application data:</span>
2648 <span class="comment">% ------------------------------</span>
2649 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2650 
2651 <span class="comment">% Update the GUI:</span>
2652 <span class="comment">% ---------------</span>
2653 <span class="comment">% updateGUI(handles,guiparams)</span>
2654 
2655 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
2656 
2657 
2658 <span class="comment">% --------------------------------------------------------------------</span>
2659 <a name="_sub79" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
2660 
2661 <span class="comment">% Get the Application data:</span>
2662 <span class="comment">% -------------------------</span>
2663 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2664 
2665 <span class="comment">% Modify the Application data:</span>
2666 <span class="comment">% ----------------------------</span>
2667 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2668 
2669 <span class="comment">% Re-store the Application data:</span>
2670 <span class="comment">% ------------------------------</span>
2671 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2672 
2673 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
2674 
2675 
2676 <span class="comment">% --------------------------------------------------------------------</span>
2677 <a name="_sub80" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
2678 
2679 <span class="comment">% Get the Application data:</span>
2680 <span class="comment">% -------------------------</span>
2681 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2682 
2683 <span class="comment">% Modify the Application data:</span>
2684 <span class="comment">% ----------------------------</span>
2685 idx_variable = get(hObject,<span class="string">'Value'</span>);
2686 guiparams.idx_secondary_flow_vector_variable = idx_variable;
2687 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
2688 
2689 <span class="comment">% Re-store the Application data:</span>
2690 <span class="comment">% ------------------------------</span>
2691 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2692 
2693 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
2694 
2695 
2696 <span class="comment">% --------------------------------------------------------------------</span>
2697 <a name="_sub81" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
2698 
2699 <span class="comment">% Get the Application data:</span>
2700 <span class="comment">% -------------------------</span>
2701 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2702 
2703 <span class="comment">% Modify the Application data:</span>
2704 <span class="comment">% ----------------------------</span>
2705 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2706 
2707 <span class="comment">% Re-store the Application data:</span>
2708 <span class="comment">% ------------------------------</span>
2709 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2710 
2711 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
2712 
2713 
2714 <span class="comment">% --------------------------------------------------------------------</span>
2715 <a name="_sub82" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
2716 <a href="#_sub52" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
2717 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
2718 
2719 
2720 <span class="comment">% --------------------------------------------------------------------</span>
2721 <a name="_sub83" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
2722 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
2723 <span class="comment">% [EOF] ClearLog_Callback</span>
2724 
2725 <span class="comment">% --------------------------------------------------------------------</span>
2726 <a name="_sub84" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
2727 
2728 <span class="comment">% Get the Application data:</span>
2729 <span class="comment">% -------------------------</span>
2730 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2731 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2732 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
2733 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
2734 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
2735 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
2736 
2737 [the_file,the_path] = <span class="keyword">...</span>
2738     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
2739     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
2740     fullfile(guiprefs.log_path,guiprefs.log_file));
2741 
2742 <span class="comment">% Save the log to a TXT file:</span>
2743 <span class="comment">% ---------------------------</span>
2744 <span class="keyword">if</span> ischar(the_file)
2745     guiparams.log_path = the_path;
2746     guiparams.log_file = the_file;
2747     <span class="comment">%guiparams.savefile = the_file;</span>
2748     
2749     <span class="comment">% Re-store the Application data:</span>
2750     <span class="comment">% ------------------------------</span>
2751     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2752     
2753     <span class="comment">% Update the preferences:</span>
2754     <span class="comment">% -----------------------</span>
2755     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2756     guiprefs.log_path = the_path;
2757     guiprefs.log_file = the_file;
2758     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2759     <a href="#_sub87" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
2760     
2761     [~,filename,extension] = fileparts(the_file);
2762     savefile = [the_path filename extension];
2763     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2764         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2765     
2766     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
2767     [nrows,~]= size(logfile);
2768     fid = fopen(savefile, <span class="string">'w'</span>);
2769     <span class="keyword">for</span> row=1:nrows
2770         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
2771     <span class="keyword">end</span>
2772     fclose(fid);
2773 <span class="keyword">end</span>
2774 <span class="comment">% [EOF] SaveLog_Callback</span>
2775 
2776 <span class="comment">%%%%%%%%%%%%%%%%</span>
2777 <span class="comment">% SUBFUNCTIONS %</span>
2778 <span class="comment">%%%%%%%%%%%%%%%%</span>
2779 
2780 <span class="comment">% --------------------------------------------------------------------</span>
2781 <a name="_sub85" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
2782 
2783 icons = <a href="#_sub101" class="code" title="subfunction icons = getIcons">getIcons</a>;
2784 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
2785 
2786 <span class="comment">% Load data</span>
2787 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
2788 <span class="comment">% icon = double(icon)/(2^16-1);</span>
2789 <span class="comment">% icon(icon==0) = NaN;</span>
2790 handles.toolbarLoadData = <span class="keyword">...</span>
2791     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2792     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
2793     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
2794 
2795 <span class="comment">% Save data</span>
2796 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
2797 <span class="comment">% icon = double(icon)/(2^16-1);</span>
2798 <span class="comment">% icon(icon==0) = NaN;</span>
2799 handles.toolbarSaveMatFile = <span class="keyword">...</span>
2800     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2801     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
2802     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
2803     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
2804 
2805 
2806 <span class="comment">% Save bathymetry</span>
2807 <span class="comment">%icon = ones(16,16,3);</span>
2808 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
2809     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2810     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
2811     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
2812 
2813 <span class="comment">% Save figures</span>
2814 <span class="comment">% icon = ones(16,16,3);</span>
2815 handles.toolbarSaveFigures = <span class="keyword">...</span>
2816     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2817     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
2818     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
2819 
2820 <span class="comment">% Save Excel File</span>
2821 <span class="comment">% icon = ones(16,16,3);</span>
2822 handles.toolbarSaveExcel = <span class="keyword">...</span>
2823     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2824     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
2825     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
2826 
2827 
2828 <span class="comment">% Plotting parameters</span>
2829 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
2830 <span class="comment">% icon = ind2rgb(icon,map);</span>
2831 handles.toolbarPlottingParameters = <span class="keyword">...</span>
2832     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2833     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
2834     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
2835     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
2836 
2837 <span class="comment">% Processing parameters</span>
2838 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
2839 <span class="comment">% icon = ind2rgb(icon,map);</span>
2840 handles.toolbarProcessingParameters = <span class="keyword">...</span>
2841     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2842     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
2843     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
2844 
2845 <span class="comment">% Zoom In</span>
2846 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
2847 <span class="comment">% icon = ind2rgb(icon,map);</span>
2848 <span class="comment">% handles.toolbarZoomIn = ...</span>
2849 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
2850 <span class="comment">%     'CData',        icons(8).data, ...</span>
2851 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
2852 <span class="comment">%     'Separator',     'on');</span>
2853 
2854 <span class="comment">% Zoom Out</span>
2855 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
2856 <span class="comment">% icon = ind2rgb(icon,map);</span>
2857 <span class="comment">% handles.toolbarZoomOut = ...</span>
2858 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
2859 <span class="comment">%     'CData',        icons(9).data, ...</span>
2860 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
2861 
2862 <span class="comment">% Pan</span>
2863 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
2864 <span class="comment">% icon = ind2rgb(icon,map);</span>
2865 <span class="comment">% handles.toolbarPan = ...</span>
2866 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
2867 <span class="comment">%     'CData',        icons(10).data, ...</span>
2868 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
2869 
2870 
2871 
2872 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub45" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
2873 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub46" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
2874 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub56" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
2875 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub17" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
2876 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
2877 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub48" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
2878 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub49" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
2879 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
2880 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
2881 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
2882 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
2883 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
2884 
2885 <span class="comment">% [EOF] buildtoolbar</span>
2886 
2887 
2888 <span class="comment">% --------------------------------------------------------------------</span>
2889 <a name="_sub86" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
2890 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
2891 <span class="comment">% already exist.</span>
2892 
2893 <span class="comment">% Preferences:</span>
2894 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
2895 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
2896 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
2897 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
2898 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
2899 <span class="comment">% 'log'                  Path and filename of last Log file</span>
2900 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
2901 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
2902 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
2903 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
2904 
2905 <span class="comment">% Originals</span>
2906 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
2907 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
2908 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
2909 
2910 <span class="comment">% ASCII</span>
2911 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
2912     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
2913     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
2914         guiprefs.ascii_path = ascii.path;
2915     <span class="keyword">else</span>
2916         guiprefs.ascii_path = pwd;
2917     <span class="keyword">end</span>
2918     does_exist = false(1,length(ascii.file));
2919     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
2920         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
2921     <span class="keyword">end</span>
2922     <span class="keyword">if</span> any(does_exist)
2923         guiprefs.ascii_file = ascii.file(does_exist);
2924     <span class="keyword">else</span>
2925         guiprefs.ascii_file = {<span class="string">''</span>};
2926     <span class="keyword">end</span>
2927 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
2928     guiprefs.ascii_path = pwd;
2929     guiprefs.ascii_file = {<span class="string">''</span>};
2930     
2931     ascii.path = pwd;
2932     ascii.file = {<span class="string">''</span>};
2933     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
2934 <span class="keyword">end</span>
2935 
2936 <span class="comment">% MAT</span>
2937 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
2938     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
2939     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
2940         guiprefs.mat_path = mat.path;
2941     <span class="keyword">else</span>
2942         guiprefs.mat_path = pwd;
2943     <span class="keyword">end</span>
2944     
2945     <span class="keyword">if</span> iscell(mat.file)
2946         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
2947             guiprefs.mat_file = mat.file;
2948         <span class="keyword">else</span>
2949             guiprefs.mat_file = <span class="string">''</span>;
2950         <span class="keyword">end</span>
2951     <span class="keyword">else</span>
2952         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
2953             guiprefs.mat_file = mat.file;
2954         <span class="keyword">else</span>
2955             guiprefs.mat_file = <span class="string">''</span>;
2956         <span class="keyword">end</span>
2957     <span class="keyword">end</span>
2958 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
2959     guiprefs.mat_path = pwd;
2960     guiprefs.mat_file = <span class="string">''</span>;
2961     
2962     mat.path = pwd;
2963     mat.file = <span class="string">''</span>;
2964     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
2965 <span class="keyword">end</span>
2966 
2967 <span class="comment">% TECPLOT</span>
2968 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
2969     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
2970     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
2971         guiprefs.tecplot_path = tecplot.path;
2972     <span class="keyword">else</span>
2973         guiprefs.tecplot_path = pwd;
2974     <span class="keyword">end</span>
2975     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
2976         guiprefs.tecplot_file = tecplot.file;
2977     <span class="keyword">else</span>
2978         guiprefs.tecplot_file = <span class="string">''</span>;
2979     <span class="keyword">end</span>
2980 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
2981     guiprefs.tecplot_path = pwd;
2982     guiprefs.tecplot_file = <span class="string">''</span>;
2983     
2984     tecplot.path = pwd;
2985     tecplot.file = <span class="string">''</span>;
2986     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
2987 <span class="keyword">end</span>
2988 
2989 <span class="comment">% KMZ</span>
2990 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
2991     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
2992     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
2993         guiprefs.kmz_path = kmz.path;
2994     <span class="keyword">else</span>
2995         guiprefs.kmz_path = pwd;
2996     <span class="keyword">end</span>
2997     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
2998         guiprefs.kmz_file = kmz.file;
2999     <span class="keyword">else</span>
3000         guiprefs.kmz_file = <span class="string">''</span>;
3001     <span class="keyword">end</span>
3002 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3003     guiprefs.kmz_path = pwd;
3004     guiprefs.kmz_file = <span class="string">''</span>;
3005     
3006     kmz.path = pwd;
3007     kmz.file = <span class="string">''</span>;
3008     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3009 <span class="keyword">end</span>
3010 
3011 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3012 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3013     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3014     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3015         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3016     <span class="keyword">else</span>
3017         guiprefs.multibeambathymetry_path = pwd;
3018     <span class="keyword">end</span>
3019     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3020         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3021     <span class="keyword">else</span>
3022         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3023     <span class="keyword">end</span>
3024 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3025     guiprefs.multibeambathymetry_path = pwd;
3026     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3027     
3028     multibeambathymetry.path = pwd;
3029     multibeambathymetry.file = <span class="string">''</span>;
3030     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3031 <span class="keyword">end</span>
3032 
3033 <span class="comment">% Log</span>
3034 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3035     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3036     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3037         guiprefs.log_path = log.path;
3038     <span class="keyword">else</span>
3039         guiprefs.log_path = pwd;
3040     <span class="keyword">end</span>
3041     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3042         guiprefs.log_file = log.file;
3043     <span class="keyword">else</span>
3044         guiprefs.log_file = <span class="string">''</span>;
3045     <span class="keyword">end</span>
3046 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3047     guiprefs.log_path = pwd;
3048     guiprefs.log_file = <span class="string">''</span>;
3049     
3050     log.path = pwd;
3051     log.file = <span class="string">''</span>;
3052     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3053 <span class="keyword">end</span>
3054 
3055 <span class="comment">% iRic</span>
3056 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3057     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3058     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3059         guiprefs.iric_path = iric.path;
3060     <span class="keyword">else</span>
3061         guiprefs.iric_path = pwd;
3062     <span class="keyword">end</span>
3063     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3064         guiprefs.iric_file = iric.file;
3065     <span class="keyword">else</span>
3066         guiprefs.iric_file = <span class="string">''</span>;
3067     <span class="keyword">end</span>
3068 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3069     guiprefs.iric_path = pwd;
3070     guiprefs.iric_file = <span class="string">''</span>;
3071     
3072     iric.path = pwd;
3073     iric.file = <span class="string">''</span>;
3074     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3075 <span class="keyword">end</span>
3076 
3077 <span class="comment">% excel</span>
3078 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3079     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3080     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3081         guiprefs.excel_path = excel.path;
3082     <span class="keyword">else</span>
3083         guiprefs.excel_path = pwd;
3084     <span class="keyword">end</span>
3085     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3086         guiprefs.excel_file = excel.file;
3087     <span class="keyword">else</span>
3088         guiprefs.excel_file = <span class="string">''</span>;
3089     <span class="keyword">end</span>
3090 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3091     guiprefs.excel_path = pwd;
3092     guiprefs.excel_file = <span class="string">''</span>;
3093     
3094     excel.path = pwd;
3095     excel.file = <span class="string">''</span>;
3096     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3097 <span class="keyword">end</span>
3098 
3099 <span class="comment">% aerial</span>
3100 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3101     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3102     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3103         guiprefs.aerial_path = aerial.path;
3104     <span class="keyword">else</span>
3105         guiprefs.aerial_path = pwd;
3106     <span class="keyword">end</span>
3107     does_exist = false(1,length(aerial.file));
3108     <span class="keyword">if</span> iscell(aerial.file)
3109     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3110         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3111     <span class="keyword">end</span>
3112     <span class="keyword">else</span>
3113         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3114     <span class="keyword">end</span>
3115     <span class="keyword">if</span> any(does_exist)
3116         guiprefs.aerial_file = aerial.file;
3117     <span class="keyword">else</span>
3118         guiprefs.aerial_file = {<span class="string">''</span>};
3119     <span class="keyword">end</span>
3120 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3121     guiprefs.aerial_path = pwd;
3122     guiprefs.aerial_file = {<span class="string">''</span>};
3123     
3124     aerial.path = pwd;
3125     aerial.file = {<span class="string">''</span>};
3126     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3127 <span class="keyword">end</span>
3128 
3129 <span class="comment">% shoreline</span>
3130 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3131     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3132     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3133         guiprefs.shoreline_path = shoreline.path;
3134     <span class="keyword">else</span>
3135         guiprefs.shoreline_path = pwd;
3136     <span class="keyword">end</span>
3137     
3138     <span class="keyword">if</span> iscell(shoreline.file)
3139         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3140             guiprefs.shoreline_file = shoreline.file;
3141         <span class="keyword">else</span>
3142             guiprefs.shoreline_file = <span class="string">''</span>;
3143         <span class="keyword">end</span>
3144     <span class="keyword">else</span>
3145         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3146             guiprefs.shoreline_file = shoreline.file;
3147         <span class="keyword">else</span>
3148             guiprefs.shoreline_file = <span class="string">''</span>;
3149         <span class="keyword">end</span>
3150     <span class="keyword">end</span>
3151 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3152     guiprefs.shoreline_path = pwd;
3153     guiprefs.shoreline_file = <span class="string">''</span>;
3154     
3155     shoreline.path = pwd;
3156     shoreline.file = <span class="string">''</span>;
3157     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3158 <span class="keyword">end</span>
3159 <span class="comment">% guiprefs.presentation = true;</span>
3160 <span class="comment">% guiprefs.print        = false;</span>
3161 
3162 <span class="comment">% for k = 1:length(prefs)</span>
3163 <span class="comment">%     newpref = '';</span>
3164 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3165 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3166 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3167 <span class="comment">%             newpref = stored_newpref;</span>
3168 <span class="comment">%         else</span>
3169 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3170 <span class="comment">%         end</span>
3171 <span class="comment">%     end</span>
3172 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3173 <span class="comment">% end</span>
3174 
3175 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3176 
3177 <span class="comment">% [EOF] load_prefs</span>
3178 
3179 
3180 <span class="comment">% --------------------------------------------------------------------</span>
3181 <a name="_sub87" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3182 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3183 <span class="comment">% preferences data.</span>
3184 
3185 <span class="comment">% Preferences:</span>
3186 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3187 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3188 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3189 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3190 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3191 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3192 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3193 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3194 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3195 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3196 
3197 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3198 
3199 <span class="keyword">switch</span> pref
3200     <span class="keyword">case</span> <span class="string">'ascii'</span>
3201         ascii.path = guiprefs.ascii_path;
3202         ascii.file = guiprefs.ascii_file;
3203         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3204     <span class="keyword">case</span> <span class="string">'mat'</span>
3205         mat.path = guiprefs.mat_path;
3206         mat.file = guiprefs.mat_file;
3207         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3208     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3209         tecplot.path = guiprefs.tecplot_path;
3210         tecplot.file = guiprefs.tecplot_file;
3211         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3212     <span class="keyword">case</span> <span class="string">'kmz'</span>
3213         kmz.path = guiprefs.kmz_path;
3214         kmz.file = guiprefs.kmz_file;
3215         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3216     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3217         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3218         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3219         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3220     <span class="keyword">case</span> <span class="string">'log'</span>
3221         log.path = guiprefs.log_path;
3222         log.file = guiprefs.log_file;
3223         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3224     <span class="keyword">case</span> <span class="string">'iric'</span>
3225         iric.path = guiprefs.iric_path;
3226         iric.file = guiprefs.iric_file;
3227         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3228     <span class="keyword">case</span> <span class="string">'excel'</span>
3229         excel.path = guiprefs.excel_path;
3230         excel.file = guiprefs.excel_file;
3231         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3232     <span class="keyword">case</span> <span class="string">'aerial'</span>
3233         aerial.path = guiprefs.aerial_path;
3234         aerial.file = guiprefs.aerial_file;
3235         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3236     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3237         shoreline.path = guiprefs.shoreline_path;
3238         shoreline.file = guiprefs.shoreline_file;
3239         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3240     <span class="keyword">otherwise</span>
3241 <span class="keyword">end</span>
3242 
3243 <span class="comment">% if ismember(pref,prefs)</span>
3244 <span class="comment">%     setpref('VMT',pref,value)</span>
3245 <span class="comment">%</span>
3246 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3247 <span class="comment">%     guiprefs.(pref) = value;</span>
3248 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3249 <span class="comment">% end</span>
3250 
3251 <span class="comment">% [EOF] store_prefs</span>
3252 
3253 
3254 <span class="comment">% --------------------------------------------------------------------</span>
3255 <a name="_sub88" href="#_subfunctions" class="code">function initGUI(handles)</a>
3256 <span class="comment">% Initialize the UI controls in the GUI.</span>
3257 
3258 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3259 
3260 <span class="comment">% Set the name and version</span>
3261 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3262     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3263 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3264 
3265 <span class="comment">% Set the PLOT 1 axis labels</span>
3266 axes(handles.Plot1Shiptracks);
3267 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3268 xlabel(<span class="string">'UTM Easting (m)'</span>)
3269 ylabel(<span class="string">'UTM Northing (m)'</span>)
3270 box on
3271 grid on
3272 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3273 
3274 <span class="comment">%%%%%%%%%%%%</span>
3275 <span class="comment">% MENU BAR %</span>
3276 <span class="comment">%%%%%%%%%%%%</span>
3277 <span class="keyword">if</span> guiparams.english_units
3278     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3279     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3280 <span class="keyword">else</span>
3281     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3282     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3283 <span class="keyword">end</span>
3284 
3285 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3286     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3287     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3288 <span class="keyword">else</span>
3289     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3290     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3291 <span class="keyword">end</span>
3292 
3293 
3294 <span class="keyword">if</span> guiparams.print
3295     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3296     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3297     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3298     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3299 <span class="keyword">elseif</span> guiparams.presentation
3300     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3301     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3302     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3303     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3304 <span class="keyword">else</span>
3305 <span class="keyword">end</span>
3306 
3307 
3308 <span class="comment">%%%%%%%%%%%%%%%</span>
3309 <span class="comment">% DATA EXPORT %</span>
3310 <span class="comment">%%%%%%%%%%%%%%%</span>
3311 <span class="comment">% BathymetryPanel</span>
3312 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3313 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3314 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3315 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3316 
3317 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3318 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3319 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3320 <span class="comment">% PlanViewPanel</span>
3321 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3322 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3323 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3324 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3325 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3326 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3327 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3328 
3329 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3330 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3331 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3332 <span class="comment">% ShiptracksPanel</span>
3333 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3334 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3335 
3336 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3337 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3338 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3339 <span class="comment">% CrossSectionsPanel</span>
3340 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3341     <span class="string">'Value'</span>, guiparams.idx_contour)
3342 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3343 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3344 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3345 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3346 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3347 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3348 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3349 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3350     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3351 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3352 
3353 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3354 
3355 <span class="comment">% [EOF] initGUI</span>
3356 
3357 
3358 <span class="comment">% --------------------------------------------------------------------</span>
3359 <a name="_sub89" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3360 
3361 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3362 
3363 <span class="keyword">switch</span> enable_state
3364     <span class="keyword">case</span> <span class="string">'init'</span>
3365         set([handles.menuFile
3366             handles.menuOpen
3367             handles.menuOpenASCII
3368             handles.menuOpenMAT
3369             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3370         
3371         set([handles.toolbarLoadData
3372             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3373         set([handles.toolbarSaveMatFile
3374             handles.toolbarSaveBathymetry
3375             handles.toolbarSaveFigures
3376             handles.toolbarSaveExcel
3377             handles.toolbarPlottingParameters
3378             handles.toolbarProcessingParameters
3379             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3380         
3381         set([handles.DepthRangeMin
3382             handles.DepthRangeMax
3383             handles.VectorScalePlanView
3384             handles.VectorSpacingPlanview
3385             handles.SmoothingWindowSize
3386             handles.DisplayShoreline
3387             handles.AddBackground
3388             handles.PlotPlanView
3389             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3390         
3391         set([handles.HorizontalGridNodeSpacing
3392             handles.PlotShiptracks
3393             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3394         
3395         set([handles.Contour
3396             handles.VerticalExaggeration
3397             handles.VectorScaleCrossSection
3398             handles.HorizontalVectorSpacing
3399             handles.VerticalVectorSpacing
3400             handles.HorizontalSmoothingWindow
3401             handles.VerticalSmoothingWindow
3402             handles.PlotSecondaryFlowVectors
3403             handles.SecondaryFlowVectorVariable
3404             handles.IncludeVerticalVelocity
3405             handles.PlotCrossSection
3406             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3407         
3408     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3409         set([handles.menuFile
3410             handles.menuOpen
3411             handles.menuOpenASCII
3412             handles.menuOpenMAT
3413             handles.menuSaveMAT
3414             handles.menuSaveTecplot
3415             handles.menuSaveKMZFile
3416             handles.menuParameters
3417             handles.menuPlottingParameters
3418             handles.menuMetric
3419             handles.menuEnglish
3420             handles.menuBathymetryExportSettings
3421             handles.menuExportMultibeamBathymetry
3422             handles.menuKMZExport
3423             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3424         
3425         set([handles.toolbarLoadData
3426             handles.toolbarSaveMatFile
3427             handles.toolbarSaveBathymetry
3428             handles.toolbarSaveExcel
3429             handles.toolbarSaveFigures
3430             handles.toolbarPlottingParameters
3431             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3432         set([handles.toolbarProcessingParameters
3433             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3434         
3435            
3436         set([handles.DepthRangeMin
3437             handles.DepthRangeMax
3438             handles.VectorScalePlanView
3439             handles.VectorSpacingPlanview
3440             handles.SmoothingWindowSize
3441             handles.DisplayShoreline
3442             handles.PlotPlanView
3443             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3444         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3445             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3446         <span class="keyword">else</span>
3447             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3448         <span class="keyword">end</span>
3449         
3450         set([handles.HorizontalGridNodeSpacing
3451             handles.PlotShiptracks
3452             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3453         
3454         set([handles.Contour
3455             handles.VerticalExaggeration
3456             handles.VectorScaleCrossSection
3457             handles.HorizontalVectorSpacing
3458             handles.VerticalVectorSpacing
3459             handles.HorizontalSmoothingWindow
3460             handles.VerticalSmoothingWindow
3461             handles.PlotSecondaryFlowVectors
3462             handles.SecondaryFlowVectorVariable
3463             handles.IncludeVerticalVelocity
3464             handles.PlotCrossSection
3465             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3466     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
3467         set([handles.menuFile
3468             handles.menuOpen
3469             handles.menuOpenASCII
3470             handles.menuOpenMAT
3471             handles.menuParameters
3472             handles.menuPlottingParameters
3473             handles.menuMetric
3474             handles.menuEnglish
3475             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3476         set([handles.menuSaveMAT
3477             handles.menuBathymetryExportSettings
3478             handles.menuExportMultibeamBathymetry
3479             handles.menuKMZExport
3480             handles.menuSaveKMZFile
3481             handles.menuSaveTecplot
3482             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3483         
3484         set([handles.toolbarLoadData
3485             handles.toolbarSaveFigures
3486             handles.toolbarPlottingParameters
3487             handles.toolbarSaveExcel
3488             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3489         set([handles.toolbarProcessingParameters
3490             handles.toolbarSaveMatFile
3491             handles.toolbarSaveBathymetry
3492             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3493         
3494         set([handles.DepthRangeMin
3495             handles.DepthRangeMax
3496             handles.VectorScalePlanView
3497             handles.VectorSpacingPlanview
3498             handles.SmoothingWindowSize
3499             handles.DisplayShoreline
3500             handles.PlotPlanView
3501             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3502         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3503             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3504         <span class="keyword">else</span>
3505             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3506         <span class="keyword">end</span>
3507         
3508         set([handles.HorizontalGridNodeSpacing
3509             handles.PlotShiptracks
3510             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3511         
3512         set([handles.Contour
3513             handles.VerticalExaggeration
3514             handles.VectorScaleCrossSection
3515             handles.HorizontalVectorSpacing
3516             handles.VerticalVectorSpacing
3517             handles.HorizontalSmoothingWindow
3518             handles.VerticalSmoothingWindow
3519             handles.PlotSecondaryFlowVectors
3520             handles.SecondaryFlowVectorVariable
3521             handles.IncludeVerticalVelocity
3522             handles.PlotCrossSection
3523             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3524     <span class="keyword">otherwise</span>
3525 <span class="keyword">end</span>
3526 
3527 <span class="comment">% [EOF] set_enable</span>
3528 
3529 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
3530 
3531 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
3532 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
3533 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
3534 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3535 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3536 
3537 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
3538 
3539 
3540 <span class="comment">% --------------------------------------------------------------------</span>
3541 <a name="_sub90" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
3542     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
3543 
3544 w = 500;
3545 h = 110;
3546 dx = 10;
3547 dy = 35;
3548 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3549 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3550     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3551     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3552     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3553     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3554     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3555     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3556     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3557     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3558     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3559     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3560 dialog_params.english_units               = english_units;
3561 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
3562 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
3563 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
3564 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3565 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
3566 
3567 <span class="comment">% Build the graphics:</span>
3568 <span class="comment">% -------------------</span>
3569 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3570     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
3571     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3572     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
3573 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3574     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
3575     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
3576     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3577     <span class="string">'Position'</span>,[15 35 100 22]);
3578 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3579     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
3580     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
3581     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3582     <span class="string">'Position'</span>,[15 10 100 22]);
3583 
3584 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3585     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
3586     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3587     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
3588 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3589     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
3590     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
3591     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3592     <span class="string">'Position'</span>,[15 35 100 22]);
3593 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3594     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
3595     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
3596     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3597     <span class="string">'Position'</span>,[15 10 100 22]);
3598 
3599 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3600     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
3601     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3602     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
3603 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3604     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
3605     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
3606     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3607     <span class="string">'Position'</span>,[15 35 100 22]);
3608 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3609     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
3610     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
3611     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3612     <span class="string">'Position'</span>,[15 10 100 22]);
3613 
3614 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3615     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3616     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
3617     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3618     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
3619 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3620     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3621     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
3622     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3623     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
3624 
3625 <span class="comment">% Update the UI controls:</span>
3626 <span class="comment">% -----------------------</span>
3627 <span class="keyword">if</span> dialog_params.english_units
3628     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
3629     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
3630 <span class="keyword">else</span>
3631     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
3632     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
3633 <span class="keyword">end</span>
3634 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
3635     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
3636     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
3637 <span class="keyword">else</span>
3638     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
3639     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
3640 <span class="keyword">end</span>
3641 <span class="keyword">if</span> dialog_params.presentation
3642     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
3643     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
3644 <span class="keyword">else</span>
3645     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
3646     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
3647 <span class="keyword">end</span>
3648 
3649 <span class="comment">% Set the callbacks:</span>
3650 <span class="comment">% ------------------</span>
3651 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub96" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
3652 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub91" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
3653 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub91" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
3654 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub92" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
3655 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub92" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
3656 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub93" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
3657 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub93" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
3658 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub94" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
3659 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub95" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
3660 
3661 <span class="comment">% Position the dialog and make it visible:</span>
3662 <span class="comment">% ----------------------------------------</span>
3663 fpos = get(hf,<span class="string">'Position'</span>);
3664 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
3665 movegui(handles.Figure,dpos)
3666 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
3667 
3668 <span class="comment">% Hold the dialog open:</span>
3669 <span class="comment">% ---------------------</span>
3670 waitfor(handles.OK)
3671 
3672 <span class="comment">% Return the outputs and close the dialog:</span>
3673 <span class="comment">% ----------------------------------------</span>
3674 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3675 english_units = dialog_params.english_units;
3676 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
3677 plot_presentation_style =  dialog_params.presentation;
3678 plot_print_style =  dialog_params.print;
3679 
3680 delete(handles.Figure)
3681 
3682 <span class="comment">% [EOF] plotParametersDialog</span>
3683 
3684 
3685 <span class="comment">% --------------------------------------------------------------------</span>
3686 <a name="_sub91" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
3687 
3688 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3689 <span class="keyword">switch</span> the_units
3690     <span class="keyword">case</span> <span class="string">'metric'</span>
3691         dialog_params.english_units = false;
3692         
3693         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
3694         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
3695     <span class="keyword">case</span> <span class="string">'english'</span>
3696         dialog_params.english_units = true;
3697         
3698         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
3699         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
3700     <span class="keyword">otherwise</span>
3701 <span class="keyword">end</span>
3702 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3703 
3704 <span class="comment">% [EOF] dialogUnits</span>
3705 
3706 <span class="comment">% --------------------------------------------------------------------</span>
3707 <a name="_sub92" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
3708 
3709 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3710 <span class="keyword">switch</span> the_endpoints
3711     <span class="keyword">case</span> <span class="string">'auto'</span>
3712         dialog_params.set_cross_section_endpoints = false;
3713         
3714         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
3715         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
3716     <span class="keyword">case</span> <span class="string">'manual'</span>
3717         dialog_params.set_cross_section_endpoints = true;
3718         
3719         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
3720         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
3721     <span class="keyword">otherwise</span>
3722 <span class="keyword">end</span>
3723 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3724 
3725 <span class="comment">% [EOF] dialogEnpoints</span>
3726 
3727 <a name="_sub93" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
3728 
3729 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3730 <span class="keyword">switch</span> the_style
3731     <span class="keyword">case</span> <span class="string">'presentation'</span>
3732         dialog_params.presentation  = true;
3733         dialog_params.print         = false;
3734         
3735         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
3736         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
3737     <span class="keyword">case</span> <span class="string">'print'</span>
3738         dialog_params.presentation  = false;
3739         dialog_params.print         = true;
3740         
3741         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
3742         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
3743     <span class="keyword">otherwise</span>
3744 <span class="keyword">end</span>
3745 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3746 
3747 <span class="comment">% [EOF] dialogEnpoints</span>
3748 
3749 <span class="comment">% --------------------------------------------------------------------</span>
3750 <a name="_sub94" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
3751 
3752 delete(h_OK)
3753 
3754 <span class="comment">% [EOF] dialogOK</span>
3755 
3756 <span class="comment">% --------------------------------------------------------------------</span>
3757 <a name="_sub95" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
3758 <span class="comment">% Return the original inputs</span>
3759 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
3760 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3761 delete(handles.OK)
3762 
3763 <span class="comment">% [EOF] dialogCancel</span>
3764 
3765 <span class="comment">% --------------------------------------------------------------------</span>
3766 <a name="_sub96" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
3767 
3768 delete(h_OK)
3769 
3770 <span class="comment">% [EOF] dialogCloseReq</span>
3771 
3772 <a name="_sub97" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
3773 w = 230;
3774 h = 200;
3775 dx = 10;
3776 dy = 35;
3777 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3778 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
3779     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3780     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3781     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3782     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3783     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3784     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3785     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3786     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3787     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3788     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3789 dialog_params.beam_angle             = beam_angle;
3790 dialog_params.magnetic_variation     = magnetic_variation;
3791 dialog_params.wse                    = wse;
3792 dialog_params.output_auxiliary_data = output_auxiliary_data;
3793 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3794 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
3795 
3796 <span class="comment">% Build the graphics:</span>
3797 <span class="comment">% -------------------</span>
3798 ph = 150;
3799 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3800     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
3801     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3802     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
3803 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
3804     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3805     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
3806     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
3807     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
3808     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3809     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
3810 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
3811     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3812     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
3813     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
3814     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
3815     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3816     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
3817 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
3818     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3819     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
3820     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
3821     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
3822     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3823     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
3824 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
3825     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3826     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
3827     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
3828     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
3829     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3830     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
3831 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
3832     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3833     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
3834     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
3835     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
3836     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3837     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
3838 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
3839     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3840     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
3841     <span class="string">'String'</span>,wse,<span class="keyword">...</span>
3842     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
3843     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3844     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
3845 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3846     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3847     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
3848     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3849     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
3850 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3851     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3852     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
3853     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3854     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
3855 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3856     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3857     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
3858     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3859     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
3860 
3861 <span class="comment">% Update the UI controls:</span>
3862 <span class="comment">% -----------------------</span>
3863 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
3864 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
3865 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
3866 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
3867 
3868 <span class="comment">% Set the callbacks:</span>
3869 <span class="comment">% ------------------</span>
3870 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub96" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
3871 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
3872 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
3873 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
3874 set(handles.OutputauxiliaryData,        <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
3875 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub94" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
3876 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub95" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
3877 
3878 <span class="comment">% Position the dialog and make it visible:</span>
3879 <span class="comment">% ----------------------------------------</span>
3880 fpos = get(hf,<span class="string">'Position'</span>);
3881 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
3882 movegui(handles.Figure,dpos)
3883 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
3884 
3885 <span class="comment">% Hold the dialog open:</span>
3886 <span class="comment">% ---------------------</span>
3887 waitfor(handles.OK)
3888 
3889 <span class="comment">% Return the outputs and close the dialog:</span>
3890 <span class="comment">% ----------------------------------------</span>
3891 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3892 beam_angle              = dialog_params.beam_angle;
3893 magnetic_variation      = dialog_params.magnetic_variation;
3894 wse                     = dialog_params.wse;
3895 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
3896 
3897 delete(handles.Figure)
3898 
3899 <span class="comment">% [EOF] exportSettingsDialog</span>
3900 
3901 <span class="comment">% --------------------------------------------------------------------</span>
3902 <a name="_sub98" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
3903 
3904 <span class="comment">% Grab the current data</span>
3905 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3906 
3907 <span class="comment">% Set it according to the dialog box values</span>
3908 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
3909 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
3910 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
3911 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
3912 
3913 <span class="comment">% Re-store the application data</span>
3914 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3915 
3916 <span class="comment">% [EOF] dialogExportSettings</span>
3917 
3918 <a name="_sub99" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
3919 
3920 w = 230;
3921 h = 200;
3922 dx = 10;
3923 dy = 35;
3924 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3925 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
3926     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3927     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3928     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3929     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3930     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3931     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3932     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3933     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3934     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3935     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3936 dialog_params.figure_names               = figure_names;
3937 dialog_params.selected_figures           = <span class="string">''</span>;
3938 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3939 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
3940 
3941 <span class="comment">% Build the graphics:</span>
3942 <span class="comment">% -------------------</span>
3943 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3944     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
3945     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3946     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
3947 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
3948     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
3949     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
3950     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
3951     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
3952     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
3953     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3954     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
3955 
3956 
3957 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3958     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3959     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
3960     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3961     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
3962 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3963     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3964     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
3965     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3966     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
3967 
3968 <span class="comment">% Update the UI controls:</span>
3969 <span class="comment">% -----------------------</span>
3970 
3971 
3972 <span class="comment">% Set the callbacks:</span>
3973 <span class="comment">% ------------------</span>
3974 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub96" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
3975 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
3976 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub94" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
3977 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub95" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
3978 
3979 <span class="comment">% Position the dialog and make it visible:</span>
3980 <span class="comment">% ----------------------------------------</span>
3981 fpos = get(hf,<span class="string">'Position'</span>);
3982 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
3983 movegui(handles.Figure,dpos)
3984 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
3985 
3986 <span class="comment">% Hold the dialog open:</span>
3987 <span class="comment">% ---------------------</span>
3988 waitfor(handles.OK)
3989 
3990 <span class="comment">% Return the outputs and close the dialog:</span>
3991 <span class="comment">% ----------------------------------------</span>
3992 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3993 selected_figures = dialog_params.selected_figures;
3994 
3995 delete(handles.Figure)
3996 
3997 <span class="comment">% [EOF] openFiguresDialog</span>
3998 
3999 <span class="comment">% --------------------------------------------------------------------</span>
4000 <a name="_sub100" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4001 
4002 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4003 
4004 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4005 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4006 selected     = fig_names(idx_selected);
4007 dialog_params.selected_figures = selected;
4008 
4009 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4010 
4011 
4012 
4013 <span class="comment">% --------------------------------------------------------------------</span>
4014 <a name="_sub101" href="#_subfunctions" class="code">function icons = getIcons</a>
4015 
4016 <span class="comment">% Load data</span>
4017 idx = 1;
4018 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4019     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4020     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4021     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4022     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4023     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4024     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4025     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4026     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4027     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4028     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4029     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4030     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4031     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4032     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4033     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4034     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4035 
4036 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4037     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4038     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4039     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4040     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4041     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4042     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4043     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4044     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4045     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4046     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4047     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4048     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4049     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4050     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4051     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4052     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4053 
4054 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4055     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4056     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4057     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4058     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4059     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4060     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4061     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4062     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4063     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4064     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4065     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4066     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4067     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4068     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4069     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4070     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4071 
4072 <span class="comment">% Save data</span>
4073 idx = idx+1;
4074 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4075     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4076     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4077     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4078     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4079     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4080     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4081     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4082     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4083     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4084     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4085     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4086     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4087     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4088     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4089     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4090     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4091 
4092 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4093     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4094     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4095     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4096     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4097     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4098     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4099     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4100     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4101     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4102     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4103     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4104     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4105     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4106     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4107     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4108     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4109 
4110 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4111     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4112     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4113     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4114     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4115     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4116     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4117     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4118     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4119     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4120     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4121     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4122     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4123     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4124     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4125     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4126     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4127 
4128 <span class="comment">% Plotting parameters</span>
4129 idx = idx+1;
4130 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4131     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4132     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4133     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4134     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4135     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4136     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4137     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4138     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4139     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4140     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4141     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4142     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4143     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4144     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4145     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4146     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4147 
4148 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4149     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4150     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4151     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4152     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4153     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4154     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4155     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4156     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4157     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4158     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4159     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4160     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4161     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4162     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4163     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4164     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4165 
4166 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4167     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4168     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4169     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4170     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4171     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4172     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4173     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4174     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4175     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4176     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4177     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4178     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4179     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4180     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4181     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4182     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4183 
4184 <span class="comment">% Processing parameters</span>
4185 idx = idx+1;
4186 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4187     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4188     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4189     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4190     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4191     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4192     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4193     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4194     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4195     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4196     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4197     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4198     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4199     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4200     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4201     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4202     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4203 
4204 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4205     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4206     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4207     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4208     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4209     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4210     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4211     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4212     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4213     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4214     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4215     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4216     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4217     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4218     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4219     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4220     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4221 
4222 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4223     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4224     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4225     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4226     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4227     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4228     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4229     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4230     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4231     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4232     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4233     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4234     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4235     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4236     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4237     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4238     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4239 
4240 <span class="comment">% Export bathymetry dialog</span>
4241 idx = idx+1;
4242 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4243     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4244     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4245     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4246     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4247     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4248     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4249     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4250     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4251     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4252     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4253     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4254     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4255     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4256     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4257     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4258     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4259     ]/255;
4260 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4261     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4262     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4263     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4264     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4265     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4266     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4267     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4268     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4269     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4270     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4271     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4272     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4273     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4274     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4275     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4276     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4277     ]/255;
4278 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4279     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4280     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4281     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4282     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4283     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4284     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4285     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4286     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4287     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4288     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4289     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4290     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4291     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4292     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4293     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4294     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4295     ]/255;
4296 
4297 <span class="comment">% Export Figures Dialog</span>
4298 idx = idx + 1;
4299 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4300     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4301     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4302     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4303     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4304     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4305     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4306     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4307     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4308     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4309     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4310     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4311     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4312     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4313     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4314     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4315 
4316 
4317 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4318     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4319     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4320     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4321     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4322     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4323     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4324     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4325     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4326     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4327     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4328     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4329     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4330     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4331     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4332     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4333 
4334 
4335 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4336     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4337     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4338     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4339     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4340     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4341     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4342     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4343     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4344     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4345     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4346     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4347     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4348     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4349     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4350     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4351 
4352 <span class="comment">% Export Excel File</span>
4353 idx = idx + 1;
4354 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4355     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4356    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4357    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4358    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4359    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4360    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4361    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4362    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4363    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4364    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4365    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4366    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4367    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4368    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4369    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4370     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4371 
4372 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4373     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4374    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4375    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4376    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4377    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4378    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4379    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4380    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4381    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4382    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4383    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4384    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4385    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4386    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4387    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4388     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4389 
4390 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4391     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4392    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4393    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4394    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4395    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4396    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4397    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4398    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4399    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4400    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4401    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4402    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4403    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4404    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4405    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4406     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4407 
4408 <span class="comment">% Zoom In</span>
4409 idx = idx + 1;
4410 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4411     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4412 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4413     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4414 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4415     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4416 
4417 <span class="comment">% Zoom Out</span>
4418 idx = idx + 1;
4419 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4420     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4421 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4422     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4423 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4424     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4425 
4426 <span class="comment">% Pan</span>
4427 idx = idx + 1;
4428 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4429     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4430 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4431     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4432 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4433     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4434 <span class="comment">% [EOF] getIcons</span>
4435 
4436 <a name="_sub102" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4437 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4438 
4439 <span class="comment">% Organized by GUI panels</span>
4440 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4441 <span class="comment">% SHIPTRACKS PLOT %</span>
4442 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4443 guiparams.horizontal_grid_node_spacing       = 1.0;
4444 
4445 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4446 <span class="comment">% CROSS SECTION PLOT %</span>
4447 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4448 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4449 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4450 guiparams.idx_contour                        = 1;
4451 guiparams.vertical_exaggeration              = 10;
4452 guiparams.vector_scale_cross_section         = 0.2;
4453 guiparams.horizontal_vector_spacing          = 1;
4454 guiparams.vertical_vector_spacing            = 1;
4455 guiparams.horizontal_smoothing_window        = 1;
4456 guiparams.vertical_smoothing_window          = 1;
4457 guiparams.plot_secondary_flow_vectors        = true;
4458 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
4459 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
4460 guiparams.idx_secondary_flow_vector_variable = 1;
4461 guiparams.include_vertical_velocity          = true;
4462 
4463 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4464 <span class="comment">% PLAN VIEW PLOT %</span>
4465 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4466 guiparams.depth_range_min                    = 0;
4467 guiparams.depth_range_max                    = inf;
4468 guiparams.vector_scale_plan_view             = 1;
4469 guiparams.vector_spacing_plan_view           = 1;
4470 guiparams.smoothing_window_size              = 1;
4471 guiparams.display_shoreline                  = false;
4472 guiparams.add_background                     = false;
4473 
4474 <span class="comment">%%%%%%%%%%%%%%%</span>
4475 <span class="comment">% DATA EXPORT %</span>
4476 <span class="comment">%%%%%%%%%%%%%%%</span>
4477 guiparams.beam_angle                         = 20.0;
4478 guiparams.magnetic_variation                 = 0.0;
4479 guiparams.wse                                = 0.0;
4480 guiparams.output_auxiliary_data              = false;
4481 
4482 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4483 <span class="comment">% Contour variables %</span>
4484 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4485 idx = 1;
4486 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
4487 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
4488 idx = idx + 1;
4489 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
4490 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
4491 idx = idx + 1;
4492 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
4493 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
4494 idx = idx + 1;
4495 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
4496 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
4497 idx = idx + 1;
4498 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
4499 guiparams.contours(idx).variable = <span class="string">'east'</span>;
4500 idx = idx + 1;
4501 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
4502 guiparams.contours(idx).variable = <span class="string">'north'</span>;
4503 idx = idx + 1;
4504 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
4505 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
4506 idx = idx + 1;
4507 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
4508 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
4509 idx = idx + 1;
4510 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
4511 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
4512 idx = idx + 1;
4513 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
4514 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
4515 idx = idx + 1;
4516 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
4517 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
4518 idx = idx + 1;
4519 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
4520 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
4521 idx = idx + 1;
4522 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
4523 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
4524 idx = idx + 1;
4525 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
4526 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
4527 idx = idx + 1;
4528 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
4529 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
4530 idx = idx + 1;
4531 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
4532 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
4533 
4534 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
4535 
4536 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4537 <span class="comment">% Secondary Flow Vector Variables %</span>
4538 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4539 idx = 1;
4540 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
4541 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
4542 idx = idx + 1;
4543 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
4544 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
4545 idx = idx + 1;
4546 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
4547 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
4548 idx = idx + 1;
4549 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
4550 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
4551 idx = idx + 1;
4552 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
4553 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
4554 
4555 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
4556     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
4557 
4558 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4559 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
4560 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4561 <span class="comment">% Menu bar options</span>
4562 guiparams.presentation                       = true;
4563 guiparams.print                              = false;
4564 guiparams.set_cross_section_endpoints        = false;
4565 guiparams.unit_discharge_correction          = false;
4566 guiparams.english_units                      = false;
4567 guiparams.vertical_offset                    = 0;
4568 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
4569 <span class="comment">% guiparams.plot_planview                      = false;</span>
4570 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
4571 
4572 <span class="comment">% File location defaults</span>
4573 guiparams.ascii_path                        = pwd;
4574 guiparams.ascii_file                        = <span class="string">''</span>;
4575 guiparams.mat_path                          = pwd;
4576 guiparams.mat_file                          = <span class="string">''</span>;
4577 guiparams.tecplot_path                      = pwd;
4578 guiparams.tecplot_file                      = <span class="string">''</span>;
4579 guiparams.kmz_path                          = pwd;
4580 guiparams.kmz_file                          = <span class="string">''</span>;
4581 guiparams.multibeambathymetry_path          = pwd;
4582 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
4583 guiparams.log_path                          = pwd;
4584 guiparams.log_file                          = <span class="string">''</span>;
4585 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
4586 <span class="comment">% application</span>
4587 <span class="keyword">if</span> isdeployed 
4588     guiparams.has_mapping_toolbox           = true;
4589 <span class="keyword">else</span>
4590     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
4591         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
4592 <span class="keyword">end</span>
4593 
4594 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4595 <span class="comment">% IN MEMORY DATA STORAGE %</span>
4596 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4597 guiparams.z                      = [];
4598 guiparams.A                      = [];
4599 guiparams.V                      = [];
4600 guiparams.Map                    = [];
4601 guiparams.savefile               = [];
4602 guiparams.iric_anv_planview_data = [];
4603 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
4604 <span class="comment">% guiparams.zmax = [];</span>
4605 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
4606 guiparams.data_folder = <span class="string">''</span>;
4607 guiparams.data_files  = {<span class="string">''</span>};
4608 
4609 <span class="comment">% [EOF] createGUIparams</span>
4610 
4611 <a name="_sub103" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
4612 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
4613 
4614 <a name="_sub104" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
4615 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
4616 
4617 <span class="comment">% [EOF] VMT</span></pre></div>
<hr><address>Generated on Thu 22-Aug-2013 11:04:37 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>