<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html trunk -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function WSE_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub91" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub92" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub93" class="code">function initGUI(handles)</a></li><li><a href="#_sub94" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub95" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub96" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub97" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub98" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub99" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub100" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub101" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub102" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a></li><li><a href="#_sub103" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub104" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub105" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub106" class="code">function icons = getIcons</a></li><li><a href="#_sub107" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub108" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub109" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0037     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0038     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039     <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0045 <span class="keyword">try</span>
0046 <span class="keyword">if</span> nargout
0047     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">else</span>
0049     gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">catch</span> err
0053     <span class="keyword">if</span> isdeployed
0054         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0055             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0056         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0057             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0058             errLogFileName},<span class="keyword">...</span>
0059             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0060             <span class="string">'error'</span>);
0061         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0062         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0063         fclose(fid);
0064         rethrow(err)
0065     <span class="keyword">else</span>
0066         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0067             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0068             <span class="string">'error'</span>);
0069         rethrow(err);
0070     <span class="keyword">end</span>
0071 <span class="keyword">end</span>
0072 <span class="comment">% End initialization code - DO NOT EDIT</span>
0073 
0074 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0075 
0076 <span class="comment">% --- Executes just before VMT is made visible.</span>
0077 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0078 <span class="comment">% This function has no output args, see OutputFcn.</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0083 
0084 <span class="comment">% Choose default command line output for VMT</span>
0085 handles.output = hObject;
0086 
0087 <span class="comment">% Build the GUI toolbar:</span>
0088 <span class="comment">% ----------------------</span>
0089 handles = <a href="#_sub90" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0090 
0091 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0092 <span class="comment">% ----------------------------------------</span>
0093 <span class="keyword">if</span> ~isdeployed
0094     filesep = <span class="string">'\'</span>; <span class="comment">% windows</span>
0095     utilspath = [pwd filesep <span class="string">'utils'</span>];
0096     docspath  = [pwd filesep <span class="string">'doc'</span>];
0097     toolspath = [pwd filesep <span class="string">'tools'</span>];
0098     addpath(utilspath,docspath,toolspath)
0099 <span class="keyword">end</span>
0100 
0101 <span class="comment">% Update handles structure</span>
0102 <span class="comment">% ------------------------</span>
0103 guidata(hObject, handles);
0104 
0105 <span class="comment">% Load the GUI preferences:</span>
0106 <span class="comment">% -------------------------</span>
0107 <a href="#_sub91" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0108 
0109 <span class="comment">% Initialize the GUI parameters:</span>
0110 <span class="comment">% ------------------------------</span>
0111 guiparams = <a href="#_sub107" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0112 guiparams.vmt_version = <span class="string">'v4.05'</span>;
0113 
0114 <span class="comment">% Draw the VMT Background</span>
0115 <span class="comment">% -----------------</span>
0116 pos = get(handles.figure1,<span class="string">'position'</span>);
0117 axes(handles.VMTBackground);
0118 <span class="keyword">if</span> ~isdeployed <span class="comment">%isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0119     X = imread(<span class="string">'VMT_Background.png'</span>);
0120     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0121 <span class="keyword">else</span>
0122     X = imread(<span class="string">'VMT_Background.png'</span>);
0123     X = imresize(X, [pos(4) pos(3)]);
0124     X = uint8(X);
0125     imshow(X,<span class="string">'Border'</span>,<span class="string">'tight'</span>)
0126 <span class="keyword">end</span>
0127 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0128 
0129 <span class="comment">% Store the application data:</span>
0130 <span class="comment">% ---------------------------</span>
0131 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0132 
0133 <span class="comment">% Initialize the GUI:</span>
0134 <span class="comment">% -------------------</span>
0135 <a href="#_sub93" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0136 <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0137 <span class="comment">% set(handles.GraphicsExportPanel,'Visible','off')</span>
0138 <span class="comment">% set(handles.ProcessingPanel,'Visible','off')</span>
0139 pos = get(handles.figure1,<span class="string">'Position'</span>);
0140 <span class="comment">% pos(3) = 545;</span>
0141 <span class="comment">% set(handles.figure1,'Position',pos)</span>
0142 movegui(handles.figure1,<span class="string">'center'</span>)
0143 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0144 
0145 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0146 <span class="comment">% the root</span>
0147 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0148 
0149 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0150 <span class="comment">% uiwait(handles.figure1);</span>
0151 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0152 
0153 
0154 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0155 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0156 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0157 <span class="comment">% hObject    handle to figure</span>
0158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0160 
0161 <span class="comment">% Get default command line output from handles structure</span>
0162 varargout{1} = handles.output;
0163 <span class="comment">% [EOF] VMT_OutputFcn</span>
0164 
0165 <span class="comment">% --- Executes when figure1 is resized.</span>
0166 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0167 
0168 <span class="comment">% Draw the VMT Background</span>
0169 <span class="comment">% -----------------</span>
0170 pos = get(handles.figure1,<span class="string">'position'</span>);
0171 axes(handles.VMTBackground);
0172 <span class="keyword">if</span> ~isdeployed <span class="comment">%isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0173     X = imread(<span class="string">'VMT_Background.png'</span>);
0174     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0175 <span class="keyword">else</span>
0176     X = imread(<span class="string">'VMT_Background.png'</span>);
0177     X = imresize(X, [pos(4) pos(3)]);
0178     X = uint8(X);
0179     imshow(X,<span class="string">'Border'</span>,<span class="string">'tight'</span>)
0180 <span class="keyword">end</span>
0181 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0182 
0183 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0184 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0185 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0186 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0187 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0188 
0189 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0190 close_button = questdlg(<span class="keyword">...</span>
0191     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0192     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0193 <span class="keyword">switch</span> close_button
0194     <span class="keyword">case</span> <span class="string">'Yes'</span>
0195         delete(hObject)
0196         close all hidden
0197     <span class="keyword">otherwise</span>
0198         <span class="keyword">return</span>
0199 <span class="keyword">end</span>
0200 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0201 
0202 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0203 <span class="comment">% MENU BAR CALLBACKS %</span>
0204 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0205 
0206 <span class="comment">% --------------------------------------------------------------------</span>
0207 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0208 <span class="comment">% Empty</span>
0209 
0210 <span class="comment">% --------------------------------------------------------------------</span>
0211 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0212 <span class="comment">% Empty</span>
0213 
0214 <span class="comment">% --------------------------------------------------------------------</span>
0215 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0216 <a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0217 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0221 
0222 <span class="comment">% Get the Application data:</span>
0223 <span class="comment">% -------------------------</span>
0224 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0225 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0226 
0227 <span class="comment">% Ask the user to select files:</span>
0228 <span class="comment">% -----------------------------</span>
0229 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0230 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0231 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0232     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0233 <span class="keyword">else</span>
0234     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0235 <span class="keyword">end</span>
0236 [filename,pathname] = <span class="keyword">...</span>
0237     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0238     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0239     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0240 
0241 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0242     <span class="comment">% Load the data:</span>
0243     <span class="comment">% --------------</span>
0244     vars = load(fullfile(pathname,filename));
0245     
0246     <span class="comment">% Make sure the selected file is a valid file:</span>
0247     <span class="comment">% --------------------------------------------</span>
0248     varnames = fieldnames(vars);
0249     <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0250         guiparams.mat_path = pathname;
0251         guiparams.mat_file = filename;
0252         guiparams.z = vars.z;
0253         guiparams.A = vars.A;
0254         guiparams.V = vars.V;
0255         
0256         <span class="comment">% Update the preferences:</span>
0257         <span class="comment">% -----------------------</span>
0258         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0259         guiprefs.mat_path = pathname;
0260         guiprefs.mat_file = filename;
0261         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0262         <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0263                      
0264         <span class="comment">% Re-store the Application Data:</span>
0265         <span class="comment">% ------------------------------</span>
0266         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0267         
0268         <span class="comment">% Update the GUI:</span>
0269         <span class="comment">% ---------------</span>
0270         set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0271         <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0272     <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0273         errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0274             <span class="string">'Invalid File...'</span>)
0275     <span class="keyword">end</span>
0276     
0277 <span class="keyword">elseif</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0278     <span class="comment">% Set the filenames</span>
0279     <span class="comment">% -----------------</span>
0280     guiparams.mat_path = pathname;
0281     guiparams.mat_file = filename;
0282     
0283     <span class="comment">% Push status to log window</span>
0284     <span class="comment">% -------------------------</span>
0285     log_text = {<span class="keyword">...</span>
0286         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0287         <span class="string">'Directory:'</span>};
0288     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0289     statusLogging(handles.LogWindow,log_text)
0290     
0291     <span class="comment">% Update the Application Data:</span>
0292     <span class="comment">% ------------------------------</span>
0293     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0294     
0295     <span class="comment">% Update the persistent preferences:</span>
0296     <span class="comment">% ----------------------------------</span>
0297     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0298     guiprefs.mat_path = pathname;
0299     guiprefs.mat_file = filename;
0300     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0301     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0302         
0303     <span class="comment">% Update the GUI:</span>
0304     <span class="comment">% ---------------</span>
0305     <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0306 <span class="keyword">end</span>
0307 
0308 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0309 
0310 <span class="comment">% --------------------------------------------------------------------</span>
0311 <a name="_sub9" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0312 <span class="comment">% Empty</span>
0313 
0314 <span class="comment">% --------------------------------------------------------------------</span>
0315 <a name="_sub10" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0316 <a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0317 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0318 
0319 <span class="comment">% --------------------------------------------------------------------</span>
0320 <a name="_sub11" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0321 <a href="#_sub59" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0322 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0323 
0324 <span class="comment">% --------------------------------------------------------------------</span>
0325 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0326 <a href="#_sub60" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0327 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0328 
0329 <span class="comment">% --------------------------------------------------------------------</span>
0330 <a name="_sub13" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0331 <span class="comment">% Empty</span>
0332 
0333 <span class="comment">% --------------------------------------------------------------------</span>
0334 <a name="_sub14" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0335 <span class="comment">% Empty</span>
0336 
0337 <span class="comment">% --------------------------------------------------------------------</span>
0338 <a name="_sub15" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0339 
0340 <span class="comment">% Get the Application Data:</span>
0341 <span class="comment">% -------------------------</span>
0342 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0343 
0344 <span class="comment">% Update the Application Data:</span>
0345 <span class="comment">% ----------------------------</span>
0346 guiparams.print        = true;
0347 guiparams.presentation = false;
0348 
0349 <span class="comment">% Re-store the Application data:</span>
0350 <span class="comment">% ------------------------------</span>
0351 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0352 
0353 <span class="comment">% Update the GUI:</span>
0354 <span class="comment">% ---------------</span>
0355 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0356 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0357 
0358 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0359 
0360 
0361 <span class="comment">% --------------------------------------------------------------------</span>
0362 <a name="_sub16" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0363 
0364 <span class="comment">% Get the Application Data:</span>
0365 <span class="comment">% -------------------------</span>
0366 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0367 
0368 <span class="comment">% Update the Application Data:</span>
0369 <span class="comment">% ----------------------------</span>
0370 guiparams.print        = false;
0371 guiparams.presentation = true;
0372 
0373 <span class="comment">% Re-store the Application data:</span>
0374 <span class="comment">% ------------------------------</span>
0375 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0376 
0377 <span class="comment">% Update the GUI:</span>
0378 <span class="comment">% ---------------</span>
0379 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0380 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0381 
0382 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0383 
0384 <span class="comment">% --------------------------------------------------------------------</span>
0385 <a name="_sub17" href="#_subfunctions" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a>
0386 <span class="comment">%  --- Empty ---</span>
0387 
0388 <span class="comment">% --------------------------------------------------------------------</span>
0389 <a name="_sub18" href="#_subfunctions" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a>
0390 <span class="comment">% Get the Application Data:</span>
0391 <span class="comment">% -------------------------</span>
0392 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0393 
0394 <span class="comment">% Update the Application Data:</span>
0395 <span class="comment">% ----------------------------</span>
0396 guiparams.renderer  = <span class="string">'OpenGL'</span>;
0397 
0398 <span class="comment">% Re-store the Application data:</span>
0399 <span class="comment">% ------------------------------</span>
0400 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0401 
0402 <span class="comment">% Update the GUI:</span>
0403 <span class="comment">% ---------------</span>
0404 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0405 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0406 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0407 
0408 <span class="comment">% Modify the existing figures</span>
0409 <span class="comment">% ---------------------------</span>
0410 <span class="comment">% Find what plots exist already</span>
0411 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0412 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0413 
0414 <span class="comment">% Loop through valid figures and adjust</span>
0415 <span class="comment">% -------------------------------------</span>
0416 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0417     <span class="keyword">for</span> i = 1:length(valid_names)
0418         <span class="comment">% Focus the figure</span>
0419         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0420         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0421             figure(hff)
0422             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0423         <span class="keyword">end</span>
0424         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0425         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0426             figure(hff)
0427             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0428         <span class="keyword">end</span>
0429     <span class="keyword">end</span>
0430 <span class="keyword">end</span>
0431 <span class="comment">% [EOF] menuOpenGL_Callback</span>
0432 
0433 
0434 <span class="comment">% --------------------------------------------------------------------</span>
0435 <a name="_sub19" href="#_subfunctions" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a>
0436 <span class="comment">% Get the Application Data:</span>
0437 <span class="comment">% -------------------------</span>
0438 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0439 
0440 <span class="comment">% Update the Application Data:</span>
0441 <span class="comment">% ----------------------------</span>
0442 guiparams.renderer  = <span class="string">'painters'</span>;
0443 
0444 <span class="comment">% Re-store the Application data:</span>
0445 <span class="comment">% ------------------------------</span>
0446 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0447 
0448 <span class="comment">% Update the GUI:</span>
0449 <span class="comment">% ---------------</span>
0450 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0451 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0452 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0453 
0454 <span class="comment">% Modify the existing figures</span>
0455 <span class="comment">% ---------------------------</span>
0456 <span class="comment">% Find what plots exist already</span>
0457 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0458 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0459 
0460 <span class="comment">% Loop through valid figures and adjust</span>
0461 <span class="comment">% -------------------------------------</span>
0462 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0463     <span class="keyword">for</span> i = 1:length(valid_names)
0464         <span class="comment">% Focus the figure</span>
0465         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0466         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0467             figure(hff)
0468             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0469         <span class="keyword">end</span>
0470         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0471         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0472             figure(hff)
0473             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0474         <span class="keyword">end</span>
0475     <span class="keyword">end</span>
0476 <span class="keyword">end</span>
0477 <span class="comment">% [EOF] menuPainters_Callback</span>
0478 
0479 <span class="comment">% --------------------------------------------------------------------</span>
0480 <a name="_sub20" href="#_subfunctions" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a>
0481 <span class="comment">% Get the Application Data:</span>
0482 <span class="comment">% -------------------------</span>
0483 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0484 
0485 <span class="comment">% Update the Application Data:</span>
0486 <span class="comment">% ----------------------------</span>
0487 guiparams.renderer  = <span class="string">'zbuffer'</span>;
0488 
0489 <span class="comment">% Re-store the Application data:</span>
0490 <span class="comment">% ------------------------------</span>
0491 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0492 
0493 <span class="comment">% Update the GUI:</span>
0494 <span class="comment">% ---------------</span>
0495 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0496 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0497 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0498 
0499 <span class="comment">% Modify the existing figures</span>
0500 <span class="comment">% ---------------------------</span>
0501 <span class="comment">% Find what plots exist already</span>
0502 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0503 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0504 
0505 <span class="comment">% Loop through valid figures and adjust</span>
0506 <span class="comment">% -------------------------------------</span>
0507 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0508     <span class="keyword">for</span> i = 1:length(valid_names)
0509         <span class="comment">% Focus the figure</span>
0510         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0511         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0512             figure(hff)
0513             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0514         <span class="keyword">end</span>
0515         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0516         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0517             figure(hff)
0518             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0519         <span class="keyword">end</span>
0520     <span class="keyword">end</span>
0521 <span class="keyword">end</span>
0522 <span class="comment">% [EOF] menuZbuffer_Callback</span>
0523 
0524 <span class="comment">% --------------------------------------------------------------------</span>
0525 <a name="_sub21" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0526 <span class="comment">% Get the Application data:</span>
0527 <span class="comment">% -------------------------</span>
0528 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0529 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0530 
0531 <span class="comment">% Find what plots exist already</span>
0532 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0533 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0534 
0535 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0536 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0537 <span class="keyword">if</span> ~isempty(idx)
0538     fig_names(idx) = [];
0539 <span class="keyword">end</span>
0540 
0541 <span class="keyword">if</span> guiparams.presentation
0542     figure_style = <span class="string">'presentation'</span>;
0543 <span class="keyword">else</span>
0544     figure_style = <span class="string">'print'</span>;
0545 <span class="keyword">end</span>
0546 
0547 [selected_figures] = <a href="#_sub104" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0548 
0549 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0550     <span class="keyword">return</span>
0551 <span class="keyword">else</span>
0552     <span class="keyword">for</span> i = 1:length(selected_figures)
0553         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0554     <span class="keyword">end</span>
0555 <span class="keyword">end</span>
0556 
0557 
0558 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0559 
0560 <span class="comment">% --------------------------------------------------------------------</span>
0561 <a name="_sub22" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0562 <span class="comment">% Get the Application data:</span>
0563 <span class="comment">% -------------------------</span>
0564 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0565 beam_angle             = guiparams.beam_angle; 
0566 magnetic_variation     = guiparams.magnetic_variation; 
0567 wse                    = guiparams.wse;
0568 output_auxiliary_data = guiparams.output_auxiliary_data; 
0569 
0570 <span class="comment">% Open dialog and allow user to select settings</span>
0571 <span class="comment">% ---------------------------------------------</span>
0572 [beam_angle,<span class="keyword">...</span>
0573     magnetic_variation,<span class="keyword">...</span>
0574     wse,<span class="keyword">...</span>
0575     output_auxiliary_data] = <span class="keyword">...</span>
0576     <a href="#_sub102" class="code" title="subfunction [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)">exportSettingsDialog</a>(beam_angle,magnetic_variation,wse,output_auxiliary_data,handles.figure1);
0577 
0578 <span class="comment">% Re-store the Application data:</span>
0579 <span class="comment">% ------------------------------</span>
0580 guiparams.beam_angle            = beam_angle;
0581 guiparams.magnetic_variation    = magnetic_variation; 
0582 guiparams.wse                   = wse;
0583 guiparams.output_auxiliary_data = output_auxiliary_data;
0584 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0585 
0586 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0587 
0588 <span class="comment">% --------------------------------------------------------------------</span>
0589 <a name="_sub23" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0590 <a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0591 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0592 
0593 
0594 <span class="comment">% --------------------------------------------------------------------</span>
0595 <a name="_sub24" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0596 
0597 <span class="comment">% Get the Application Data:</span>
0598 <span class="comment">% -------------------------</span>
0599 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0600 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0601 PVdata    = guiparams.iric_anv_planview_data;
0602 iric_path = guiprefs.iric_path;
0603 iric_file = guiprefs.iric_file;
0604 
0605 <span class="comment">% Is there any planview data?</span>
0606 <span class="keyword">if</span> isempty(PVdata)
0607     <span class="comment">% Nothing to do, warn user</span>
0608     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0609     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0610 <span class="keyword">else</span>
0611     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0612     <span class="comment">% and smoothing (for iRiC)</span>
0613     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0614     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0615         fullfile(iric_path,iric_file));
0616     
0617     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0618         outfile = fullfile(iric_path,iric_file);
0619         log_text = vertcat(log_text,{outfile});
0620         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0621         outcount = fprintf(ofid,<span class="keyword">...</span>
0622             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0623         fclose(ofid);
0624     <span class="keyword">else</span>
0625         <span class="comment">% Return default iric_path and iric_file</span>
0626         iric_path = guiprefs.iric_path;
0627         iric_file = guiprefs.iric_file;
0628     <span class="keyword">end</span>
0629 <span class="keyword">end</span>
0630 
0631 <span class="comment">% Push messages to Log Window:</span>
0632 <span class="comment">% ----------------------------</span>
0633 statusLogging(handles.LogWindow, log_text)
0634 
0635 <span class="comment">% Store the persistent preferences:</span>
0636 <span class="comment">% ---------------------------------</span>
0637 guiprefs.iric_file = iric_file;
0638 guiprefs.iric_path = iric_path;
0639 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0640 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0641 
0642 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0643 
0644 <span class="comment">% --------------------------------------------------------------------</span>
0645 <a name="_sub25" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0646 <span class="comment">% Get the Application Data:</span>
0647 <span class="comment">% -------------------------</span>
0648 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0649 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0650 excel_path  = guiprefs.excel_path;
0651 excel_file  = guiprefs.excel_file;
0652 
0653 <span class="comment">% Push messages to Log Window:</span>
0654 <span class="comment">% ----------------------------</span>
0655 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0656 statusLogging(handles.LogWindow, log_text)
0657 
0658 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0659 <span class="comment">% data.</span>
0660 <span class="keyword">if</span> iscell(guiparams.mat_file)
0661     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0662     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0663     <span class="comment">% Refresh the Application Data:</span>
0664     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0665     z           = guiparams.z;
0666     A           = guiparams.A;
0667     V           = guiparams.V;
0668     Map         = guiparams.Map;
0669     wse         = guiparams.wse;
0670     PVdata      = guiparams.iric_anv_planview_data;
0671     log_text = {<span class="string">'Writing data to Excel file...'</span>;<span class="keyword">...</span>
0672         <span class="string">'Multiple transected loaded. Will export Planview Data Only!'</span>};
0673     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0674         fullfile(excel_path,excel_file));
0675     
0676     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0677         outfile = fullfile(excel_path,excel_file);
0678         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0679         
0680     <span class="keyword">else</span>
0681         <span class="comment">% Return default excel_path and excel_file</span>
0682         excel_path = guiprefs.excel_path;
0683         excel_file = guiprefs.excel_file;
0684         outfile = fullfile(excel_path,excel_file);
0685         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0686     <span class="keyword">end</span>
0687     
0688     <span class="comment">% Delete the old file if it exists</span>
0689     <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0690         log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0691             [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0692             <span class="string">'already exists. Overwriting file...'</span>});
0693         delete(outfile)
0694     <span class="keyword">end</span>
0695     
0696     <span class="comment">% Save DAV data to an Excel File</span>
0697     hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0698     vmin = num2str(guiparams.depth_range_min);
0699     vmax = num2str(guiparams.depth_range_max);
0700     pvheaders = {<span class="keyword">...</span>
0701         <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Elev_m'</span><span class="keyword">...</span>
0702         [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0703         [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]};
0704     PVdata.outmat(4:5,:) = PVdata.outmat(4:5,:).*100; <span class="comment">% velocities in cm/s</span>
0705     pvdata = num2cell(PVdata.outmat');
0706     pvout = vertcat(pvheaders,pvdata);
0707     xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0708     waitbar(1,hwait)
0709     delete(hwait)
0710     
0711     <span class="comment">% Push messages to Log Window:</span>
0712     <span class="comment">% ----------------------------</span>
0713     statusLogging(handles.LogWindow, log_text)
0714 <span class="keyword">else</span>
0715     
0716     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0717     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0718     <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0719     <span class="comment">% Refresh the Application Data:</span>
0720     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0721     z           = guiparams.z;
0722     A           = guiparams.A;
0723     V           = guiparams.V;
0724     Map         = guiparams.Map;
0725     wse         = guiparams.wse;
0726     PVdata      = guiparams.iric_anv_planview_data;
0727     
0728     
0729     log_text = {<span class="string">'Writing data to Excel file...'</span>};
0730     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0731         fullfile(excel_path,excel_file));
0732     
0733     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0734         outfile = fullfile(excel_path,excel_file);
0735         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0736         
0737         <span class="comment">% Delete the old file if it exists</span>
0738         <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0739             log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0740                 [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0741                 <span class="string">'already exists. Overwriting file...'</span>});
0742             delete(outfile)
0743         <span class="keyword">end</span>
0744         
0745         <span class="comment">% Push messages to Log Window:</span>
0746         <span class="comment">% ----------------------------</span>
0747         statusLogging(handles.LogWindow, log_text)
0748         
0749         <span class="comment">% Save MCS Summary to an Excel File</span>
0750         hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0751         xlswrite(outfile,{<span class="string">'Files:'</span>},<span class="string">'VMTSummary'</span>,<span class="string">'H4'</span>); waitbar(1/5,hwait)
0752         sout = guiparams.data_files';
0753         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'I4'</span>); waitbar(2/5,hwait)
0754         sout = {<span class="keyword">...</span>
0755             <span class="string">'VMT: Summary of Mean Cross Section'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0756             <span class="string">'VMT '</span> guiparams.vmt_version <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0757             <span class="string">'Date Processed: '</span> datestr(now) <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0758             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0759             <span class="string">'Mean Cross Section (MCS) Properties'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0760             <span class="string">'Horz. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> guiparams.horizontal_grid_node_spacing;<span class="keyword">...</span>
0761             <span class="string">'Vert. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> single(guiparams.A(1).Sup.binSize_cm)/100;<span class="keyword">...</span>
0762             <span class="string">'Endpoints:'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">'UTM_East'</span>    <span class="string">'UTM_North'</span>;<span class="keyword">...</span>
0763             <span class="string">'Left Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xLeftBank V.yLeftBank;<span class="keyword">...</span>
0764             <span class="string">'Right Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xRightBank V.yRightBank;<span class="keyword">...</span>
0765             <span class="string">'Total Length in meters'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.dl;<span class="keyword">...</span>
0766             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0767             <span class="string">'Mean Flow Direction (deg)'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.mfd;<span class="keyword">...</span>
0768             <span class="string">'in geographic coordinates'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0769             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0770             <span class="string">'Slope'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.m;<span class="keyword">...</span>
0771             <span class="string">'Intercept'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.b;<span class="keyword">...</span>
0772             <span class="string">'Theta (deg)'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.theta};
0773         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'A1'</span>); waitbar(3/5,hwait)
0774         
0775         <span class="comment">% Save DAV data to an Excel File</span>
0776         vmin = num2str(guiparams.depth_range_min);
0777         vmax = num2str(guiparams.depth_range_max);
0778         pvheaders = {<span class="keyword">...</span>
0779             <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Elev_m'</span><span class="keyword">...</span>
0780             [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0781             [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]};
0782         PVdata.outmat(4:5,:) = PVdata.outmat(4:5,:).*100; <span class="comment">% velocities in cm/s</span>
0783         pvdata = num2cell(PVdata.outmat');
0784         pvout = vertcat(pvheaders,pvdata);
0785         xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0786         waitbar(4/5,hwait)
0787         
0788         <span class="comment">% Save MCS data to an Excel File</span>
0789         mcsheaders = {<span class="keyword">...</span>
0790             <span class="string">'UTM_East'</span> <span class="keyword">...</span>
0791             <span class="string">'UTM_North'</span><span class="keyword">...</span>
0792             <span class="string">'Distance from Left Bank, in meters'</span><span class="keyword">...</span>
0793             <span class="string">'Elevation, in meters'</span><span class="keyword">...</span>
0794             <span class="string">'Bed Elevation, in meters'</span><span class="keyword">...</span>
0795             <span class="string">'East Velocity, in cm/s'</span><span class="keyword">...</span>
0796             <span class="string">'North Velocity, in cm/s'</span><span class="keyword">...</span>
0797             <span class="string">'Vertical Velocity, in cm/s'</span><span class="keyword">...</span>
0798             <span class="string">'Velocity Magnitude, in cm/s'</span><span class="keyword">...</span>
0799             <span class="string">'Velocity Direction, in degrees (geographic coordinates)'</span><span class="keyword">...</span>
0800             <span class="string">'Streamwise Velocity, in cm/s'</span><span class="keyword">...</span>
0801             <span class="string">'Transverse Velocity, in cm/s'</span><span class="keyword">...</span>
0802             <span class="string">'Primary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0803             <span class="string">'Secondary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0804             <span class="string">'Primary Velocity (roz), in cm/s'</span><span class="keyword">...</span>
0805             <span class="string">'Secondary Velocity (roz), in cm/s'</span>};
0806         
0807         mcsdata = [<span class="keyword">...</span>
0808             V.mcsX(:)<span class="keyword">...</span>
0809             V.mcsY(:)<span class="keyword">...</span>
0810             V.mcsDist(:)<span class="keyword">...</span>
0811             (wse - V.mcsDepth(:))<span class="keyword">...</span>
0812             repmat((wse - V.mcsBed(:)),size(V.mcsX,1),1)<span class="keyword">...</span>
0813             V.mcsEast(:)<span class="keyword">...</span>
0814             V.mcsNorth(:)<span class="keyword">...</span>
0815             V.mcsVert(:)<span class="keyword">...</span>
0816             V.mcsMag(:)<span class="keyword">...</span>
0817             V.mcsDir(:)<span class="keyword">...</span>
0818             V.u(:)<span class="keyword">...</span>
0819             V.v(:)<span class="keyword">...</span>
0820             V.vp(:)<span class="keyword">...</span>
0821             V.vs(:)<span class="keyword">...</span>
0822             V.Roz.up(:)<span class="keyword">...</span>
0823             V.Roz.us(:)];
0824         mcsdata(isnan(mcsdata)) = -9999;
0825         
0826         mcsout = vertcat(mcsheaders,num2cell(mcsdata));
0827         xlswrite(outfile,mcsout,<span class="string">'MeanCrossSection'</span>);
0828         waitbar(1,hwait)
0829         delete(hwait)
0830         
0831     <span class="keyword">else</span>
0832         <span class="comment">% Return default excel_path and excel_file</span>
0833         excel_path = guiprefs.excel_path;
0834         excel_file = guiprefs.excel_file;
0835         outfile = fullfile(excel_path,excel_file);
0836         log_text = {<span class="string">'User aborted Excel export...'</span>};
0837     <span class="keyword">end</span>
0838     
0839     
0840     
0841 <span class="keyword">end</span>
0842 
0843 <span class="comment">% Push messages to Log Window:</span>
0844 <span class="comment">% ----------------------------</span>
0845 statusLogging(handles.LogWindow, log_text)
0846 
0847 <span class="comment">% Store the persistent preferences:</span>
0848 <span class="comment">% ---------------------------------</span>
0849 guiprefs.excel_file = excel_file;
0850 guiprefs.excel_path = excel_path;
0851 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0852 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0853 
0854 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0855 
0856 <span class="comment">% --------------------------------------------------------------------</span>
0857 <a name="_sub26" href="#_subfunctions" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a>
0858 <span class="comment">% Empty</span>
0859 
0860 <span class="comment">% --------------------------------------------------------------------</span>
0861 <a name="_sub27" href="#_subfunctions" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a>
0862 <span class="comment">% Empty</span>
0863 
0864 <span class="comment">% --------------------------------------------------------------------</span>
0865 <a name="_sub28" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0866 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0867 
0868 <span class="comment">% Get the Application Data:</span>
0869 <span class="comment">% -------------------------</span>
0870 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0871 
0872 <span class="comment">% Update the GUI &amp; Application Data:</span>
0873 <span class="comment">% ----------------------------------</span>
0874 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0875 <span class="keyword">switch</span> status
0876     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0877         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0878         guiparams.unit_discharge_correction = false;
0879     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0880         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0881         guiparams.unit_discharge_correction = true;
0882 <span class="keyword">end</span>
0883 
0884 <span class="comment">% Re-store the Application data:</span>
0885 <span class="comment">% ------------------------------</span>
0886 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0887 
0888 
0889 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0890 
0891 <span class="comment">% --------------------------------------------------------------------</span>
0892 <a name="_sub29" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0893 <span class="comment">% Empty</span>
0894 
0895 <span class="comment">% --------------------------------------------------------------------</span>
0896 <a name="_sub30" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0897 <span class="comment">% Empty</span>
0898 
0899 <span class="comment">% --------------------------------------------------------------------</span>
0900 <a name="_sub31" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
0901 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
0902 
0903 <span class="comment">% Get the Application Data:</span>
0904 <span class="comment">% -------------------------</span>
0905 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0906 
0907 <span class="comment">% Update the Application Data:</span>
0908 <span class="comment">% ----------------------------</span>
0909 guiparams.english_units = false;
0910 
0911 <span class="comment">% Re-store the Application data:</span>
0912 <span class="comment">% ------------------------------</span>
0913 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0914 
0915 <span class="comment">% Update the GUI:</span>
0916 <span class="comment">% ---------------</span>
0917 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0918 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0919 
0920 <span class="comment">% [EOF] menuMetric_Callback</span>
0921 
0922 
0923 <span class="comment">% --------------------------------------------------------------------</span>
0924 <a name="_sub32" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
0925 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
0926 
0927 <span class="comment">% Get the Application Data:</span>
0928 <span class="comment">% -------------------------</span>
0929 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0930 
0931 <span class="comment">% Update the Application Data:</span>
0932 <span class="comment">% ----------------------------</span>
0933 guiparams.english_units = true;
0934 
0935 <span class="comment">% Re-store the Application data:</span>
0936 <span class="comment">% ------------------------------</span>
0937 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0938 
0939 <span class="comment">% Update the GUI:</span>
0940 <span class="comment">% ---------------</span>
0941 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0942 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0943 
0944 <span class="comment">% [EOF] menuEnglish_Callback</span>
0945 
0946 
0947 <span class="comment">% --------------------------------------------------------------------</span>
0948 <a name="_sub33" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
0949 <span class="comment">% Empty</span>
0950 
0951 <span class="comment">% --------------------------------------------------------------------</span>
0952 <a name="_sub34" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
0953 <span class="comment">% Set cross-section endpoints automatically</span>
0954 
0955 <span class="comment">% Get the Application Data:</span>
0956 <span class="comment">% -------------------------</span>
0957 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0958 
0959 <span class="comment">% Update the Application Data:</span>
0960 <span class="comment">% ----------------------------</span>
0961 guiparams.set_cross_section_endpoints = false;
0962 
0963 <span class="comment">% Re-store the Application data:</span>
0964 <span class="comment">% ------------------------------</span>
0965 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0966 
0967 <span class="comment">% Update the GUI:</span>
0968 <span class="comment">% ---------------</span>
0969 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0970 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0971 
0972 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
0973 
0974 
0975 <span class="comment">% --------------------------------------------------------------------</span>
0976 <a name="_sub35" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
0977 <span class="comment">% Set cross-section endpoints manually</span>
0978 
0979 <span class="comment">% Get the Application Data:</span>
0980 <span class="comment">% -------------------------</span>
0981 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0982 
0983 <span class="comment">% Update the Application Data:</span>
0984 <span class="comment">% ----------------------------</span>
0985 guiparams.set_cross_section_endpoints = true;
0986 
0987 <span class="comment">% Re-store the Application data:</span>
0988 <span class="comment">% ------------------------------</span>
0989 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0990 
0991 <span class="comment">% Update the GUI:</span>
0992 <span class="comment">% ---------------</span>
0993 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0994 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0995 
0996 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
0997 
0998 
0999 
1000 
1001 <span class="comment">% --------------------------------------------------------------------</span>
1002 <a name="_sub36" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
1003 <span class="comment">% Empty</span>
1004 
1005 <span class="comment">% --------------------------------------------------------------------</span>
1006 <a name="_sub37" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
1007 
1008 <span class="comment">% Get the Application Data:</span>
1009 <span class="comment">% -------------------------</span>
1010 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1011 
1012 <span class="comment">% Update the Application Data:</span>
1013 <span class="comment">% ----------------------------</span>
1014 guiparams.print        = true;
1015 guiparams.presentation = false;
1016 
1017 <span class="comment">% Re-store the Application data:</span>
1018 <span class="comment">% ------------------------------</span>
1019 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1020 
1021 <span class="comment">% Update the GUI:</span>
1022 <span class="comment">% ---------------</span>
1023 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1024 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1025 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1026 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1027 
1028 <span class="comment">% Modify the existing figures</span>
1029 <span class="comment">% ---------------------------</span>
1030 <span class="comment">% Find what plots exist already</span>
1031 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1032 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1033 
1034 <span class="comment">% Defaults for Print Stlye Figure</span>
1035 BkgdColor   = <span class="string">'white'</span>;
1036 AxColor     = <span class="string">'black'</span>;
1037 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1038 FntSize     = 14;
1039 
1040 <span class="comment">% Loop through valid figures and adjust</span>
1041 <span class="comment">% -------------------------------------</span>
1042 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1043     
1044     <span class="keyword">for</span> i = 1:length(valid_names)
1045         <span class="keyword">switch</span> valid_names{i}
1046             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1047                 <span class="comment">% Focus the figure</span>
1048                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1049                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1050                     figure(hff)
1051                     
1052                     <span class="comment">% Make the changes to figure</span>
1053                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1054                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1055                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1056                     set(gca,<span class="string">'Color'</span>,FigColor)
1057                     set(gca,<span class="string">'XColor'</span>,AxColor)
1058                     set(gca,<span class="string">'YColor'</span>,AxColor)
1059                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1060                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1061                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1062                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1063                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1064                 <span class="keyword">end</span>
1065             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1066                 <span class="comment">% Focus the figure</span>
1067                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1068                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1069                     figure(hff)
1070                     
1071                     <span class="comment">% Make the changes to figure</span>
1072                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1073                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1074                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1075                     set(gca,<span class="string">'Color'</span>,FigColor)
1076                     set(gca,<span class="string">'XColor'</span>,AxColor)
1077                     set(gca,<span class="string">'YColor'</span>,AxColor)
1078                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1079                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1080                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1081                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1082                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1083                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1084                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1085                 <span class="keyword">end</span>
1086             <span class="keyword">otherwise</span>
1087         <span class="keyword">end</span>
1088     <span class="keyword">end</span>
1089     
1090     
1091 <span class="keyword">end</span>
1092 
1093 
1094 <span class="comment">%[EOF] menuStylePrint_Callback</span>
1095 
1096 
1097 <span class="comment">% --------------------------------------------------------------------</span>
1098 <a name="_sub38" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
1099 <span class="comment">% Get the Application Data:</span>
1100 <span class="comment">% -------------------------</span>
1101 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1102 
1103 <span class="comment">% Update the Application Data:</span>
1104 <span class="comment">% ----------------------------</span>
1105 guiparams.print        = false;
1106 guiparams.presentation = true;
1107 
1108 <span class="comment">% Re-store the Application data:</span>
1109 <span class="comment">% ------------------------------</span>
1110 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1111 
1112 <span class="comment">% Update the GUI:</span>
1113 <span class="comment">% ---------------</span>
1114 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1115 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1116 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1117 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1118 
1119 <span class="comment">% Modify the existing figures</span>
1120 <span class="comment">% ---------------------------</span>
1121 <span class="comment">% Find what plots exist already</span>
1122 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1123 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1124 
1125 <span class="comment">% Defaults for Presentation Stlye Figure</span>
1126 <span class="comment">% --------------------------------------</span>
1127 BkgdColor   = <span class="string">'black'</span>;
1128 AxColor     = <span class="string">'white'</span>;
1129 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1130 FntSize     = 14;
1131 
1132 <span class="comment">% Loop through valid figures and adjust</span>
1133 <span class="comment">% -------------------------------------</span>
1134 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1135     
1136     <span class="keyword">for</span> i = 1:length(valid_names)
1137         <span class="keyword">switch</span> valid_names{i}
1138             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1139                 <span class="comment">% Focus the figure</span>
1140                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1141                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1142                     figure(hff)
1143                     
1144                     <span class="comment">% Make the changes to figure</span>
1145                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1146                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1147                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1148                     set(gca,<span class="string">'Color'</span>,FigColor)
1149                     set(gca,<span class="string">'XColor'</span>,AxColor)
1150                     set(gca,<span class="string">'YColor'</span>,AxColor)
1151                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1152                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1153                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1154                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1155                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1156                 <span class="keyword">end</span>
1157             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1158                 <span class="comment">% Focus the figure</span>
1159                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1160                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1161                     figure(hff)
1162                     
1163                     <span class="comment">% Make the changes to figure</span>
1164                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1165                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1166                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1167                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1168                     set(gca,<span class="string">'XColor'</span>,AxColor)
1169                     set(gca,<span class="string">'YColor'</span>,AxColor)
1170                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1171                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1172                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1173                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1174                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1175                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1176                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1177                 <span class="keyword">end</span>
1178             <span class="keyword">otherwise</span>
1179         <span class="keyword">end</span>
1180     <span class="keyword">end</span>
1181     
1182     
1183 <span class="keyword">end</span>
1184 
1185 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1186 
1187 <span class="comment">% --------------------------------------------------------------------</span>
1188 <a name="_sub39" href="#_subfunctions" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a>
1189 
1190 <span class="comment">% Get the Application data:</span>
1191 <span class="comment">% -------------------------</span>
1192 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1193 
1194 <span class="comment">% Initialize the answer:</span>
1195 <span class="comment">% ----------------------</span>
1196 numstr = {num2str(guiparams.vertical_offset)};
1197 answer = NaN;
1198 <span class="keyword">while</span> isnan(answer)
1199     answer = inputdlg(<span class="string">'Vertical Offset (m)'</span>,<span class="string">'KMZ Export'</span>,1,numstr);
1200     
1201     <span class="keyword">if</span> isempty(answer) <span class="comment">% User hits &quot;Cancel&quot;</span>
1202         <span class="keyword">return</span>
1203     <span class="keyword">end</span>
1204     
1205     answer = str2double(answer); <span class="comment">% A non-numeric char will be NaN</span>
1206     <span class="comment">% A numeric char will be a double</span>
1207 <span class="keyword">end</span>
1208 
1209 <span class="comment">% Re-store the Application data:</span>
1210 <span class="comment">% ------------------------------</span>
1211 guiparams.vertical_offset = answer;
1212 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1213 
1214 <span class="comment">% [EOF] menuKMZExport_Callback</span>
1215 
1216 <span class="comment">% --------------------------------------------------------------------</span>
1217 <a name="_sub40" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1218 <span class="comment">% Not implemented</span>
1219 
1220 <span class="comment">% --------------------------------------------------------------------</span>
1221 <a name="_sub41" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1222 <span class="comment">% Empty</span>
1223 
1224 <span class="comment">% --------------------------------------------------------------------</span>
1225 <a name="_sub42" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1226 ASCII2GIS_GUI
1227 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1228 
1229 <span class="comment">% --------------------------------------------------------------------</span>
1230 <a name="_sub43" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1231 
1232 <span class="comment">% Get the Application preferences:</span>
1233 <span class="comment">% --------------------------------</span>
1234 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1235 
1236 inpath = guiprefs.kmz_path;
1237 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1238     infile = guiprefs.kmz_file{1};
1239 <span class="keyword">else</span>
1240     infile = guiprefs.kmz_file;
1241 <span class="keyword">end</span>
1242 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1243 
1244 guiprefs.kmz_path = outpath;
1245 guiprefs.kmz_file = outfile;
1246 
1247 <span class="comment">% Update persistent preferences</span>
1248 <span class="comment">% -----------------------------</span>
1249 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1250 
1251 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1252 
1253 <span class="comment">% --------------------------------------------------------------------</span>
1254 <a name="_sub44" href="#_subfunctions" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a>
1255 <span class="comment">% Get the Application preferences:</span>
1256 <span class="comment">% --------------------------------</span>
1257 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1258 
1259 VMT_BatchMode;
1260 <span class="comment">% [EOF] menuOpenBatchMode_Callback</span>
1261 
1262 <span class="comment">% --------------------------------------------------------------------</span>
1263 <a name="_sub45" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1264 <span class="comment">% Empty</span>
1265 
1266 <span class="comment">% --------------------------------------------------------------------</span>
1267 <a name="_sub46" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1268 <span class="keyword">try</span>
1269     web(<span class="string">'http://code.google.com/p/velocity-mapping-tool/wiki/UserGuide?tm=6'</span>)
1270 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1271     <span class="keyword">if</span> isdeployed
1272         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1273             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1274         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1275             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1276             errLogFileName},<span class="keyword">...</span>
1277             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1278             <span class="string">'error'</span>);
1279         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1280         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1281         fclose(fid);
1282         rethrow(err)
1283     <span class="keyword">else</span>
1284         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1285             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1286             <span class="string">'error'</span>);
1287         rethrow(err);
1288     <span class="keyword">end</span>
1289 <span class="keyword">end</span>
1290 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1291 
1292 <span class="comment">% --------------------------------------------------------------------</span>
1293 <a name="_sub47" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1294 <span class="comment">% Get the Application data:</span>
1295 <span class="comment">% -------------------------</span>
1296 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1297 
1298 <span class="keyword">try</span>
1299     <span class="comment">% Construct a URL to a local file which can be interpreted by any</span>
1300     <span class="comment">% web-browser</span>
1301     rootpath = strrep(pwd,filesep,<span class="string">'/'</span>);
1302     webaddress = [<span class="string">'file:///'</span> rootpath <span class="string">'/doc/index.html'</span>];
1303     system([<span class="string">'start '</span> webaddress]);
1304 <span class="comment">%     [stat,h,url] = web(webaddress) % Produced with m2html (FEX)</span>
1305 <span class="keyword">catch</span> err 
1306     <span class="keyword">if</span> isdeployed
1307         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1308             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1309         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1310             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1311             errLogFileName},<span class="keyword">...</span>
1312             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1313             <span class="string">'error'</span>);
1314         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1315         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1316         fclose(fid);
1317         rethrow(err)
1318     <span class="keyword">else</span>
1319         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1320             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1321             <span class="string">'error'</span>);
1322         rethrow(err);
1323     <span class="keyword">end</span>
1324 <span class="keyword">end</span>
1325 
1326 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1327 
1328 <span class="comment">% --------------------------------------------------------------------</span>
1329 <a name="_sub48" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1330 
1331 <span class="comment">% Get the Application data:</span>
1332 <span class="comment">% -------------------------</span>
1333 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1334 
1335 <span class="comment">% Check version tag against the web, and display a message</span>
1336 <span class="keyword">try</span>
1337     current_vmt_version = urlread(<span class="string">'http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1338     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1339 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1340     <span class="keyword">if</span> isdeployed
1341         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1342             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1343         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1344             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1345             errLogFileName},<span class="keyword">...</span>
1346             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1347             <span class="string">'error'</span>);
1348         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1349         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1350         fclose(fid);
1351         rethrow(err)
1352     <span class="keyword">else</span>
1353         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1354             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1355             <span class="string">'error'</span>);
1356         rethrow(err);
1357     <span class="keyword">end</span>
1358 <span class="keyword">end</span>
1359 
1360 <span class="keyword">if</span> strcmpi(guiparams.vmt_version,current_vmt_version)
1361     h = msgbox(<span class="string">'VMT is currently up to date, no updates available.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1362 <span class="keyword">else</span>
1363     h = msgbox(<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1364 <span class="keyword">end</span>
1365 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1366 
1367 <span class="comment">% --------------------------------------------------------------------</span>
1368 <a name="_sub49" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1369 
1370 <span class="comment">% Get the Application data:</span>
1371 <span class="comment">% -------------------------</span>
1372 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1373 messagestr = <span class="keyword">...</span>
1374     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1375     [<span class="string">'   Version: '</span> guiparams.vmt_version];<span class="keyword">...</span>
1376     <span class="string">''</span>;<span class="keyword">...</span>
1377     <span class="string">''</span>;<span class="keyword">...</span>
1378     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1379     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1380     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1381     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1382     <span class="string">''</span>;<span class="keyword">...</span>
1383     <span class="string">''</span>;<span class="keyword">...</span>
1384     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1385     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1386     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1387     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1388     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1389     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1390     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1391 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1392 <span class="comment">% [EOF] menuAbout_Callback</span>
1393 
1394 
1395 
1396 
1397 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1398 <span class="comment">% TOOLBAR CALLBACKS %</span>
1399 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1400 
1401 <span class="comment">% --------------------------------------------------------------------</span>
1402 <a name="_sub50" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1403 <span class="comment">% Read Files into Data Structure using tfile.</span>
1404 
1405 <span class="comment">% Get the Application data:</span>
1406 <span class="comment">% -------------------------</span>
1407 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1408 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1409 
1410 <span class="comment">% Ask the user to select files:</span>
1411 <span class="comment">% -----------------------------</span>
1412 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1413 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1414     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1415     current_file, <span class="keyword">...</span>
1416     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1417 
1418 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1419     guiparams.data_folder = pathname;
1420     <span class="keyword">if</span> ischar(filename)
1421         filename = {filename};
1422     <span class="keyword">end</span>
1423     guiparams.data_files = filename;
1424     guiparams.mat_file = <span class="string">''</span>;
1425     
1426     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1427     
1428    
1429     
1430     <span class="comment">% Update the preferences:</span>
1431     <span class="comment">% -----------------------</span>
1432     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1433     guiprefs.ascii_path = pathname;
1434     guiprefs.ascii_file = filename;
1435     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1436     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1437     
1438     <span class="comment">% Push messages to Log Window:</span>
1439     <span class="comment">% ----------------------------</span>
1440     log_text = {<span class="keyword">...</span>
1441         <span class="string">''</span>;<span class="keyword">...</span>
1442         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1443         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1444         guiparams.data_folder;
1445         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1446         char(filename)};
1447     statusLogging(handles.LogWindow, log_text)
1448     
1449     <span class="comment">% Read the file(s)</span>
1450     <span class="comment">% ----------------</span>
1451     [~,~,savefile,A,z] = <span class="keyword">...</span>
1452         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1453     guiparams.savefile = savefile;
1454     guiparams.A        = A;
1455     guiparams.z        = z;
1456     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1457 <span class="comment">%</span>
1458 <span class="comment">%     % Preprocess the data:</span>
1459 <span class="comment">%     % --------------------</span>
1460 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1461 <span class="comment">%</span>
1462 <span class="comment">%     % Push messages to Log Window:</span>
1463 <span class="comment">%     % ----------------------------</span>
1464 <span class="comment">%     log_text = {...</span>
1465 <span class="comment">%         '   Preprocessing complete.';...</span>
1466 <span class="comment">%         '   Begin Data Processing...'};</span>
1467 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1468 <span class="comment">%</span>
1469 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1470 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1471 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1472 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1473 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1474 <span class="comment">%</span>
1475 <span class="comment">%     % Push messages to Log Window:</span>
1476 <span class="comment">%     % ----------------------------</span>
1477 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1478 <span class="comment">%</span>
1479 <span class="comment">%     % Store the data:</span>
1480 <span class="comment">%     % ---------------</span>
1481 <span class="comment">%     guiparams.z = z;</span>
1482 <span class="comment">%     guiparams.A = A;</span>
1483 <span class="comment">%     guiparams.V = V;</span>
1484 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1485     
1486           
1487     <span class="comment">% Update the GUI:</span>
1488     <span class="comment">% ---------------</span>
1489     <a href="#_sub94" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1490 <span class="keyword">end</span>
1491 <span class="comment">% [EOF] loadDataCallback</span>
1492 
1493 
1494 
1495 <span class="comment">% --------------------------------------------------------------------</span>
1496 <a name="_sub51" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1497 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1498 
1499 <span class="comment">% Get the Application data:</span>
1500 <span class="comment">% -------------------------</span>
1501 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1502 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1503 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1504 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1505 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1506 
1507 [the_file,the_path] = <span class="keyword">...</span>
1508     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1509     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1510     fullfile(guiparams.mat_path,guiparams.savefile));
1511 
1512 <span class="comment">% Save the processed data to a MAT file:</span>
1513 <span class="comment">% --------------------------------------</span>
1514 <span class="keyword">if</span> ischar(the_file)
1515     guiparams.mat_path = the_path;
1516     guiparams.mat_file = the_file;
1517     guiparams.savefile = the_file;
1518     
1519     <span class="comment">% Re-store the Application data:</span>
1520     <span class="comment">% ------------------------------</span>
1521     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1522     
1523     <span class="comment">% Update the preferences:</span>
1524     <span class="comment">% -----------------------</span>
1525     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1526     guiprefs.mat_path = the_path;
1527     guiprefs.mat_file = the_file;
1528     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1529     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1530     
1531     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1532     savefile = fullfile(pathstr,[filename extension]);
1533     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1534     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1535     log_text = {<span class="keyword">...</span>
1536         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1537         savefile};
1538     statusLogging(handles.LogWindow,log_text)
1539     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1540 <span class="keyword">end</span>
1541 
1542 <span class="comment">% [EOF] saveDataCallback</span>
1543 
1544 
1545 <span class="comment">% --------------------------------------------------------------------</span>
1546 <a name="_sub52" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1547 
1548 <span class="comment">% Get the Application data:</span>
1549 <span class="comment">% -------------------------</span>
1550 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1551 z   = guiparams.z;
1552 A   = guiparams.A;
1553 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1554 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1555 
1556 <span class="comment">% Compute multibeam bathymetry:</span>
1557 <span class="comment">% -----------------------------</span>
1558 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1559 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1560 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1561     guiparams.beam_angle, <span class="keyword">...</span>
1562     guiparams.magnetic_variation, <span class="keyword">...</span>
1563     guiparams.wse, <span class="keyword">...</span>
1564     guiparams.output_auxiliary_data);
1565 
1566 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1567 
1568 <span class="comment">% [EOF] saveBathymetryCallback</span>
1569 
1570 <span class="comment">% --------------------------------------------------------------------</span>
1571 <a name="_sub53" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1572 
1573 <span class="comment">% Get the Application data:</span>
1574 <span class="comment">% -------------------------</span>
1575 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1576 
1577 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1578     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1579     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1580     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1581     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1582     handles.figure1);
1583 
1584 <span class="comment">% Update the GUI:</span>
1585 <span class="comment">% ---------------</span>
1586 <span class="keyword">if</span> guiparams.english_units
1587     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1588     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1589 <span class="keyword">else</span>
1590     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1591     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1592 <span class="keyword">end</span>
1593 
1594 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1595     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1596     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1597 <span class="keyword">else</span>
1598     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1599     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1600 <span class="keyword">end</span>
1601 
1602 <span class="keyword">if</span> guiparams.presentation
1603     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1604 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1605 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1606 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1607 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1608 <span class="keyword">else</span>
1609     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1610 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1611 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1612 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1613 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1614 <span class="keyword">end</span>
1615 
1616 <span class="comment">% Re-store the Application data:</span>
1617 <span class="comment">% ------------------------------</span>
1618 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1619 
1620 <span class="comment">% [EOF] plottingParametersCallback</span>
1621 
1622 
1623 <span class="comment">% --------------------------------------------------------------------</span>
1624 <a name="_sub54" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1625 
1626 <span class="comment">% Get the Application data:</span>
1627 <span class="comment">% -------------------------</span>
1628 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1629 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1630 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1631 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1632 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1633 
1634 <span class="comment">% [EOF] processingParametersCallback</span>
1635 
1636 
1637 <span class="comment">% --------------------------------------------------------------------</span>
1638 <a name="_sub55" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1639 <span class="comment">% Plot 1</span>
1640 
1641 <span class="comment">% Get the Application data:</span>
1642 <span class="comment">% -------------------------</span>
1643 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1644 z = guiparams.z;
1645 A = guiparams.A;
1646 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1647 <span class="comment">% Map = guiparams.Map;</span>
1648 setends = guiparams.set_cross_section_endpoints;
1649 
1650 <span class="comment">% Preprocess the data:</span>
1651 <span class="comment">% --------------------</span>
1652 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1653 
1654 <span class="comment">% Push messages to Log Window:</span>
1655 <span class="comment">% ----------------------------</span>
1656 log_text = {<span class="keyword">...</span>
1657     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1658     <span class="string">'   Begin Data Processing...'</span>};
1659 statusLogging(handles.LogWindow, log_text)
1660 
1661 <span class="comment">% Process the transects:</span>
1662 <span class="comment">% ----------------------</span>
1663 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1664 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1665 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1666     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1667 
1668 <span class="comment">% Compute the smoothed variables</span>
1669 <span class="comment">% ------------------------------</span>
1670 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1671 <span class="comment">% runtime.</span>
1672 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1673     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1674     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1675     guiparams.vertical_smoothing_window);
1676 
1677 <span class="comment">% Push messages to Log Window:</span>
1678 <span class="comment">% ----------------------------</span>
1679 statusLogging(handles.LogWindow, processing_log_text)
1680 
1681 <span class="comment">% Store the data:</span>
1682 <span class="comment">% ---------------</span>
1683 guiparams.z = z;
1684 guiparams.A = A;
1685 guiparams.V = V;
1686 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1687 
1688 <span class="comment">% Push messages to Log Window:</span>
1689 <span class="comment">% ----------------------------</span>
1690 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1691 statusLogging(handles.LogWindow, log_text)
1692 
1693 <span class="comment">% Create or replot the Shiptracks</span>
1694 <span class="comment">% -------------------------------</span>
1695 <span class="comment">% Grab the axes to the plot</span>
1696 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1697 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1698 
1699 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1700 <span class="comment">% New plot display window</span>
1701 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1702 <span class="comment">% h = figure(1); clf</span>
1703 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1704 
1705 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1706 
1707 
1708 <span class="comment">% --------------------------------------------------------------------</span>
1709 <a name="_sub56" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1710 <span class="comment">% Plot 2</span>
1711 
1712 <span class="comment">% Get the Application data:</span>
1713 <span class="comment">% -------------------------</span>
1714 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1715 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1716 
1717 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1718     <span class="comment">% Push messages to Log Window:</span>
1719     <span class="comment">% ----------------------------</span>
1720     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1721     statusLogging(handles.LogWindow, log_text)
1722     
1723        
1724     <span class="comment">% Push plotting parameters to log window:</span>
1725     <span class="comment">% ---------------------------------------</span>
1726     log_text = {<span class="keyword">...</span>
1727         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1728         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1729         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1730         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1731         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1732         };
1733     statusLogging(handles.LogWindow, log_text)
1734     
1735     <span class="comment">% Plot the data:</span>
1736     <span class="comment">% --------------</span>
1737     z = [];
1738     A = [];
1739     V = [];
1740     Map = [];
1741     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1742     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1743         depth_range, <span class="keyword">...</span>
1744         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1745         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1746         guiparams.smoothing_window_size, <span class="keyword">...</span>
1747         guiparams.display_shoreline, <span class="keyword">...</span>
1748         guiparams.english_units, <span class="keyword">...</span>
1749         guiparams.mat_file, <span class="keyword">...</span>
1750         guiparams.mat_path); <span class="comment">% PLOT2</span>
1751     statusLogging(handles.LogWindow, log_text)
1752     
1753     <span class="comment">% Plot a Shoreline Map:</span>
1754     <span class="comment">% ---------------------</span>
1755     <span class="keyword">if</span> guiparams.display_shoreline
1756         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1757             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1758             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1759             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1760         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1761             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1762             Map.UTMe   = mapdata(:,1);
1763             Map.UTMn   = mapdata(:,2);
1764             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1765             <span class="comment">%Map.UTMzone = zone;</span>
1766         <span class="keyword">else</span>
1767             Map = [];
1768         <span class="keyword">end</span>
1769         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1770         log_text = {<span class="keyword">...</span>
1771             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1772             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1773             };
1774         statusLogging(handles.LogWindow, log_text)
1775     <span class="keyword">else</span>
1776         Map = [];
1777     <span class="keyword">end</span>
1778     
1779 <span class="keyword">else</span>
1780     z = guiparams.z;
1781     A = guiparams.A;
1782     <span class="comment">% V = guiparams.V;</span>
1783     Map = guiparams.Map;
1784     
1785     <span class="comment">% Push messages to Log Window:</span>
1786     <span class="comment">% ----------------------------</span>
1787     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
1788     statusLogging(handles.LogWindow, log_text)
1789     
1790         
1791     <span class="comment">% Preprocess the data:</span>
1792     <span class="comment">% --------------------</span>
1793     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1794     
1795     <span class="comment">% Process the transects:</span>
1796     <span class="comment">% ----------------------</span>
1797     A(1).hgns = guiparams.horizontal_grid_node_spacing;
1798     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1799     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1800         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1801     
1802     <span class="comment">% Compute the smoothed variables</span>
1803     <span class="comment">% ------------------------------</span>
1804     <span class="comment">% This is required so that the V struc is complete at any point during</span>
1805     <span class="comment">% runtime.</span>
1806     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1807         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1808         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1809         guiparams.vertical_smoothing_window);
1810     
1811     <span class="comment">% Push messages to Log Window:</span>
1812     <span class="comment">% ----------------------------</span>
1813     statusLogging(handles.LogWindow, processing_log_text)
1814     
1815     <span class="comment">% Plot the cross section:</span>
1816     <span class="comment">% -----------------------</span>
1817     log_text = {<span class="keyword">...</span>
1818         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1819         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1820         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1821         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1822         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1823         };
1824     statusLogging(handles.LogWindow, log_text)
1825     
1826     <span class="comment">% Plot the data:</span>
1827     <span class="comment">% --------------</span>
1828     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
1829     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1830     
1831     
1832     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1833         depth_range, <span class="keyword">...</span>
1834         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1835         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1836         guiparams.smoothing_window_size, <span class="keyword">...</span>
1837         guiparams.display_shoreline, <span class="keyword">...</span>
1838         guiparams.english_units, <span class="keyword">...</span>
1839         guiparams.mat_file, <span class="keyword">...</span>
1840         guiparams.mat_path); <span class="comment">% PLOT2</span>
1841     statusLogging(handles.LogWindow, log_text)
1842     
1843     <span class="comment">% Plot a Shoreline Map:</span>
1844     <span class="comment">% ---------------------</span>
1845     <span class="keyword">if</span> guiparams.display_shoreline
1846         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1847             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1848             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1849             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1850         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1851             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1852             Map.UTMe   = mapdata(:,1);
1853             Map.UTMn   = mapdata(:,2);
1854             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1855             <span class="comment">%Map.UTMzone = zone;</span>
1856         <span class="keyword">else</span>
1857             Map = [];
1858         <span class="keyword">end</span>
1859         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1860         log_text = {<span class="keyword">...</span>
1861             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1862             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1863             };
1864         statusLogging(handles.LogWindow, log_text)
1865     <span class="keyword">else</span>
1866         Map = [];
1867     <span class="keyword">end</span>
1868     
1869 <span class="keyword">end</span>
1870 
1871 <span class="keyword">if</span> guiparams.add_background
1872     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
1873     statusLogging(handles.LogWindow, log_text)
1874 <span class="keyword">end</span>
1875 
1876 <span class="comment">% Update guiparams</span>
1877 <span class="comment">% ----------------</span>
1878 guiparams.z   = z;
1879 guiparams.A   = A;
1880 guiparams.V   = V;
1881 guiparams.Map = Map;
1882 guiparams.iric_anv_planview_data = PVdata;
1883 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
1884 
1885 <span class="comment">% Update preferences</span>
1886 <span class="comment">% ------------------</span>
1887 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1888 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
1889 <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
1890 
1891 <span class="comment">% Force plot to be formated properly</span>
1892 <span class="comment">% ----------------------------------</span>
1893 <span class="keyword">if</span> guiparams.presentation
1894     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1895 <span class="keyword">else</span>
1896     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1897 <span class="keyword">end</span>
1898 <span class="keyword">switch</span> guiparams.renderer
1899     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
1900         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
1901     <span class="keyword">case</span> <span class="string">'painters'</span>
1902         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
1903     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
1904         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
1905 <span class="keyword">end</span>
1906 
1907 <span class="comment">% Start the Graphics Control Gui</span>
1908 <span class="comment">% ------------------------------</span>
1909 VMT_GraphicsControl
1910 
1911 <span class="comment">% [EOF] planviewPlotCallback</span>
1912 
1913 
1914 <span class="comment">% --------------------------------------------------------------------</span>
1915 <a name="_sub57" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
1916 <span class="comment">% Plot 3</span>
1917 
1918 <span class="comment">% Get the Application data:</span>
1919 <span class="comment">% -------------------------</span>
1920 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1921 z = guiparams.z;
1922 A = guiparams.A;
1923 <span class="comment">% V = guiparams.V;</span>
1924 <span class="comment">% Map = guiparams.Map;</span>
1925 
1926 <span class="comment">% Preprocess the data:</span>
1927 <span class="comment">% --------------------</span>
1928 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1929 
1930 <span class="comment">% Push messages to Log Window:</span>
1931 <span class="comment">% ----------------------------</span>
1932 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
1933 statusLogging(handles.LogWindow, log_text)
1934 
1935 <span class="comment">% Process the transects:</span>
1936 <span class="comment">% ----------------------</span>
1937 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1938 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1939 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1940     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1941 
1942 <span class="comment">% Push messages to Log Window:</span>
1943 <span class="comment">% ----------------------------</span>
1944 statusLogging(handles.LogWindow, processing_log_text)
1945 
1946 <span class="comment">% Plot the cross section:</span>
1947 <span class="comment">% -----------------------</span>
1948 log_text = {<span class="keyword">...</span>
1949     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
1950     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
1951     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
1952     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
1953     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
1954     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
1955     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
1956     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
1957     };
1958 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
1959     log_text = vertcat(log_text, {<span class="keyword">...</span>
1960         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
1961         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
1962         });
1963 <span class="keyword">end</span>
1964 <span class="comment">% Push messages to Log Window:</span>
1965 <span class="comment">% ----------------------------</span>
1966 statusLogging(handles.LogWindow, log_text)
1967 
1968 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
1969     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
1970 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
1971 <span class="comment">%         ...guiparams.contour, ...</span>
1972 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
1973 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
1974     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1975         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
1976         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1977         guiparams.vertical_smoothing_window);
1978     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
1979         guiparams.contour, <span class="keyword">...</span>
1980         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
1981         guiparams.vertical_exaggeration, <span class="keyword">...</span>
1982         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
1983         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
1984         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
1985         guiparams.include_vertical_velocity, <span class="keyword">...</span>
1986         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
1987     
1988 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
1989     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1990         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1991         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1992         guiparams.vertical_smoothing_window);
1993     
1994     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
1995         guiparams.contour, <span class="keyword">...</span>
1996         guiparams.vertical_exaggeration, <span class="keyword">...</span>
1997         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
1998     
1999     guiparams.zmin = zmin;
2000     guiparams.zmax = zmax;
2001     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2002 <span class="keyword">end</span>
2003 
2004 <span class="comment">% Force plot to be formated properly</span>
2005 <span class="comment">% ----------------------------------</span>
2006 <span class="keyword">if</span> guiparams.presentation
2007     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2008 <span class="keyword">else</span>
2009     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2010 <span class="keyword">end</span>
2011 <span class="keyword">switch</span> guiparams.renderer
2012     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2013         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2014     <span class="keyword">case</span> <span class="string">'painters'</span>
2015         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2016     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2017         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2018 <span class="keyword">end</span>
2019 
2020 <span class="comment">% Re-store the Application data:</span>
2021 <span class="comment">% ------------------------------</span>
2022 guiparams.V = V;
2023 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2024 
2025 <span class="comment">% Start the Graphics Control Gui</span>
2026 <span class="comment">% ------------------------------</span>
2027 VMT_GraphicsControl
2028 
2029 <span class="comment">% Push messages to Log Window:</span>
2030 <span class="comment">% ----------------------------</span>
2031 statusLogging(handles.LogWindow, plot_cont_log_text)
2032 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2033 
2034 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2035 
2036 
2037 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2038 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2039 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2040 
2041 <span class="comment">% --------------------------------------------------------------------</span>
2042 <a name="_sub58" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2043 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2044 
2045 <span class="comment">% Get the Application data:</span>
2046 <span class="comment">% -------------------------</span>
2047 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2048 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2049 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2050 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2051 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2052 
2053 [the_file,the_path] = <span class="keyword">...</span>
2054     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2055     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2056     fullfile(guiparams.mat_path,guiparams.savefile));
2057 
2058 <span class="comment">% Save the processed data to a MAT file:</span>
2059 <span class="comment">% --------------------------------------</span>
2060 <span class="keyword">if</span> ischar(the_file)
2061     guiparams.mat_path = the_path;
2062     guiparams.mat_file = the_file;
2063     guiparams.savefile = the_file;
2064     
2065     <span class="comment">% Re-store the Application data:</span>
2066     <span class="comment">% ------------------------------</span>
2067     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2068     
2069     <span class="comment">% Update the preferences:</span>
2070     <span class="comment">% -----------------------</span>
2071     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2072     guiprefs.mat_path = the_path;
2073     guiprefs.mat_file = the_file;
2074     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2075     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2076     
2077     [~,filename,extension] = fileparts(guiparams.savefile);
2078     savefile = [filename extension];
2079     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2080         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2081     disp(<span class="string">'Saving Processed Data File...'</span>)
2082     disp(savefile)
2083     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2084 <span class="keyword">end</span>
2085 
2086 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2087 
2088 
2089 <span class="comment">% --------------------------------------------------------------------</span>
2090 <a name="_sub59" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2091 
2092 <span class="comment">% Get the Application data:</span>
2093 <span class="comment">% -------------------------</span>
2094 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2095 <span class="comment">% z   = guiparams.z;</span>
2096 <span class="comment">% A   = guiparams.A;</span>
2097 V   = guiparams.V;
2098 <span class="comment">% Map = guiparams.Map;</span>
2099 
2100 [the_file,the_path] = <span class="keyword">...</span>
2101     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2102     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2103     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2104 
2105 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2106 <span class="comment">% ------------------------------------------</span>
2107 <span class="keyword">if</span> ischar(the_file)
2108     guiparams.tecplot_path = the_path;
2109     guiparams.tecplot_file = the_file;
2110     
2111     <span class="comment">% Re-store the Application data:</span>
2112     <span class="comment">% ------------------------------</span>
2113     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2114     
2115     <span class="comment">% Update the preferences:</span>
2116     <span class="comment">% -----------------------</span>
2117     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2118     guiprefs.tecplot_path = the_path;
2119     guiprefs.tecplot_file = the_file;
2120     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2121     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2122     
2123     <span class="comment">% Push to log window</span>
2124     <span class="comment">% ------------------</span>
2125     log_text = {<span class="keyword">...</span>
2126         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2127         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2128         the_path;<span class="keyword">...</span>
2129         [<span class="string">'Filename: '</span> the_file]};
2130     statusLogging(handles.LogWindow,log_text)
2131         
2132     <span class="keyword">if</span> isempty(V)
2133         A = guiparams.A;
2134         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2135         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2136         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2137             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2138             guiparams.unit_discharge_correction);
2139     <span class="keyword">end</span>
2140     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2141     
2142     <span class="comment">% Push to log window</span>
2143     <span class="comment">% ------------------</span>
2144     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2145     statusLogging(handles.LogWindow,log_text)
2146     
2147     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2148     
2149     <span class="comment">% Push to log window</span>
2150     <span class="comment">% ------------------</span>
2151     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2152     statusLogging(handles.LogWindow,log_text)
2153    
2154 <span class="keyword">end</span>
2155 
2156 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2157 
2158 
2159 <span class="comment">% --------------------------------------------------------------------</span>
2160 <a name="_sub60" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2161 
2162 <span class="comment">% Get the Application data:</span>
2163 <span class="comment">% -------------------------</span>
2164 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2165 <span class="comment">% z   = guiparams.z;</span>
2166 A   = guiparams.A;
2167 V   = guiparams.V;
2168 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2169 
2170 [the_file,the_path] = <span class="keyword">...</span>
2171     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2172     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2173     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2174 
2175 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2176 <span class="comment">% -----------------------------------------------------</span>
2177 <span class="keyword">if</span> ischar(the_file)
2178     guiparams.kmz_path = the_path;
2179     guiparams.kmz_file = the_file;
2180     
2181     <span class="comment">% Re-store the Application data:</span>
2182     <span class="comment">% ------------------------------</span>
2183     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2184     
2185     <span class="comment">% Update the preferences:</span>
2186     <span class="comment">% -----------------------</span>
2187     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2188     guiprefs.kmz_path = the_path;
2189     guiprefs.kmz_file = the_file;
2190     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2191     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2192     
2193     <span class="comment">%     if guiparams.display_shoreline</span>
2194     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2195     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2196     <span class="comment">%                             guiparams.vertical_offset);</span>
2197     <span class="comment">%     end</span>
2198     <span class="keyword">if</span> isempty(V)
2199         A = guiparams.A;
2200         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2201         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2202         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2203             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2204             guiparams.unit_discharge_correction);
2205     <span class="keyword">end</span>
2206     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2207         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2208         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2209         guiparams.vertical_offset);
2210 <span class="keyword">end</span>
2211 
2212 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2213 
2214 
2215 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2216 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2217 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2218 
2219 <span class="comment">% --------------------------------------------------------------------</span>
2220 <a name="_sub61" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2221 
2222 <span class="comment">% Get the Application data:</span>
2223 <span class="comment">% -------------------------</span>
2224 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2225 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2226 z = guiparams.z;
2227 A = guiparams.A;
2228 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2229 <span class="comment">% Map = guiparams.Map;</span>
2230 setends = guiparams.set_cross_section_endpoints;
2231 
2232 [the_file,the_path] = <span class="keyword">...</span>
2233     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2234     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2235     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2236     guiprefs.multibeambathymetry_file));
2237 
2238 <span class="keyword">if</span> ischar(the_file)
2239     guiparams.multibeambathymetry_path = the_path;
2240     guiparams.multibeambathymetry_file = the_file;
2241     
2242     <span class="comment">% Re-store the Application data:</span>
2243     <span class="comment">% ------------------------------</span>
2244     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2245     
2246     <span class="comment">% Update the preferences:</span>
2247     <span class="comment">% -----------------------</span>
2248     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2249     guiprefs.multibeambathymetry_path = the_path;
2250     guiprefs.multibeambathymetry_file = the_file;
2251     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2252     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2253     
2254     <span class="keyword">if</span> guiparams.output_auxiliary_data
2255     <span class="keyword">end</span>
2256     
2257     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2258     
2259     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2260         guiparams.multibeambathymetry_file);
2261     
2262     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2263         [<span class="string">'   '</span> savefile]};
2264     statusLogging(handles.LogWindow,log_text)
2265     
2266     <span class="comment">% Process the transects:</span>
2267     <span class="comment">% ----------------------</span>
2268     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2269     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2270     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2271         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2272     
2273     <span class="comment">% Compute the smoothed variables</span>
2274     <span class="comment">% ------------------------------</span>
2275     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2276     <span class="comment">% runtime.</span>
2277     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2278         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2279         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2280         guiparams.vertical_smoothing_window);
2281     
2282     <span class="comment">% Push messages to Log Window:</span>
2283     <span class="comment">% ----------------------------</span>
2284     statusLogging(handles.LogWindow, processing_log_text)
2285 
2286     
2287     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2288         guiparams.A, <span class="keyword">...</span>
2289         savefile, <span class="keyword">...</span>
2290         guiparams.beam_angle, <span class="keyword">...</span>
2291         guiparams.magnetic_variation, <span class="keyword">...</span>
2292         guiparams.wse, <span class="keyword">...</span>
2293         guiparams.output_auxiliary_data);
2294     
2295     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2296     
2297 <span class="keyword">end</span>
2298 
2299 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2300 
2301 
2302 <span class="comment">% --------------------------------------------------------------------</span>
2303 <a name="_sub62" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2304 <span class="comment">% Get the beam angle</span>
2305 
2306 <span class="comment">% Get the Application data:</span>
2307 <span class="comment">% -------------------------</span>
2308 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2309 
2310 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2311 <span class="comment">% ----------------------------------------------------------------</span>
2312 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2313 is_a_number = ~isnan(new_beam_angle);
2314 is_positive = new_beam_angle&gt;=0;
2315 
2316 <span class="comment">% Modify the Application data:</span>
2317 <span class="comment">% ----------------------------</span>
2318 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2319     guiparams.beam_angle = new_beam_angle;
2320     
2321     <span class="comment">% Re-store the Application data:</span>
2322     <span class="comment">% ------------------------------</span>
2323     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2324     
2325 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2326     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2327 <span class="keyword">end</span>
2328 
2329 <span class="comment">% [EOF] BeamAngle_Callback</span>
2330 
2331 
2332 <span class="comment">% --------------------------------------------------------------------</span>
2333 <a name="_sub63" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2334 <span class="comment">% Get the Magnetic Variation</span>
2335 
2336 <span class="comment">% Get the Application data:</span>
2337 <span class="comment">% -------------------------</span>
2338 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2339 
2340 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2341 <span class="comment">% ----------------------------------------------------------------</span>
2342 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2343 is_a_number = ~isnan(new_magnetic_variation);
2344 is_positive = new_magnetic_variation&gt;=0;
2345 
2346 <span class="comment">% Modify the Application data:</span>
2347 <span class="comment">% ----------------------------</span>
2348 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2349     guiparams.magnetic_variation = new_magnetic_variation;
2350     
2351     <span class="comment">% Re-store the Application data:</span>
2352     <span class="comment">% ------------------------------</span>
2353     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2354     
2355 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2356     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2357 <span class="keyword">end</span>
2358 
2359 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2360 
2361 
2362 <span class="comment">% --------------------------------------------------------------------</span>
2363 <a name="_sub64" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2364 
2365 <span class="comment">% Get the Application data:</span>
2366 <span class="comment">% -------------------------</span>
2367 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2368 
2369 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2370 <span class="comment">% ----------------------------------------------------------------</span>
2371 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2372 is_a_number = ~isnan(new_wse);
2373 is_positive = new_wse&gt;=0;
2374 
2375 <span class="comment">% Modify the Application data:</span>
2376 <span class="comment">% ----------------------------</span>
2377 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2378     guiparams.wse = new_wse;
2379     
2380     <span class="comment">% Re-store the Application data:</span>
2381     <span class="comment">% ------------------------------</span>
2382     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2383     
2384 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2385     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2386 <span class="keyword">end</span>
2387 
2388 <span class="comment">% [EOF] WSE_Callback</span>
2389 
2390 
2391 <span class="comment">% --------------------------------------------------------------------</span>
2392 <a name="_sub65" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2393 <span class="comment">% Bathymetry Auxiliary Data</span>
2394 
2395 <span class="comment">% Get the Application data:</span>
2396 <span class="comment">% -------------------------</span>
2397 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2398 
2399 <span class="comment">% Modify the Application data:</span>
2400 <span class="comment">% ----------------------------</span>
2401 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2402 
2403 <span class="comment">% Re-store the Application data:</span>
2404 <span class="comment">% ------------------------------</span>
2405 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2406 
2407 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2408 
2409 
2410 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2411 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2412 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2413 
2414 <span class="comment">% --------------------------------------------------------------------</span>
2415 <a name="_sub66" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2416 
2417 <span class="comment">% Get the Application data:</span>
2418 <span class="comment">% -------------------------</span>
2419 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2420 
2421 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2422 <span class="comment">% ----------------------------------------------------------------</span>
2423 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2424 is_a_number = ~isnan(new_depth_range_min);
2425 is_positive = new_depth_range_min&gt;=0;
2426 
2427 <span class="comment">% Modify the Application data:</span>
2428 <span class="comment">% ----------------------------</span>
2429 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2430     guiparams.depth_range_min = new_depth_range_min;
2431     
2432     <span class="comment">% Re-store the Application data:</span>
2433     <span class="comment">% ------------------------------</span>
2434     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2435     
2436 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2437     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2438 <span class="keyword">end</span>
2439 
2440 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2441 
2442 
2443 <span class="comment">% --------------------------------------------------------------------</span>
2444 <a name="_sub67" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2445 
2446 <span class="comment">% Get the Application data:</span>
2447 <span class="comment">% -------------------------</span>
2448 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2449 
2450 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2451 <span class="comment">% ----------------------------------------------------------------</span>
2452 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2453 is_a_number = ~isnan(new_depth_range_max);
2454 is_positive = new_depth_range_max&gt;=0;
2455 
2456 <span class="comment">% Modify the Application data:</span>
2457 <span class="comment">% ----------------------------</span>
2458 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2459     guiparams.depth_range_max = new_depth_range_max;
2460     
2461     <span class="comment">% Re-store the Application data:</span>
2462     <span class="comment">% ------------------------------</span>
2463     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2464     
2465 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2466     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2467 <span class="keyword">end</span>
2468 
2469 <span class="comment">% [EOF] DepthMax_Callback</span>
2470 
2471 
2472 <span class="comment">% --------------------------------------------------------------------</span>
2473 <a name="_sub68" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2474 <span class="comment">% Set quiver scale (contour)</span>
2475 
2476 <span class="comment">% Get the Application data:</span>
2477 <span class="comment">% -------------------------</span>
2478 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2479 
2480 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2481 <span class="comment">% ----------------------------------------------------------------</span>
2482 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2483 is_a_number = ~isnan(new_vector_scale_plan_view);
2484 is_positive = new_vector_scale_plan_view&gt;=0;
2485 
2486 <span class="comment">% Modify the Application data:</span>
2487 <span class="comment">% ----------------------------</span>
2488 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2489     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2490     
2491     <span class="comment">% Re-store the Application data:</span>
2492     <span class="comment">% ------------------------------</span>
2493     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2494     
2495 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2496     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2497 <span class="keyword">end</span>
2498 
2499 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2500 
2501 
2502 <span class="comment">% --------------------------------------------------------------------</span>
2503 <a name="_sub69" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2504 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2505 
2506 <span class="comment">% Get the Application data:</span>
2507 <span class="comment">% -------------------------</span>
2508 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2509 
2510 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2511 <span class="comment">% ----------------------------------------------------------------</span>
2512 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2513 is_a_number = ~isnan(new_vector_spacing_plan_view);
2514 is_positive = new_vector_spacing_plan_view&gt;=0;
2515 
2516 <span class="comment">% Modify the Application data:</span>
2517 <span class="comment">% ----------------------------</span>
2518 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2519     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2520     
2521     <span class="comment">% Re-store the Application data:</span>
2522     <span class="comment">% ------------------------------</span>
2523     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2524     
2525 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2526     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2527 <span class="keyword">end</span>
2528 
2529 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2530 
2531 
2532 <span class="comment">% --------------------------------------------------------------------</span>
2533 <a name="_sub70" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2534 <span class="comment">% Plan View smoothing window size</span>
2535 
2536 <span class="comment">% Get the Application data:</span>
2537 <span class="comment">% -------------------------</span>
2538 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2539 
2540 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2541 <span class="comment">% ----------------------------------------------------------------</span>
2542 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2543 is_a_number = ~isnan(new_smoothing_window_size);
2544 is_positive = new_smoothing_window_size&gt;=0;
2545 
2546 <span class="comment">% Modify the Application data:</span>
2547 <span class="comment">% ----------------------------</span>
2548 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2549     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2550     
2551     <span class="comment">% Re-store the Application data:</span>
2552     <span class="comment">% ------------------------------</span>
2553     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2554     
2555 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2556     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2557 <span class="keyword">end</span>
2558 
2559 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
2560 
2561 
2562 <span class="comment">% --------------------------------------------------------------------</span>
2563 <a name="_sub71" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2564 
2565 <span class="comment">% Get the Application data:</span>
2566 <span class="comment">% -------------------------</span>
2567 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2568 
2569 <span class="comment">% Modify the Application data:</span>
2570 <span class="comment">% ----------------------------</span>
2571 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2572 
2573 <span class="comment">% Re-store the Application data:</span>
2574 <span class="comment">% ------------------------------</span>
2575 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2576 
2577 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
2578 
2579 
2580 <span class="comment">% --------------------------------------------------------------------</span>
2581 <a name="_sub72" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2582 
2583 <span class="comment">% Get the Application data:</span>
2584 <span class="comment">% -------------------------</span>
2585 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2586 
2587 <span class="comment">% Modify the Application data:</span>
2588 <span class="comment">% ----------------------------</span>
2589 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2590 
2591 <span class="comment">% Re-store the Application data:</span>
2592 <span class="comment">% ------------------------------</span>
2593 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2594 
2595 <span class="comment">% [EOF] AddBackground_Callback</span>
2596 
2597 
2598 <span class="comment">% --------------------------------------------------------------------</span>
2599 <a name="_sub73" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2600 <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2601 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2602 
2603 
2604 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2605 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2606 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2607 
2608 <span class="comment">% --------------------------------------------------------------------</span>
2609 <a name="_sub74" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2610 <span class="comment">% Set the horizontal grid node spacing</span>
2611 
2612 <span class="comment">% Get the Application data:</span>
2613 <span class="comment">% -------------------------</span>
2614 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2615 
2616 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2617 <span class="comment">% ----------------------------------------------------------------</span>
2618 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2619 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2620 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2621 
2622 <span class="comment">% Modify the Application data:</span>
2623 <span class="comment">% ----------------------------</span>
2624 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2625     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2626     
2627     <span class="comment">% Re-store the Application data:</span>
2628     <span class="comment">% ------------------------------</span>
2629     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2630     
2631 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2632     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2633 <span class="keyword">end</span>
2634 
2635 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2636 
2637 
2638 <span class="comment">% --------------------------------------------------------------------</span>
2639 <a name="_sub75" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2640 <span class="comment">% Set the cross section endpoints manually</span>
2641 
2642 <span class="comment">% Get the Application data:</span>
2643 <span class="comment">% -------------------------</span>
2644 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2645 
2646 <span class="comment">% Modify the Application data:</span>
2647 <span class="comment">% ----------------------------</span>
2648 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2649 
2650 <span class="comment">% Re-store the Application data:</span>
2651 <span class="comment">% ------------------------------</span>
2652 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2653 
2654 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2655 
2656 
2657 <span class="comment">% --------------------------------------------------------------------</span>
2658 <a name="_sub76" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2659 <a href="#_sub55" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2660 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2661 
2662 
2663 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2664 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2665 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2666 
2667 <span class="comment">% --------------------------------------------------------------------</span>
2668 <a name="_sub77" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2669 
2670 <span class="comment">% Get the Application data:</span>
2671 <span class="comment">% -------------------------</span>
2672 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2673 
2674 <span class="comment">% Modify the Application data:</span>
2675 <span class="comment">% ----------------------------</span>
2676 idx_variable = get(hObject,<span class="string">'Value'</span>);
2677 guiparams.idx_contour = idx_variable;
2678 guiparams.contour = guiparams.contours(idx_variable).variable;
2679 
2680 <span class="comment">% Re-store the Application data:</span>
2681 <span class="comment">% ------------------------------</span>
2682 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2683 
2684 <span class="comment">% [EOF] Contour_Callback</span>
2685 
2686 
2687 <span class="comment">% --------------------------------------------------------------------</span>
2688 <a name="_sub78" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2689 <span class="comment">% Set vertical exaggeration</span>
2690 
2691 <span class="comment">% Get the Application data:</span>
2692 <span class="comment">% -------------------------</span>
2693 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2694 
2695 <span class="comment">% Modify the Application data:</span>
2696 <span class="comment">% ----------------------------</span>
2697 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
2698 
2699 <span class="comment">% Re-store the Application data:</span>
2700 <span class="comment">% ------------------------------</span>
2701 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2702 
2703 <span class="comment">% Update the GUI:</span>
2704 <span class="comment">% ---------------</span>
2705 <span class="comment">% updateGUI(handles,guiparams)</span>
2706 
2707 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
2708 
2709 
2710 <span class="comment">% --------------------------------------------------------------------</span>
2711 <a name="_sub79" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
2712 
2713 <span class="comment">% Get the Application data:</span>
2714 <span class="comment">% -------------------------</span>
2715 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2716 
2717 <span class="comment">% Modify the Application data:</span>
2718 <span class="comment">% ----------------------------</span>
2719 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
2720 
2721 <span class="comment">% Re-store the Application data:</span>
2722 <span class="comment">% ------------------------------</span>
2723 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2724 
2725 <span class="comment">% Update the GUI:</span>
2726 <span class="comment">% ---------------</span>
2727 <span class="comment">% updateGUI(handles,guiparams)</span>
2728 
2729 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
2730 
2731 
2732 <span class="comment">% --------------------------------------------------------------------</span>
2733 <a name="_sub80" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2734 
2735 <span class="comment">% Get the Application data:</span>
2736 <span class="comment">% -------------------------</span>
2737 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2738 
2739 <span class="comment">% Modify the Application data:</span>
2740 <span class="comment">% ----------------------------</span>
2741 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2742 
2743 <span class="comment">% Re-store the Application data:</span>
2744 <span class="comment">% ------------------------------</span>
2745 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2746 
2747 <span class="comment">% Update the GUI:</span>
2748 <span class="comment">% ---------------</span>
2749 <span class="comment">% updateGUI(handles,guiparams)</span>
2750 
2751 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
2752 
2753 
2754 <span class="comment">% --------------------------------------------------------------------</span>
2755 <a name="_sub81" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2756 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
2757 
2758 <span class="comment">% Get the Application data:</span>
2759 <span class="comment">% -------------------------</span>
2760 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2761 
2762 <span class="comment">% Modify the Application data:</span>
2763 <span class="comment">% ----------------------------</span>
2764 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2765 
2766 <span class="comment">% Re-store the Application data:</span>
2767 <span class="comment">% ------------------------------</span>
2768 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2769 
2770 <span class="comment">% Update the GUI:</span>
2771 <span class="comment">% ---------------</span>
2772 <span class="comment">% updateGUI(handles,guiparams)</span>
2773 
2774 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
2775 
2776 
2777 <span class="comment">% --------------------------------------------------------------------</span>
2778 <a name="_sub82" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2779 <span class="comment">% Horizontal Smoothing</span>
2780 
2781 <span class="comment">% Get the Application data:</span>
2782 <span class="comment">% -------------------------</span>
2783 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2784 
2785 <span class="comment">% Modify the Application data:</span>
2786 <span class="comment">% ----------------------------</span>
2787 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
2788 
2789 <span class="comment">% Re-store the Application data:</span>
2790 <span class="comment">% ------------------------------</span>
2791 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2792 
2793 <span class="comment">% Update the GUI:</span>
2794 <span class="comment">% ---------------</span>
2795 <span class="comment">% updateGUI(handles,guiparams)</span>
2796 
2797 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
2798 
2799 
2800 <span class="comment">% --------------------------------------------------------------------</span>
2801 <a name="_sub83" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2802 <span class="comment">% Vertical Smoothing</span>
2803 
2804 <span class="comment">% Get the Application data:</span>
2805 <span class="comment">% -------------------------</span>
2806 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2807 
2808 <span class="comment">% Modify the Application data:</span>
2809 <span class="comment">% ----------------------------</span>
2810 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
2811 
2812 <span class="comment">% Re-store the Application data:</span>
2813 <span class="comment">% ------------------------------</span>
2814 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2815 
2816 <span class="comment">% Update the GUI:</span>
2817 <span class="comment">% ---------------</span>
2818 <span class="comment">% updateGUI(handles,guiparams)</span>
2819 
2820 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
2821 
2822 
2823 <span class="comment">% --------------------------------------------------------------------</span>
2824 <a name="_sub84" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
2825 
2826 <span class="comment">% Get the Application data:</span>
2827 <span class="comment">% -------------------------</span>
2828 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2829 
2830 <span class="comment">% Modify the Application data:</span>
2831 <span class="comment">% ----------------------------</span>
2832 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2833 
2834 <span class="comment">% Re-store the Application data:</span>
2835 <span class="comment">% ------------------------------</span>
2836 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2837 
2838 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
2839 
2840 
2841 <span class="comment">% --------------------------------------------------------------------</span>
2842 <a name="_sub85" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
2843 
2844 <span class="comment">% Get the Application data:</span>
2845 <span class="comment">% -------------------------</span>
2846 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2847 
2848 <span class="comment">% Modify the Application data:</span>
2849 <span class="comment">% ----------------------------</span>
2850 idx_variable = get(hObject,<span class="string">'Value'</span>);
2851 guiparams.idx_secondary_flow_vector_variable = idx_variable;
2852 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
2853 
2854 <span class="comment">% Re-store the Application data:</span>
2855 <span class="comment">% ------------------------------</span>
2856 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2857 
2858 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
2859 
2860 
2861 <span class="comment">% --------------------------------------------------------------------</span>
2862 <a name="_sub86" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
2863 
2864 <span class="comment">% Get the Application data:</span>
2865 <span class="comment">% -------------------------</span>
2866 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2867 
2868 <span class="comment">% Modify the Application data:</span>
2869 <span class="comment">% ----------------------------</span>
2870 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2871 
2872 <span class="comment">% Re-store the Application data:</span>
2873 <span class="comment">% ------------------------------</span>
2874 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2875 
2876 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
2877 
2878 
2879 <span class="comment">% --------------------------------------------------------------------</span>
2880 <a name="_sub87" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
2881 <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
2882 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
2883 
2884 
2885 <span class="comment">% --------------------------------------------------------------------</span>
2886 <a name="_sub88" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
2887 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
2888 <span class="comment">% [EOF] ClearLog_Callback</span>
2889 
2890 <span class="comment">% --------------------------------------------------------------------</span>
2891 <a name="_sub89" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
2892 
2893 <span class="comment">% Get the Application data:</span>
2894 <span class="comment">% -------------------------</span>
2895 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2896 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2897 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
2898 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
2899 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
2900 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
2901 
2902 [the_file,the_path] = <span class="keyword">...</span>
2903     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
2904     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
2905     fullfile(guiprefs.log_path,guiprefs.log_file));
2906 
2907 <span class="comment">% Save the log to a TXT file:</span>
2908 <span class="comment">% ---------------------------</span>
2909 <span class="keyword">if</span> ischar(the_file)
2910     guiparams.log_path = the_path;
2911     guiparams.log_file = the_file;
2912     <span class="comment">%guiparams.savefile = the_file;</span>
2913     
2914     <span class="comment">% Re-store the Application data:</span>
2915     <span class="comment">% ------------------------------</span>
2916     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2917     
2918     <span class="comment">% Update the preferences:</span>
2919     <span class="comment">% -----------------------</span>
2920     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2921     guiprefs.log_path = the_path;
2922     guiprefs.log_file = the_file;
2923     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2924     <a href="#_sub92" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
2925     
2926     [~,filename,extension] = fileparts(the_file);
2927     savefile = [the_path filename extension];
2928     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2929         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2930     
2931     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
2932     [nrows,~]= size(logfile);
2933     fid = fopen(savefile, <span class="string">'w'</span>);
2934     <span class="keyword">for</span> row=1:nrows
2935         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
2936     <span class="keyword">end</span>
2937     fclose(fid);
2938 <span class="keyword">end</span>
2939 <span class="comment">% [EOF] SaveLog_Callback</span>
2940 
2941 <span class="comment">%%%%%%%%%%%%%%%%</span>
2942 <span class="comment">% SUBFUNCTIONS %</span>
2943 <span class="comment">%%%%%%%%%%%%%%%%</span>
2944 
2945 <span class="comment">% --------------------------------------------------------------------</span>
2946 <a name="_sub90" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
2947 
2948 icons = <a href="#_sub106" class="code" title="subfunction icons = getIcons">getIcons</a>;
2949 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
2950 
2951 <span class="comment">% Load data</span>
2952 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
2953 <span class="comment">% icon = double(icon)/(2^16-1);</span>
2954 <span class="comment">% icon(icon==0) = NaN;</span>
2955 handles.toolbarLoadData = <span class="keyword">...</span>
2956     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2957     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
2958     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
2959 
2960 <span class="comment">% Save data</span>
2961 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
2962 <span class="comment">% icon = double(icon)/(2^16-1);</span>
2963 <span class="comment">% icon(icon==0) = NaN;</span>
2964 handles.toolbarSaveMatFile = <span class="keyword">...</span>
2965     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2966     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
2967     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
2968     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
2969 
2970 
2971 <span class="comment">% Save bathymetry</span>
2972 <span class="comment">%icon = ones(16,16,3);</span>
2973 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
2974     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2975     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
2976     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
2977 
2978 <span class="comment">% Save figures</span>
2979 <span class="comment">% icon = ones(16,16,3);</span>
2980 handles.toolbarSaveFigures = <span class="keyword">...</span>
2981     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2982     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
2983     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
2984 
2985 <span class="comment">% Save Excel File</span>
2986 <span class="comment">% icon = ones(16,16,3);</span>
2987 handles.toolbarSaveExcel = <span class="keyword">...</span>
2988     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2989     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
2990     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
2991 
2992 
2993 <span class="comment">% Plotting parameters</span>
2994 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
2995 <span class="comment">% icon = ind2rgb(icon,map);</span>
2996 handles.toolbarPlottingParameters = <span class="keyword">...</span>
2997     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
2998     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
2999     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3000     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3001 
3002 <span class="comment">% Processing parameters</span>
3003 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3004 <span class="comment">% icon = ind2rgb(icon,map);</span>
3005 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3006     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3007     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3008     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3009 
3010 <span class="comment">% Zoom In</span>
3011 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3012 <span class="comment">% icon = ind2rgb(icon,map);</span>
3013 <span class="comment">% handles.toolbarZoomIn = ...</span>
3014 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3015 <span class="comment">%     'CData',        icons(8).data, ...</span>
3016 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3017 <span class="comment">%     'Separator',     'on');</span>
3018 
3019 <span class="comment">% Zoom Out</span>
3020 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3021 <span class="comment">% icon = ind2rgb(icon,map);</span>
3022 <span class="comment">% handles.toolbarZoomOut = ...</span>
3023 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3024 <span class="comment">%     'CData',        icons(9).data, ...</span>
3025 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3026 
3027 <span class="comment">% Pan</span>
3028 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3029 <span class="comment">% icon = ind2rgb(icon,map);</span>
3030 <span class="comment">% handles.toolbarPan = ...</span>
3031 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3032 <span class="comment">%     'CData',        icons(10).data, ...</span>
3033 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3034 
3035 
3036 
3037 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3038 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3039 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3040 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3041 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub25" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3042 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub53" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3043 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub54" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3044 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3045 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3046 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3047 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3048 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3049 
3050 <span class="comment">% [EOF] buildtoolbar</span>
3051 
3052 
3053 <span class="comment">% --------------------------------------------------------------------</span>
3054 <a name="_sub91" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3055 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3056 <span class="comment">% already exist.</span>
3057 
3058 <span class="comment">% Preferences:</span>
3059 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3060 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3061 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3062 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3063 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3064 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3065 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3066 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3067 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3068 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3069 
3070 <span class="comment">% Originals</span>
3071 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3072 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3073 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3074 
3075 <span class="comment">% ASCII</span>
3076 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3077     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3078     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3079         guiprefs.ascii_path = ascii.path;
3080     <span class="keyword">else</span>
3081         guiprefs.ascii_path = pwd;
3082     <span class="keyword">end</span>
3083     does_exist = false(1,length(ascii.file));
3084     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3085         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3086     <span class="keyword">end</span>
3087     <span class="keyword">if</span> any(does_exist)
3088         guiprefs.ascii_file = ascii.file(does_exist);
3089     <span class="keyword">else</span>
3090         guiprefs.ascii_file = {<span class="string">''</span>};
3091     <span class="keyword">end</span>
3092 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3093     guiprefs.ascii_path = pwd;
3094     guiprefs.ascii_file = {<span class="string">''</span>};
3095     
3096     ascii.path = pwd;
3097     ascii.file = {<span class="string">''</span>};
3098     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3099 <span class="keyword">end</span>
3100 
3101 <span class="comment">% MAT</span>
3102 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3103     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3104     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3105         guiprefs.mat_path = mat.path;
3106     <span class="keyword">else</span>
3107         guiprefs.mat_path = pwd;
3108     <span class="keyword">end</span>
3109     
3110     <span class="keyword">if</span> iscell(mat.file)
3111         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3112             guiprefs.mat_file = mat.file;
3113         <span class="keyword">else</span>
3114             guiprefs.mat_file = <span class="string">''</span>;
3115         <span class="keyword">end</span>
3116     <span class="keyword">else</span>
3117         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3118             guiprefs.mat_file = mat.file;
3119         <span class="keyword">else</span>
3120             guiprefs.mat_file = <span class="string">''</span>;
3121         <span class="keyword">end</span>
3122     <span class="keyword">end</span>
3123 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3124     guiprefs.mat_path = pwd;
3125     guiprefs.mat_file = <span class="string">''</span>;
3126     
3127     mat.path = pwd;
3128     mat.file = <span class="string">''</span>;
3129     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3130 <span class="keyword">end</span>
3131 
3132 <span class="comment">% TECPLOT</span>
3133 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3134     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3135     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3136         guiprefs.tecplot_path = tecplot.path;
3137     <span class="keyword">else</span>
3138         guiprefs.tecplot_path = pwd;
3139     <span class="keyword">end</span>
3140     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3141         guiprefs.tecplot_file = tecplot.file;
3142     <span class="keyword">else</span>
3143         guiprefs.tecplot_file = <span class="string">''</span>;
3144     <span class="keyword">end</span>
3145 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3146     guiprefs.tecplot_path = pwd;
3147     guiprefs.tecplot_file = <span class="string">''</span>;
3148     
3149     tecplot.path = pwd;
3150     tecplot.file = <span class="string">''</span>;
3151     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3152 <span class="keyword">end</span>
3153 
3154 <span class="comment">% KMZ</span>
3155 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3156     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3157     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3158         guiprefs.kmz_path = kmz.path;
3159     <span class="keyword">else</span>
3160         guiprefs.kmz_path = pwd;
3161     <span class="keyword">end</span>
3162     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3163         guiprefs.kmz_file = kmz.file;
3164     <span class="keyword">else</span>
3165         guiprefs.kmz_file = <span class="string">''</span>;
3166     <span class="keyword">end</span>
3167 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3168     guiprefs.kmz_path = pwd;
3169     guiprefs.kmz_file = <span class="string">''</span>;
3170     
3171     kmz.path = pwd;
3172     kmz.file = <span class="string">''</span>;
3173     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3174 <span class="keyword">end</span>
3175 
3176 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3177 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3178     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3179     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3180         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3181     <span class="keyword">else</span>
3182         guiprefs.multibeambathymetry_path = pwd;
3183     <span class="keyword">end</span>
3184     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3185         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3186     <span class="keyword">else</span>
3187         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3188     <span class="keyword">end</span>
3189 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3190     guiprefs.multibeambathymetry_path = pwd;
3191     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3192     
3193     multibeambathymetry.path = pwd;
3194     multibeambathymetry.file = <span class="string">''</span>;
3195     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3196 <span class="keyword">end</span>
3197 
3198 <span class="comment">% Log</span>
3199 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3200     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3201     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3202         guiprefs.log_path = log.path;
3203     <span class="keyword">else</span>
3204         guiprefs.log_path = pwd;
3205     <span class="keyword">end</span>
3206     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3207         guiprefs.log_file = log.file;
3208     <span class="keyword">else</span>
3209         guiprefs.log_file = <span class="string">''</span>;
3210     <span class="keyword">end</span>
3211 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3212     guiprefs.log_path = pwd;
3213     guiprefs.log_file = <span class="string">''</span>;
3214     
3215     log.path = pwd;
3216     log.file = <span class="string">''</span>;
3217     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3218 <span class="keyword">end</span>
3219 
3220 <span class="comment">% iRic</span>
3221 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3222     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3223     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3224         guiprefs.iric_path = iric.path;
3225     <span class="keyword">else</span>
3226         guiprefs.iric_path = pwd;
3227     <span class="keyword">end</span>
3228     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3229         guiprefs.iric_file = iric.file;
3230     <span class="keyword">else</span>
3231         guiprefs.iric_file = <span class="string">''</span>;
3232     <span class="keyword">end</span>
3233 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3234     guiprefs.iric_path = pwd;
3235     guiprefs.iric_file = <span class="string">''</span>;
3236     
3237     iric.path = pwd;
3238     iric.file = <span class="string">''</span>;
3239     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3240 <span class="keyword">end</span>
3241 
3242 <span class="comment">% excel</span>
3243 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3244     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3245     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3246         guiprefs.excel_path = excel.path;
3247     <span class="keyword">else</span>
3248         guiprefs.excel_path = pwd;
3249     <span class="keyword">end</span>
3250     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3251         guiprefs.excel_file = excel.file;
3252     <span class="keyword">else</span>
3253         guiprefs.excel_file = <span class="string">''</span>;
3254     <span class="keyword">end</span>
3255 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3256     guiprefs.excel_path = pwd;
3257     guiprefs.excel_file = <span class="string">''</span>;
3258     
3259     excel.path = pwd;
3260     excel.file = <span class="string">''</span>;
3261     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3262 <span class="keyword">end</span>
3263 
3264 <span class="comment">% aerial</span>
3265 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3266     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3267     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3268         guiprefs.aerial_path = aerial.path;
3269     <span class="keyword">else</span>
3270         guiprefs.aerial_path = pwd;
3271     <span class="keyword">end</span>
3272     does_exist = false(1,length(aerial.file));
3273     <span class="keyword">if</span> iscell(aerial.file)
3274     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3275         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3276     <span class="keyword">end</span>
3277     <span class="keyword">else</span>
3278         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3279     <span class="keyword">end</span>
3280     <span class="keyword">if</span> any(does_exist)
3281         guiprefs.aerial_file = aerial.file;
3282     <span class="keyword">else</span>
3283         guiprefs.aerial_file = {<span class="string">''</span>};
3284     <span class="keyword">end</span>
3285 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3286     guiprefs.aerial_path = pwd;
3287     guiprefs.aerial_file = {<span class="string">''</span>};
3288     
3289     aerial.path = pwd;
3290     aerial.file = {<span class="string">''</span>};
3291     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3292 <span class="keyword">end</span>
3293 
3294 <span class="comment">% shoreline</span>
3295 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3296     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3297     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3298         guiprefs.shoreline_path = shoreline.path;
3299     <span class="keyword">else</span>
3300         guiprefs.shoreline_path = pwd;
3301     <span class="keyword">end</span>
3302     
3303     <span class="keyword">if</span> iscell(shoreline.file)
3304         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3305             guiprefs.shoreline_file = shoreline.file;
3306         <span class="keyword">else</span>
3307             guiprefs.shoreline_file = <span class="string">''</span>;
3308         <span class="keyword">end</span>
3309     <span class="keyword">else</span>
3310         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3311             guiprefs.shoreline_file = shoreline.file;
3312         <span class="keyword">else</span>
3313             guiprefs.shoreline_file = <span class="string">''</span>;
3314         <span class="keyword">end</span>
3315     <span class="keyword">end</span>
3316 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3317     guiprefs.shoreline_path = pwd;
3318     guiprefs.shoreline_file = <span class="string">''</span>;
3319     
3320     shoreline.path = pwd;
3321     shoreline.file = <span class="string">''</span>;
3322     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3323 <span class="keyword">end</span>
3324 <span class="comment">% guiprefs.presentation = true;</span>
3325 <span class="comment">% guiprefs.print        = false;</span>
3326 
3327 <span class="comment">% for k = 1:length(prefs)</span>
3328 <span class="comment">%     newpref = '';</span>
3329 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3330 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3331 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3332 <span class="comment">%             newpref = stored_newpref;</span>
3333 <span class="comment">%         else</span>
3334 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3335 <span class="comment">%         end</span>
3336 <span class="comment">%     end</span>
3337 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3338 <span class="comment">% end</span>
3339 
3340 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3341 
3342 <span class="comment">% [EOF] load_prefs</span>
3343 
3344 
3345 <span class="comment">% --------------------------------------------------------------------</span>
3346 <a name="_sub92" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3347 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3348 <span class="comment">% preferences data.</span>
3349 
3350 <span class="comment">% Preferences:</span>
3351 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3352 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3353 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3354 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3355 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3356 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3357 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3358 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3359 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3360 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3361 
3362 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3363 
3364 <span class="keyword">switch</span> pref
3365     <span class="keyword">case</span> <span class="string">'ascii'</span>
3366         ascii.path = guiprefs.ascii_path;
3367         ascii.file = guiprefs.ascii_file;
3368         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3369     <span class="keyword">case</span> <span class="string">'mat'</span>
3370         mat.path = guiprefs.mat_path;
3371         mat.file = guiprefs.mat_file;
3372         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3373     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3374         tecplot.path = guiprefs.tecplot_path;
3375         tecplot.file = guiprefs.tecplot_file;
3376         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3377     <span class="keyword">case</span> <span class="string">'kmz'</span>
3378         kmz.path = guiprefs.kmz_path;
3379         kmz.file = guiprefs.kmz_file;
3380         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3381     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3382         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3383         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3384         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3385     <span class="keyword">case</span> <span class="string">'log'</span>
3386         log.path = guiprefs.log_path;
3387         log.file = guiprefs.log_file;
3388         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3389     <span class="keyword">case</span> <span class="string">'iric'</span>
3390         iric.path = guiprefs.iric_path;
3391         iric.file = guiprefs.iric_file;
3392         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3393     <span class="keyword">case</span> <span class="string">'excel'</span>
3394         excel.path = guiprefs.excel_path;
3395         excel.file = guiprefs.excel_file;
3396         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3397     <span class="keyword">case</span> <span class="string">'aerial'</span>
3398         aerial.path = guiprefs.aerial_path;
3399         aerial.file = guiprefs.aerial_file;
3400         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3401     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3402         shoreline.path = guiprefs.shoreline_path;
3403         shoreline.file = guiprefs.shoreline_file;
3404         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3405     <span class="keyword">otherwise</span>
3406 <span class="keyword">end</span>
3407 
3408 <span class="comment">% if ismember(pref,prefs)</span>
3409 <span class="comment">%     setpref('VMT',pref,value)</span>
3410 <span class="comment">%</span>
3411 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3412 <span class="comment">%     guiprefs.(pref) = value;</span>
3413 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3414 <span class="comment">% end</span>
3415 
3416 <span class="comment">% [EOF] store_prefs</span>
3417 
3418 
3419 <span class="comment">% --------------------------------------------------------------------</span>
3420 <a name="_sub93" href="#_subfunctions" class="code">function initGUI(handles)</a>
3421 <span class="comment">% Initialize the UI controls in the GUI.</span>
3422 
3423 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3424 
3425 <span class="comment">% Set the name and version</span>
3426 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3427     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3428 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3429 
3430 <span class="comment">% Set the PLOT 1 axis labels</span>
3431 axes(handles.Plot1Shiptracks);
3432 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3433 xlabel(<span class="string">'UTM Easting (m)'</span>)
3434 ylabel(<span class="string">'UTM Northing (m)'</span>)
3435 box on
3436 grid on
3437 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3438 
3439 <span class="comment">%%%%%%%%%%%%</span>
3440 <span class="comment">% MENU BAR %</span>
3441 <span class="comment">%%%%%%%%%%%%</span>
3442 <span class="keyword">if</span> guiparams.english_units
3443     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3444     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3445 <span class="keyword">else</span>
3446     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3447     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3448 <span class="keyword">end</span>
3449 
3450 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3451     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3452     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3453 <span class="keyword">else</span>
3454     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3455     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3456 <span class="keyword">end</span>
3457 
3458 
3459 <span class="keyword">if</span> guiparams.print
3460     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3461     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3462     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3463     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3464 <span class="keyword">elseif</span> guiparams.presentation
3465     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3466     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3467     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3468     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3469 <span class="keyword">else</span>
3470 <span class="keyword">end</span>
3471 
3472 <span class="keyword">switch</span> guiparams.renderer
3473     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
3474         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3475         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3476         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3477     <span class="keyword">case</span> <span class="string">'painters'</span>
3478         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3479         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3480         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3481     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
3482         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3483         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3484         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3485 <span class="keyword">end</span>
3486 
3487 
3488 <span class="comment">%%%%%%%%%%%%%%%</span>
3489 <span class="comment">% DATA EXPORT %</span>
3490 <span class="comment">%%%%%%%%%%%%%%%</span>
3491 <span class="comment">% BathymetryPanel</span>
3492 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3493 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3494 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3495 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3496 
3497 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3498 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3499 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3500 <span class="comment">% PlanViewPanel</span>
3501 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3502 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3503 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3504 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3505 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3506 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3507 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3508 
3509 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3510 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3511 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3512 <span class="comment">% ShiptracksPanel</span>
3513 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3514 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3515 
3516 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3517 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3518 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3519 <span class="comment">% CrossSectionsPanel</span>
3520 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3521     <span class="string">'Value'</span>, guiparams.idx_contour)
3522 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3523 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3524 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3525 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3526 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3527 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3528 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3529 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3530     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3531 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3532 
3533 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3534 
3535 <span class="comment">% [EOF] initGUI</span>
3536 
3537 
3538 <span class="comment">% --------------------------------------------------------------------</span>
3539 <a name="_sub94" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3540 
3541 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3542 
3543 <span class="keyword">switch</span> enable_state
3544     <span class="keyword">case</span> <span class="string">'init'</span>
3545         set([handles.menuFile
3546             handles.menuOpen
3547             handles.menuOpenASCII
3548             handles.menuOpenMAT
3549             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3550         
3551         set([handles.toolbarLoadData
3552             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3553         set([handles.toolbarSaveMatFile
3554             handles.toolbarSaveBathymetry
3555             handles.toolbarSaveFigures
3556             handles.toolbarSaveExcel
3557             handles.toolbarPlottingParameters
3558             handles.toolbarProcessingParameters
3559             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3560         
3561         set([handles.DepthRangeMin
3562             handles.DepthRangeMax
3563             handles.VectorScalePlanView
3564             handles.VectorSpacingPlanview
3565             handles.SmoothingWindowSize
3566             handles.DisplayShoreline
3567             handles.AddBackground
3568             handles.PlotPlanView
3569             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3570         
3571         set([handles.HorizontalGridNodeSpacing
3572             handles.PlotShiptracks
3573             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3574         
3575         set([handles.Contour
3576             handles.VerticalExaggeration
3577             handles.VectorScaleCrossSection
3578             handles.HorizontalVectorSpacing
3579             handles.VerticalVectorSpacing
3580             handles.HorizontalSmoothingWindow
3581             handles.VerticalSmoothingWindow
3582             handles.PlotSecondaryFlowVectors
3583             handles.SecondaryFlowVectorVariable
3584             handles.IncludeVerticalVelocity
3585             handles.PlotCrossSection
3586             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3587         
3588     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3589         set([handles.menuFile
3590             handles.menuOpen
3591             handles.menuOpenASCII
3592             handles.menuOpenMAT
3593             handles.menuSaveMAT
3594             handles.menuSaveTecplot
3595             handles.menuSaveKMZFile
3596             handles.menuParameters
3597             handles.menuPlottingParameters
3598             handles.menuMetric
3599             handles.menuEnglish
3600             handles.menuBathymetryExportSettings
3601             handles.menuExportMultibeamBathymetry
3602             handles.menuKMZVerticalOffset
3603             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3604         
3605         set([handles.toolbarLoadData
3606             handles.toolbarSaveMatFile
3607             handles.toolbarSaveBathymetry
3608             handles.toolbarSaveExcel
3609             handles.toolbarSaveFigures
3610             handles.toolbarPlottingParameters
3611             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3612         set([handles.toolbarProcessingParameters
3613             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3614         
3615            
3616         set([handles.DepthRangeMin
3617             handles.DepthRangeMax
3618             handles.VectorScalePlanView
3619             handles.VectorSpacingPlanview
3620             handles.SmoothingWindowSize
3621             handles.DisplayShoreline
3622             handles.PlotPlanView
3623             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3624         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3625             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3626         <span class="keyword">else</span>
3627             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3628         <span class="keyword">end</span>
3629         
3630         set([handles.HorizontalGridNodeSpacing
3631             handles.PlotShiptracks
3632             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3633         
3634         set([handles.Contour
3635             handles.VerticalExaggeration
3636             handles.VectorScaleCrossSection
3637             handles.HorizontalVectorSpacing
3638             handles.VerticalVectorSpacing
3639             handles.HorizontalSmoothingWindow
3640             handles.VerticalSmoothingWindow
3641             handles.PlotSecondaryFlowVectors
3642             handles.SecondaryFlowVectorVariable
3643             handles.IncludeVerticalVelocity
3644             handles.PlotCrossSection
3645             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3646     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
3647         set([handles.menuFile
3648             handles.menuOpen
3649             handles.menuOpenASCII
3650             handles.menuOpenMAT
3651             handles.menuParameters
3652             handles.menuPlottingParameters
3653             handles.menuMetric
3654             handles.menuEnglish
3655             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3656         set([handles.menuSaveMAT
3657             handles.menuBathymetryExportSettings
3658             handles.menuExportMultibeamBathymetry
3659             handles.menuKMZVerticalOffset
3660             handles.menuSaveKMZFile
3661             handles.menuSaveTecplot
3662             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3663         
3664         set([handles.toolbarLoadData
3665             handles.toolbarSaveFigures
3666             handles.toolbarPlottingParameters
3667             handles.toolbarSaveExcel
3668             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3669         set([handles.toolbarProcessingParameters
3670             handles.toolbarSaveMatFile
3671             handles.toolbarSaveBathymetry
3672             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3673         
3674         set([handles.DepthRangeMin
3675             handles.DepthRangeMax
3676             handles.VectorScalePlanView
3677             handles.VectorSpacingPlanview
3678             handles.SmoothingWindowSize
3679             handles.DisplayShoreline
3680             handles.PlotPlanView
3681             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3682         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3683             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3684         <span class="keyword">else</span>
3685             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3686         <span class="keyword">end</span>
3687         
3688         set([handles.HorizontalGridNodeSpacing
3689             handles.PlotShiptracks
3690             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3691         
3692         set([handles.Contour
3693             handles.VerticalExaggeration
3694             handles.VectorScaleCrossSection
3695             handles.HorizontalVectorSpacing
3696             handles.VerticalVectorSpacing
3697             handles.HorizontalSmoothingWindow
3698             handles.VerticalSmoothingWindow
3699             handles.PlotSecondaryFlowVectors
3700             handles.SecondaryFlowVectorVariable
3701             handles.IncludeVerticalVelocity
3702             handles.PlotCrossSection
3703             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3704     <span class="keyword">otherwise</span>
3705 <span class="keyword">end</span>
3706 
3707 <span class="comment">% [EOF] set_enable</span>
3708 
3709 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
3710 
3711 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
3712 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
3713 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
3714 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3715 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3716 
3717 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
3718 
3719 
3720 <span class="comment">% --------------------------------------------------------------------</span>
3721 <a name="_sub95" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
3722     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
3723 
3724 w = 500;
3725 h = 110;
3726 dx = 10;
3727 dy = 35;
3728 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3729 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3730     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3731     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3732     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3733     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3734     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3735     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3736     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3737     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3738     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3739     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3740 dialog_params.english_units               = english_units;
3741 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
3742 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
3743 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
3744 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3745 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
3746 
3747 <span class="comment">% Build the graphics:</span>
3748 <span class="comment">% -------------------</span>
3749 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3750     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
3751     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3752     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
3753 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3754     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
3755     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
3756     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3757     <span class="string">'Position'</span>,[15 35 100 22]);
3758 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3759     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
3760     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
3761     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3762     <span class="string">'Position'</span>,[15 10 100 22]);
3763 
3764 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3765     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
3766     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3767     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
3768 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3769     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
3770     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
3771     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3772     <span class="string">'Position'</span>,[15 35 100 22]);
3773 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3774     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
3775     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
3776     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3777     <span class="string">'Position'</span>,[15 10 100 22]);
3778 
3779 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3780     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
3781     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3782     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
3783 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3784     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
3785     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
3786     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3787     <span class="string">'Position'</span>,[15 35 100 22]);
3788 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
3789     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
3790     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
3791     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3792     <span class="string">'Position'</span>,[15 10 100 22]);
3793 
3794 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3795     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3796     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
3797     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3798     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
3799 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
3800     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
3801     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
3802     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
3803     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
3804 
3805 <span class="comment">% Update the UI controls:</span>
3806 <span class="comment">% -----------------------</span>
3807 <span class="keyword">if</span> dialog_params.english_units
3808     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
3809     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
3810 <span class="keyword">else</span>
3811     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
3812     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
3813 <span class="keyword">end</span>
3814 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
3815     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
3816     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
3817 <span class="keyword">else</span>
3818     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
3819     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
3820 <span class="keyword">end</span>
3821 <span class="keyword">if</span> dialog_params.presentation
3822     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
3823     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
3824 <span class="keyword">else</span>
3825     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
3826     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
3827 <span class="keyword">end</span>
3828 
3829 <span class="comment">% Set the callbacks:</span>
3830 <span class="comment">% ------------------</span>
3831 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub101" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
3832 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub96" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
3833 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub96" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
3834 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
3835 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
3836 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
3837 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
3838 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
3839 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
3840 
3841 <span class="comment">% Position the dialog and make it visible:</span>
3842 <span class="comment">% ----------------------------------------</span>
3843 fpos = get(hf,<span class="string">'Position'</span>);
3844 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
3845 movegui(handles.Figure,dpos)
3846 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
3847 
3848 <span class="comment">% Hold the dialog open:</span>
3849 <span class="comment">% ---------------------</span>
3850 waitfor(handles.OK)
3851 
3852 <span class="comment">% Return the outputs and close the dialog:</span>
3853 <span class="comment">% ----------------------------------------</span>
3854 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3855 english_units = dialog_params.english_units;
3856 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
3857 plot_presentation_style =  dialog_params.presentation;
3858 plot_print_style =  dialog_params.print;
3859 
3860 delete(handles.Figure)
3861 
3862 <span class="comment">% [EOF] plotParametersDialog</span>
3863 
3864 
3865 <span class="comment">% --------------------------------------------------------------------</span>
3866 <a name="_sub96" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
3867 
3868 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3869 <span class="keyword">switch</span> the_units
3870     <span class="keyword">case</span> <span class="string">'metric'</span>
3871         dialog_params.english_units = false;
3872         
3873         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
3874         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
3875     <span class="keyword">case</span> <span class="string">'english'</span>
3876         dialog_params.english_units = true;
3877         
3878         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
3879         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
3880     <span class="keyword">otherwise</span>
3881 <span class="keyword">end</span>
3882 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3883 
3884 <span class="comment">% [EOF] dialogUnits</span>
3885 
3886 <span class="comment">% --------------------------------------------------------------------</span>
3887 <a name="_sub97" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
3888 
3889 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3890 <span class="keyword">switch</span> the_endpoints
3891     <span class="keyword">case</span> <span class="string">'auto'</span>
3892         dialog_params.set_cross_section_endpoints = false;
3893         
3894         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
3895         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
3896     <span class="keyword">case</span> <span class="string">'manual'</span>
3897         dialog_params.set_cross_section_endpoints = true;
3898         
3899         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
3900         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
3901     <span class="keyword">otherwise</span>
3902 <span class="keyword">end</span>
3903 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3904 
3905 <span class="comment">% [EOF] dialogEnpoints</span>
3906 
3907 <a name="_sub98" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
3908 
3909 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
3910 <span class="keyword">switch</span> the_style
3911     <span class="keyword">case</span> <span class="string">'presentation'</span>
3912         dialog_params.presentation  = true;
3913         dialog_params.print         = false;
3914         
3915         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
3916         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
3917     <span class="keyword">case</span> <span class="string">'print'</span>
3918         dialog_params.presentation  = false;
3919         dialog_params.print         = true;
3920         
3921         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
3922         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
3923     <span class="keyword">otherwise</span>
3924 <span class="keyword">end</span>
3925 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3926 
3927 <span class="comment">% [EOF] dialogEnpoints</span>
3928 
3929 <span class="comment">% --------------------------------------------------------------------</span>
3930 <a name="_sub99" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
3931 
3932 delete(h_OK)
3933 
3934 <span class="comment">% [EOF] dialogOK</span>
3935 
3936 <span class="comment">% --------------------------------------------------------------------</span>
3937 <a name="_sub100" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
3938 <span class="comment">% Return the original inputs</span>
3939 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
3940 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3941 delete(handles.OK)
3942 
3943 <span class="comment">% [EOF] dialogCancel</span>
3944 
3945 <span class="comment">% --------------------------------------------------------------------</span>
3946 <a name="_sub101" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
3947 
3948 delete(h_OK)
3949 
3950 <span class="comment">% [EOF] dialogCloseReq</span>
3951 
3952 <a name="_sub102" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
3953 w = 230;
3954 h = 200;
3955 dx = 10;
3956 dy = 35;
3957 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3958 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
3959     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3960     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3961     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3962     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3963     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3964     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3965     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3966     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3967     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3968     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3969 dialog_params.beam_angle             = beam_angle;
3970 dialog_params.magnetic_variation     = magnetic_variation;
3971 dialog_params.wse                    = wse;
3972 dialog_params.output_auxiliary_data = output_auxiliary_data;
3973 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
3974 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
3975 
3976 <span class="comment">% Build the graphics:</span>
3977 <span class="comment">% -------------------</span>
3978 ph = 150;
3979 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
3980     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
3981     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3982     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
3983 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
3984     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3985     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
3986     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
3987     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
3988     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3989     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
3990 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
3991     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3992     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
3993     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
3994     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
3995     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3996     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
3997 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
3998     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
3999     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4000     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4001     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4002     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4003     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4004 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4005     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4006     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4007     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4008     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4009     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4010     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4011 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4012     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4013     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4014     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4015     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4016     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4017     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4018 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4019     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4020     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4021     <span class="string">'String'</span>,wse,<span class="keyword">...</span>
4022     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4023     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4024     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4025 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4026     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4027     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4028     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4029     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4030 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4031     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4032     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4033     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4034     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4035 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4036     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4037     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4038     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4039     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4040 
4041 <span class="comment">% Update the UI controls:</span>
4042 <span class="comment">% -----------------------</span>
4043 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4044 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4045 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4046 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4047 
4048 <span class="comment">% Set the callbacks:</span>
4049 <span class="comment">% ------------------</span>
4050 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub101" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4051 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4052 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4053 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4054 set(handles.OutputauxiliaryData,        <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4055 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4056 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4057 
4058 <span class="comment">% Position the dialog and make it visible:</span>
4059 <span class="comment">% ----------------------------------------</span>
4060 fpos = get(hf,<span class="string">'Position'</span>);
4061 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4062 movegui(handles.Figure,dpos)
4063 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4064 
4065 <span class="comment">% Hold the dialog open:</span>
4066 <span class="comment">% ---------------------</span>
4067 waitfor(handles.OK)
4068 
4069 <span class="comment">% Return the outputs and close the dialog:</span>
4070 <span class="comment">% ----------------------------------------</span>
4071 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4072 beam_angle              = dialog_params.beam_angle;
4073 magnetic_variation      = dialog_params.magnetic_variation;
4074 wse                     = dialog_params.wse;
4075 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
4076 
4077 delete(handles.Figure)
4078 
4079 <span class="comment">% [EOF] exportSettingsDialog</span>
4080 
4081 <span class="comment">% --------------------------------------------------------------------</span>
4082 <a name="_sub103" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4083 
4084 <span class="comment">% Grab the current data</span>
4085 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4086 
4087 <span class="comment">% Set it according to the dialog box values</span>
4088 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4089 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4090 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4091 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
4092 
4093 <span class="comment">% Re-store the application data</span>
4094 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4095 
4096 <span class="comment">% [EOF] dialogExportSettings</span>
4097 
4098 <a name="_sub104" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4099 
4100 w = 230;
4101 h = 200;
4102 dx = 10;
4103 dy = 35;
4104 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4105 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4106     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4107     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4108     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4109     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4110     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4111     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4112     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4113     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4114     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4115     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4116 dialog_params.figure_names               = figure_names;
4117 dialog_params.selected_figures           = <span class="string">''</span>;
4118 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4119 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4120 
4121 <span class="comment">% Build the graphics:</span>
4122 <span class="comment">% -------------------</span>
4123 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4124     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4125     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4126     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4127 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4128     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4129     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4130     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4131     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4132     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4133     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4134     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4135 
4136 
4137 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4138     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4139     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4140     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4141     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4142 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4143     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4144     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4145     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4146     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4147 
4148 <span class="comment">% Update the UI controls:</span>
4149 <span class="comment">% -----------------------</span>
4150 
4151 
4152 <span class="comment">% Set the callbacks:</span>
4153 <span class="comment">% ------------------</span>
4154 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub101" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4155 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub105" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4156 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4157 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4158 
4159 <span class="comment">% Position the dialog and make it visible:</span>
4160 <span class="comment">% ----------------------------------------</span>
4161 fpos = get(hf,<span class="string">'Position'</span>);
4162 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4163 movegui(handles.Figure,dpos)
4164 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4165 
4166 <span class="comment">% Hold the dialog open:</span>
4167 <span class="comment">% ---------------------</span>
4168 waitfor(handles.OK)
4169 
4170 <span class="comment">% Return the outputs and close the dialog:</span>
4171 <span class="comment">% ----------------------------------------</span>
4172 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4173 selected_figures = dialog_params.selected_figures;
4174 
4175 delete(handles.Figure)
4176 
4177 <span class="comment">% [EOF] openFiguresDialog</span>
4178 
4179 <span class="comment">% --------------------------------------------------------------------</span>
4180 <a name="_sub105" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4181 
4182 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4183 
4184 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4185 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4186 selected     = fig_names(idx_selected);
4187 dialog_params.selected_figures = selected;
4188 
4189 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4190 
4191 
4192 
4193 <span class="comment">% --------------------------------------------------------------------</span>
4194 <a name="_sub106" href="#_subfunctions" class="code">function icons = getIcons</a>
4195 
4196 <span class="comment">% Load data</span>
4197 idx = 1;
4198 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4199     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4200     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4201     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4202     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4203     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4204     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4205     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4206     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4207     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4208     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4209     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4210     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4211     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4212     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4213     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4214     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4215 
4216 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4217     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4218     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4219     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4220     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4221     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4222     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4223     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4224     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4225     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4226     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4227     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4228     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4229     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4230     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4231     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4232     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4233 
4234 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4235     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4236     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4237     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4238     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4239     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4240     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4241     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4242     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4243     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4244     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4245     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4246     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4247     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4248     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4249     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4250     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4251 
4252 <span class="comment">% Save data</span>
4253 idx = idx+1;
4254 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4255     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4256     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4257     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4258     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4259     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4260     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4261     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4262     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4263     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4264     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4265     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4266     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4267     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4268     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4269     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4270     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4271 
4272 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4273     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4274     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4275     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4276     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4277     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4278     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4279     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4280     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4281     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4282     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4283     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4284     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4285     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4286     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4287     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4288     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4289 
4290 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4291     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4292     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4293     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4294     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4295     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4296     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4297     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4298     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4299     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4300     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4301     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4302     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4303     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4304     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4305     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4306     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4307 
4308 <span class="comment">% Plotting parameters</span>
4309 idx = idx+1;
4310 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4311     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4312     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4313     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4314     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4315     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4316     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4317     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4318     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4319     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4320     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4321     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4322     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4323     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4324     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4325     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4326     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4327 
4328 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4329     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4330     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4331     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4332     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4333     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4334     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4335     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4336     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4337     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4338     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4339     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4340     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4341     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4342     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4343     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4344     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4345 
4346 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4347     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4348     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4349     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4350     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4351     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4352     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4353     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4354     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4355     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4356     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4357     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4358     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4359     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4360     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4361     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4362     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4363 
4364 <span class="comment">% Processing parameters</span>
4365 idx = idx+1;
4366 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4367     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4368     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4369     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4370     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4371     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4372     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4373     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4374     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4375     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4376     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4377     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4378     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4379     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4380     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4381     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4382     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4383 
4384 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4385     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4386     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4387     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4388     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4389     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4390     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4391     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4392     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4393     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4394     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4395     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4396     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4397     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4398     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4399     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4400     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4401 
4402 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4403     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4404     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4405     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4406     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4407     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4408     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4409     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4410     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4411     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4412     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4413     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4414     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4415     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4416     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4417     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4418     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4419 
4420 <span class="comment">% Export bathymetry dialog</span>
4421 idx = idx+1;
4422 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4423     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4424     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4425     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4426     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4427     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4428     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4429     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4430     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4431     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4432     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4433     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4434     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4435     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4436     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4437     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4438     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4439     ]/255;
4440 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4441     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4442     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4443     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4444     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4445     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4446     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4447     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4448     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4449     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4450     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4451     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4452     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4453     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4454     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4455     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4456     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4457     ]/255;
4458 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4459     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4460     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4461     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4462     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4463     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4464     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4465     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4466     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4467     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4468     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4469     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4470     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4471     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4472     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4473     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4474     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4475     ]/255;
4476 
4477 <span class="comment">% Export Figures Dialog</span>
4478 idx = idx + 1;
4479 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4480     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4481     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4482     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4483     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4484     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4485     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4486     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4487     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4488     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4489     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4490     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4491     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4492     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4493     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4494     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4495 
4496 
4497 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4498     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4499     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4500     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4501     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4502     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4503     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4504     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4505     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4506     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4507     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4508     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4509     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4510     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4511     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4512     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4513 
4514 
4515 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4516     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4517     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4518     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4519     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4520     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4521     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4522     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4523     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4524     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4525     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4526     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4527     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4528     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4529     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4530     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4531 
4532 <span class="comment">% Export Excel File</span>
4533 idx = idx + 1;
4534 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4535     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4536    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4537    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4538    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4539    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4540    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4541    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4542    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4543    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4544    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4545    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4546    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4547    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4548    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4549    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4550     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4551 
4552 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4553     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4554    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4555    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4556    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4557    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4558    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4559    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4560    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4561    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4562    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4563    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4564    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4565    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4566    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4567    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4568     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4569 
4570 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4571     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4572    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4573    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4574    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4575    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4576    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4577    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4578    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4579    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4580    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4581    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4582    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4583    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4584    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4585    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4586     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4587 
4588 <span class="comment">% Zoom In</span>
4589 idx = idx + 1;
4590 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4591     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4592 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4593     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4594 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4595     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4596 
4597 <span class="comment">% Zoom Out</span>
4598 idx = idx + 1;
4599 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4600     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4601 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4602     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4603 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4604     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4605 
4606 <span class="comment">% Pan</span>
4607 idx = idx + 1;
4608 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4609     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4610 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4611     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4612 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4613     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4614 <span class="comment">% [EOF] getIcons</span>
4615 
4616 <a name="_sub107" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4617 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4618 
4619 <span class="comment">% Organized by GUI panels</span>
4620 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4621 <span class="comment">% SHIPTRACKS PLOT %</span>
4622 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4623 guiparams.horizontal_grid_node_spacing       = 1.0;
4624 
4625 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4626 <span class="comment">% CROSS SECTION PLOT %</span>
4627 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4628 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4629 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4630 guiparams.idx_contour                        = 1;
4631 guiparams.vertical_exaggeration              = 10;
4632 guiparams.vector_scale_cross_section         = 0.2;
4633 guiparams.horizontal_vector_spacing          = 1;
4634 guiparams.vertical_vector_spacing            = 1;
4635 guiparams.horizontal_smoothing_window        = 1;
4636 guiparams.vertical_smoothing_window          = 1;
4637 guiparams.plot_secondary_flow_vectors        = true;
4638 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
4639 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
4640 guiparams.idx_secondary_flow_vector_variable = 1;
4641 guiparams.include_vertical_velocity          = true;
4642 
4643 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4644 <span class="comment">% PLAN VIEW PLOT %</span>
4645 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4646 guiparams.depth_range_min                    = 0;
4647 guiparams.depth_range_max                    = inf;
4648 guiparams.vector_scale_plan_view             = 1;
4649 guiparams.vector_spacing_plan_view           = 1;
4650 guiparams.smoothing_window_size              = 1;
4651 guiparams.display_shoreline                  = false;
4652 guiparams.add_background                     = false;
4653 
4654 <span class="comment">%%%%%%%%%%%%%%%</span>
4655 <span class="comment">% DATA EXPORT %</span>
4656 <span class="comment">%%%%%%%%%%%%%%%</span>
4657 guiparams.beam_angle                         = 20.0;
4658 guiparams.magnetic_variation                 = 0.0;
4659 guiparams.wse                                = 0.0;
4660 guiparams.output_auxiliary_data              = false;
4661 
4662 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4663 <span class="comment">% Contour variables %</span>
4664 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4665 idx = 1;
4666 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
4667 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
4668 idx = idx + 1;
4669 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
4670 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
4671 idx = idx + 1;
4672 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
4673 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
4674 idx = idx + 1;
4675 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
4676 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
4677 idx = idx + 1;
4678 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
4679 guiparams.contours(idx).variable = <span class="string">'east'</span>;
4680 idx = idx + 1;
4681 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
4682 guiparams.contours(idx).variable = <span class="string">'north'</span>;
4683 idx = idx + 1;
4684 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
4685 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
4686 idx = idx + 1;
4687 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
4688 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
4689 idx = idx + 1;
4690 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
4691 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
4692 idx = idx + 1;
4693 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
4694 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
4695 idx = idx + 1;
4696 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
4697 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
4698 idx = idx + 1;
4699 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
4700 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
4701 idx = idx + 1;
4702 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
4703 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
4704 idx = idx + 1;
4705 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
4706 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
4707 idx = idx + 1;
4708 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
4709 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
4710 idx = idx + 1;
4711 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
4712 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
4713 
4714 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
4715 
4716 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4717 <span class="comment">% Secondary Flow Vector Variables %</span>
4718 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4719 idx = 1;
4720 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
4721 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
4722 idx = idx + 1;
4723 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
4724 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
4725 idx = idx + 1;
4726 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
4727 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
4728 idx = idx + 1;
4729 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
4730 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
4731 idx = idx + 1;
4732 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
4733 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
4734 
4735 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
4736     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
4737 
4738 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4739 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
4740 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4741 <span class="comment">% Menu bar options</span>
4742 guiparams.presentation                       = true;
4743 guiparams.print                              = false;
4744 guiparams.set_cross_section_endpoints        = false;
4745 guiparams.unit_discharge_correction          = false;
4746 guiparams.english_units                      = false;
4747 guiparams.vertical_offset                    = 0;
4748 guiparams.renderer                           = <span class="string">'OpenGL'</span>;
4749 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
4750 <span class="comment">% guiparams.plot_planview                      = false;</span>
4751 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
4752 
4753 <span class="comment">% File location defaults</span>
4754 guiparams.ascii_path                        = pwd;
4755 guiparams.ascii_file                        = <span class="string">''</span>;
4756 guiparams.mat_path                          = pwd;
4757 guiparams.mat_file                          = <span class="string">''</span>;
4758 guiparams.tecplot_path                      = pwd;
4759 guiparams.tecplot_file                      = <span class="string">''</span>;
4760 guiparams.kmz_path                          = pwd;
4761 guiparams.kmz_file                          = <span class="string">''</span>;
4762 guiparams.multibeambathymetry_path          = pwd;
4763 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
4764 guiparams.log_path                          = pwd;
4765 guiparams.log_file                          = <span class="string">''</span>;
4766 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
4767 <span class="comment">% application</span>
4768 <span class="keyword">if</span> isdeployed 
4769     guiparams.has_mapping_toolbox           = true;
4770 <span class="keyword">else</span>
4771     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
4772         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
4773 <span class="keyword">end</span>
4774 
4775 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4776 <span class="comment">% IN MEMORY DATA STORAGE %</span>
4777 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4778 guiparams.z                      = [];
4779 guiparams.A                      = [];
4780 guiparams.V                      = [];
4781 guiparams.Map                    = [];
4782 guiparams.savefile               = [];
4783 guiparams.iric_anv_planview_data = [];
4784 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
4785 <span class="comment">% guiparams.zmax = [];</span>
4786 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
4787 guiparams.data_folder = <span class="string">''</span>;
4788 guiparams.data_files  = {<span class="string">''</span>};
4789 
4790 <span class="comment">% [EOF] createGUIparams</span>
4791 
4792 <a name="_sub108" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
4793 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
4794 
4795 <a name="_sub109" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
4796 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
4797 
4798 <span class="comment">% [EOF] VMT</span>
4799 
4800 
4801 
4802 
4803 
4804</pre></div>
<hr><address>Generated on Mon 18-Nov-2013 11:40:38 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>