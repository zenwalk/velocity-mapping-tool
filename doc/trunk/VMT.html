<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html trunk -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>	Computes the layer averaged mean of y over the depth range.</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>	Read in multiple MAT output files from SonTek RSL v1.5-3.60.</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function WSE_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub92" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub93" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub94" class="code">function initGUI(handles)</a></li><li><a href="#_sub95" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub96" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub97" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub98" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub99" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub100" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub101" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub102" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub103" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a></li><li><a href="#_sub104" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub105" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub106" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub107" class="code">function icons = getIcons</a></li><li><a href="#_sub108" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub109" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub110" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li><li><a href="#_sub111" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0037     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0038     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039     <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0045 <span class="keyword">try</span>
0046 <span class="keyword">if</span> nargout
0047     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">else</span>
0049     gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">catch</span> err
0053     <span class="keyword">if</span> isdeployed
0054         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0055             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0056         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0057             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0058             errLogFileName},<span class="keyword">...</span>
0059             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0060             <span class="string">'error'</span>);
0061         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0062         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0063         fclose(fid);
0064         rethrow(err)
0065     <span class="keyword">else</span>
0066         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0067             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0068             <span class="string">'error'</span>);
0069         rethrow(err);
0070     <span class="keyword">end</span>
0071 <span class="keyword">end</span>
0072 <span class="comment">% End initialization code - DO NOT EDIT</span>
0073 
0074 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0075 
0076 <span class="comment">% --- Executes just before VMT is made visible.</span>
0077 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0078 <span class="comment">% This function has no output args, see OutputFcn.</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0083 
0084 <span class="comment">% Choose default command line output for VMT</span>
0085 handles.output = hObject;
0086 
0087 <span class="comment">% Build the GUI toolbar:</span>
0088 <span class="comment">% ----------------------</span>
0089 handles = <a href="#_sub91" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0090 
0091 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0092 <span class="comment">% ----------------------------------------</span>
0093 <span class="keyword">if</span> ~isdeployed
0094     filesep = <span class="string">'\'</span>; <span class="comment">% windows</span>
0095     utilspath = [pwd filesep <span class="string">'utils'</span>];
0096     docspath  = [pwd filesep <span class="string">'doc'</span>];
0097     toolspath = [pwd filesep <span class="string">'tools'</span>];
0098     addpath(utilspath,docspath,toolspath)
0099 <span class="keyword">end</span>
0100 
0101 <span class="comment">% Update handles structure</span>
0102 <span class="comment">% ------------------------</span>
0103 guidata(hObject, handles);
0104 
0105 <span class="comment">% Load the GUI preferences:</span>
0106 <span class="comment">% -------------------------</span>
0107 <a href="#_sub92" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0108 
0109 <span class="comment">% Initialize the GUI parameters:</span>
0110 <span class="comment">% ------------------------------</span>
0111 guiparams = <a href="#_sub108" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0112 guiparams.vmt_version = <span class="string">'v4.06'</span>;
0113 
0114 <span class="comment">% Draw the VMT Background</span>
0115 <span class="comment">% -----------------</span>
0116 pos = get(handles.figure1,<span class="string">'position'</span>);
0117 axes(handles.VMTBackground);
0118 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0119     X = imread(<span class="string">'VMT_Background.png'</span>);
0120     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0121 <span class="comment">% else</span>
0122 <span class="comment">%     X = imread('VMT_Background.png');</span>
0123 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0124 <span class="comment">%     X = uint8(X);</span>
0125 <span class="comment">%     imshow(X,'Border','tight')</span>
0126 <span class="comment">% end</span>
0127 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0128 
0129 <span class="comment">% Store the application data:</span>
0130 <span class="comment">% ---------------------------</span>
0131 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0132 
0133 <span class="comment">% Initialize the GUI:</span>
0134 <span class="comment">% -------------------</span>
0135 <a href="#_sub94" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0136 <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0137 <span class="comment">% set(handles.GraphicsExportPanel,'Visible','off')</span>
0138 <span class="comment">% set(handles.ProcessingPanel,'Visible','off')</span>
0139 pos = get(handles.figure1,<span class="string">'Position'</span>);
0140 <span class="comment">% pos(3) = 545;</span>
0141 <span class="comment">% set(handles.figure1,'Position',pos)</span>
0142 movegui(handles.figure1,<span class="string">'center'</span>)
0143 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0144 
0145 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0146 <span class="comment">% the root</span>
0147 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0148 
0149 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0150 <span class="comment">% uiwait(handles.figure1);</span>
0151 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0152 
0153 
0154 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0155 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0156 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0157 <span class="comment">% hObject    handle to figure</span>
0158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0160 
0161 <span class="comment">% Get default command line output from handles structure</span>
0162 varargout{1} = handles.output;
0163 <span class="comment">% [EOF] VMT_OutputFcn</span>
0164 
0165 <span class="comment">% --- Executes when figure1 is resized.</span>
0166 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0167 
0168 <span class="comment">% Draw the VMT Background</span>
0169 <span class="comment">% -----------------</span>
0170 pos = get(handles.figure1,<span class="string">'position'</span>);
0171 axes(handles.VMTBackground);
0172 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0173     X = imread(<span class="string">'VMT_Background.png'</span>);
0174     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0175 <span class="comment">% else</span>
0176 <span class="comment">%     X = imread('VMT_Background.png');</span>
0177 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0178 <span class="comment">%     X = uint8(X);</span>
0179 <span class="comment">%     imshow(X,'Border','tight')</span>
0180 <span class="comment">% end</span>
0181 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0182 
0183 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0184 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0185 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0186 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0187 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0188 
0189 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0190 close_button = questdlg(<span class="keyword">...</span>
0191     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0192     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0193 <span class="keyword">switch</span> close_button
0194     <span class="keyword">case</span> <span class="string">'Yes'</span>
0195         delete(hObject)
0196         close all hidden
0197     <span class="keyword">otherwise</span>
0198         <span class="keyword">return</span>
0199 <span class="keyword">end</span>
0200 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0201 
0202 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0203 <span class="comment">% MENU BAR CALLBACKS %</span>
0204 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0205 
0206 <span class="comment">% --------------------------------------------------------------------</span>
0207 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0208 <span class="comment">% Empty</span>
0209 
0210 <span class="comment">% --------------------------------------------------------------------</span>
0211 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0212 <span class="comment">% Empty</span>
0213 
0214 <span class="comment">% --------------------------------------------------------------------</span>
0215 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0216 <a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0217 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0221 
0222 <span class="comment">% Get the Application data:</span>
0223 <span class="comment">% -------------------------</span>
0224 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0225 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0226 
0227 <span class="comment">% Ask the user to select files:</span>
0228 <span class="comment">% -----------------------------</span>
0229 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0230 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0231 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0232     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0233 <span class="keyword">else</span>
0234     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0235 <span class="keyword">end</span>
0236 [filename,pathname] = <span class="keyword">...</span>
0237     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0238     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0239     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0240 
0241 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0242     <span class="comment">% Load the data:</span>
0243     <span class="comment">% --------------</span>
0244     vars = load(fullfile(pathname,filename));
0245     
0246     <span class="comment">% Make sure the selected file is a valid file:</span>
0247     <span class="comment">% --------------------------------------------</span>
0248     varnames = fieldnames(vars);
0249     <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0250         guiparams.mat_path = pathname;
0251         guiparams.mat_file = filename;
0252         guiparams.z = vars.z;
0253         guiparams.A = vars.A;
0254         guiparams.V = vars.V;
0255         
0256         <span class="comment">% Update the preferences:</span>
0257         <span class="comment">% -----------------------</span>
0258         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0259         guiprefs.mat_path = pathname;
0260         guiprefs.mat_file = filename;
0261         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0262         <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0263                      
0264         <span class="comment">% Re-store the Application Data:</span>
0265         <span class="comment">% ------------------------------</span>
0266         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0267         
0268         <span class="comment">% Update the GUI:</span>
0269         <span class="comment">% ---------------</span>
0270         set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0271         <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0272     <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0273         errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0274             <span class="string">'Invalid File...'</span>)
0275     <span class="keyword">end</span>
0276     
0277     <span class="comment">% Set the vertical grid node spacing</span>
0278     <span class="comment">% ----------------------------------</span>
0279     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
0280     <span class="comment">% Backwards compatible</span>
0281     <span class="keyword">if</span> vars.A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
0282         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(vars.A(1).Sup.binSize_cm(1))/100)
0283     <span class="keyword">else</span> <span class="comment">% Older file, must be RG</span>
0284         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
0285     <span class="keyword">end</span>
0286     
0287 <span class="keyword">elseif</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0288     <span class="comment">% Set the filenames</span>
0289     <span class="comment">% -----------------</span>
0290     guiparams.mat_path = pathname;
0291     guiparams.mat_file = filename;
0292     
0293     <span class="comment">% Push status to log window</span>
0294     <span class="comment">% -------------------------</span>
0295     log_text = {<span class="keyword">...</span>
0296         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0297         <span class="string">'Directory:'</span>};
0298     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0299     statusLogging(handles.LogWindow,log_text)
0300     
0301     <span class="comment">% Update the Application Data:</span>
0302     <span class="comment">% ------------------------------</span>
0303     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0304     
0305     <span class="comment">% Update the persistent preferences:</span>
0306     <span class="comment">% ----------------------------------</span>
0307     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0308     guiprefs.mat_path = pathname;
0309     guiprefs.mat_file = filename;
0310     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0311     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0312         
0313     <span class="comment">% Update the GUI:</span>
0314     <span class="comment">% ---------------</span>
0315     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0316 <span class="keyword">end</span>
0317 
0318 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0319 
0320 <span class="comment">% --------------------------------------------------------------------</span>
0321 <a name="_sub9" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0322 <span class="comment">% Empty</span>
0323 
0324 <span class="comment">% --------------------------------------------------------------------</span>
0325 <a name="_sub10" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0326 <a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0327 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0328 
0329 <span class="comment">% --------------------------------------------------------------------</span>
0330 <a name="_sub11" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0331 <a href="#_sub59" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0332 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0333 
0334 <span class="comment">% --------------------------------------------------------------------</span>
0335 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0336 <a href="#_sub60" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0337 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0338 
0339 <span class="comment">% --------------------------------------------------------------------</span>
0340 <a name="_sub13" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0341 <span class="comment">% Empty</span>
0342 
0343 <span class="comment">% --------------------------------------------------------------------</span>
0344 <a name="_sub14" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0345 <span class="comment">% Empty</span>
0346 
0347 <span class="comment">% --------------------------------------------------------------------</span>
0348 <a name="_sub15" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0349 
0350 <span class="comment">% Get the Application Data:</span>
0351 <span class="comment">% -------------------------</span>
0352 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0353 
0354 <span class="comment">% Update the Application Data:</span>
0355 <span class="comment">% ----------------------------</span>
0356 guiparams.print        = true;
0357 guiparams.presentation = false;
0358 
0359 <span class="comment">% Re-store the Application data:</span>
0360 <span class="comment">% ------------------------------</span>
0361 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0362 
0363 <span class="comment">% Update the GUI:</span>
0364 <span class="comment">% ---------------</span>
0365 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0366 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0367 
0368 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0369 
0370 
0371 <span class="comment">% --------------------------------------------------------------------</span>
0372 <a name="_sub16" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0373 
0374 <span class="comment">% Get the Application Data:</span>
0375 <span class="comment">% -------------------------</span>
0376 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0377 
0378 <span class="comment">% Update the Application Data:</span>
0379 <span class="comment">% ----------------------------</span>
0380 guiparams.print        = false;
0381 guiparams.presentation = true;
0382 
0383 <span class="comment">% Re-store the Application data:</span>
0384 <span class="comment">% ------------------------------</span>
0385 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0386 
0387 <span class="comment">% Update the GUI:</span>
0388 <span class="comment">% ---------------</span>
0389 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0390 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0391 
0392 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0393 
0394 <span class="comment">% --------------------------------------------------------------------</span>
0395 <a name="_sub17" href="#_subfunctions" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a>
0396 <span class="comment">%  --- Empty ---</span>
0397 
0398 <span class="comment">% --------------------------------------------------------------------</span>
0399 <a name="_sub18" href="#_subfunctions" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a>
0400 <span class="comment">% Get the Application Data:</span>
0401 <span class="comment">% -------------------------</span>
0402 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0403 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0404 
0405 <span class="comment">% Update the Application Data:</span>
0406 <span class="comment">% ----------------------------</span>
0407 guiparams.renderer  = <span class="string">'OpenGL'</span>;
0408 guiprefs.renderer   = <span class="string">'OpenGL'</span>;
0409 
0410 <span class="comment">% Re-store the Application data:</span>
0411 <span class="comment">% ------------------------------</span>
0412 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0413 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0414 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0415 
0416 <span class="comment">% Update the GUI:</span>
0417 <span class="comment">% ---------------</span>
0418 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0419 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0420 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0421 
0422 <span class="comment">% Modify the existing figures</span>
0423 <span class="comment">% ---------------------------</span>
0424 <span class="comment">% Find what plots exist already</span>
0425 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0426 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0427 
0428 <span class="comment">% Loop through valid figures and adjust</span>
0429 <span class="comment">% -------------------------------------</span>
0430 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0431     <span class="keyword">for</span> i = 1:length(valid_names)
0432         <span class="comment">% Focus the figure</span>
0433         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0434         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0435             figure(hff)
0436             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0437         <span class="keyword">end</span>
0438         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0439         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0440             figure(hff)
0441             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0442         <span class="keyword">end</span>
0443     <span class="keyword">end</span>
0444 <span class="keyword">end</span>
0445 <span class="comment">% [EOF] menuOpenGL_Callback</span>
0446 
0447 
0448 <span class="comment">% --------------------------------------------------------------------</span>
0449 <a name="_sub19" href="#_subfunctions" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a>
0450 <span class="comment">% Get the Application Data:</span>
0451 <span class="comment">% -------------------------</span>
0452 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0453 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0454 
0455 <span class="comment">% Update the Application Data:</span>
0456 <span class="comment">% ----------------------------</span>
0457 guiparams.renderer  = <span class="string">'painters'</span>;
0458 guiprefs.renderer   = <span class="string">'painters'</span>;
0459 
0460 <span class="comment">% Re-store the Application data:</span>
0461 <span class="comment">% ------------------------------</span>
0462 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0463 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0464 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0465 
0466 <span class="comment">% Update the GUI:</span>
0467 <span class="comment">% ---------------</span>
0468 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0469 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0470 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0471 
0472 <span class="comment">% Modify the existing figures</span>
0473 <span class="comment">% ---------------------------</span>
0474 <span class="comment">% Find what plots exist already</span>
0475 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0476 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0477 
0478 <span class="comment">% Loop through valid figures and adjust</span>
0479 <span class="comment">% -------------------------------------</span>
0480 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0481     <span class="keyword">for</span> i = 1:length(valid_names)
0482         <span class="comment">% Focus the figure</span>
0483         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0484         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0485             figure(hff)
0486             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0487         <span class="keyword">end</span>
0488         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0489         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0490             figure(hff)
0491             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0492         <span class="keyword">end</span>
0493     <span class="keyword">end</span>
0494 <span class="keyword">end</span>
0495 <span class="comment">% [EOF] menuPainters_Callback</span>
0496 
0497 <span class="comment">% --------------------------------------------------------------------</span>
0498 <a name="_sub20" href="#_subfunctions" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a>
0499 <span class="comment">% Get the Application Data:</span>
0500 <span class="comment">% -------------------------</span>
0501 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0502 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0503 
0504 <span class="comment">% Update the Application Data:</span>
0505 <span class="comment">% ----------------------------</span>
0506 guiparams.renderer  = <span class="string">'zbuffer'</span>;
0507 guiprefs.renderer   = <span class="string">'zbuffer'</span>;
0508 
0509 <span class="comment">% Re-store the Application data:</span>
0510 <span class="comment">% ------------------------------</span>
0511 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0512 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0513 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0514 
0515 <span class="comment">% Update the GUI:</span>
0516 <span class="comment">% ---------------</span>
0517 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0518 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0519 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0520 
0521 <span class="comment">% Modify the existing figures</span>
0522 <span class="comment">% ---------------------------</span>
0523 <span class="comment">% Find what plots exist already</span>
0524 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0525 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0526 
0527 <span class="comment">% Loop through valid figures and adjust</span>
0528 <span class="comment">% -------------------------------------</span>
0529 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0530     <span class="keyword">for</span> i = 1:length(valid_names)
0531         <span class="comment">% Focus the figure</span>
0532         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0533         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0534             figure(hff)
0535             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0536         <span class="keyword">end</span>
0537         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0538         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0539             figure(hff)
0540             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0541         <span class="keyword">end</span>
0542     <span class="keyword">end</span>
0543 <span class="keyword">end</span>
0544 <span class="comment">% [EOF] menuZbuffer_Callback</span>
0545 
0546 <span class="comment">% --------------------------------------------------------------------</span>
0547 <a name="_sub21" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0548 <span class="comment">% Get the Application data:</span>
0549 <span class="comment">% -------------------------</span>
0550 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0551 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0552 
0553 <span class="comment">% Find what plots exist already</span>
0554 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0555 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0556 
0557 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0558 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0559 <span class="keyword">if</span> ~isempty(idx)
0560     fig_names(idx) = [];
0561 <span class="keyword">end</span>
0562 
0563 <span class="keyword">if</span> guiparams.presentation
0564     figure_style = <span class="string">'presentation'</span>;
0565 <span class="keyword">else</span>
0566     figure_style = <span class="string">'print'</span>;
0567 <span class="keyword">end</span>
0568 
0569 [selected_figures] = <a href="#_sub105" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0570 
0571 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0572     <span class="keyword">return</span>
0573 <span class="keyword">else</span>
0574     <span class="keyword">for</span> i = 1:length(selected_figures)
0575         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0576     <span class="keyword">end</span>
0577 <span class="keyword">end</span>
0578 
0579 
0580 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0581 
0582 <span class="comment">% --------------------------------------------------------------------</span>
0583 <a name="_sub22" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0584 <span class="comment">% Get the Application data:</span>
0585 <span class="comment">% -------------------------</span>
0586 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0587 beam_angle             = guiparams.beam_angle; 
0588 magnetic_variation     = guiparams.magnetic_variation; 
0589 wse                    = guiparams.wse;
0590 output_auxiliary_data  = guiparams.output_auxiliary_data; 
0591 
0592 <span class="comment">% Open dialog and allow user to select settings</span>
0593 <span class="comment">% ---------------------------------------------</span>
0594 [beam_angle,<span class="keyword">...</span>
0595     magnetic_variation,<span class="keyword">...</span>
0596     wse,<span class="keyword">...</span>
0597     output_auxiliary_data] = <span class="keyword">...</span>
0598     <a href="#_sub103" class="code" title="subfunction [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)">exportSettingsDialog</a>(beam_angle,magnetic_variation,wse,output_auxiliary_data,handles.figure1);
0599 
0600 <span class="comment">% Re-store the Application data:</span>
0601 <span class="comment">% ------------------------------</span>
0602 guiparams.beam_angle            = beam_angle;
0603 guiparams.magnetic_variation    = magnetic_variation; 
0604 guiparams.wse                   = wse;
0605 guiparams.output_auxiliary_data = output_auxiliary_data;
0606 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0607 
0608 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0609 
0610 <span class="comment">% --------------------------------------------------------------------</span>
0611 <a name="_sub23" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0612 <a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0613 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0614 
0615 
0616 <span class="comment">% --------------------------------------------------------------------</span>
0617 <a name="_sub24" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0618 
0619 <span class="comment">% Get the Application Data:</span>
0620 <span class="comment">% -------------------------</span>
0621 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0622 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0623 PVdata    = guiparams.iric_anv_planview_data;
0624 iric_path = guiprefs.iric_path;
0625 iric_file = guiprefs.iric_file;
0626 
0627 <span class="comment">% Is there any planview data?</span>
0628 <span class="keyword">if</span> isempty(PVdata)
0629     <span class="comment">% Nothing to do, warn user</span>
0630     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0631     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0632 <span class="keyword">else</span>
0633     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0634     <span class="comment">% and smoothing (for iRiC)</span>
0635     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0636     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0637         fullfile(iric_path,iric_file));
0638     
0639     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0640         outfile = fullfile(iric_path,iric_file);
0641         log_text = vertcat(log_text,{outfile});
0642         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0643         outcount = fprintf(ofid,<span class="keyword">...</span>
0644             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0645         fclose(ofid);
0646     <span class="keyword">else</span>
0647         <span class="comment">% Return default iric_path and iric_file</span>
0648         iric_path = guiprefs.iric_path;
0649         iric_file = guiprefs.iric_file;
0650     <span class="keyword">end</span>
0651 <span class="keyword">end</span>
0652 
0653 <span class="comment">% Push messages to Log Window:</span>
0654 <span class="comment">% ----------------------------</span>
0655 statusLogging(handles.LogWindow, log_text)
0656 
0657 <span class="comment">% Store the persistent preferences:</span>
0658 <span class="comment">% ---------------------------------</span>
0659 guiprefs.iric_file = iric_file;
0660 guiprefs.iric_path = iric_path;
0661 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0662 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0663 
0664 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0665 
0666 <span class="comment">% --------------------------------------------------------------------</span>
0667 <a name="_sub25" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0668 <span class="comment">% Get the Application Data:</span>
0669 <span class="comment">% -------------------------</span>
0670 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0671 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0672 excel_path  = guiprefs.excel_path;
0673 excel_file  = guiprefs.excel_file;
0674 
0675 <span class="comment">% Push messages to Log Window:</span>
0676 <span class="comment">% ----------------------------</span>
0677 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0678 statusLogging(handles.LogWindow, log_text)
0679 
0680 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0681 <span class="comment">% data.</span>
0682 <span class="keyword">if</span> iscell(guiparams.mat_file)
0683     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0684     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0685     <span class="comment">% Refresh the Application Data:</span>
0686     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0687     z           = guiparams.z;
0688     A           = guiparams.A;
0689     V           = guiparams.V;
0690     Map         = guiparams.Map;
0691     wse         = guiparams.wse;
0692     PVdata      = guiparams.iric_anv_planview_data;
0693     log_text = {<span class="string">'Writing data to Excel file...'</span>;<span class="keyword">...</span>
0694         <span class="string">'Multiple transected loaded. Will export Planview Data Only!'</span>};
0695     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0696         fullfile(excel_path,excel_file));
0697     
0698     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0699         outfile = fullfile(excel_path,excel_file);
0700         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0701         
0702     <span class="keyword">else</span>
0703         <span class="comment">% Return default excel_path and excel_file</span>
0704         excel_path = guiprefs.excel_path;
0705         excel_file = guiprefs.excel_file;
0706         outfile = fullfile(excel_path,excel_file);
0707         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0708     <span class="keyword">end</span>
0709     
0710     <span class="comment">% Delete the old file if it exists</span>
0711     <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0712         log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0713             [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0714             <span class="string">'already exists. Overwriting file...'</span>});
0715         delete(outfile)
0716     <span class="keyword">end</span>
0717     
0718     <span class="comment">% Save DAV data to an Excel File</span>
0719     hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0720     vmin = num2str(guiparams.depth_range_min);
0721     vmax = num2str(guiparams.depth_range_max);
0722     pvheaders = {<span class="keyword">...</span>
0723         <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0724         [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0725         [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0726         <span class="string">'Vel_mag_cm/s'</span> <span class="string">'Vel_dir_deg'</span>};
0727     
0728 
0729     <span class="comment">% Initialize Variables</span>
0730     pvdata = []; Dist = [];
0731     X = []; Y = []; E = [];
0732     Ve = []; Vn =[]; Vm = []; Vd = [];
0733     
0734     <span class="comment">% Concatenate data from all MAT files into arrays</span>
0735     <span class="keyword">for</span> i = 1:length(guiparams.mat_file)
0736         <span class="comment">% Load current MAT-file</span>
0737         load(fullfile(guiparams.mat_path, guiparams.mat_file{i}))
0738         
0739         <span class="comment">% Location and Bathy</span>
0740         X = [X V.mcsX(1,:)];
0741         Y = [Y V.mcsY(1,:)];
0742         Dist = [Dist sort(V.mcsDist(1,:),<span class="string">'descend'</span>)];
0743         E = [E V.mcsBedElev];
0744         
0745         <span class="comment">% Build layer-averaged velocities</span>
0746         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0747         V.mcsX(indx,:) = nan;
0748         V.mcsY(indx,:) = nan;
0749         V.mcsEast(indx,:) = nan;
0750         V.mcsNorth(indx,:) = nan;
0751         Ve = [Ve <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast)];
0752         Vn = [Vn <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth)];
0753         Vm = [Vm sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2)];
0754         Vd = [Vd ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth),<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0755         
0756         waitbar(i/(length(guiparams.mat_file)+1),hwait)
0757     <span class="keyword">end</span>
0758     
0759     <span class="comment">% Put output into 1 matrix</span>
0760     pvdata = [<span class="keyword">...</span>
0761         X; Y; Dist; E;<span class="keyword">...</span><span class="comment"> % Bathy and locations</span>
0762         Ve; Vn; Vm; Vd<span class="keyword">...</span><span class="comment"> % Velocity</span>
0763         ];
0764     pvdata(isnan(pvdata)) = -9999;
0765     
0766     <span class="comment">% Create table and write to Excel</span>
0767     pvout = num2cell(pvdata');
0768     pvout = vertcat(pvheaders,pvout);
0769     xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0770     
0771     <span class="comment">% Close out waitbar</span>
0772     waitbar(1,hwait)
0773     delete(hwait)
0774     
0775     <span class="comment">% Push messages to Log Window:</span>
0776     <span class="comment">% ----------------------------</span>
0777     statusLogging(handles.LogWindow, log_text)
0778 <span class="keyword">else</span>
0779     
0780     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0781     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0782     <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0783     <span class="comment">% Refresh the Application Data:</span>
0784     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0785     z           = guiparams.z;
0786     A           = guiparams.A;
0787     V           = guiparams.V;
0788     Map         = guiparams.Map;
0789     wse         = guiparams.wse;
0790     PVdata      = guiparams.iric_anv_planview_data;
0791     
0792     
0793     log_text = {<span class="string">'Writing data to Excel file...'</span>};
0794     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0795         fullfile(excel_path,excel_file));
0796     
0797     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0798         outfile = fullfile(excel_path,excel_file);
0799         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0800         
0801         <span class="comment">% Delete the old file if it exists</span>
0802         <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0803             log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0804                 [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0805                 <span class="string">'already exists. Overwriting file...'</span>});
0806             delete(outfile)
0807         <span class="keyword">end</span>
0808         
0809         <span class="comment">% Push messages to Log Window:</span>
0810         <span class="comment">% ----------------------------</span>
0811         statusLogging(handles.LogWindow, log_text)
0812         
0813         <span class="comment">% Save MCS Summary to an Excel File</span>
0814         hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0815         xlswrite(outfile,{<span class="string">'Files:'</span>},<span class="string">'VMTSummary'</span>,<span class="string">'H4'</span>); waitbar(1/5,hwait)
0816         sout = guiparams.data_files';
0817         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'I4'</span>); waitbar(2/5,hwait)
0818         sout = {<span class="keyword">...</span>
0819             <span class="string">'VMT: Summary of Mean Cross Section'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0820             <span class="string">'VMT '</span> guiparams.vmt_version <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0821             <span class="string">'Date Processed: '</span> datestr(now) <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0822             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0823             <span class="string">'Mean Cross Section (MCS) Properties'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0824             <span class="string">'Horz. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> guiparams.horizontal_grid_node_spacing;<span class="keyword">...</span>
0825             <span class="string">'Vert. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> single(guiparams.A(1).Sup.binSize_cm)/100;<span class="keyword">...</span>
0826             <span class="string">'Endpoints:'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">'UTM_East'</span>    <span class="string">'UTM_North'</span>;<span class="keyword">...</span>
0827             <span class="string">'Left Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xLeftBank V.yLeftBank;<span class="keyword">...</span>
0828             <span class="string">'Right Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xRightBank V.yRightBank;<span class="keyword">...</span>
0829             <span class="string">'Total Length in meters'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.dl;<span class="keyword">...</span>
0830             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0831             <span class="string">'Mean Flow Direction (deg)'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.mfd;<span class="keyword">...</span>
0832             <span class="string">'in geographic coordinates'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0833             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0834             <span class="string">'Slope'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.m;<span class="keyword">...</span>
0835             <span class="string">'Intercept'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.b;<span class="keyword">...</span>
0836             <span class="string">'Theta (deg)'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.theta};
0837         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'A1'</span>); waitbar(3/5,hwait)
0838         
0839         <span class="comment">% Save DAV data to an Excel File</span>
0840         vmin = num2str(guiparams.depth_range_min);
0841         vmax = num2str(guiparams.depth_range_max);
0842         pvheaders = {<span class="keyword">...</span>
0843             <span class="string">'UTM_East_WGS84'</span> <span class="string">'UTM_North_WGS84'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0844             [<span class="string">'EastDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0845             [<span class="string">'NorthDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0846             <span class="string">'Vel_mag_cms'</span> <span class="string">'Vel_dir_deg'</span>};
0847         
0848         <span class="comment">% Create block style matrix of all processed data</span>
0849         pvdata = [];
0850         
0851         <span class="comment">% Sort the Distances such that when plotting in 2D (Dist. vs. Depth),</span>
0852         <span class="comment">% you are looking upstream into the transect</span>
0853         Dist = sort(V.mcsDist,2,<span class="string">'descend'</span>);
0854         
0855         <span class="comment">% Build bathy data matrix</span>
0856         pvdata = [V.mcsX(1,:); V.mcsY(1,:); Dist(1,:); V.mcsBedElev];
0857         
0858         <span class="comment">% Build layer-averaged velocities</span>
0859         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0860         V.mcsX(indx,:) = nan;
0861         V.mcsY(indx,:) = nan;
0862         V.mcsEast(indx,:) = nan;
0863         V.mcsNorth(indx,:) = nan;
0864         pvdata = [<span class="keyword">...</span>
0865             pvdata;<span class="keyword">...</span>
0866             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast);<span class="keyword">...</span>
0867             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth);<span class="keyword">...</span>
0868             sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2);<span class="keyword">...</span>
0869             ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth), <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0870         pvdata(isnan(pvdata)) = -9999;
0871         pvout = num2cell(pvdata');
0872         pvout = vertcat(pvheaders,pvout);
0873         xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0874         waitbar(4/5,hwait)
0875         
0876         <span class="comment">% Save MCS data to an Excel File</span>
0877         mcsheaders = {<span class="keyword">...</span>
0878             <span class="string">'UTM_East'</span> <span class="keyword">...</span>
0879             <span class="string">'UTM_North'</span><span class="keyword">...</span>
0880             <span class="string">'Distance from Left Bank, in meters'</span><span class="keyword">...</span>
0881             <span class="string">'Elevation, in meters'</span><span class="keyword">...</span>
0882             <span class="keyword">...</span><span class="comment">'Bed Elevation, in meters'...</span>
0883             <span class="string">'East Velocity, in cm/s'</span><span class="keyword">...</span>
0884             <span class="string">'North Velocity, in cm/s'</span><span class="keyword">...</span>
0885             <span class="string">'Vertical Velocity, in cm/s'</span><span class="keyword">...</span>
0886             <span class="string">'Velocity Magnitude, in cm/s'</span><span class="keyword">...</span>
0887             <span class="string">'Velocity Direction, in degrees (geographic coordinates)'</span><span class="keyword">...</span>
0888             <span class="string">'Streamwise Velocity, in cm/s'</span><span class="keyword">...</span>
0889             <span class="string">'Transverse Velocity, in cm/s'</span><span class="keyword">...</span>
0890             <span class="string">'Primary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0891             <span class="string">'Secondary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0892             <span class="string">'Primary Velocity (roz), in cm/s'</span><span class="keyword">...</span>
0893             <span class="string">'Secondary Velocity (roz), in cm/s'</span>};
0894         
0895         mcsdata = [<span class="keyword">...</span>
0896             V.mcsX(:)<span class="keyword">...</span>
0897             V.mcsY(:)<span class="keyword">...</span>
0898             V.mcsDist(:)<span class="keyword">...</span>
0899             (wse - V.mcsDepth(:))<span class="keyword">...</span>
0900             <span class="keyword">...</span><span class="comment">repmat((wse - V.mcsBed(:)),size(V.mcsX,1),1)...</span>
0901             V.mcsEast(:)<span class="keyword">...</span>
0902             V.mcsNorth(:)<span class="keyword">...</span>
0903             V.mcsVert(:)<span class="keyword">...</span>
0904             V.mcsMag(:)<span class="keyword">...</span>
0905             V.mcsDir(:)<span class="keyword">...</span>
0906             V.u(:)<span class="keyword">...</span>
0907             V.v(:)<span class="keyword">...</span>
0908             V.vp(:)<span class="keyword">...</span>
0909             V.vs(:)<span class="keyword">...</span>
0910             V.Roz.up(:)<span class="keyword">...</span>
0911             V.Roz.us(:)];
0912         mcsdata(isnan(mcsdata)) = -9999;
0913         
0914         mcsout = vertcat(mcsheaders,num2cell(mcsdata));
0915         xlswrite(outfile,mcsout,<span class="string">'MeanCrossSection'</span>);
0916         waitbar(1,hwait)
0917         delete(hwait)
0918         
0919     <span class="keyword">else</span>
0920         <span class="comment">% Return default excel_path and excel_file</span>
0921         excel_path = guiprefs.excel_path;
0922         excel_file = guiprefs.excel_file;
0923         outfile = fullfile(excel_path,excel_file);
0924         log_text = {<span class="string">'User aborted Excel export...'</span>};
0925     <span class="keyword">end</span>
0926     
0927     
0928     
0929 <span class="keyword">end</span>
0930 
0931 <span class="comment">% Push messages to Log Window:</span>
0932 <span class="comment">% ----------------------------</span>
0933 statusLogging(handles.LogWindow, log_text)
0934 
0935 <span class="comment">% Store the persistent preferences:</span>
0936 <span class="comment">% ---------------------------------</span>
0937 guiprefs.excel_file = excel_file;
0938 guiprefs.excel_path = excel_path;
0939 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0940 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0941 
0942 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0943 
0944 <span class="comment">% --------------------------------------------------------------------</span>
0945 <a name="_sub26" href="#_subfunctions" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a>
0946 <span class="comment">% Empty</span>
0947 
0948 <span class="comment">% --------------------------------------------------------------------</span>
0949 <a name="_sub27" href="#_subfunctions" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a>
0950 <span class="comment">% Empty</span>
0951 
0952 <span class="comment">% --------------------------------------------------------------------</span>
0953 <a name="_sub28" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0954 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0955 
0956 <span class="comment">% Get the Application Data:</span>
0957 <span class="comment">% -------------------------</span>
0958 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0959 
0960 <span class="comment">% Update the GUI &amp; Application Data:</span>
0961 <span class="comment">% ----------------------------------</span>
0962 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0963 <span class="keyword">switch</span> status
0964     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0965         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0966         guiparams.unit_discharge_correction = false;
0967     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0968         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0969         guiparams.unit_discharge_correction = true;
0970 <span class="keyword">end</span>
0971 
0972 <span class="comment">% Re-store the Application data:</span>
0973 <span class="comment">% ------------------------------</span>
0974 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0975 
0976 
0977 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0978 
0979 <span class="comment">% --------------------------------------------------------------------</span>
0980 <a name="_sub29" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0981 <span class="comment">% Empty</span>
0982 
0983 <span class="comment">% --------------------------------------------------------------------</span>
0984 <a name="_sub30" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0985 <span class="comment">% Empty</span>
0986 
0987 <span class="comment">% --------------------------------------------------------------------</span>
0988 <a name="_sub31" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
0989 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
0990 
0991 <span class="comment">% Get the Application Data:</span>
0992 <span class="comment">% -------------------------</span>
0993 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0994 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0995 
0996 <span class="comment">% Update the Application Data:</span>
0997 <span class="comment">% ----------------------------</span>
0998 guiparams.english_units = false;
0999 guiprefs.units = <span class="string">'metric'</span>;
1000 
1001 <span class="comment">% Re-store the Application data:</span>
1002 <span class="comment">% ------------------------------</span>
1003 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1004 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1005 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1006 
1007 <span class="comment">% Update the GUI:</span>
1008 <span class="comment">% ---------------</span>
1009 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1010 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1011 
1012 <span class="comment">% [EOF] menuMetric_Callback</span>
1013 
1014 
1015 <span class="comment">% --------------------------------------------------------------------</span>
1016 <a name="_sub32" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
1017 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
1018 
1019 <span class="comment">% Get the Application Data:</span>
1020 <span class="comment">% -------------------------</span>
1021 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1022 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1023 
1024 <span class="comment">% Update the Application Data:</span>
1025 <span class="comment">% ----------------------------</span>
1026 guiparams.english_units = true;
1027 guiprefs.units = <span class="string">'english'</span>;
1028 
1029 <span class="comment">% Re-store the Application data:</span>
1030 <span class="comment">% ------------------------------</span>
1031 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1032 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1033 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1034 
1035 <span class="comment">% Update the GUI:</span>
1036 <span class="comment">% ---------------</span>
1037 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1038 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1039 
1040 <span class="comment">% [EOF] menuEnglish_Callback</span>
1041 
1042 
1043 <span class="comment">% --------------------------------------------------------------------</span>
1044 <a name="_sub33" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
1045 <span class="comment">% Empty</span>
1046 
1047 <span class="comment">% --------------------------------------------------------------------</span>
1048 <a name="_sub34" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
1049 <span class="comment">% Set cross-section endpoints automatically</span>
1050 
1051 <span class="comment">% Get the Application Data:</span>
1052 <span class="comment">% -------------------------</span>
1053 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1054 
1055 <span class="comment">% Update the Application Data:</span>
1056 <span class="comment">% ----------------------------</span>
1057 guiparams.set_cross_section_endpoints = false;
1058 
1059 <span class="comment">% Re-store the Application data:</span>
1060 <span class="comment">% ------------------------------</span>
1061 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1062 
1063 <span class="comment">% Update the GUI:</span>
1064 <span class="comment">% ---------------</span>
1065 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1066 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1067 
1068 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
1069 
1070 
1071 <span class="comment">% --------------------------------------------------------------------</span>
1072 <a name="_sub35" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
1073 <span class="comment">% Set cross-section endpoints manually</span>
1074 
1075 <span class="comment">% Get the Application Data:</span>
1076 <span class="comment">% -------------------------</span>
1077 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1078 
1079 <span class="comment">% Update the Application Data:</span>
1080 <span class="comment">% ----------------------------</span>
1081 guiparams.set_cross_section_endpoints = true;
1082 
1083 <span class="comment">% Re-store the Application data:</span>
1084 <span class="comment">% ------------------------------</span>
1085 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1086 
1087 <span class="comment">% Update the GUI:</span>
1088 <span class="comment">% ---------------</span>
1089 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1090 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1091 
1092 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
1093 
1094 
1095 
1096 
1097 <span class="comment">% --------------------------------------------------------------------</span>
1098 <a name="_sub36" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
1099 <span class="comment">% Empty</span>
1100 
1101 <span class="comment">% --------------------------------------------------------------------</span>
1102 <a name="_sub37" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
1103 
1104 <span class="comment">% Get the Application Data:</span>
1105 <span class="comment">% -------------------------</span>
1106 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1107 
1108 <span class="comment">% Update the Application Data:</span>
1109 <span class="comment">% ----------------------------</span>
1110 guiparams.print        = true;
1111 guiparams.presentation = false;
1112 
1113 <span class="comment">% Re-store the Application data:</span>
1114 <span class="comment">% ------------------------------</span>
1115 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1116 
1117 <span class="comment">% Update the GUI:</span>
1118 <span class="comment">% ---------------</span>
1119 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1120 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1121 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1122 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1123 
1124 <span class="comment">% Modify the existing figures</span>
1125 <span class="comment">% ---------------------------</span>
1126 <span class="comment">% Find what plots exist already</span>
1127 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1128 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1129 
1130 <span class="comment">% Defaults for Print Stlye Figure</span>
1131 BkgdColor   = <span class="string">'white'</span>;
1132 AxColor     = <span class="string">'black'</span>;
1133 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1134 FntSize     = 14;
1135 
1136 <span class="comment">% Loop through valid figures and adjust</span>
1137 <span class="comment">% -------------------------------------</span>
1138 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1139     
1140     <span class="keyword">for</span> i = 1:length(valid_names)
1141         <span class="keyword">switch</span> valid_names{i}
1142             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1143                 <span class="comment">% Focus the figure</span>
1144                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1145                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1146                     figure(hff)
1147                     
1148                     <span class="comment">% Make the changes to figure</span>
1149                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1150                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1151                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1152                     set(gca,<span class="string">'Color'</span>,FigColor)
1153                     set(gca,<span class="string">'XColor'</span>,AxColor)
1154                     set(gca,<span class="string">'YColor'</span>,AxColor)
1155                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1156                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1157                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1158                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1159                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1160                 <span class="keyword">end</span>
1161             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1162                 <span class="comment">% Focus the figure</span>
1163                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1164                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1165                     figure(hff)
1166                     
1167                     <span class="comment">% Make the changes to figure</span>
1168                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1169                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1170                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1171                     set(gca,<span class="string">'Color'</span>,FigColor)
1172                     set(gca,<span class="string">'XColor'</span>,AxColor)
1173                     set(gca,<span class="string">'YColor'</span>,AxColor)
1174                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1175                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1176                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1177                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1178                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1179                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1180                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1181                 <span class="keyword">end</span>
1182             <span class="keyword">otherwise</span>
1183         <span class="keyword">end</span>
1184     <span class="keyword">end</span>
1185     
1186     
1187 <span class="keyword">end</span>
1188 
1189 
1190 <span class="comment">%[EOF] menuStylePrint_Callback</span>
1191 
1192 
1193 <span class="comment">% --------------------------------------------------------------------</span>
1194 <a name="_sub38" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
1195 <span class="comment">% Get the Application Data:</span>
1196 <span class="comment">% -------------------------</span>
1197 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1198 
1199 <span class="comment">% Update the Application Data:</span>
1200 <span class="comment">% ----------------------------</span>
1201 guiparams.print        = false;
1202 guiparams.presentation = true;
1203 
1204 <span class="comment">% Re-store the Application data:</span>
1205 <span class="comment">% ------------------------------</span>
1206 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1207 
1208 <span class="comment">% Update the GUI:</span>
1209 <span class="comment">% ---------------</span>
1210 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1211 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1212 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1213 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1214 
1215 <span class="comment">% Modify the existing figures</span>
1216 <span class="comment">% ---------------------------</span>
1217 <span class="comment">% Find what plots exist already</span>
1218 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1219 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1220 
1221 <span class="comment">% Defaults for Presentation Stlye Figure</span>
1222 <span class="comment">% --------------------------------------</span>
1223 BkgdColor   = <span class="string">'black'</span>;
1224 AxColor     = <span class="string">'white'</span>;
1225 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1226 FntSize     = 14;
1227 
1228 <span class="comment">% Loop through valid figures and adjust</span>
1229 <span class="comment">% -------------------------------------</span>
1230 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1231     
1232     <span class="keyword">for</span> i = 1:length(valid_names)
1233         <span class="keyword">switch</span> valid_names{i}
1234             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1235                 <span class="comment">% Focus the figure</span>
1236                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1237                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1238                     figure(hff)
1239                     
1240                     <span class="comment">% Make the changes to figure</span>
1241                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1242                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1243                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1244                     set(gca,<span class="string">'Color'</span>,FigColor)
1245                     set(gca,<span class="string">'XColor'</span>,AxColor)
1246                     set(gca,<span class="string">'YColor'</span>,AxColor)
1247                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1248                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1249                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1250                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1251                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1252                     
1253                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1254                     <span class="comment">% the file(s) and path for the data</span>
1255                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1256                     <span class="keyword">if</span> ~ismultiplot
1257                         filestr = guiparams.savefile;
1258                         wd = length(filestr);
1259                         hd = 1;
1260                     <span class="keyword">else</span>
1261                         <span class="comment">% Construct a filename</span>
1262                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1263                         wd        = max(cellfun(@length,filestr));
1264                         hd        = numel(filestr);
1265                             
1266                     <span class="keyword">end</span>
1267                     
1268                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1269                     
1270                     <span class="comment">% Have to turn the toolbar back on after adding a uicontrol</span>
1271                     set(figure(hff), <span class="string">'toolbar'</span>,<span class="string">'figure'</span>)  
1272                     <span class="comment">% Turn off the menu bar, and keep only specified tools</span>
1273                     disableMenuBar(hff)
1274                     
1275                     set(fileinfotxt,<span class="keyword">...</span>
1276                         <span class="string">'string'</span>,filestr)
1277                     set(fileinfotxt,<span class="keyword">...</span>
1278                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1279                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1280                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1281                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1282                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>)
1283                     
1284                 <span class="keyword">end</span>
1285             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1286                 <span class="comment">% Focus the figure</span>
1287                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1288                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1289                     figure(hff)
1290                     
1291                     <span class="comment">% Make the changes to figure</span>
1292                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1293                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1294                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1295                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1296                     set(gca,<span class="string">'XColor'</span>,AxColor)
1297                     set(gca,<span class="string">'YColor'</span>,AxColor)
1298                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1299                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1300                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1301                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1302                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1303                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1304                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1305                     
1306                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1307                     <span class="comment">% the file(s) and path for the data</span>
1308                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1309                     <span class="keyword">if</span> ~ismultiplot
1310                         filestr = guiparams.savefile;
1311                         wd = length(filestr);
1312                         hd = 1;
1313                     <span class="keyword">else</span>
1314                         <span class="comment">% Construct a filename</span>
1315                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1316                         wd        = max(cellfun(@length,filestr));
1317                         hd        = numel(filestr);
1318                             
1319                     <span class="keyword">end</span>
1320                     
1321                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1322                     
1323                     <span class="comment">% Have to turn the toolbar back on after adding a uicontrol</span>
1324                     set(figure(hff), <span class="string">'toolbar'</span>,<span class="string">'figure'</span>)  
1325                     <span class="comment">% Turn off the menu bar, and keep only specified tools</span>
1326                     disableMenuBar(hff)
1327                     
1328                     set(fileinfotxt,<span class="keyword">...</span>
1329                         <span class="string">'string'</span>,filestr)
1330                     set(fileinfotxt,<span class="keyword">...</span>
1331                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1332                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1333                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1334                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1335                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>)
1336                 <span class="keyword">end</span>
1337             <span class="keyword">otherwise</span>
1338         <span class="keyword">end</span>
1339     <span class="keyword">end</span>
1340     
1341     
1342 <span class="keyword">end</span>
1343 
1344 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1345 
1346 <span class="comment">% --------------------------------------------------------------------</span>
1347 <a name="_sub39" href="#_subfunctions" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a>
1348 
1349 <span class="comment">% Get the Application data:</span>
1350 <span class="comment">% -------------------------</span>
1351 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1352 
1353 <span class="comment">% Initialize the answer:</span>
1354 <span class="comment">% ----------------------</span>
1355 numstr = {num2str(guiparams.vertical_offset)};
1356 answer = NaN;
1357 <span class="keyword">while</span> isnan(answer)
1358     answer = inputdlg(<span class="string">'Vertical Offset (m)'</span>,<span class="string">'KMZ Export'</span>,1,numstr);
1359     
1360     <span class="keyword">if</span> isempty(answer) <span class="comment">% User hits &quot;Cancel&quot;</span>
1361         <span class="keyword">return</span>
1362     <span class="keyword">end</span>
1363     
1364     answer = str2double(answer); <span class="comment">% A non-numeric char will be NaN</span>
1365     <span class="comment">% A numeric char will be a double</span>
1366 <span class="keyword">end</span>
1367 
1368 <span class="comment">% Re-store the Application data:</span>
1369 <span class="comment">% ------------------------------</span>
1370 guiparams.vertical_offset = answer;
1371 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1372 
1373 <span class="comment">% [EOF] menuKMZExport_Callback</span>
1374 
1375 <span class="comment">% --------------------------------------------------------------------</span>
1376 <a name="_sub40" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1377 <span class="comment">% Not implemented</span>
1378 
1379 <span class="comment">% --------------------------------------------------------------------</span>
1380 <a name="_sub41" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1381 <span class="comment">% Empty</span>
1382 
1383 <span class="comment">% --------------------------------------------------------------------</span>
1384 <a name="_sub42" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1385 ASCII2GIS_GUI
1386 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1387 
1388 <span class="comment">% --------------------------------------------------------------------</span>
1389 <a name="_sub43" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1390 
1391 <span class="comment">% Get the Application preferences:</span>
1392 <span class="comment">% --------------------------------</span>
1393 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1394 
1395 inpath = guiprefs.kmz_path;
1396 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1397     infile = guiprefs.kmz_file{1};
1398 <span class="keyword">else</span>
1399     infile = guiprefs.kmz_file;
1400 <span class="keyword">end</span>
1401 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1402 
1403 guiprefs.kmz_path = outpath;
1404 guiprefs.kmz_file = outfile;
1405 
1406 <span class="comment">% Update persistent preferences</span>
1407 <span class="comment">% -----------------------------</span>
1408 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1409 
1410 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1411 
1412 <span class="comment">% --------------------------------------------------------------------</span>
1413 <a name="_sub44" href="#_subfunctions" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a>
1414 <span class="comment">% Get the Application preferences:</span>
1415 <span class="comment">% --------------------------------</span>
1416 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1417 
1418 VMT_BatchMode;
1419 <span class="comment">% [EOF] menuOpenBatchMode_Callback</span>
1420 
1421 <span class="comment">% --------------------------------------------------------------------</span>
1422 <a name="_sub45" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1423 <span class="comment">% Empty</span>
1424 
1425 <span class="comment">% --------------------------------------------------------------------</span>
1426 <a name="_sub46" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1427 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1428 <span class="keyword">try</span> <span class="comment">% to open the User Guide PDF</span>
1429     open([pwd filesep <span class="string">'doc'</span> filesep <span class="string">'VMT User Guide '</span> guiparams.vmt_version <span class="string">'.pdf'</span>]);
1430     
1431 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1432     
1433     <span class="keyword">if</span> isdeployed
1434         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1435             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1436         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1437             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1438             errLogFileName},<span class="keyword">...</span>
1439             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1440             <span class="string">'error'</span>);
1441         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1442         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1443         fclose(fid);
1444         rethrow(err)
1445     <span class="keyword">else</span>
1446         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1447             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1448             <span class="string">'error'</span>);
1449         rethrow(err);
1450     <span class="keyword">end</span>
1451 <span class="keyword">end</span>
1452 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1453 
1454 <span class="comment">% --------------------------------------------------------------------</span>
1455 <a name="_sub47" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1456 <span class="comment">% Get the Application data:</span>
1457 <span class="comment">% -------------------------</span>
1458 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1459 
1460 <span class="keyword">try</span>
1461     <span class="comment">% Construct a URL to a local file which can be interpreted by any</span>
1462     <span class="comment">% web-browser</span>
1463     rootpath = strrep(pwd,filesep,<span class="string">'/'</span>);
1464     webaddress = [<span class="string">'file:///'</span> rootpath <span class="string">'/doc/index.html'</span>];
1465     system([<span class="string">'start '</span> webaddress]);
1466 <span class="comment">%     [stat,h,url] = web(webaddress) % Produced with m2html (FEX)</span>
1467 <span class="keyword">catch</span> err 
1468     <span class="keyword">if</span> isdeployed
1469         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1470             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1471         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1472             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1473             errLogFileName},<span class="keyword">...</span>
1474             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1475             <span class="string">'error'</span>);
1476         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1477         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1478         fclose(fid);
1479         rethrow(err)
1480     <span class="keyword">else</span>
1481         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1482             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1483             <span class="string">'error'</span>);
1484         rethrow(err);
1485     <span class="keyword">end</span>
1486 <span class="keyword">end</span>
1487 
1488 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1489 
1490 <span class="comment">% --------------------------------------------------------------------</span>
1491 <a name="_sub48" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1492 
1493 <span class="comment">% Get the Application data:</span>
1494 <span class="comment">% -------------------------</span>
1495 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1496 
1497 <span class="comment">% Check version tag against the web, and display a message</span>
1498 <span class="keyword">try</span>
1499     current_vmt_version = urlread(<span class="string">'http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1500     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1501 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1502     <span class="keyword">if</span> isdeployed
1503         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1504             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1505         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1506             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1507             errLogFileName},<span class="keyword">...</span>
1508             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1509             <span class="string">'error'</span>);
1510         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1511         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1512         fclose(fid);
1513         rethrow(err)
1514     <span class="keyword">else</span>
1515         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1516             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1517             <span class="string">'error'</span>);
1518         rethrow(err);
1519     <span class="keyword">end</span>
1520 <span class="keyword">end</span>
1521 
1522 <span class="keyword">if</span> strcmpi(guiparams.vmt_version,current_vmt_version)
1523     h = msgbox(<span class="string">'VMT is currently up to date, no updates available.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1524 <span class="keyword">else</span>
1525     h = msgbox(<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1526 <span class="keyword">end</span>
1527 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1528 
1529 <span class="comment">% --------------------------------------------------------------------</span>
1530 <a name="_sub49" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1531 
1532 <span class="comment">% Get the Application data:</span>
1533 <span class="comment">% -------------------------</span>
1534 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1535 messagestr = <span class="keyword">...</span>
1536     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1537     [<span class="string">'   Version: '</span> guiparams.vmt_version];<span class="keyword">...</span>
1538     <span class="string">''</span>;<span class="keyword">...</span>
1539     <span class="string">''</span>;<span class="keyword">...</span>
1540     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1541     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1542     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1543     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1544     <span class="string">''</span>;<span class="keyword">...</span>
1545     <span class="string">''</span>;<span class="keyword">...</span>
1546     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1547     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1548     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1549     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1550     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1551     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1552     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1553 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1554 <span class="comment">% [EOF] menuAbout_Callback</span>
1555 
1556 
1557 
1558 
1559 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1560 <span class="comment">% TOOLBAR CALLBACKS %</span>
1561 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1562 
1563 <span class="comment">% --------------------------------------------------------------------</span>
1564 <a name="_sub50" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1565 <span class="comment">% Read Files into Data Structure using tfile.</span>
1566 
1567 <span class="comment">% Get the Application data:</span>
1568 <span class="comment">% -------------------------</span>
1569 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1570 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1571 
1572 <span class="comment">% Ask the user to select files:</span>
1573 <span class="comment">% -----------------------------</span>
1574 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1575 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1576     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1577     current_file, <span class="keyword">...</span>
1578     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1579 
1580 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1581     guiparams.data_folder = pathname;
1582     <span class="keyword">if</span> ischar(filename)
1583         filename = {filename};
1584     <span class="keyword">end</span>
1585     guiparams.data_files = filename;
1586     guiparams.mat_file = <span class="string">''</span>;
1587     
<<<<<<< .mine
1588     <span class="comment">% Push messages to Log Window:</span>
1589     <span class="comment">% ----------------------------</span>
1590     log_text = {<span class="keyword">...</span>
1591         <span class="string">''</span>;<span class="keyword">...</span>
1592         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1593         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1594         guiparams.data_folder;
1595         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1596         char(filename)};
1597     statusLogging(handles.LogWindow, log_text)
1598     
1599     <span class="comment">% Read the file(s)</span>
1600     <span class="comment">% ----------------</span>
1601     [~,~,savefile,A,z] = <span class="keyword">...</span>
1602         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1603     guiparams.savefile = savefile;
1604     guiparams.A        = A;
1605     guiparams.z        = z;
1606     
1607     
1608     <span class="comment">% Set the vertical grid node spacing</span>
1609     <span class="comment">% ----------------------------------</span>
1610     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
1611     <span class="comment">% Backwards compatible</span>
1612     <span class="keyword">if</span> A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
1613         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(A(1).Sup.binSize_cm(1))/100)
1614         guiparams.vertical_grid_node_spacing = double(A(1).Sup.binSize_cm(1))/100;
1615     <span class="keyword">else</span> <span class="comment">% Older file, must be RR or M9</span>
1616         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
1617         guiparams.vertical_grid_node_spacing = 0.4;
1618     <span class="keyword">end</span>
1619     
1620     
1621     <span class="comment">% Save application data</span>
1622     <span class="comment">% ---------------------</span>
1623     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1624        
1625 <span class="comment">%</span>
1626 <span class="comment">%     % Preprocess the data:</span>
1627 <span class="comment">%     % --------------------</span>
1628 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1629 <span class="comment">%</span>
1630 <span class="comment">%     % Push messages to Log Window:</span>
1631 <span class="comment">%     % ----------------------------</span>
1632 <span class="comment">%     log_text = {...</span>
1633 <span class="comment">%         '   Preprocessing complete.';...</span>
1634 <span class="comment">%         '   Begin Data Processing...'};</span>
1635 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1636 <span class="comment">%</span>
1637 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1638 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1639 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1640 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1641 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1642 <span class="comment">%</span>
1643 <span class="comment">%     % Push messages to Log Window:</span>
1644 <span class="comment">%     % ----------------------------</span>
1645 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1646 <span class="comment">%</span>
1647 <span class="comment">%     % Store the data:</span>
1648 <span class="comment">%     % ---------------</span>
1649 <span class="comment">%     guiparams.z = z;</span>
1650 <span class="comment">%     guiparams.A = A;</span>
1651 <span class="comment">%     guiparams.V = V;</span>
1652 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1653     
1654           
1655     <span class="comment">% Update the GUI:</span>
1656     <span class="comment">% ---------------</span>
1657     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1658     
1659     <span class="comment">% If data are RG or SP, set vertical grid node spacing to bin size</span>
1660     
1661 <span class="keyword">end</span>
1662 <span class="comment">% [EOF] loadDataCallback</span>
1663 
1664 
1665 
1666 <span class="comment">% --------------------------------------------------------------------</span>
1667 <a name="_sub51" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1668 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1669 
1670 <span class="comment">% Get the Application data:</span>
1671 <span class="comment">% -------------------------</span>
1672 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1673 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1674 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1675 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1676 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1677 
1678 [the_file,the_path] = <span class="keyword">...</span>
1679     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1680     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1681     fullfile(guiparams.mat_path,guiparams.savefile));
1682 
1683 <span class="comment">% Save the processed data to a MAT file:</span>
1684 <span class="comment">% --------------------------------------</span>
1685 <span class="keyword">if</span> ischar(the_file)
1686     guiparams.mat_path = the_path;
1687     guiparams.mat_file = the_file;
1688     guiparams.savefile = the_file;
1689     
1690     <span class="comment">% Re-store the Application data:</span>
1691     <span class="comment">% ------------------------------</span>
1692     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1693     
1694     <span class="comment">% Update the preferences:</span>
1695     <span class="comment">% -----------------------</span>
1696     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1697     guiprefs.mat_path = the_path;
1698     guiprefs.mat_file = the_file;
1699     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1700     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1701     
1702     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1703     savefile = fullfile(pathstr,[filename extension]);
1704     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1705     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1706     log_text = {<span class="keyword">...</span>
1707         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1708         savefile};
1709     statusLogging(handles.LogWindow,log_text)
1710     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1711 <span class="keyword">end</span>
1712 
1713 <span class="comment">% [EOF] saveDataCallback</span>
1714 
1715 
1716 <span class="comment">% --------------------------------------------------------------------</span>
1717 <a name="_sub52" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1718 
1719 <span class="comment">% Get the Application data:</span>
1720 <span class="comment">% -------------------------</span>
1721 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1722 z   = guiparams.z;
1723 A   = guiparams.A;
1724 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1725 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1726 
1727 <span class="comment">% Compute multibeam bathymetry:</span>
1728 <span class="comment">% -----------------------------</span>
1729 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1730 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1731 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1732     guiparams.beam_angle, <span class="keyword">...</span>
1733     guiparams.magnetic_variation, <span class="keyword">...</span>
1734     guiparams.wse, <span class="keyword">...</span>
1735     guiparams.output_auxiliary_data);
1736 
1737 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1738 
1739 <span class="comment">% [EOF] saveBathymetryCallback</span>
1740 
1741 <span class="comment">% --------------------------------------------------------------------</span>
1742 <a name="_sub53" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1743 
1744 <span class="comment">% Get the Application data:</span>
1745 <span class="comment">% -------------------------</span>
1746 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1747 
1748 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1749     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1750     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1751     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1752     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1753     handles.figure1);
1754 
1755 <span class="comment">% Update the GUI:</span>
1756 <span class="comment">% ---------------</span>
1757 <span class="keyword">if</span> guiparams.english_units
1758     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1759     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1760 <span class="keyword">else</span>
1761     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1762     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1763 <span class="keyword">end</span>
1764 
1765 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1766     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1767     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1768 <span class="keyword">else</span>
1769     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1770     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1771 <span class="keyword">end</span>
1772 
1773 <span class="keyword">if</span> guiparams.presentation
1774     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1775 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1776 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1777 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1778 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1779 <span class="keyword">else</span>
1780     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1781 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1782 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1783 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1784 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1785 <span class="keyword">end</span>
1786 
1787 <span class="comment">% Re-store the Application data:</span>
1788 <span class="comment">% ------------------------------</span>
1789 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1790 
1791 <span class="comment">% [EOF] plottingParametersCallback</span>
1792 
1793 
1794 <span class="comment">% --------------------------------------------------------------------</span>
1795 <a name="_sub54" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1796 
1797 <span class="comment">% Get the Application data:</span>
1798 <span class="comment">% -------------------------</span>
1799 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1800 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1801 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1802 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1803 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
=======
1588     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1589     
1590    
1591     
1592     <span class="comment">% Update the preferences:</span>
1593     <span class="comment">% -----------------------</span>
1594     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1595     guiprefs.ascii_path = pathname;
1596     guiprefs.ascii_file = filename;
1597     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1598     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1599     
1600     <span class="comment">% Push messages to Log Window:</span>
1601     <span class="comment">% ----------------------------</span>
1602     log_text = {<span class="keyword">...</span>
1603         <span class="string">''</span>;<span class="keyword">...</span>
1604         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1605         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1606         guiparams.data_folder;
1607         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1608         char(filename)};
1609     statusLogging(handles.LogWindow, log_text)
1610     
1611     <span class="comment">% Read the file(s)</span>
1612     <span class="comment">% ----------------</span>
1613     [~,~,savefile,A,z] = <span class="keyword">...</span>
1614         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1615     guiparams.savefile = savefile;
1616     guiparams.A        = A;
1617     guiparams.z        = z;
1618     
1619     
1620     <span class="comment">% Set the vertical grid node spacing</span>
1621     <span class="comment">% ----------------------------------</span>
1622     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
1623     <span class="comment">% Backwards compatible</span>
1624     <span class="keyword">if</span> A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
1625         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(A(1).Sup.binSize_cm(1))/100)
1626         guiparams.vertical_grid_node_spacing = double(A(1).Sup.binSize_cm(1))/100;
1627     <span class="keyword">else</span> <span class="comment">% Older file, must be RR or M9</span>
1628         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
1629         guiparams.vertical_grid_node_spacing = 0.4;
1630     <span class="keyword">end</span>
1631     
1632     
1633     <span class="comment">% Save application data</span>
1634     <span class="comment">% ---------------------</span>
1635     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1636        
1637 <span class="comment">%</span>
1638 <span class="comment">%     % Preprocess the data:</span>
1639 <span class="comment">%     % --------------------</span>
1640 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1641 <span class="comment">%</span>
1642 <span class="comment">%     % Push messages to Log Window:</span>
1643 <span class="comment">%     % ----------------------------</span>
1644 <span class="comment">%     log_text = {...</span>
1645 <span class="comment">%         '   Preprocessing complete.';...</span>
1646 <span class="comment">%         '   Begin Data Processing...'};</span>
1647 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1648 <span class="comment">%</span>
1649 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1650 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1651 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1652 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1653 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1654 <span class="comment">%</span>
1655 <span class="comment">%     % Push messages to Log Window:</span>
1656 <span class="comment">%     % ----------------------------</span>
1657 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1658 <span class="comment">%</span>
1659 <span class="comment">%     % Store the data:</span>
1660 <span class="comment">%     % ---------------</span>
1661 <span class="comment">%     guiparams.z = z;</span>
1662 <span class="comment">%     guiparams.A = A;</span>
1663 <span class="comment">%     guiparams.V = V;</span>
1664 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1665     
1666           
1667     <span class="comment">% Update the GUI:</span>
1668     <span class="comment">% ---------------</span>
1669     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1670     
1671     <span class="comment">% If data are RG or SP, set vertical grid node spacing to bin size</span>
1672     
1673 <span class="keyword">end</span>
1674 <span class="comment">% [EOF] loadDataCallback</span>
1675 
1676 
1677 
1678 <span class="comment">% --------------------------------------------------------------------</span>
1679 <a name="_sub51" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1680 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1681 
1682 <span class="comment">% Get the Application data:</span>
1683 <span class="comment">% -------------------------</span>
1684 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1685 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1686 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1687 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1688 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1689 
1690 [the_file,the_path] = <span class="keyword">...</span>
1691     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1692     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1693     fullfile(guiparams.mat_path,guiparams.savefile));
1694 
1695 <span class="comment">% Save the processed data to a MAT file:</span>
1696 <span class="comment">% --------------------------------------</span>
1697 <span class="keyword">if</span> ischar(the_file)
1698     guiparams.mat_path = the_path;
1699     guiparams.mat_file = the_file;
1700     guiparams.savefile = the_file;
1701     
1702     <span class="comment">% Re-store the Application data:</span>
1703     <span class="comment">% ------------------------------</span>
1704     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1705     
1706     <span class="comment">% Update the preferences:</span>
1707     <span class="comment">% -----------------------</span>
1708     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1709     guiprefs.mat_path = the_path;
1710     guiprefs.mat_file = the_file;
1711     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1712     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1713     
1714     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1715     savefile = fullfile(pathstr,[filename extension]);
1716     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1717     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1718     log_text = {<span class="keyword">...</span>
1719         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1720         savefile};
1721     statusLogging(handles.LogWindow,log_text)
1722     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1723 <span class="keyword">end</span>
1724 
1725 <span class="comment">% [EOF] saveDataCallback</span>
1726 
1727 
1728 <span class="comment">% --------------------------------------------------------------------</span>
1729 <a name="_sub52" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1730 
1731 <span class="comment">% Get the Application data:</span>
1732 <span class="comment">% -------------------------</span>
1733 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1734 z   = guiparams.z;
1735 A   = guiparams.A;
1736 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1737 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1738 
1739 <span class="comment">% Compute multibeam bathymetry:</span>
1740 <span class="comment">% -----------------------------</span>
1741 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1742 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1743 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1744     guiparams.beam_angle, <span class="keyword">...</span>
1745     guiparams.magnetic_variation, <span class="keyword">...</span>
1746     guiparams.wse, <span class="keyword">...</span>
1747     guiparams.output_auxiliary_data);
1748 
1749 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1750 
1751 <span class="comment">% [EOF] saveBathymetryCallback</span>
1752 
1753 <span class="comment">% --------------------------------------------------------------------</span>
1754 <a name="_sub53" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1755 
1756 <span class="comment">% Get the Application data:</span>
1757 <span class="comment">% -------------------------</span>
1758 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1759 
1760 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1761     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1762     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1763     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1764     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1765     handles.figure1);
1766 
1767 <span class="comment">% Update the GUI:</span>
1768 <span class="comment">% ---------------</span>
1769 <span class="keyword">if</span> guiparams.english_units
1770     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1771     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1772 <span class="keyword">else</span>
1773     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1774     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1775 <span class="keyword">end</span>
1776 
1777 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1778     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1779     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1780 <span class="keyword">else</span>
1781     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1782     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1783 <span class="keyword">end</span>
1784 
1785 <span class="keyword">if</span> guiparams.presentation
1786     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1787 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1788 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1789 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1790 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1791 <span class="keyword">else</span>
1792     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1793 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1794 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1795 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1796 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1797 <span class="keyword">end</span>
1798 
1799 <span class="comment">% Re-store the Application data:</span>
1800 <span class="comment">% ------------------------------</span>
1801 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1802 
1803 <span class="comment">% [EOF] plottingParametersCallback</span>
>>>>>>> .r93
1804 
<<<<<<< .mine
1805 <span class="comment">% [EOF] processingParametersCallback</span>
1806 
1807 
1808 <span class="comment">% --------------------------------------------------------------------</span>
1809 <a name="_sub55" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1810 <span class="comment">% Plot 1</span>
1811 
1812 <span class="comment">% Get the Application data:</span>
1813 <span class="comment">% -------------------------</span>
1814 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1815 z = guiparams.z;
1816 A = guiparams.A;
1817 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1818 <span class="comment">% Map = guiparams.Map;</span>
1819 setends = guiparams.set_cross_section_endpoints;
1820 
1821 <span class="comment">% Preprocess the data:</span>
1822 <span class="comment">% --------------------</span>
1823 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1824 
1825 <span class="comment">% Push messages to Log Window:</span>
1826 <span class="comment">% ----------------------------</span>
1827 log_text = {<span class="keyword">...</span>
1828     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1829     <span class="string">'   Begin Data Processing...'</span>};
1830 statusLogging(handles.LogWindow, log_text)
1831 
1832 <span class="comment">% Process the transects:</span>
1833 <span class="comment">% ----------------------</span>
1834 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1835 A(1).vgns = guiparams.vertical_grid_node_spacing;
1836 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1837 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1838     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1839 
1840 <span class="comment">% Compute the smoothed variables</span>
1841 <span class="comment">% ------------------------------</span>
1842 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1843 <span class="comment">% runtime.</span>
1844 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1845     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1846     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1847     guiparams.vertical_smoothing_window);
1848 
1849 <span class="comment">% Push messages to Log Window:</span>
1850 <span class="comment">% ----------------------------</span>
1851 statusLogging(handles.LogWindow, processing_log_text)
1852 
1853 <span class="comment">% Store the data:</span>
1854 <span class="comment">% ---------------</span>
1855 guiparams.z = z;
1856 guiparams.A = A;
1857 guiparams.V = V;
1858 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1859 
1860 <span class="comment">% Push messages to Log Window:</span>
1861 <span class="comment">% ----------------------------</span>
1862 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1863 statusLogging(handles.LogWindow, log_text)
1864 
1865 <span class="comment">% Create or replot the Shiptracks</span>
1866 <span class="comment">% -------------------------------</span>
1867 <span class="comment">% Grab the axes to the plot</span>
1868 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1869 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1870 
1871 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1872 <span class="comment">% New plot display window</span>
1873 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1874 <span class="comment">% h = figure(1); clf</span>
1875 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
=======
1805 
1806 <span class="comment">% --------------------------------------------------------------------</span>
1807 <a name="_sub54" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1808 
1809 <span class="comment">% Get the Application data:</span>
1810 <span class="comment">% -------------------------</span>
1811 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1812 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1813 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1814 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1815 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1816 
1817 <span class="comment">% [EOF] processingParametersCallback</span>
1818 
1819 
1820 <span class="comment">% --------------------------------------------------------------------</span>
1821 <a name="_sub55" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1822 <span class="comment">% Plot 1</span>
1823 
1824 <span class="comment">% Get the Application data:</span>
1825 <span class="comment">% -------------------------</span>
1826 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1827 z = guiparams.z;
1828 A = guiparams.A;
1829 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1830 <span class="comment">% Map = guiparams.Map;</span>
1831 setends = guiparams.set_cross_section_endpoints;
1832 
1833 <span class="comment">% Preprocess the data:</span>
1834 <span class="comment">% --------------------</span>
1835 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1836 
1837 <span class="comment">% Push messages to Log Window:</span>
1838 <span class="comment">% ----------------------------</span>
1839 log_text = {<span class="keyword">...</span>
1840     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1841     <span class="string">'   Begin Data Processing...'</span>};
1842 statusLogging(handles.LogWindow, log_text)
1843 
1844 <span class="comment">% Process the transects:</span>
1845 <span class="comment">% ----------------------</span>
1846 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1847 A(1).vgns = guiparams.vertical_grid_node_spacing;
1848 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1849 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1850     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1851 
1852 <span class="comment">% Compute the smoothed variables</span>
1853 <span class="comment">% ------------------------------</span>
1854 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1855 <span class="comment">% runtime.</span>
1856 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1857     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1858     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1859     guiparams.vertical_smoothing_window);
1860 
1861 <span class="comment">% Push messages to Log Window:</span>
1862 <span class="comment">% ----------------------------</span>
1863 statusLogging(handles.LogWindow, processing_log_text)
1864 
1865 <span class="comment">% Store the data:</span>
1866 <span class="comment">% ---------------</span>
1867 guiparams.z = z;
1868 guiparams.A = A;
1869 guiparams.V = V;
1870 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1871 
1872 <span class="comment">% Push messages to Log Window:</span>
1873 <span class="comment">% ----------------------------</span>
1874 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1875 statusLogging(handles.LogWindow, log_text)
>>>>>>> .r93
1876 
<<<<<<< .mine
1877 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1878 
1879 
1880 <span class="comment">% --------------------------------------------------------------------</span>
1881 <a name="_sub56" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1882 <span class="comment">% Plot 2</span>
1883 
1884 <span class="comment">% Get the Application data:</span>
1885 <span class="comment">% -------------------------</span>
1886 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1887 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1888 
1889 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1890     <span class="comment">% Push messages to Log Window:</span>
1891     <span class="comment">% ----------------------------</span>
1892     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1893     statusLogging(handles.LogWindow, log_text)
1894     
1895        
1896     <span class="comment">% Push plotting parameters to log window:</span>
1897     <span class="comment">% ---------------------------------------</span>
1898     log_text = {<span class="keyword">...</span>
1899         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1900         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1901         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1902         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1903         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1904         };
1905     statusLogging(handles.LogWindow, log_text)
1906     
1907     <span class="comment">% Plot the data:</span>
1908     <span class="comment">% --------------</span>
1909     z = [];
1910     A = [];
1911     V = [];
1912     Map = [];
1913     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1914     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1915         depth_range, <span class="keyword">...</span>
1916         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1917         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1918         guiparams.smoothing_window_size, <span class="keyword">...</span>
1919         guiparams.display_shoreline, <span class="keyword">...</span>
1920         guiparams.english_units, <span class="keyword">...</span>
1921         guiparams.mat_file, <span class="keyword">...</span>
1922         guiparams.mat_path); <span class="comment">% PLOT2</span>
1923     statusLogging(handles.LogWindow, log_text)
1924     
1925     <span class="comment">% Plot a Shoreline Map:</span>
1926     <span class="comment">% ---------------------</span>
1927     <span class="keyword">if</span> guiparams.display_shoreline
1928         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1929             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1930             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1931             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1932         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1933             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1934             Map.UTMe   = mapdata(:,1);
1935             Map.UTMn   = mapdata(:,2);
1936             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1937             <span class="comment">%Map.UTMzone = zone;</span>
1938         <span class="keyword">else</span>
1939             Map = [];
1940         <span class="keyword">end</span>
1941         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1942         log_text = {<span class="keyword">...</span>
1943             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1944             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1945             };
1946         statusLogging(handles.LogWindow, log_text)
1947     <span class="keyword">else</span>
1948         Map = [];
1949     <span class="keyword">end</span>
1950     
1951 <span class="keyword">else</span>
1952     z = guiparams.z;
1953     A = guiparams.A;
1954     <span class="comment">% V = guiparams.V;</span>
1955     Map = guiparams.Map;
1956     
1957     <span class="comment">% Push messages to Log Window:</span>
1958     <span class="comment">% ----------------------------</span>
1959     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
1960     statusLogging(handles.LogWindow, log_text)
1961     
1962         
1963     <span class="comment">% Preprocess the data:</span>
1964     <span class="comment">% --------------------</span>
1965     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1966     
1967     <span class="comment">% Process the transects:</span>
1968     <span class="comment">% ----------------------</span>
1969     A(1).hgns = guiparams.horizontal_grid_node_spacing;
1970     A(1).vgns = guiparams.vertical_grid_node_spacing;
1971     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1972     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1973         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1974     
1975     <span class="comment">% Compute the smoothed variables</span>
1976     <span class="comment">% ------------------------------</span>
1977     <span class="comment">% This is required so that the V struc is complete at any point during</span>
1978     <span class="comment">% runtime.</span>
1979     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1980         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1981         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1982         guiparams.vertical_smoothing_window);
1983     
1984     <span class="comment">% Push messages to Log Window:</span>
1985     <span class="comment">% ----------------------------</span>
1986     statusLogging(handles.LogWindow, processing_log_text)
1987     
1988     <span class="comment">% Plot the cross section:</span>
1989     <span class="comment">% -----------------------</span>
1990     log_text = {<span class="keyword">...</span>
1991         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1992         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1993         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1994         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1995         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1996         };
1997     statusLogging(handles.LogWindow, log_text)
1998     
1999     <span class="comment">% Plot the data:</span>
2000     <span class="comment">% --------------</span>
2001     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
2002     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
2003     
2004     
2005     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2006         depth_range, <span class="keyword">...</span>
2007         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2008         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2009         guiparams.smoothing_window_size, <span class="keyword">...</span>
2010         guiparams.display_shoreline, <span class="keyword">...</span>
2011         guiparams.english_units, <span class="keyword">...</span>
2012         guiparams.mat_file, <span class="keyword">...</span>
2013         guiparams.mat_path); <span class="comment">% PLOT2</span>
2014     statusLogging(handles.LogWindow, log_text)
2015     
2016     <span class="comment">% Plot a Shoreline Map:</span>
2017     <span class="comment">% ---------------------</span>
2018     <span class="keyword">if</span> guiparams.display_shoreline
2019         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2020             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2021             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2022             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2023         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2024             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2025             Map.UTMe   = mapdata(:,1);
2026             Map.UTMn   = mapdata(:,2);
2027             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2028             <span class="comment">%Map.UTMzone = zone;</span>
2029         <span class="keyword">else</span>
2030             Map = [];
2031         <span class="keyword">end</span>
2032         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2033         log_text = {<span class="keyword">...</span>
2034             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2035             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2036             };
2037         statusLogging(handles.LogWindow, log_text)
2038     <span class="keyword">else</span>
2039         Map = [];
2040     <span class="keyword">end</span>
2041     
2042 <span class="keyword">end</span>
2043 
2044 <span class="keyword">if</span> guiparams.add_background
2045     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
2046     statusLogging(handles.LogWindow, log_text)
2047 <span class="keyword">end</span>
2048 
2049 <span class="comment">% Update guiparams</span>
2050 <span class="comment">% ----------------</span>
2051 guiparams.z   = z;
2052 guiparams.A   = A;
2053 guiparams.V   = V;
2054 guiparams.Map = Map;
2055 guiparams.iric_anv_planview_data = PVdata;
2056 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
2057 
2058 <span class="comment">% Update preferences</span>
2059 <span class="comment">% ------------------</span>
2060 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2061 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
2062 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
2063 
2064 <span class="comment">% Force plot to be formated properly</span>
2065 <span class="comment">% ----------------------------------</span>
2066 <span class="keyword">if</span> guiparams.presentation
2067     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2068 <span class="keyword">else</span>
2069     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2070 <span class="keyword">end</span>
2071 <span class="keyword">switch</span> guiparams.renderer
2072     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2073         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2074     <span class="keyword">case</span> <span class="string">'painters'</span>
2075         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2076     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2077         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2078 <span class="keyword">end</span>
2079 
2080 <span class="comment">% Focus the figure</span>
2081 <span class="comment">% ----------------</span>
2082 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
2083 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2084     figure(hff)
2085 <span class="keyword">end</span>
2086 
2087 <span class="comment">% Start the Graphics Control Gui</span>
2088 <span class="comment">% ------------------------------</span>
2089 VMT_GraphicsControl
2090 
2091 <span class="comment">% [EOF] planviewPlotCallback</span>
2092 
2093 
2094 <span class="comment">% --------------------------------------------------------------------</span>
2095 <a name="_sub57" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
2096 <span class="comment">% Plot 3</span>
2097 
2098 <span class="comment">% Get the Application data:</span>
2099 <span class="comment">% -------------------------</span>
2100 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2101 z = guiparams.z;
2102 A = guiparams.A;
2103 <span class="comment">% V = guiparams.V;</span>
2104 <span class="comment">% Map = guiparams.Map;</span>
2105 
2106 <span class="comment">% Preprocess the data:</span>
2107 <span class="comment">% --------------------</span>
2108 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2109 
2110 <span class="comment">% Push messages to Log Window:</span>
2111 <span class="comment">% ----------------------------</span>
2112 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
2113 statusLogging(handles.LogWindow, log_text)
2114 
2115 <span class="comment">% Process the transects:</span>
2116 <span class="comment">% ----------------------</span>
2117 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2118 A(1).vgns = guiparams.vertical_grid_node_spacing;
2119 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2120 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2121     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2122 
2123 <span class="comment">% Push messages to Log Window:</span>
2124 <span class="comment">% ----------------------------</span>
2125 statusLogging(handles.LogWindow, processing_log_text)
2126 
2127 <span class="comment">% Plot the cross section:</span>
2128 <span class="comment">% -----------------------</span>
2129 log_text = {<span class="keyword">...</span>
2130     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
2131     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
2132     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
2133     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
2134     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
2135     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
2136     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
2137     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
2138     };
2139 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2140     log_text = vertcat(log_text, {<span class="keyword">...</span>
2141         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
2142         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
2143         });
2144 <span class="keyword">end</span>
2145 <span class="comment">% Push messages to Log Window:</span>
2146 <span class="comment">% ----------------------------</span>
2147 statusLogging(handles.LogWindow, log_text)
2148 
2149 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2150     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
2151 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
2152 <span class="comment">%         ...guiparams.contour, ...</span>
2153 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
2154 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
2155     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2156         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
2157         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2158         guiparams.vertical_smoothing_window);
2159     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
2160         guiparams.contour, <span class="keyword">...</span>
2161         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
2162         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2163         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
2164         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
2165         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
2166         guiparams.include_vertical_velocity, <span class="keyword">...</span>
2167         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2168     
2169 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
2170     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2171         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2172         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2173         guiparams.vertical_smoothing_window);
2174     
2175     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
2176         guiparams.contour, <span class="keyword">...</span>
2177         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2178         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
2179     
2180     guiparams.zmin = zmin;
2181     guiparams.zmax = zmax;
2182     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2183 <span class="keyword">end</span>
2184 
2185 <span class="comment">% Force plot to be formated properly</span>
2186 <span class="comment">% ----------------------------------</span>
2187 <span class="keyword">if</span> guiparams.presentation
2188     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2189 <span class="keyword">else</span>
2190     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2191 <span class="keyword">end</span>
2192 <span class="keyword">switch</span> guiparams.renderer
2193     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2194         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2195     <span class="keyword">case</span> <span class="string">'painters'</span>
2196         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2197     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2198         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2199 <span class="keyword">end</span>
2200 
2201 <span class="comment">% Focus the figure</span>
2202 <span class="comment">% ----------------</span>
2203 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
2204 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2205     figure(hff)
2206 <span class="keyword">end</span>
2207 
2208 <span class="comment">% Re-store the Application data:</span>
2209 <span class="comment">% ------------------------------</span>
2210 guiparams.V = V;
2211 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2212 
2213 <span class="comment">% Start the Graphics Control Gui</span>
2214 <span class="comment">% ------------------------------</span>
2215 VMT_GraphicsControl
2216 
2217 <span class="comment">% Push messages to Log Window:</span>
2218 <span class="comment">% ----------------------------</span>
2219 statusLogging(handles.LogWindow, plot_cont_log_text)
2220 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2221 
2222 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2223 
2224 
2225 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2226 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2227 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2228 
2229 <span class="comment">% --------------------------------------------------------------------</span>
2230 <a name="_sub58" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2231 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2232 
2233 <span class="comment">% Get the Application data:</span>
2234 <span class="comment">% -------------------------</span>
2235 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2236 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2237 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2238 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2239 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2240 
2241 [the_file,the_path] = <span class="keyword">...</span>
2242     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2243     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2244     fullfile(guiparams.mat_path,guiparams.savefile));
2245 
2246 <span class="comment">% Save the processed data to a MAT file:</span>
2247 <span class="comment">% --------------------------------------</span>
2248 <span class="keyword">if</span> ischar(the_file)
2249     guiparams.mat_path = the_path;
2250     guiparams.mat_file = the_file;
2251     guiparams.savefile = the_file;
2252     
2253     <span class="comment">% Re-store the Application data:</span>
2254     <span class="comment">% ------------------------------</span>
2255     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2256     
2257     <span class="comment">% Update the preferences:</span>
2258     <span class="comment">% -----------------------</span>
2259     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2260     guiprefs.mat_path = the_path;
2261     guiprefs.mat_file = the_file;
2262     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2263     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2264     
2265     [~,filename,extension] = fileparts(guiparams.savefile);
2266     savefile = [filename extension];
2267     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2268         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2269     disp(<span class="string">'Saving Processed Data File...'</span>)
2270     disp(savefile)
2271     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2272 <span class="keyword">end</span>
2273 
2274 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2275 
2276 
2277 <span class="comment">% --------------------------------------------------------------------</span>
2278 <a name="_sub59" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2279 
2280 <span class="comment">% Get the Application data:</span>
2281 <span class="comment">% -------------------------</span>
2282 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2283 <span class="comment">% z   = guiparams.z;</span>
2284 <span class="comment">% A   = guiparams.A;</span>
2285 V   = guiparams.V;
2286 <span class="comment">% Map = guiparams.Map;</span>
2287 
2288 [the_file,the_path] = <span class="keyword">...</span>
2289     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2290     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2291     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2292 
2293 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2294 <span class="comment">% ------------------------------------------</span>
2295 <span class="keyword">if</span> ischar(the_file)
2296     guiparams.tecplot_path = the_path;
2297     guiparams.tecplot_file = the_file;
2298     
2299     <span class="comment">% Re-store the Application data:</span>
2300     <span class="comment">% ------------------------------</span>
2301     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2302     
2303     <span class="comment">% Update the preferences:</span>
2304     <span class="comment">% -----------------------</span>
2305     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2306     guiprefs.tecplot_path = the_path;
2307     guiprefs.tecplot_file = the_file;
2308     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2309     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2310     
2311     <span class="comment">% Push to log window</span>
2312     <span class="comment">% ------------------</span>
2313     log_text = {<span class="keyword">...</span>
2314         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2315         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2316         the_path;<span class="keyword">...</span>
2317         [<span class="string">'Filename: '</span> the_file]};
2318     statusLogging(handles.LogWindow,log_text)
2319         
2320     <span class="keyword">if</span> isempty(V)
2321         A = guiparams.A;
2322         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2323         A(1).vgns = guiparams.vertical_grid_node_spacing;
2324         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2325         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2326             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2327             guiparams.unit_discharge_correction);
2328     <span class="keyword">end</span>
2329     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2330     
2331     <span class="comment">% Push to log window</span>
2332     <span class="comment">% ------------------</span>
2333     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2334     statusLogging(handles.LogWindow,log_text)
2335     
2336     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2337     
2338     <span class="comment">% Push to log window</span>
2339     <span class="comment">% ------------------</span>
2340     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2341     statusLogging(handles.LogWindow,log_text)
2342    
2343 <span class="keyword">end</span>
2344 
2345 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2346 
2347 
2348 <span class="comment">% --------------------------------------------------------------------</span>
2349 <a name="_sub60" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2350 
2351 <span class="comment">% Get the Application data:</span>
2352 <span class="comment">% -------------------------</span>
2353 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2354 <span class="comment">% z   = guiparams.z;</span>
2355 A   = guiparams.A;
2356 V   = guiparams.V;
2357 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2358 
2359 [the_file,the_path] = <span class="keyword">...</span>
2360     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2361     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2362     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2363 
2364 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2365 <span class="comment">% -----------------------------------------------------</span>
2366 <span class="keyword">if</span> ischar(the_file)
2367     guiparams.kmz_path = the_path;
2368     guiparams.kmz_file = the_file;
2369     
2370     <span class="comment">% Re-store the Application data:</span>
2371     <span class="comment">% ------------------------------</span>
2372     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2373     
2374     <span class="comment">% Update the preferences:</span>
2375     <span class="comment">% -----------------------</span>
2376     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2377     guiprefs.kmz_path = the_path;
2378     guiprefs.kmz_file = the_file;
2379     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2380     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2381     
2382     <span class="comment">%     if guiparams.display_shoreline</span>
2383     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2384     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2385     <span class="comment">%                             guiparams.vertical_offset);</span>
2386     <span class="comment">%     end</span>
2387     <span class="keyword">if</span> isempty(V)
2388         A = guiparams.A;
2389         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2390         A(1).vgns = guiparams.vertical_grid_node_spacing;
2391         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2392         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2393             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2394             guiparams.unit_discharge_correction);
2395     <span class="keyword">end</span>
2396     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2397         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2398         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2399         guiparams.vertical_offset);
2400 <span class="keyword">end</span>
2401 
2402 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2403 
2404 
2405 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2406 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2407 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2408 
2409 <span class="comment">% --------------------------------------------------------------------</span>
2410 <a name="_sub61" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2411 
2412 <span class="comment">% Get the Application data:</span>
2413 <span class="comment">% -------------------------</span>
2414 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2415 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2416 z = guiparams.z;
2417 A = guiparams.A;
2418 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2419 <span class="comment">% Map = guiparams.Map;</span>
2420 setends = guiparams.set_cross_section_endpoints;
2421 
2422 [the_file,the_path] = <span class="keyword">...</span>
2423     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2424     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2425     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2426     guiprefs.multibeambathymetry_file));
2427 
2428 <span class="keyword">if</span> ischar(the_file)
2429     guiparams.multibeambathymetry_path = the_path;
2430     guiparams.multibeambathymetry_file = the_file;
2431     
2432     <span class="comment">% Re-store the Application data:</span>
2433     <span class="comment">% ------------------------------</span>
2434     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2435     
2436     <span class="comment">% Update the preferences:</span>
2437     <span class="comment">% -----------------------</span>
2438     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2439     guiprefs.multibeambathymetry_path = the_path;
2440     guiprefs.multibeambathymetry_file = the_file;
2441     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2442     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2443     
2444     <span class="keyword">if</span> guiparams.output_auxiliary_data
2445     <span class="keyword">end</span>
2446     
2447     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2448     
2449     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2450         guiparams.multibeambathymetry_file);
2451     
2452     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2453         [<span class="string">'   '</span> savefile]};
2454     statusLogging(handles.LogWindow,log_text)
2455     
2456     <span class="comment">% Process the transects:</span>
2457     <span class="comment">% ----------------------</span>
2458     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2459     A(1).vgns = guiparams.vertical_grid_node_spacing;
2460     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2461     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2462         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2463     
2464     <span class="comment">% Compute the smoothed variables</span>
2465     <span class="comment">% ------------------------------</span>
2466     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2467     <span class="comment">% runtime.</span>
2468     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2469         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2470         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2471         guiparams.vertical_smoothing_window);
2472     
2473     <span class="comment">% Push messages to Log Window:</span>
2474     <span class="comment">% ----------------------------</span>
2475     statusLogging(handles.LogWindow, processing_log_text)
2476 
2477     
2478     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2479         guiparams.A, <span class="keyword">...</span>
2480         savefile, <span class="keyword">...</span>
2481         guiparams.beam_angle, <span class="keyword">...</span>
2482         guiparams.magnetic_variation, <span class="keyword">...</span>
2483         guiparams.wse, <span class="keyword">...</span>
2484         guiparams.output_auxiliary_data);
2485     
2486     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2487     
2488 <span class="keyword">end</span>
2489 
2490 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2491 
2492 
2493 <span class="comment">% --------------------------------------------------------------------</span>
2494 <a name="_sub62" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2495 <span class="comment">% Get the beam angle</span>
2496 
2497 <span class="comment">% Get the Application data:</span>
2498 <span class="comment">% -------------------------</span>
2499 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2500 
2501 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2502 <span class="comment">% ----------------------------------------------------------------</span>
2503 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2504 is_a_number = ~isnan(new_beam_angle);
2505 is_positive = new_beam_angle&gt;=0;
2506 
2507 <span class="comment">% Modify the Application data:</span>
2508 <span class="comment">% ----------------------------</span>
2509 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2510     guiparams.beam_angle = new_beam_angle;
2511     
2512     <span class="comment">% Re-store the Application data:</span>
2513     <span class="comment">% ------------------------------</span>
2514     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2515     
2516 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2517     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2518 <span class="keyword">end</span>
2519 
2520 <span class="comment">% [EOF] BeamAngle_Callback</span>
2521 
2522 
2523 <span class="comment">% --------------------------------------------------------------------</span>
2524 <a name="_sub63" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2525 <span class="comment">% Get the Magnetic Variation</span>
2526 
2527 <span class="comment">% Get the Application data:</span>
2528 <span class="comment">% -------------------------</span>
2529 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2530 
2531 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2532 <span class="comment">% ----------------------------------------------------------------</span>
2533 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2534 is_a_number = ~isnan(new_magnetic_variation);
2535 is_positive = new_magnetic_variation&gt;=0;
2536 
2537 <span class="comment">% Modify the Application data:</span>
2538 <span class="comment">% ----------------------------</span>
2539 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2540     guiparams.magnetic_variation = new_magnetic_variation;
2541     
2542     <span class="comment">% Re-store the Application data:</span>
2543     <span class="comment">% ------------------------------</span>
2544     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2545     
2546 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2547     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2548 <span class="keyword">end</span>
2549 
2550 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2551 
2552 
2553 <span class="comment">% --------------------------------------------------------------------</span>
2554 <a name="_sub64" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2555 
2556 <span class="comment">% Get the Application data:</span>
2557 <span class="comment">% -------------------------</span>
2558 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2559 
2560 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2561 <span class="comment">% ----------------------------------------------------------------</span>
2562 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2563 is_a_number = ~isnan(new_wse);
2564 is_positive = new_wse&gt;=0;
2565 
2566 <span class="comment">% Modify the Application data:</span>
2567 <span class="comment">% ----------------------------</span>
2568 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2569     guiparams.wse = new_wse;
2570     
2571     <span class="comment">% Re-store the Application data:</span>
2572     <span class="comment">% ------------------------------</span>
2573     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2574     
2575 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2576     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2577 <span class="keyword">end</span>
2578 
2579 <span class="comment">% [EOF] WSE_Callback</span>
2580 
2581 
2582 <span class="comment">% --------------------------------------------------------------------</span>
2583 <a name="_sub65" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2584 <span class="comment">% Bathymetry Auxiliary Data</span>
2585 
2586 <span class="comment">% Get the Application data:</span>
2587 <span class="comment">% -------------------------</span>
2588 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2589 
2590 <span class="comment">% Modify the Application data:</span>
2591 <span class="comment">% ----------------------------</span>
2592 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
=======
1877 <span class="comment">% Create or replot the Shiptracks</span>
1878 <span class="comment">% -------------------------------</span>
1879 <span class="comment">% Grab the axes to the plot</span>
1880 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1881 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1882 
1883 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1884 <span class="comment">% New plot display window</span>
1885 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1886 <span class="comment">% h = figure(1); clf</span>
1887 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1888 
1889 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1890 
1891 
1892 <span class="comment">% --------------------------------------------------------------------</span>
1893 <a name="_sub56" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1894 <span class="comment">% Plot 2</span>
1895 
1896 <span class="comment">% Get the Application data:</span>
1897 <span class="comment">% -------------------------</span>
1898 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1899 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1900 
1901 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1902     <span class="comment">% Push messages to Log Window:</span>
1903     <span class="comment">% ----------------------------</span>
1904     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1905     statusLogging(handles.LogWindow, log_text)
1906     
1907        
1908     <span class="comment">% Push plotting parameters to log window:</span>
1909     <span class="comment">% ---------------------------------------</span>
1910     log_text = {<span class="keyword">...</span>
1911         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1912         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1913         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1914         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1915         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1916         };
1917     statusLogging(handles.LogWindow, log_text)
1918     
1919     <span class="comment">% Plot the data:</span>
1920     <span class="comment">% --------------</span>
1921     z = [];
1922     A = [];
1923     V = [];
1924     Map = [];
1925     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1926     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1927         depth_range, <span class="keyword">...</span>
1928         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1929         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1930         guiparams.smoothing_window_size, <span class="keyword">...</span>
1931         guiparams.display_shoreline, <span class="keyword">...</span>
1932         guiparams.english_units, <span class="keyword">...</span>
1933         guiparams.mat_file, <span class="keyword">...</span>
1934         guiparams.mat_path); <span class="comment">% PLOT2</span>
1935     statusLogging(handles.LogWindow, log_text)
1936     
1937     <span class="comment">% Plot a Shoreline Map:</span>
1938     <span class="comment">% ---------------------</span>
1939     <span class="keyword">if</span> guiparams.display_shoreline
1940         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1941             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1942             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1943             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1944         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1945             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1946             Map.UTMe   = mapdata(:,1);
1947             Map.UTMn   = mapdata(:,2);
1948             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1949             <span class="comment">%Map.UTMzone = zone;</span>
1950         <span class="keyword">else</span>
1951             Map = [];
1952         <span class="keyword">end</span>
1953         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
1954         log_text = {<span class="keyword">...</span>
1955             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
1956             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
1957             };
1958         statusLogging(handles.LogWindow, log_text)
1959     <span class="keyword">else</span>
1960         Map = [];
1961     <span class="keyword">end</span>
1962     
1963 <span class="keyword">else</span>
1964     z = guiparams.z;
1965     A = guiparams.A;
1966     <span class="comment">% V = guiparams.V;</span>
1967     Map = guiparams.Map;
1968     
1969     <span class="comment">% Push messages to Log Window:</span>
1970     <span class="comment">% ----------------------------</span>
1971     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
1972     statusLogging(handles.LogWindow, log_text)
1973     
1974         
1975     <span class="comment">% Preprocess the data:</span>
1976     <span class="comment">% --------------------</span>
1977     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1978     
1979     <span class="comment">% Process the transects:</span>
1980     <span class="comment">% ----------------------</span>
1981     A(1).hgns = guiparams.horizontal_grid_node_spacing;
1982     A(1).vgns = guiparams.vertical_grid_node_spacing;
1983     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1984     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1985         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1986     
1987     <span class="comment">% Compute the smoothed variables</span>
1988     <span class="comment">% ------------------------------</span>
1989     <span class="comment">% This is required so that the V struc is complete at any point during</span>
1990     <span class="comment">% runtime.</span>
1991     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1992         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1993         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1994         guiparams.vertical_smoothing_window);
1995     
1996     <span class="comment">% Push messages to Log Window:</span>
1997     <span class="comment">% ----------------------------</span>
1998     statusLogging(handles.LogWindow, processing_log_text)
1999     
2000     <span class="comment">% Plot the cross section:</span>
2001     <span class="comment">% -----------------------</span>
2002     log_text = {<span class="keyword">...</span>
2003         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
2004         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
2005         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
2006         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
2007         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
2008         };
2009     statusLogging(handles.LogWindow, log_text)
2010     
2011     <span class="comment">% Plot the data:</span>
2012     <span class="comment">% --------------</span>
2013     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
2014     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
2015     
2016     
2017     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2018         depth_range, <span class="keyword">...</span>
2019         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2020         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2021         guiparams.smoothing_window_size, <span class="keyword">...</span>
2022         guiparams.display_shoreline, <span class="keyword">...</span>
2023         guiparams.english_units, <span class="keyword">...</span>
2024         guiparams.mat_file, <span class="keyword">...</span>
2025         guiparams.mat_path); <span class="comment">% PLOT2</span>
2026     statusLogging(handles.LogWindow, log_text)
2027     
2028     <span class="comment">% Plot a Shoreline Map:</span>
2029     <span class="comment">% ---------------------</span>
2030     <span class="keyword">if</span> guiparams.display_shoreline
2031         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2032             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2033             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2034             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2035         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2036             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2037             Map.UTMe   = mapdata(:,1);
2038             Map.UTMn   = mapdata(:,2);
2039             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2040             <span class="comment">%Map.UTMzone = zone;</span>
2041         <span class="keyword">else</span>
2042             Map = [];
2043         <span class="keyword">end</span>
2044         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2045         log_text = {<span class="keyword">...</span>
2046             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2047             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2048             };
2049         statusLogging(handles.LogWindow, log_text)
2050     <span class="keyword">else</span>
2051         Map = [];
2052     <span class="keyword">end</span>
2053     
2054 <span class="keyword">end</span>
2055 
2056 <span class="keyword">if</span> guiparams.add_background
2057     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
2058     statusLogging(handles.LogWindow, log_text)
2059 <span class="keyword">end</span>
2060 
2061 <span class="comment">% Update guiparams</span>
2062 <span class="comment">% ----------------</span>
2063 guiparams.z   = z;
2064 guiparams.A   = A;
2065 guiparams.V   = V;
2066 guiparams.Map = Map;
2067 guiparams.iric_anv_planview_data = PVdata;
2068 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
2069 
2070 <span class="comment">% Update preferences</span>
2071 <span class="comment">% ------------------</span>
2072 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2073 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
2074 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
2075 
2076 <span class="comment">% Force plot to be formated properly</span>
2077 <span class="comment">% ----------------------------------</span>
2078 <span class="keyword">if</span> guiparams.presentation
2079     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2080 <span class="keyword">else</span>
2081     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2082 <span class="keyword">end</span>
2083 <span class="keyword">switch</span> guiparams.renderer
2084     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2085         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2086     <span class="keyword">case</span> <span class="string">'painters'</span>
2087         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2088     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2089         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2090 <span class="keyword">end</span>
2091 
2092 <span class="comment">% Focus the figure</span>
2093 <span class="comment">% ----------------</span>
2094 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
2095 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2096     figure(hff)
2097 <span class="keyword">end</span>
2098 
2099 <span class="comment">% Start the Graphics Control Gui</span>
2100 <span class="comment">% ------------------------------</span>
2101 VMT_GraphicsControl
2102 
2103 <span class="comment">% [EOF] planviewPlotCallback</span>
2104 
2105 
2106 <span class="comment">% --------------------------------------------------------------------</span>
2107 <a name="_sub57" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
2108 <span class="comment">% Plot 3</span>
2109 
2110 <span class="comment">% Get the Application data:</span>
2111 <span class="comment">% -------------------------</span>
2112 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2113 z = guiparams.z;
2114 A = guiparams.A;
2115 <span class="comment">% V = guiparams.V;</span>
2116 <span class="comment">% Map = guiparams.Map;</span>
2117 
2118 <span class="comment">% Preprocess the data:</span>
2119 <span class="comment">% --------------------</span>
2120 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2121 
2122 <span class="comment">% Push messages to Log Window:</span>
2123 <span class="comment">% ----------------------------</span>
2124 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
2125 statusLogging(handles.LogWindow, log_text)
2126 
2127 <span class="comment">% Process the transects:</span>
2128 <span class="comment">% ----------------------</span>
2129 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2130 A(1).vgns = guiparams.vertical_grid_node_spacing;
2131 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2132 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2133     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2134 
2135 <span class="comment">% Push messages to Log Window:</span>
2136 <span class="comment">% ----------------------------</span>
2137 statusLogging(handles.LogWindow, processing_log_text)
2138 
2139 <span class="comment">% Plot the cross section:</span>
2140 <span class="comment">% -----------------------</span>
2141 log_text = {<span class="keyword">...</span>
2142     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
2143     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
2144     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
2145     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
2146     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
2147     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
2148     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
2149     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
2150     };
2151 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2152     log_text = vertcat(log_text, {<span class="keyword">...</span>
2153         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
2154         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
2155         });
2156 <span class="keyword">end</span>
2157 <span class="comment">% Push messages to Log Window:</span>
2158 <span class="comment">% ----------------------------</span>
2159 statusLogging(handles.LogWindow, log_text)
2160 
2161 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2162     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
2163 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
2164 <span class="comment">%         ...guiparams.contour, ...</span>
2165 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
2166 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
2167     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2168         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
2169         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2170         guiparams.vertical_smoothing_window);
2171     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
2172         guiparams.contour, <span class="keyword">...</span>
2173         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
2174         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2175         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
2176         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
2177         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
2178         guiparams.include_vertical_velocity, <span class="keyword">...</span>
2179         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2180     
2181 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
2182     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2183         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2184         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2185         guiparams.vertical_smoothing_window);
2186     
2187     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
2188         guiparams.contour, <span class="keyword">...</span>
2189         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2190         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
2191     
2192     guiparams.zmin = zmin;
2193     guiparams.zmax = zmax;
2194     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2195 <span class="keyword">end</span>
2196 
2197 <span class="comment">% Force plot to be formated properly</span>
2198 <span class="comment">% ----------------------------------</span>
2199 <span class="keyword">if</span> guiparams.presentation
2200     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2201 <span class="keyword">else</span>
2202     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2203 <span class="keyword">end</span>
2204 <span class="keyword">switch</span> guiparams.renderer
2205     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2206         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2207     <span class="keyword">case</span> <span class="string">'painters'</span>
2208         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2209     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2210         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2211 <span class="keyword">end</span>
2212 
2213 <span class="comment">% Focus the figure</span>
2214 <span class="comment">% ----------------</span>
2215 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
2216 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2217     figure(hff)
2218 <span class="keyword">end</span>
2219 
2220 <span class="comment">% Re-store the Application data:</span>
2221 <span class="comment">% ------------------------------</span>
2222 guiparams.V = V;
2223 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2224 
2225 <span class="comment">% Start the Graphics Control Gui</span>
2226 <span class="comment">% ------------------------------</span>
2227 VMT_GraphicsControl
2228 
2229 <span class="comment">% Push messages to Log Window:</span>
2230 <span class="comment">% ----------------------------</span>
2231 statusLogging(handles.LogWindow, plot_cont_log_text)
2232 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2233 
2234 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2235 
2236 
2237 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2238 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2239 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2240 
2241 <span class="comment">% --------------------------------------------------------------------</span>
2242 <a name="_sub58" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2243 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2244 
2245 <span class="comment">% Get the Application data:</span>
2246 <span class="comment">% -------------------------</span>
2247 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2248 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2249 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2250 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2251 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2252 
2253 [the_file,the_path] = <span class="keyword">...</span>
2254     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2255     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2256     fullfile(guiparams.mat_path,guiparams.savefile));
2257 
2258 <span class="comment">% Save the processed data to a MAT file:</span>
2259 <span class="comment">% --------------------------------------</span>
2260 <span class="keyword">if</span> ischar(the_file)
2261     guiparams.mat_path = the_path;
2262     guiparams.mat_file = the_file;
2263     guiparams.savefile = the_file;
2264     
2265     <span class="comment">% Re-store the Application data:</span>
2266     <span class="comment">% ------------------------------</span>
2267     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2268     
2269     <span class="comment">% Update the preferences:</span>
2270     <span class="comment">% -----------------------</span>
2271     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2272     guiprefs.mat_path = the_path;
2273     guiprefs.mat_file = the_file;
2274     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2275     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2276     
2277     [~,filename,extension] = fileparts(guiparams.savefile);
2278     savefile = [filename extension];
2279     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2280         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2281     disp(<span class="string">'Saving Processed Data File...'</span>)
2282     disp(savefile)
2283     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2284 <span class="keyword">end</span>
2285 
2286 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2287 
2288 
2289 <span class="comment">% --------------------------------------------------------------------</span>
2290 <a name="_sub59" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2291 
2292 <span class="comment">% Get the Application data:</span>
2293 <span class="comment">% -------------------------</span>
2294 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2295 <span class="comment">% z   = guiparams.z;</span>
2296 <span class="comment">% A   = guiparams.A;</span>
2297 V   = guiparams.V;
2298 <span class="comment">% Map = guiparams.Map;</span>
2299 
2300 [the_file,the_path] = <span class="keyword">...</span>
2301     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2302     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2303     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2304 
2305 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2306 <span class="comment">% ------------------------------------------</span>
2307 <span class="keyword">if</span> ischar(the_file)
2308     guiparams.tecplot_path = the_path;
2309     guiparams.tecplot_file = the_file;
2310     
2311     <span class="comment">% Re-store the Application data:</span>
2312     <span class="comment">% ------------------------------</span>
2313     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2314     
2315     <span class="comment">% Update the preferences:</span>
2316     <span class="comment">% -----------------------</span>
2317     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2318     guiprefs.tecplot_path = the_path;
2319     guiprefs.tecplot_file = the_file;
2320     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2321     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2322     
2323     <span class="comment">% Push to log window</span>
2324     <span class="comment">% ------------------</span>
2325     log_text = {<span class="keyword">...</span>
2326         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2327         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2328         the_path;<span class="keyword">...</span>
2329         [<span class="string">'Filename: '</span> the_file]};
2330     statusLogging(handles.LogWindow,log_text)
2331         
2332     <span class="keyword">if</span> isempty(V)
2333         A = guiparams.A;
2334         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2335         A(1).vgns = guiparams.vertical_grid_node_spacing;
2336         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2337         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2338             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2339             guiparams.unit_discharge_correction);
2340     <span class="keyword">end</span>
2341     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2342     
2343     <span class="comment">% Push to log window</span>
2344     <span class="comment">% ------------------</span>
2345     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2346     statusLogging(handles.LogWindow,log_text)
2347     
2348     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2349     
2350     <span class="comment">% Push to log window</span>
2351     <span class="comment">% ------------------</span>
2352     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2353     statusLogging(handles.LogWindow,log_text)
2354    
2355 <span class="keyword">end</span>
2356 
2357 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2358 
2359 
2360 <span class="comment">% --------------------------------------------------------------------</span>
2361 <a name="_sub60" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2362 
2363 <span class="comment">% Get the Application data:</span>
2364 <span class="comment">% -------------------------</span>
2365 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2366 <span class="comment">% z   = guiparams.z;</span>
2367 A   = guiparams.A;
2368 V   = guiparams.V;
2369 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2370 
2371 [the_file,the_path] = <span class="keyword">...</span>
2372     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2373     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2374     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2375 
2376 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2377 <span class="comment">% -----------------------------------------------------</span>
2378 <span class="keyword">if</span> ischar(the_file)
2379     guiparams.kmz_path = the_path;
2380     guiparams.kmz_file = the_file;
2381     
2382     <span class="comment">% Re-store the Application data:</span>
2383     <span class="comment">% ------------------------------</span>
2384     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2385     
2386     <span class="comment">% Update the preferences:</span>
2387     <span class="comment">% -----------------------</span>
2388     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2389     guiprefs.kmz_path = the_path;
2390     guiprefs.kmz_file = the_file;
2391     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2392     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2393     
2394     <span class="comment">%     if guiparams.display_shoreline</span>
2395     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2396     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2397     <span class="comment">%                             guiparams.vertical_offset);</span>
2398     <span class="comment">%     end</span>
2399     <span class="keyword">if</span> isempty(V)
2400         A = guiparams.A;
2401         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2402         A(1).vgns = guiparams.vertical_grid_node_spacing;
2403         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2404         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2405             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2406             guiparams.unit_discharge_correction);
2407     <span class="keyword">end</span>
2408     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2409         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2410         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2411         guiparams.vertical_offset);
2412 <span class="keyword">end</span>
2413 
2414 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2415 
2416 
2417 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2418 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2419 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2420 
2421 <span class="comment">% --------------------------------------------------------------------</span>
2422 <a name="_sub61" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2423 
2424 <span class="comment">% Get the Application data:</span>
2425 <span class="comment">% -------------------------</span>
2426 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2427 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2428 z = guiparams.z;
2429 A = guiparams.A;
2430 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2431 <span class="comment">% Map = guiparams.Map;</span>
2432 setends = guiparams.set_cross_section_endpoints;
2433 
2434 [the_file,the_path] = <span class="keyword">...</span>
2435     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2436     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2437     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2438     guiprefs.multibeambathymetry_file));
2439 
2440 <span class="keyword">if</span> ischar(the_file)
2441     guiparams.multibeambathymetry_path = the_path;
2442     guiparams.multibeambathymetry_file = the_file;
2443     
2444     <span class="comment">% Re-store the Application data:</span>
2445     <span class="comment">% ------------------------------</span>
2446     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2447     
2448     <span class="comment">% Update the preferences:</span>
2449     <span class="comment">% -----------------------</span>
2450     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2451     guiprefs.multibeambathymetry_path = the_path;
2452     guiprefs.multibeambathymetry_file = the_file;
2453     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2454     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2455     
2456     <span class="keyword">if</span> guiparams.output_auxiliary_data
2457     <span class="keyword">end</span>
2458     
2459     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2460     
2461     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2462         guiparams.multibeambathymetry_file);
2463     
2464     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2465         [<span class="string">'   '</span> savefile]};
2466     statusLogging(handles.LogWindow,log_text)
2467     
2468     <span class="comment">% Process the transects:</span>
2469     <span class="comment">% ----------------------</span>
2470     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2471     A(1).vgns = guiparams.vertical_grid_node_spacing;
2472     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2473     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2474         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2475     
2476     <span class="comment">% Compute the smoothed variables</span>
2477     <span class="comment">% ------------------------------</span>
2478     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2479     <span class="comment">% runtime.</span>
2480     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2481         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2482         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2483         guiparams.vertical_smoothing_window);
2484     
2485     <span class="comment">% Push messages to Log Window:</span>
2486     <span class="comment">% ----------------------------</span>
2487     statusLogging(handles.LogWindow, processing_log_text)
2488 
2489     
2490     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2491         guiparams.A, <span class="keyword">...</span>
2492         savefile, <span class="keyword">...</span>
2493         guiparams.beam_angle, <span class="keyword">...</span>
2494         guiparams.magnetic_variation, <span class="keyword">...</span>
2495         guiparams.wse, <span class="keyword">...</span>
2496         guiparams.output_auxiliary_data);
2497     
2498     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2499     
2500 <span class="keyword">end</span>
2501 
2502 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2503 
2504 
2505 <span class="comment">% --------------------------------------------------------------------</span>
2506 <a name="_sub62" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2507 <span class="comment">% Get the beam angle</span>
2508 
2509 <span class="comment">% Get the Application data:</span>
2510 <span class="comment">% -------------------------</span>
2511 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2512 
2513 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2514 <span class="comment">% ----------------------------------------------------------------</span>
2515 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2516 is_a_number = ~isnan(new_beam_angle);
2517 is_positive = new_beam_angle&gt;=0;
2518 
2519 <span class="comment">% Modify the Application data:</span>
2520 <span class="comment">% ----------------------------</span>
2521 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2522     guiparams.beam_angle = new_beam_angle;
2523     
2524     <span class="comment">% Re-store the Application data:</span>
2525     <span class="comment">% ------------------------------</span>
2526     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2527     
2528 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2529     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2530 <span class="keyword">end</span>
2531 
2532 <span class="comment">% [EOF] BeamAngle_Callback</span>
2533 
2534 
2535 <span class="comment">% --------------------------------------------------------------------</span>
2536 <a name="_sub63" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2537 <span class="comment">% Get the Magnetic Variation</span>
2538 
2539 <span class="comment">% Get the Application data:</span>
2540 <span class="comment">% -------------------------</span>
2541 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2542 
2543 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2544 <span class="comment">% ----------------------------------------------------------------</span>
2545 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2546 is_a_number = ~isnan(new_magnetic_variation);
2547 is_positive = new_magnetic_variation&gt;=0;
2548 
2549 <span class="comment">% Modify the Application data:</span>
2550 <span class="comment">% ----------------------------</span>
2551 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2552     guiparams.magnetic_variation = new_magnetic_variation;
2553     
2554     <span class="comment">% Re-store the Application data:</span>
2555     <span class="comment">% ------------------------------</span>
2556     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2557     
2558 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2559     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2560 <span class="keyword">end</span>
2561 
2562 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2563 
2564 
2565 <span class="comment">% --------------------------------------------------------------------</span>
2566 <a name="_sub64" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2567 
2568 <span class="comment">% Get the Application data:</span>
2569 <span class="comment">% -------------------------</span>
2570 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2571 
2572 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2573 <span class="comment">% ----------------------------------------------------------------</span>
2574 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2575 is_a_number = ~isnan(new_wse);
2576 is_positive = new_wse&gt;=0;
2577 
2578 <span class="comment">% Modify the Application data:</span>
2579 <span class="comment">% ----------------------------</span>
2580 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2581     guiparams.wse = new_wse;
2582     
2583     <span class="comment">% Re-store the Application data:</span>
2584     <span class="comment">% ------------------------------</span>
2585     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2586     
2587 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2588     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2589 <span class="keyword">end</span>
2590 
2591 <span class="comment">% [EOF] WSE_Callback</span>
2592 
>>>>>>> .r93
2593 
<<<<<<< .mine
2594 <span class="comment">% Re-store the Application data:</span>
2595 <span class="comment">% ------------------------------</span>
2596 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
2594 <span class="comment">% --------------------------------------------------------------------</span>
2595 <a name="_sub65" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2596 <span class="comment">% Bathymetry Auxiliary Data</span>
>>>>>>> .r93
2597 
<<<<<<< .mine
2598 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2599 
2600 
2601 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2602 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2603 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2604 
2605 <span class="comment">% --------------------------------------------------------------------</span>
2606 <a name="_sub66" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2607 
2608 <span class="comment">% Get the Application data:</span>
2609 <span class="comment">% -------------------------</span>
2610 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2611 
2612 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2613 <span class="comment">% ----------------------------------------------------------------</span>
2614 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2615 is_a_number = ~isnan(new_depth_range_min);
2616 is_positive = new_depth_range_min&gt;=0;
2617 
2618 <span class="comment">% Modify the Application data:</span>
2619 <span class="comment">% ----------------------------</span>
2620 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2621     guiparams.depth_range_min = new_depth_range_min;
2622     
2623     <span class="comment">% Re-store the Application data:</span>
2624     <span class="comment">% ------------------------------</span>
2625     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2626     
2627 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2628     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2629 <span class="keyword">end</span>
2630 
2631 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2632 
2633 
2634 <span class="comment">% --------------------------------------------------------------------</span>
2635 <a name="_sub67" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2636 
2637 <span class="comment">% Get the Application data:</span>
2638 <span class="comment">% -------------------------</span>
2639 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2640 
2641 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2642 <span class="comment">% ----------------------------------------------------------------</span>
2643 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2644 is_a_number = ~isnan(new_depth_range_max);
2645 is_positive = new_depth_range_max&gt;=0;
2646 
2647 <span class="comment">% Modify the Application data:</span>
2648 <span class="comment">% ----------------------------</span>
2649 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2650     guiparams.depth_range_max = new_depth_range_max;
2651     
2652     <span class="comment">% Re-store the Application data:</span>
2653     <span class="comment">% ------------------------------</span>
2654     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2655     
2656 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2657     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2658 <span class="keyword">end</span>
2659 
2660 <span class="comment">% [EOF] DepthMax_Callback</span>
2661 
2662 
2663 <span class="comment">% --------------------------------------------------------------------</span>
2664 <a name="_sub68" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2665 <span class="comment">% Set quiver scale (contour)</span>
2666 
2667 <span class="comment">% Get the Application data:</span>
2668 <span class="comment">% -------------------------</span>
2669 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2670 
2671 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2672 <span class="comment">% ----------------------------------------------------------------</span>
2673 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2674 is_a_number = ~isnan(new_vector_scale_plan_view);
2675 is_positive = new_vector_scale_plan_view&gt;=0;
2676 
2677 <span class="comment">% Modify the Application data:</span>
2678 <span class="comment">% ----------------------------</span>
2679 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2680     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2681     
2682     <span class="comment">% Re-store the Application data:</span>
2683     <span class="comment">% ------------------------------</span>
2684     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2685     
2686 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2687     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2688 <span class="keyword">end</span>
2689 
2690 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2691 
2692 
2693 <span class="comment">% --------------------------------------------------------------------</span>
2694 <a name="_sub69" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2695 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2696 
2697 <span class="comment">% Get the Application data:</span>
2698 <span class="comment">% -------------------------</span>
2699 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2700 
2701 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2702 <span class="comment">% ----------------------------------------------------------------</span>
2703 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2704 is_a_number = ~isnan(new_vector_spacing_plan_view);
2705 is_positive = new_vector_spacing_plan_view&gt;=0;
2706 
2707 <span class="comment">% Modify the Application data:</span>
2708 <span class="comment">% ----------------------------</span>
2709 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2710     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2711     
2712     <span class="comment">% Re-store the Application data:</span>
2713     <span class="comment">% ------------------------------</span>
2714     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2715     
2716 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2717     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2718 <span class="keyword">end</span>
2719 
2720 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2721 
2722 
2723 <span class="comment">% --------------------------------------------------------------------</span>
2724 <a name="_sub70" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2725 <span class="comment">% Plan View smoothing window size</span>
2726 
2727 <span class="comment">% Get the Application data:</span>
2728 <span class="comment">% -------------------------</span>
2729 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2730 
2731 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2732 <span class="comment">% ----------------------------------------------------------------</span>
2733 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2734 is_a_number = ~isnan(new_smoothing_window_size);
2735 is_positive = new_smoothing_window_size&gt;=0;
2736 
2737 <span class="comment">% Modify the Application data:</span>
2738 <span class="comment">% ----------------------------</span>
2739 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2740     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2741     
2742     <span class="comment">% Re-store the Application data:</span>
2743     <span class="comment">% ------------------------------</span>
2744     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2745     
2746 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2747     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2748 <span class="keyword">end</span>
2749 
2750 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
2751 
2752 
2753 <span class="comment">% --------------------------------------------------------------------</span>
2754 <a name="_sub71" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2755 
2756 <span class="comment">% Get the Application data:</span>
2757 <span class="comment">% -------------------------</span>
2758 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2759 
2760 <span class="comment">% Modify the Application data:</span>
2761 <span class="comment">% ----------------------------</span>
2762 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
=======
2598 <span class="comment">% Get the Application data:</span>
2599 <span class="comment">% -------------------------</span>
2600 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2601 
2602 <span class="comment">% Modify the Application data:</span>
2603 <span class="comment">% ----------------------------</span>
2604 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2605 
2606 <span class="comment">% Re-store the Application data:</span>
2607 <span class="comment">% ------------------------------</span>
2608 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2609 
2610 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2611 
2612 
2613 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2614 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2615 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2616 
2617 <span class="comment">% --------------------------------------------------------------------</span>
2618 <a name="_sub66" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2619 
2620 <span class="comment">% Get the Application data:</span>
2621 <span class="comment">% -------------------------</span>
2622 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2623 
2624 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2625 <span class="comment">% ----------------------------------------------------------------</span>
2626 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2627 is_a_number = ~isnan(new_depth_range_min);
2628 is_positive = new_depth_range_min&gt;=0;
2629 
2630 <span class="comment">% Modify the Application data:</span>
2631 <span class="comment">% ----------------------------</span>
2632 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2633     guiparams.depth_range_min = new_depth_range_min;
2634     
2635     <span class="comment">% Re-store the Application data:</span>
2636     <span class="comment">% ------------------------------</span>
2637     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2638     
2639 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2640     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2641 <span class="keyword">end</span>
2642 
2643 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2644 
2645 
2646 <span class="comment">% --------------------------------------------------------------------</span>
2647 <a name="_sub67" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2648 
2649 <span class="comment">% Get the Application data:</span>
2650 <span class="comment">% -------------------------</span>
2651 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2652 
2653 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2654 <span class="comment">% ----------------------------------------------------------------</span>
2655 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2656 is_a_number = ~isnan(new_depth_range_max);
2657 is_positive = new_depth_range_max&gt;=0;
2658 
2659 <span class="comment">% Modify the Application data:</span>
2660 <span class="comment">% ----------------------------</span>
2661 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2662     guiparams.depth_range_max = new_depth_range_max;
2663     
2664     <span class="comment">% Re-store the Application data:</span>
2665     <span class="comment">% ------------------------------</span>
2666     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2667     
2668 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2669     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2670 <span class="keyword">end</span>
2671 
2672 <span class="comment">% [EOF] DepthMax_Callback</span>
2673 
2674 
2675 <span class="comment">% --------------------------------------------------------------------</span>
2676 <a name="_sub68" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2677 <span class="comment">% Set quiver scale (contour)</span>
2678 
2679 <span class="comment">% Get the Application data:</span>
2680 <span class="comment">% -------------------------</span>
2681 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2682 
2683 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2684 <span class="comment">% ----------------------------------------------------------------</span>
2685 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2686 is_a_number = ~isnan(new_vector_scale_plan_view);
2687 is_positive = new_vector_scale_plan_view&gt;=0;
2688 
2689 <span class="comment">% Modify the Application data:</span>
2690 <span class="comment">% ----------------------------</span>
2691 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2692     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2693     
2694     <span class="comment">% Re-store the Application data:</span>
2695     <span class="comment">% ------------------------------</span>
2696     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2697     
2698 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2699     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2700 <span class="keyword">end</span>
2701 
2702 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2703 
2704 
2705 <span class="comment">% --------------------------------------------------------------------</span>
2706 <a name="_sub69" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2707 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2708 
2709 <span class="comment">% Get the Application data:</span>
2710 <span class="comment">% -------------------------</span>
2711 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2712 
2713 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2714 <span class="comment">% ----------------------------------------------------------------</span>
2715 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2716 is_a_number = ~isnan(new_vector_spacing_plan_view);
2717 is_positive = new_vector_spacing_plan_view&gt;=0;
2718 
2719 <span class="comment">% Modify the Application data:</span>
2720 <span class="comment">% ----------------------------</span>
2721 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2722     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2723     
2724     <span class="comment">% Re-store the Application data:</span>
2725     <span class="comment">% ------------------------------</span>
2726     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2727     
2728 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2729     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2730 <span class="keyword">end</span>
2731 
2732 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2733 
2734 
2735 <span class="comment">% --------------------------------------------------------------------</span>
2736 <a name="_sub70" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2737 <span class="comment">% Plan View smoothing window size</span>
2738 
2739 <span class="comment">% Get the Application data:</span>
2740 <span class="comment">% -------------------------</span>
2741 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2742 
2743 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2744 <span class="comment">% ----------------------------------------------------------------</span>
2745 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2746 is_a_number = ~isnan(new_smoothing_window_size);
2747 is_positive = new_smoothing_window_size&gt;=0;
2748 
2749 <span class="comment">% Modify the Application data:</span>
2750 <span class="comment">% ----------------------------</span>
2751 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2752     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2753     
2754     <span class="comment">% Re-store the Application data:</span>
2755     <span class="comment">% ------------------------------</span>
2756     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2757     
2758 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2759     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2760 <span class="keyword">end</span>
2761 
2762 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
>>>>>>> .r93
2763 
<<<<<<< .mine
2764 <span class="comment">% Re-store the Application data:</span>
2765 <span class="comment">% ------------------------------</span>
2766 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2767 
2768 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
2769 
2770 
2771 <span class="comment">% --------------------------------------------------------------------</span>
2772 <a name="_sub72" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2773 
2774 <span class="comment">% Get the Application data:</span>
2775 <span class="comment">% -------------------------</span>
2776 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2777 
2778 <span class="comment">% Modify the Application data:</span>
2779 <span class="comment">% ----------------------------</span>
2780 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
=======
2764 
2765 <span class="comment">% --------------------------------------------------------------------</span>
2766 <a name="_sub71" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2767 
2768 <span class="comment">% Get the Application data:</span>
2769 <span class="comment">% -------------------------</span>
2770 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2771 
2772 <span class="comment">% Modify the Application data:</span>
2773 <span class="comment">% ----------------------------</span>
2774 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2775 
2776 <span class="comment">% Re-store the Application data:</span>
2777 <span class="comment">% ------------------------------</span>
2778 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2779 
2780 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
>>>>>>> .r93
2781 
<<<<<<< .mine
2782 <span class="comment">% Re-store the Application data:</span>
2783 <span class="comment">% ------------------------------</span>
2784 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2785 
2786 <span class="comment">% [EOF] AddBackground_Callback</span>
2787 
2788 
2789 <span class="comment">% --------------------------------------------------------------------</span>
2790 <a name="_sub73" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2791 <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2792 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2793 
2794 
2795 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2796 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2797 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2798 
2799 <span class="comment">% --------------------------------------------------------------------</span>
2800 <a name="_sub74" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2801 <span class="comment">% Set the horizontal grid node spacing</span>
2802 
2803 <span class="comment">% Get the Application data:</span>
2804 <span class="comment">% -------------------------</span>
2805 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2806 
2807 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2808 <span class="comment">% ----------------------------------------------------------------</span>
2809 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2810 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2811 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2812 
2813 <span class="comment">% Modify the Application data:</span>
2814 <span class="comment">% ----------------------------</span>
2815 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2816     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2817     
2818     <span class="comment">% Re-store the Application data:</span>
2819     <span class="comment">% ------------------------------</span>
2820     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2821     
2822 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2823     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2824 <span class="keyword">end</span>
2825 
2826 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2827 
2828 <span class="comment">% --------------------------------------------------------------------</span>
2829 <a name="_sub75" href="#_subfunctions" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2830 <span class="comment">% Set the horizontal grid node spacing</span>
2831 
2832 <span class="comment">% Get the Application data:</span>
2833 <span class="comment">% -------------------------</span>
2834 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2835 
2836 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2837 <span class="comment">% ----------------------------------------------------------------</span>
2838 new_vertical_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2839 is_a_number = ~isnan(new_vertical_grid_node_spacing);
2840 is_positive = new_vertical_grid_node_spacing&gt;=0;
2841 
2842 <span class="comment">% Modify the Application data:</span>
2843 <span class="comment">% ----------------------------</span>
2844 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2845     guiparams.vertical_grid_node_spacing = new_vertical_grid_node_spacing;
2846     
2847     <span class="comment">% Re-store the Application data:</span>
2848     <span class="comment">% ------------------------------</span>
2849     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2850     
2851 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2852     set(hObject,<span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
2853 <span class="keyword">end</span>
2854 
2855 <span class="comment">% [EOF] VerticalGridNodeSpacing_Callback</span>
2856 
2857 <span class="comment">% --------------------------------------------------------------------</span>
2858 <a name="_sub76" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2859 <span class="comment">% Set the cross section endpoints manually</span>
2860 
2861 <span class="comment">% Get the Application data:</span>
2862 <span class="comment">% -------------------------</span>
2863 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2864 
2865 <span class="comment">% Modify the Application data:</span>
2866 <span class="comment">% ----------------------------</span>
2867 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
=======
2782 
2783 <span class="comment">% --------------------------------------------------------------------</span>
2784 <a name="_sub72" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2785 
2786 <span class="comment">% Get the Application data:</span>
2787 <span class="comment">% -------------------------</span>
2788 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2789 
2790 <span class="comment">% Modify the Application data:</span>
2791 <span class="comment">% ----------------------------</span>
2792 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2793 
2794 <span class="comment">% Re-store the Application data:</span>
2795 <span class="comment">% ------------------------------</span>
2796 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2797 
2798 <span class="comment">% [EOF] AddBackground_Callback</span>
2799 
2800 
2801 <span class="comment">% --------------------------------------------------------------------</span>
2802 <a name="_sub73" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2803 <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2804 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2805 
2806 
2807 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2808 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2809 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2810 
2811 <span class="comment">% --------------------------------------------------------------------</span>
2812 <a name="_sub74" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2813 <span class="comment">% Set the horizontal grid node spacing</span>
2814 
2815 <span class="comment">% Get the Application data:</span>
2816 <span class="comment">% -------------------------</span>
2817 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2818 
2819 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2820 <span class="comment">% ----------------------------------------------------------------</span>
2821 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2822 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2823 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2824 
2825 <span class="comment">% Modify the Application data:</span>
2826 <span class="comment">% ----------------------------</span>
2827 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2828     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2829     
2830     <span class="comment">% Re-store the Application data:</span>
2831     <span class="comment">% ------------------------------</span>
2832     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2833     
2834 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2835     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2836 <span class="keyword">end</span>
2837 
2838 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2839 
2840 <span class="comment">% --------------------------------------------------------------------</span>
2841 <a name="_sub75" href="#_subfunctions" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2842 <span class="comment">% Set the horizontal grid node spacing</span>
2843 
2844 <span class="comment">% Get the Application data:</span>
2845 <span class="comment">% -------------------------</span>
2846 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2847 
2848 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2849 <span class="comment">% ----------------------------------------------------------------</span>
2850 new_vertical_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2851 is_a_number = ~isnan(new_vertical_grid_node_spacing);
2852 is_positive = new_vertical_grid_node_spacing&gt;=0;
2853 
2854 <span class="comment">% Modify the Application data:</span>
2855 <span class="comment">% ----------------------------</span>
2856 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2857     guiparams.vertical_grid_node_spacing = new_vertical_grid_node_spacing;
2858     
2859     <span class="comment">% Re-store the Application data:</span>
2860     <span class="comment">% ------------------------------</span>
2861     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2862     
2863 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2864     set(hObject,<span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
2865 <span class="keyword">end</span>
2866 
2867 <span class="comment">% [EOF] VerticalGridNodeSpacing_Callback</span>
>>>>>>> .r93
2868 
<<<<<<< .mine
2869 <span class="comment">% Re-store the Application data:</span>
2870 <span class="comment">% ------------------------------</span>
2871 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2872 
2873 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2874 
2875 
2876 <span class="comment">% --------------------------------------------------------------------</span>
2877 <a name="_sub77" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2878 <a href="#_sub55" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2879 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2880 
2881 
2882 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2883 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2884 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2885 
2886 <span class="comment">% --------------------------------------------------------------------</span>
2887 <a name="_sub78" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2888 
2889 <span class="comment">% Get the Application data:</span>
2890 <span class="comment">% -------------------------</span>
2891 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2892 
2893 <span class="comment">% Modify the Application data:</span>
2894 <span class="comment">% ----------------------------</span>
2895 idx_variable = get(hObject,<span class="string">'Value'</span>);
2896 guiparams.idx_contour = idx_variable;
2897 guiparams.contour = guiparams.contours(idx_variable).variable;
=======
2869 <span class="comment">% --------------------------------------------------------------------</span>
2870 <a name="_sub76" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2871 <span class="comment">% Set the cross section endpoints manually</span>
2872 
2873 <span class="comment">% Get the Application data:</span>
2874 <span class="comment">% -------------------------</span>
2875 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2876 
2877 <span class="comment">% Modify the Application data:</span>
2878 <span class="comment">% ----------------------------</span>
2879 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2880 
2881 <span class="comment">% Re-store the Application data:</span>
2882 <span class="comment">% ------------------------------</span>
2883 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2884 
2885 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2886 
2887 
2888 <span class="comment">% --------------------------------------------------------------------</span>
2889 <a name="_sub77" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2890 <a href="#_sub55" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2891 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2892 
2893 
2894 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2895 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2896 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2897 
>>>>>>> .r93
<<<<<<< .mine
2898 
2899 <span class="comment">% Re-store the Application data:</span>
2900 <span class="comment">% ------------------------------</span>
2901 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2902 
2903 <span class="comment">% [EOF] Contour_Callback</span>
2904 
2905 
2906 <span class="comment">% --------------------------------------------------------------------</span>
2907 <a name="_sub79" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2908 <span class="comment">% Set vertical exaggeration</span>
2909 
2910 <span class="comment">% Get the Application data:</span>
2911 <span class="comment">% -------------------------</span>
2912 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2913 
2914 <span class="comment">% Modify the Application data:</span>
2915 <span class="comment">% ----------------------------</span>
2916 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
2917 
2918 <span class="comment">% Re-store the Application data:</span>
2919 <span class="comment">% ------------------------------</span>
2920 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
2898 <span class="comment">% --------------------------------------------------------------------</span>
2899 <a name="_sub78" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2900 
2901 <span class="comment">% Get the Application data:</span>
2902 <span class="comment">% -------------------------</span>
2903 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2904 
2905 <span class="comment">% Modify the Application data:</span>
2906 <span class="comment">% ----------------------------</span>
2907 idx_variable = get(hObject,<span class="string">'Value'</span>);
2908 guiparams.idx_contour = idx_variable;
2909 guiparams.contour = guiparams.contours(idx_variable).variable;
2910 
2911 <span class="comment">% Re-store the Application data:</span>
2912 <span class="comment">% ------------------------------</span>
2913 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2914 
2915 <span class="comment">% [EOF] Contour_Callback</span>
2916 
2917 
2918 <span class="comment">% --------------------------------------------------------------------</span>
2919 <a name="_sub79" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2920 <span class="comment">% Set vertical exaggeration</span>
>>>>>>> .r93
2921 
<<<<<<< .mine
2922 <span class="comment">% Update the GUI:</span>
2923 <span class="comment">% ---------------</span>
2924 <span class="comment">% updateGUI(handles,guiparams)</span>
2925 
2926 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
2927 
2928 
2929 <span class="comment">% --------------------------------------------------------------------</span>
2930 <a name="_sub80" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
2931 
2932 <span class="comment">% Get the Application data:</span>
2933 <span class="comment">% -------------------------</span>
2934 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2935 
2936 <span class="comment">% Modify the Application data:</span>
2937 <span class="comment">% ----------------------------</span>
2938 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
2939 
2940 <span class="comment">% Re-store the Application data:</span>
2941 <span class="comment">% ------------------------------</span>
2942 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
2922 <span class="comment">% Get the Application data:</span>
2923 <span class="comment">% -------------------------</span>
2924 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2925 
2926 <span class="comment">% Modify the Application data:</span>
2927 <span class="comment">% ----------------------------</span>
2928 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
2929 
2930 <span class="comment">% Re-store the Application data:</span>
2931 <span class="comment">% ------------------------------</span>
2932 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2933 
2934 <span class="comment">% Update the GUI:</span>
2935 <span class="comment">% ---------------</span>
2936 <span class="comment">% updateGUI(handles,guiparams)</span>
2937 
2938 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
2939 
2940 
2941 <span class="comment">% --------------------------------------------------------------------</span>
2942 <a name="_sub80" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
>>>>>>> .r93
2943 
<<<<<<< .mine
2944 <span class="comment">% Update the GUI:</span>
2945 <span class="comment">% ---------------</span>
2946 <span class="comment">% updateGUI(handles,guiparams)</span>
2947 
2948 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
2949 
2950 
2951 <span class="comment">% --------------------------------------------------------------------</span>
2952 <a name="_sub81" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2953 
2954 <span class="comment">% Get the Application data:</span>
2955 <span class="comment">% -------------------------</span>
2956 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2957 
2958 <span class="comment">% Modify the Application data:</span>
2959 <span class="comment">% ----------------------------</span>
2960 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2961 
2962 <span class="comment">% Re-store the Application data:</span>
2963 <span class="comment">% ------------------------------</span>
2964 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
2944 <span class="comment">% Get the Application data:</span>
2945 <span class="comment">% -------------------------</span>
2946 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2947 
2948 <span class="comment">% Modify the Application data:</span>
2949 <span class="comment">% ----------------------------</span>
2950 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
2951 
2952 <span class="comment">% Re-store the Application data:</span>
2953 <span class="comment">% ------------------------------</span>
2954 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2955 
2956 <span class="comment">% Update the GUI:</span>
2957 <span class="comment">% ---------------</span>
2958 <span class="comment">% updateGUI(handles,guiparams)</span>
2959 
2960 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
2961 
2962 
2963 <span class="comment">% --------------------------------------------------------------------</span>
2964 <a name="_sub81" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
>>>>>>> .r93
2965 
<<<<<<< .mine
2966 <span class="comment">% Update the GUI:</span>
2967 <span class="comment">% ---------------</span>
2968 <span class="comment">% updateGUI(handles,guiparams)</span>
=======
2966 <span class="comment">% Get the Application data:</span>
2967 <span class="comment">% -------------------------</span>
2968 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
>>>>>>> .r93
2969 
<<<<<<< .mine
2970 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
2971 
2972 
2973 <span class="comment">% --------------------------------------------------------------------</span>
2974 <a name="_sub82" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2975 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
2976 
2977 <span class="comment">% Get the Application data:</span>
2978 <span class="comment">% -------------------------</span>
2979 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2980 
2981 <span class="comment">% Modify the Application data:</span>
2982 <span class="comment">% ----------------------------</span>
2983 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2984 
2985 <span class="comment">% Re-store the Application data:</span>
2986 <span class="comment">% ------------------------------</span>
2987 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
2970 <span class="comment">% Modify the Application data:</span>
2971 <span class="comment">% ----------------------------</span>
2972 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2973 
2974 <span class="comment">% Re-store the Application data:</span>
2975 <span class="comment">% ------------------------------</span>
2976 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2977 
2978 <span class="comment">% Update the GUI:</span>
2979 <span class="comment">% ---------------</span>
2980 <span class="comment">% updateGUI(handles,guiparams)</span>
2981 
2982 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
2983 
2984 
2985 <span class="comment">% --------------------------------------------------------------------</span>
2986 <a name="_sub82" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
2987 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
>>>>>>> .r93
2988 
<<<<<<< .mine
2989 <span class="comment">% Update the GUI:</span>
2990 <span class="comment">% ---------------</span>
2991 <span class="comment">% updateGUI(handles,guiparams)</span>
=======
2989 <span class="comment">% Get the Application data:</span>
2990 <span class="comment">% -------------------------</span>
2991 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
>>>>>>> .r93
2992 
<<<<<<< .mine
2993 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
2994 
2995 
2996 <span class="comment">% --------------------------------------------------------------------</span>
2997 <a name="_sub83" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
2998 <span class="comment">% Horizontal Smoothing</span>
2999 
3000 <span class="comment">% Get the Application data:</span>
3001 <span class="comment">% -------------------------</span>
3002 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3003 
3004 <span class="comment">% Modify the Application data:</span>
3005 <span class="comment">% ----------------------------</span>
3006 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3007 
3008 <span class="comment">% Re-store the Application data:</span>
3009 <span class="comment">% ------------------------------</span>
3010 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
2993 <span class="comment">% Modify the Application data:</span>
2994 <span class="comment">% ----------------------------</span>
2995 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2996 
2997 <span class="comment">% Re-store the Application data:</span>
2998 <span class="comment">% ------------------------------</span>
2999 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3000 
3001 <span class="comment">% Update the GUI:</span>
3002 <span class="comment">% ---------------</span>
3003 <span class="comment">% updateGUI(handles,guiparams)</span>
3004 
3005 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
3006 
3007 
3008 <span class="comment">% --------------------------------------------------------------------</span>
3009 <a name="_sub83" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3010 <span class="comment">% Horizontal Smoothing</span>
>>>>>>> .r93
3011 
<<<<<<< .mine
3012 <span class="comment">% Update the GUI:</span>
3013 <span class="comment">% ---------------</span>
3014 <span class="comment">% updateGUI(handles,guiparams)</span>
=======
3012 <span class="comment">% Get the Application data:</span>
3013 <span class="comment">% -------------------------</span>
3014 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
>>>>>>> .r93
3015 
<<<<<<< .mine
3016 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
3017 
3018 
3019 <span class="comment">% --------------------------------------------------------------------</span>
3020 <a name="_sub84" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3021 <span class="comment">% Vertical Smoothing</span>
3022 
3023 <span class="comment">% Get the Application data:</span>
3024 <span class="comment">% -------------------------</span>
3025 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3026 
3027 <span class="comment">% Modify the Application data:</span>
3028 <span class="comment">% ----------------------------</span>
3029 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3030 
3031 <span class="comment">% Re-store the Application data:</span>
3032 <span class="comment">% ------------------------------</span>
3033 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
=======
3016 <span class="comment">% Modify the Application data:</span>
3017 <span class="comment">% ----------------------------</span>
3018 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3019 
3020 <span class="comment">% Re-store the Application data:</span>
3021 <span class="comment">% ------------------------------</span>
3022 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3023 
3024 <span class="comment">% Update the GUI:</span>
3025 <span class="comment">% ---------------</span>
3026 <span class="comment">% updateGUI(handles,guiparams)</span>
3027 
3028 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
3029 
3030 
3031 <span class="comment">% --------------------------------------------------------------------</span>
3032 <a name="_sub84" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3033 <span class="comment">% Vertical Smoothing</span>
>>>>>>> .r93
3034 
<<<<<<< .mine
3035 <span class="comment">% Update the GUI:</span>
3036 <span class="comment">% ---------------</span>
3037 <span class="comment">% updateGUI(handles,guiparams)</span>
3038 
3039 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
3040 
3041 
3042 <span class="comment">% --------------------------------------------------------------------</span>
3043 <a name="_sub85" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
3044 
3045 <span class="comment">% Get the Application data:</span>
3046 <span class="comment">% -------------------------</span>
3047 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3048 
3049 <span class="comment">% Modify the Application data:</span>
3050 <span class="comment">% ----------------------------</span>
3051 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
=======
3035 <span class="comment">% Get the Application data:</span>
3036 <span class="comment">% -------------------------</span>
3037 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3038 
3039 <span class="comment">% Modify the Application data:</span>
3040 <span class="comment">% ----------------------------</span>
3041 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3042 
3043 <span class="comment">% Re-store the Application data:</span>
3044 <span class="comment">% ------------------------------</span>
3045 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3046 
3047 <span class="comment">% Update the GUI:</span>
3048 <span class="comment">% ---------------</span>
3049 <span class="comment">% updateGUI(handles,guiparams)</span>
3050 
3051 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
>>>>>>> .r93
3052 
<<<<<<< .mine
3053 <span class="comment">% Re-store the Application data:</span>
3054 <span class="comment">% ------------------------------</span>
3055 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3056 
3057 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
3058 
3059 
3060 <span class="comment">% --------------------------------------------------------------------</span>
3061 <a name="_sub86" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
3062 
3063 <span class="comment">% Get the Application data:</span>
3064 <span class="comment">% -------------------------</span>
3065 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3066 
3067 <span class="comment">% Modify the Application data:</span>
3068 <span class="comment">% ----------------------------</span>
3069 idx_variable = get(hObject,<span class="string">'Value'</span>);
3070 guiparams.idx_secondary_flow_vector_variable = idx_variable;
3071 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
=======
3053 
3054 <span class="comment">% --------------------------------------------------------------------</span>
3055 <a name="_sub85" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
3056 
3057 <span class="comment">% Get the Application data:</span>
3058 <span class="comment">% -------------------------</span>
3059 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3060 
3061 <span class="comment">% Modify the Application data:</span>
3062 <span class="comment">% ----------------------------</span>
3063 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3064 
3065 <span class="comment">% Re-store the Application data:</span>
3066 <span class="comment">% ------------------------------</span>
3067 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3068 
3069 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
3070 
3071 
>>>>>>> .r93
<<<<<<< .mine
3072 
3073 <span class="comment">% Re-store the Application data:</span>
3074 <span class="comment">% ------------------------------</span>
3075 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3076 
3077 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
3078 
3079 
3080 <span class="comment">% --------------------------------------------------------------------</span>
3081 <a name="_sub87" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
3082 
3083 <span class="comment">% Get the Application data:</span>
3084 <span class="comment">% -------------------------</span>
3085 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3086 
3087 <span class="comment">% Modify the Application data:</span>
3088 <span class="comment">% ----------------------------</span>
3089 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
=======
3072 <span class="comment">% --------------------------------------------------------------------</span>
3073 <a name="_sub86" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
3074 
3075 <span class="comment">% Get the Application data:</span>
3076 <span class="comment">% -------------------------</span>
3077 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3078 
3079 <span class="comment">% Modify the Application data:</span>
3080 <span class="comment">% ----------------------------</span>
3081 idx_variable = get(hObject,<span class="string">'Value'</span>);
3082 guiparams.idx_secondary_flow_vector_variable = idx_variable;
3083 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
3084 
3085 <span class="comment">% Re-store the Application data:</span>
3086 <span class="comment">% ------------------------------</span>
3087 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3088 
3089 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
>>>>>>> .r93
3090 
<<<<<<< .mine
3091 <span class="comment">% Re-store the Application data:</span>
3092 <span class="comment">% ------------------------------</span>
3093 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3094 
3095 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
3096 
3097 
3098 <span class="comment">% --------------------------------------------------------------------</span>
3099 <a name="_sub88" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
3100 <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
3101 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
3102 
3103 
3104 <span class="comment">% --------------------------------------------------------------------</span>
3105 <a name="_sub89" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
3106 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
3107 <span class="comment">% [EOF] ClearLog_Callback</span>
3108 
3109 <span class="comment">% --------------------------------------------------------------------</span>
3110 <a name="_sub90" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
3111 
3112 <span class="comment">% Get the Application data:</span>
3113 <span class="comment">% -------------------------</span>
3114 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3115 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3116 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
3117 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
3118 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
3119 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
3120 
3121 [the_file,the_path] = <span class="keyword">...</span>
3122     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
3123     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
3124     fullfile(guiprefs.log_path,guiprefs.log_file));
3125 
3126 <span class="comment">% Save the log to a TXT file:</span>
3127 <span class="comment">% ---------------------------</span>
3128 <span class="keyword">if</span> ischar(the_file)
3129     guiparams.log_path = the_path;
3130     guiparams.log_file = the_file;
3131     <span class="comment">%guiparams.savefile = the_file;</span>
3132     
3133     <span class="comment">% Re-store the Application data:</span>
3134     <span class="comment">% ------------------------------</span>
3135     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3136     
3137     <span class="comment">% Update the preferences:</span>
3138     <span class="comment">% -----------------------</span>
3139     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3140     guiprefs.log_path = the_path;
3141     guiprefs.log_file = the_file;
3142     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
3143     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
3144     
3145     [~,filename,extension] = fileparts(the_file);
3146     savefile = [the_path filename extension];
3147     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
3148         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
3149     
3150     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
3151     [nrows,~]= size(logfile);
3152     fid = fopen(savefile, <span class="string">'w'</span>);
3153     <span class="keyword">for</span> row=1:nrows
3154         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
3155     <span class="keyword">end</span>
3156     fclose(fid);
3157 <span class="keyword">end</span>
3158 <span class="comment">% [EOF] SaveLog_Callback</span>
3159 
3160 <span class="comment">%%%%%%%%%%%%%%%%</span>
3161 <span class="comment">% SUBFUNCTIONS %</span>
3162 <span class="comment">%%%%%%%%%%%%%%%%</span>
3163 
3164 <span class="comment">% --------------------------------------------------------------------</span>
3165 <a name="_sub91" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
3166 
3167 icons = <a href="#_sub107" class="code" title="subfunction icons = getIcons">getIcons</a>;
3168 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
3169 
3170 <span class="comment">% Load data</span>
3171 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
3172 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3173 <span class="comment">% icon(icon==0) = NaN;</span>
3174 handles.toolbarLoadData = <span class="keyword">...</span>
3175     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3176     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
3177     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
3178 
3179 <span class="comment">% Save data</span>
3180 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
3181 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3182 <span class="comment">% icon(icon==0) = NaN;</span>
3183 handles.toolbarSaveMatFile = <span class="keyword">...</span>
3184     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3185     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
3186     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
3187     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3188 
3189 
3190 <span class="comment">% Save bathymetry</span>
3191 <span class="comment">%icon = ones(16,16,3);</span>
3192 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
3193     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3194     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
3195     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
3196 
3197 <span class="comment">% Save figures</span>
3198 <span class="comment">% icon = ones(16,16,3);</span>
3199 handles.toolbarSaveFigures = <span class="keyword">...</span>
3200     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3201     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
3202     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
3203 
3204 <span class="comment">% Save Excel File</span>
3205 <span class="comment">% icon = ones(16,16,3);</span>
3206 handles.toolbarSaveExcel = <span class="keyword">...</span>
3207     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3208     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
3209     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
3210 
3211 
3212 <span class="comment">% Plotting parameters</span>
3213 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
3214 <span class="comment">% icon = ind2rgb(icon,map);</span>
3215 handles.toolbarPlottingParameters = <span class="keyword">...</span>
3216     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3217     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
3218     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3219     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3220 
3221 <span class="comment">% Processing parameters</span>
3222 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3223 <span class="comment">% icon = ind2rgb(icon,map);</span>
3224 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3225     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3226     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3227     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3228 
3229 <span class="comment">% Zoom In</span>
3230 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3231 <span class="comment">% icon = ind2rgb(icon,map);</span>
3232 <span class="comment">% handles.toolbarZoomIn = ...</span>
3233 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3234 <span class="comment">%     'CData',        icons(8).data, ...</span>
3235 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3236 <span class="comment">%     'Separator',     'on');</span>
3237 
3238 <span class="comment">% Zoom Out</span>
3239 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3240 <span class="comment">% icon = ind2rgb(icon,map);</span>
3241 <span class="comment">% handles.toolbarZoomOut = ...</span>
3242 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3243 <span class="comment">%     'CData',        icons(9).data, ...</span>
3244 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3245 
3246 <span class="comment">% Pan</span>
3247 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3248 <span class="comment">% icon = ind2rgb(icon,map);</span>
3249 <span class="comment">% handles.toolbarPan = ...</span>
3250 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3251 <span class="comment">%     'CData',        icons(10).data, ...</span>
3252 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3253 
3254 
3255 
3256 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3257 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3258 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3259 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3260 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub25" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3261 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub53" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3262 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub54" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3263 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3264 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3265 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3266 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3267 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3268 
3269 <span class="comment">% [EOF] buildtoolbar</span>
3270 
3271 
3272 <span class="comment">% --------------------------------------------------------------------</span>
3273 <a name="_sub92" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3274 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3275 <span class="comment">% already exist.</span>
3276 
3277 <span class="comment">% Preferences:</span>
3278 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3279 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3280 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3281 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3282 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3283 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3284 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3285 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3286 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3287 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3288 <span class="comment">% 'renderer'             Default graphics renderer</span>
3289 <span class="comment">% 'units'                Default plotting units</span>
3290 
3291 <span class="comment">% Originals</span>
3292 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3293 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3294 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3295 
3296 <span class="comment">% ASCII</span>
3297 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3298     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3299     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3300         guiprefs.ascii_path = ascii.path;
3301     <span class="keyword">else</span>
3302         guiprefs.ascii_path = pwd;
3303     <span class="keyword">end</span>
3304     does_exist = false(1,length(ascii.file));
3305     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3306         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3307     <span class="keyword">end</span>
3308     <span class="keyword">if</span> any(does_exist)
3309         guiprefs.ascii_file = ascii.file(does_exist);
3310     <span class="keyword">else</span>
3311         guiprefs.ascii_file = {<span class="string">''</span>};
3312     <span class="keyword">end</span>
3313 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3314     guiprefs.ascii_path = pwd;
3315     guiprefs.ascii_file = {<span class="string">''</span>};
3316     
3317     ascii.path = pwd;
3318     ascii.file = {<span class="string">''</span>};
3319     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3320 <span class="keyword">end</span>
3321 
3322 <span class="comment">% MAT</span>
3323 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3324     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3325     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3326         guiprefs.mat_path = mat.path;
3327     <span class="keyword">else</span>
3328         guiprefs.mat_path = pwd;
3329     <span class="keyword">end</span>
3330     
3331     <span class="keyword">if</span> iscell(mat.file)
3332         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3333             guiprefs.mat_file = mat.file;
3334         <span class="keyword">else</span>
3335             guiprefs.mat_file = <span class="string">''</span>;
3336         <span class="keyword">end</span>
3337     <span class="keyword">else</span>
3338         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3339             guiprefs.mat_file = mat.file;
3340         <span class="keyword">else</span>
3341             guiprefs.mat_file = <span class="string">''</span>;
3342         <span class="keyword">end</span>
3343     <span class="keyword">end</span>
3344 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3345     guiprefs.mat_path = pwd;
3346     guiprefs.mat_file = <span class="string">''</span>;
3347     
3348     mat.path = pwd;
3349     mat.file = <span class="string">''</span>;
3350     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3351 <span class="keyword">end</span>
3352 
3353 <span class="comment">% TECPLOT</span>
3354 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3355     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3356     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3357         guiprefs.tecplot_path = tecplot.path;
3358     <span class="keyword">else</span>
3359         guiprefs.tecplot_path = pwd;
3360     <span class="keyword">end</span>
3361     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3362         guiprefs.tecplot_file = tecplot.file;
3363     <span class="keyword">else</span>
3364         guiprefs.tecplot_file = <span class="string">''</span>;
3365     <span class="keyword">end</span>
3366 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3367     guiprefs.tecplot_path = pwd;
3368     guiprefs.tecplot_file = <span class="string">''</span>;
3369     
3370     tecplot.path = pwd;
3371     tecplot.file = <span class="string">''</span>;
3372     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3373 <span class="keyword">end</span>
3374 
3375 <span class="comment">% KMZ</span>
3376 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3377     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3378     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3379         guiprefs.kmz_path = kmz.path;
3380     <span class="keyword">else</span>
3381         guiprefs.kmz_path = pwd;
3382     <span class="keyword">end</span>
3383     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3384         guiprefs.kmz_file = kmz.file;
3385     <span class="keyword">else</span>
3386         guiprefs.kmz_file = <span class="string">''</span>;
3387     <span class="keyword">end</span>
3388 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3389     guiprefs.kmz_path = pwd;
3390     guiprefs.kmz_file = <span class="string">''</span>;
3391     
3392     kmz.path = pwd;
3393     kmz.file = <span class="string">''</span>;
3394     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3395 <span class="keyword">end</span>
3396 
3397 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3398 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3399     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3400     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3401         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3402     <span class="keyword">else</span>
3403         guiprefs.multibeambathymetry_path = pwd;
3404     <span class="keyword">end</span>
3405     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3406         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3407     <span class="keyword">else</span>
3408         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3409     <span class="keyword">end</span>
3410 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3411     guiprefs.multibeambathymetry_path = pwd;
3412     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3413     
3414     multibeambathymetry.path = pwd;
3415     multibeambathymetry.file = <span class="string">''</span>;
3416     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3417 <span class="keyword">end</span>
3418 
3419 <span class="comment">% Log</span>
3420 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3421     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3422     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3423         guiprefs.log_path = log.path;
3424     <span class="keyword">else</span>
3425         guiprefs.log_path = pwd;
3426     <span class="keyword">end</span>
3427     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3428         guiprefs.log_file = log.file;
3429     <span class="keyword">else</span>
3430         guiprefs.log_file = <span class="string">''</span>;
3431     <span class="keyword">end</span>
3432 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3433     guiprefs.log_path = pwd;
3434     guiprefs.log_file = <span class="string">''</span>;
3435     
3436     log.path = pwd;
3437     log.file = <span class="string">''</span>;
3438     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3439 <span class="keyword">end</span>
3440 
3441 <span class="comment">% iRic</span>
3442 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3443     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3444     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3445         guiprefs.iric_path = iric.path;
3446     <span class="keyword">else</span>
3447         guiprefs.iric_path = pwd;
3448     <span class="keyword">end</span>
3449     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3450         guiprefs.iric_file = iric.file;
3451     <span class="keyword">else</span>
3452         guiprefs.iric_file = <span class="string">''</span>;
3453     <span class="keyword">end</span>
3454 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3455     guiprefs.iric_path = pwd;
3456     guiprefs.iric_file = <span class="string">''</span>;
3457     
3458     iric.path = pwd;
3459     iric.file = <span class="string">''</span>;
3460     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3461 <span class="keyword">end</span>
3462 
3463 <span class="comment">% excel</span>
3464 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3465     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3466     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3467         guiprefs.excel_path = excel.path;
3468     <span class="keyword">else</span>
3469         guiprefs.excel_path = pwd;
3470     <span class="keyword">end</span>
3471     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3472         guiprefs.excel_file = excel.file;
3473     <span class="keyword">else</span>
3474         guiprefs.excel_file = <span class="string">''</span>;
3475     <span class="keyword">end</span>
3476 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3477     guiprefs.excel_path = pwd;
3478     guiprefs.excel_file = <span class="string">''</span>;
3479     
3480     excel.path = pwd;
3481     excel.file = <span class="string">''</span>;
3482     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3483 <span class="keyword">end</span>
3484 
3485 <span class="comment">% aerial</span>
3486 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3487     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3488     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3489         guiprefs.aerial_path = aerial.path;
3490     <span class="keyword">else</span>
3491         guiprefs.aerial_path = pwd;
3492     <span class="keyword">end</span>
3493     does_exist = false(1,length(aerial.file));
3494     <span class="keyword">if</span> iscell(aerial.file)
3495     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3496         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3497     <span class="keyword">end</span>
3498     <span class="keyword">else</span>
3499         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3500     <span class="keyword">end</span>
3501     <span class="keyword">if</span> any(does_exist)
3502         guiprefs.aerial_file = aerial.file;
3503     <span class="keyword">else</span>
3504         guiprefs.aerial_file = {<span class="string">''</span>};
3505     <span class="keyword">end</span>
3506 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3507     guiprefs.aerial_path = pwd;
3508     guiprefs.aerial_file = {<span class="string">''</span>};
3509     
3510     aerial.path = pwd;
3511     aerial.file = {<span class="string">''</span>};
3512     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3513 <span class="keyword">end</span>
3514 
3515 <span class="comment">% shoreline</span>
3516 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3517     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3518     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3519         guiprefs.shoreline_path = shoreline.path;
3520     <span class="keyword">else</span>
3521         guiprefs.shoreline_path = pwd;
3522     <span class="keyword">end</span>
3523     
3524     <span class="keyword">if</span> iscell(shoreline.file)
3525         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3526             guiprefs.shoreline_file = shoreline.file;
3527         <span class="keyword">else</span>
3528             guiprefs.shoreline_file = <span class="string">''</span>;
3529         <span class="keyword">end</span>
3530     <span class="keyword">else</span>
3531         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3532             guiprefs.shoreline_file = shoreline.file;
3533         <span class="keyword">else</span>
3534             guiprefs.shoreline_file = <span class="string">''</span>;
3535         <span class="keyword">end</span>
3536     <span class="keyword">end</span>
3537 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3538     guiprefs.shoreline_path = pwd;
3539     guiprefs.shoreline_file = <span class="string">''</span>;
3540     
3541     shoreline.path = pwd;
3542     shoreline.file = <span class="string">''</span>;
3543     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3544 <span class="keyword">end</span>
3545 <span class="comment">% guiprefs.presentation = true;</span>
3546 <span class="comment">% guiprefs.print        = false;</span>
3547 
3548 <span class="comment">% for k = 1:length(prefs)</span>
3549 <span class="comment">%     newpref = '';</span>
3550 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3551 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3552 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3553 <span class="comment">%             newpref = stored_newpref;</span>
3554 <span class="comment">%         else</span>
3555 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3556 <span class="comment">%         end</span>
3557 <span class="comment">%     end</span>
3558 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3559 <span class="comment">% end</span>
3560 
3561 <span class="comment">% RENDERER</span>
3562 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
3563     renderer = getpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>);
3564     guiprefs.renderer = renderer;
3565 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3566     renderer           = <span class="string">'OpenGL'</span>;
3567     guiprefs.renderer  = renderer;
3568     setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3569 <span class="keyword">end</span>
3570 
3571 <span class="comment">% UNITS</span>
3572 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
3573     units = getpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>);
3574     guiprefs.units = units;
3575 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3576     units           = <span class="string">'metric'</span>;
3577     guiprefs.units  = renderer;
3578     setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3579 <span class="keyword">end</span>
3580 
3581 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3582 
3583 <span class="comment">% [EOF] load_prefs</span>
3584 
3585 
3586 <span class="comment">% --------------------------------------------------------------------</span>
3587 <a name="_sub93" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3588 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3589 <span class="comment">% preferences data.</span>
3590 
3591 <span class="comment">% Preferences:</span>
3592 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3593 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3594 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3595 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3596 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3597 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3598 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3599 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3600 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3601 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3602 <span class="comment">% 'renderer'             Default graphics renderer</span>
3603 <span class="comment">% 'units'                Default plotting units</span>
3604 
3605 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3606 
3607 <span class="keyword">switch</span> pref
3608     <span class="keyword">case</span> <span class="string">'ascii'</span>
3609         ascii.path = guiprefs.ascii_path;
3610         ascii.file = guiprefs.ascii_file;
3611         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3612     <span class="keyword">case</span> <span class="string">'mat'</span>
3613         mat.path = guiprefs.mat_path;
3614         mat.file = guiprefs.mat_file;
3615         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3616     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3617         tecplot.path = guiprefs.tecplot_path;
3618         tecplot.file = guiprefs.tecplot_file;
3619         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3620     <span class="keyword">case</span> <span class="string">'kmz'</span>
3621         kmz.path = guiprefs.kmz_path;
3622         kmz.file = guiprefs.kmz_file;
3623         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3624     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3625         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3626         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3627         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3628     <span class="keyword">case</span> <span class="string">'log'</span>
3629         log.path = guiprefs.log_path;
3630         log.file = guiprefs.log_file;
3631         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3632     <span class="keyword">case</span> <span class="string">'iric'</span>
3633         iric.path = guiprefs.iric_path;
3634         iric.file = guiprefs.iric_file;
3635         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3636     <span class="keyword">case</span> <span class="string">'excel'</span>
3637         excel.path = guiprefs.excel_path;
3638         excel.file = guiprefs.excel_file;
3639         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3640     <span class="keyword">case</span> <span class="string">'aerial'</span>
3641         aerial.path = guiprefs.aerial_path;
3642         aerial.file = guiprefs.aerial_file;
3643         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3644     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3645         shoreline.path = guiprefs.shoreline_path;
3646         shoreline.file = guiprefs.shoreline_file;
3647         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3648     <span class="keyword">case</span> <span class="string">'renderer'</span>
3649         renderer = guiprefs.renderer;
3650         setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3651     <span class="keyword">case</span> <span class="string">'units'</span>
3652         units = guiprefs.units;
3653         setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3654     <span class="keyword">otherwise</span>
3655 <span class="keyword">end</span>
3656 
3657 <span class="comment">% if ismember(pref,prefs)</span>
3658 <span class="comment">%     setpref('VMT',pref,value)</span>
3659 <span class="comment">%</span>
3660 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3661 <span class="comment">%     guiprefs.(pref) = value;</span>
3662 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3663 <span class="comment">% end</span>
3664 
3665 <span class="comment">% [EOF] store_prefs</span>
3666 
3667 
3668 <span class="comment">% --------------------------------------------------------------------</span>
3669 <a name="_sub94" href="#_subfunctions" class="code">function initGUI(handles)</a>
3670 <span class="comment">% Initialize the UI controls in the GUI.</span>
3671 
3672 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3673 
3674 <span class="comment">% Set the name and version</span>
3675 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3676     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3677 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3678 
3679 <span class="comment">% Set the PLOT 1 axis labels</span>
3680 axes(handles.Plot1Shiptracks);
3681 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3682 xlabel(<span class="string">'UTM Easting (m)'</span>)
3683 ylabel(<span class="string">'UTM Northing (m)'</span>)
3684 box on
3685 grid on
3686 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3687 
3688 <span class="comment">%%%%%%%%%%%%</span>
3689 <span class="comment">% MENU BAR %</span>
3690 <span class="comment">%%%%%%%%%%%%</span>
3691 <span class="keyword">if</span> guiparams.english_units
3692     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3693     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3694 <span class="keyword">else</span>
3695     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3696     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3697 <span class="keyword">end</span>
3698 
3699 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3700     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3701     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3702 <span class="keyword">else</span>
3703     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3704     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3705 <span class="keyword">end</span>
3706 
3707 
3708 <span class="keyword">if</span> guiparams.print
3709     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3710     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3711     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3712     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3713 <span class="keyword">elseif</span> guiparams.presentation
3714     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3715     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3716     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3717     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3718 <span class="keyword">else</span>
3719 <span class="keyword">end</span>
3720 
3721 <span class="keyword">switch</span> guiparams.renderer
3722     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
3723         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3724         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3725         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3726     <span class="keyword">case</span> <span class="string">'painters'</span>
3727         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3728         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3729         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3730     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
3731         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3732         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3733         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3734 <span class="keyword">end</span>
3735 
3736 
3737 <span class="comment">%%%%%%%%%%%%%%%</span>
3738 <span class="comment">% DATA EXPORT %</span>
3739 <span class="comment">%%%%%%%%%%%%%%%</span>
3740 <span class="comment">% BathymetryPanel</span>
3741 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3742 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3743 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3744 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3745 
3746 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3747 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3748 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3749 <span class="comment">% PlanViewPanel</span>
3750 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3751 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3752 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3753 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3754 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3755 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3756 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3757 
3758 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3759 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3760 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3761 <span class="comment">% ShiptracksPanel</span>
3762 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3763 set(handles.VerticalGridNodeSpacing,    <span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
3764 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3765 
3766 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3767 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3768 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3769 <span class="comment">% CrossSectionsPanel</span>
3770 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3771     <span class="string">'Value'</span>, guiparams.idx_contour)
3772 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3773 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3774 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3775 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3776 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3777 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3778 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3779 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3780     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3781 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3782 
3783 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3784 
3785 <span class="comment">% [EOF] initGUI</span>
3786 
3787 
3788 <span class="comment">% --------------------------------------------------------------------</span>
3789 <a name="_sub95" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3790 
3791 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3792 
3793 <span class="keyword">switch</span> enable_state
3794     <span class="keyword">case</span> <span class="string">'init'</span>
3795         guiparams.gui_state = <span class="string">'init'</span>;
3796         set([handles.menuFile
3797             handles.menuOpen
3798             handles.menuOpenASCII
3799             handles.menuOpenMAT
3800             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3801         
3802         set([handles.toolbarLoadData
3803             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3804         set([handles.toolbarSaveMatFile
3805             handles.toolbarSaveBathymetry
3806             handles.toolbarSaveFigures
3807             handles.toolbarSaveExcel
3808             handles.toolbarPlottingParameters
3809             handles.toolbarProcessingParameters
3810             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3811         
3812         set([handles.DepthRangeMin
3813             handles.DepthRangeMax
3814             handles.VectorScalePlanView
3815             handles.VectorSpacingPlanview
3816             handles.SmoothingWindowSize
3817             handles.DisplayShoreline
3818             handles.AddBackground
3819             handles.PlotPlanView
3820             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3821         
3822         set([handles.HorizontalGridNodeSpacing
3823             handles.VerticalGridNodeSpacing
3824             handles.PlotShiptracks
3825             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3826         
3827         set([handles.Contour
3828             handles.VerticalExaggeration
3829             handles.VectorScaleCrossSection
3830             handles.HorizontalVectorSpacing
3831             handles.VerticalVectorSpacing
3832             handles.HorizontalSmoothingWindow
3833             handles.VerticalSmoothingWindow
3834             handles.PlotSecondaryFlowVectors
3835             handles.SecondaryFlowVectorVariable
3836             handles.IncludeVerticalVelocity
3837             handles.PlotCrossSection
3838             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3839         
3840     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3841         guiparams.gui_state = <span class="string">'fileloaded'</span>;
3842         set([handles.menuFile
3843             handles.menuOpen
3844             handles.menuOpenASCII
3845             handles.menuOpenMAT
3846             handles.menuSaveMAT
3847             handles.menuSaveTecplot
3848             handles.menuSaveKMZFile
3849             handles.menuParameters
3850             handles.menuPlottingParameters
3851             handles.menuMetric
3852             handles.menuEnglish
3853             handles.menuBathymetryExportSettings
3854             handles.menuExportMultibeamBathymetry
3855             handles.menuKMZVerticalOffset
3856             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3857         
3858         set([handles.toolbarLoadData
3859             handles.toolbarSaveMatFile
3860             handles.toolbarSaveBathymetry
3861             handles.toolbarSaveExcel
3862             handles.toolbarSaveFigures
3863             handles.toolbarPlottingParameters
3864             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3865         set([handles.toolbarProcessingParameters
3866             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3867         
3868            
3869         set([handles.DepthRangeMin
3870             handles.DepthRangeMax
3871             handles.VectorScalePlanView
3872             handles.VectorSpacingPlanview
3873             handles.SmoothingWindowSize
3874             handles.DisplayShoreline
3875             handles.PlotPlanView
3876             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3877         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3878             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3879         <span class="keyword">else</span>
3880             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3881         <span class="keyword">end</span>
3882         
3883         set([handles.HorizontalGridNodeSpacing
3884             handles.VerticalGridNodeSpacing
3885             handles.PlotShiptracks
3886             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3887         
3888         set([handles.Contour
3889             handles.VerticalExaggeration
3890             handles.VectorScaleCrossSection
3891             handles.HorizontalVectorSpacing
3892             handles.VerticalVectorSpacing
3893             handles.HorizontalSmoothingWindow
3894             handles.VerticalSmoothingWindow
3895             handles.PlotSecondaryFlowVectors
3896             handles.SecondaryFlowVectorVariable
3897             handles.IncludeVerticalVelocity
3898             handles.PlotCrossSection
3899             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3900     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
3901         guiparams.gui_state = <span class="string">'multiplematfiles'</span>;
3902         set([handles.menuFile
3903             handles.menuOpen
3904             handles.menuOpenASCII
3905             handles.menuOpenMAT
3906             handles.menuParameters
3907             handles.menuPlottingParameters
3908             handles.menuMetric
3909             handles.menuEnglish
3910             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3911         set([handles.menuSaveMAT
3912             handles.menuBathymetryExportSettings
3913             handles.menuExportMultibeamBathymetry
3914             handles.menuKMZVerticalOffset
3915             handles.menuSaveKMZFile
3916             handles.menuSaveTecplot
3917             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3918         
3919         set([handles.toolbarLoadData
3920             handles.toolbarSaveFigures
3921             handles.toolbarPlottingParameters
3922             handles.toolbarSaveExcel
3923             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3924         set([handles.toolbarProcessingParameters
3925             handles.toolbarSaveMatFile
3926             handles.toolbarSaveBathymetry
3927             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3928         
3929         set([handles.DepthRangeMin
3930             handles.DepthRangeMax
3931             handles.VectorScalePlanView
3932             handles.VectorSpacingPlanview
3933             handles.SmoothingWindowSize
3934             handles.DisplayShoreline
3935             handles.PlotPlanView
3936             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3937         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3938             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3939         <span class="keyword">else</span>
3940             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3941         <span class="keyword">end</span>
3942         
3943         set([handles.HorizontalGridNodeSpacing
3944             handles.VerticalGridNodeSpacing
3945             handles.PlotShiptracks
3946             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3947         
3948         set([handles.Contour
3949             handles.VerticalExaggeration
3950             handles.VectorScaleCrossSection
3951             handles.HorizontalVectorSpacing
3952             handles.VerticalVectorSpacing
3953             handles.HorizontalSmoothingWindow
3954             handles.VerticalSmoothingWindow
3955             handles.PlotSecondaryFlowVectors
3956             handles.SecondaryFlowVectorVariable
3957             handles.IncludeVerticalVelocity
3958             handles.PlotCrossSection
3959             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3960     <span class="keyword">otherwise</span>
3961 <span class="keyword">end</span>
3962 
3963 <span class="comment">% Save Application Data</span>
3964 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3965 
3966 <span class="comment">% [EOF] set_enable</span>
3967 
3968 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
3969 
3970 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
3971 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
3972 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
3973 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3974 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3975 
3976 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
3977 
3978 
3979 <span class="comment">% --------------------------------------------------------------------</span>
3980 <a name="_sub96" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
3981     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
3982 
3983 w = 500;
3984 h = 110;
3985 dx = 10;
3986 dy = 35;
3987 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
3988 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3989     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
3990     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3991     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
3992     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
3993     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3994     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
3995     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
3996     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
3997     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
3998     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
3999 dialog_params.english_units               = english_units;
4000 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
4001 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
4002 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
4003 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4004 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4005 
4006 <span class="comment">% Build the graphics:</span>
4007 <span class="comment">% -------------------</span>
4008 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4009     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
4010     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4011     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
4012 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4013     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4014     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
4015     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4016     <span class="string">'Position'</span>,[15 35 100 22]);
4017 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4018     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4019     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
4020     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4021     <span class="string">'Position'</span>,[15 10 100 22]);
4022 
4023 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4024     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
4025     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4026     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
4027 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4028     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4029     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
4030     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4031     <span class="string">'Position'</span>,[15 35 100 22]);
4032 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4033     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4034     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
4035     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4036     <span class="string">'Position'</span>,[15 10 100 22]);
4037 
4038 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4039     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
4040     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4041     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
4042 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4043     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4044     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
4045     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4046     <span class="string">'Position'</span>,[15 35 100 22]);
4047 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4048     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4049     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
4050     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4051     <span class="string">'Position'</span>,[15 10 100 22]);
4052 
4053 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4054     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4055     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4056     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4057     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4058 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4059     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4060     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4061     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4062     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4063 
4064 <span class="comment">% Update the UI controls:</span>
4065 <span class="comment">% -----------------------</span>
4066 <span class="keyword">if</span> dialog_params.english_units
4067     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4068     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4069 <span class="keyword">else</span>
4070     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4071     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4072 <span class="keyword">end</span>
4073 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
4074     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4075     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4076 <span class="keyword">else</span>
4077     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4078     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4079 <span class="keyword">end</span>
4080 <span class="keyword">if</span> dialog_params.presentation
4081     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
4082     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
4083 <span class="keyword">else</span>
4084     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
4085     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
4086 <span class="keyword">end</span>
4087 
4088 <span class="comment">% Set the callbacks:</span>
4089 <span class="comment">% ------------------</span>
4090 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
4091 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
4092 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
4093 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
4094 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
4095 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
4096 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
4097 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4098 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
=======
3091 
3092 <span class="comment">% --------------------------------------------------------------------</span>
3093 <a name="_sub87" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
3094 
3095 <span class="comment">% Get the Application data:</span>
3096 <span class="comment">% -------------------------</span>
3097 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3098 
3099 <span class="comment">% Modify the Application data:</span>
3100 <span class="comment">% ----------------------------</span>
3101 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3102 
3103 <span class="comment">% Re-store the Application data:</span>
3104 <span class="comment">% ------------------------------</span>
3105 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3106 
3107 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
3108 
3109 
3110 <span class="comment">% --------------------------------------------------------------------</span>
3111 <a name="_sub88" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
3112 <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
3113 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
3114 
3115 
3116 <span class="comment">% --------------------------------------------------------------------</span>
3117 <a name="_sub89" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
3118 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
3119 <span class="comment">% [EOF] ClearLog_Callback</span>
3120 
3121 <span class="comment">% --------------------------------------------------------------------</span>
3122 <a name="_sub90" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
3123 
3124 <span class="comment">% Get the Application data:</span>
3125 <span class="comment">% -------------------------</span>
3126 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3127 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3128 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
3129 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
3130 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
3131 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
3132 
3133 [the_file,the_path] = <span class="keyword">...</span>
3134     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
3135     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
3136     fullfile(guiprefs.log_path,guiprefs.log_file));
3137 
3138 <span class="comment">% Save the log to a TXT file:</span>
3139 <span class="comment">% ---------------------------</span>
3140 <span class="keyword">if</span> ischar(the_file)
3141     guiparams.log_path = the_path;
3142     guiparams.log_file = the_file;
3143     <span class="comment">%guiparams.savefile = the_file;</span>
3144     
3145     <span class="comment">% Re-store the Application data:</span>
3146     <span class="comment">% ------------------------------</span>
3147     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3148     
3149     <span class="comment">% Update the preferences:</span>
3150     <span class="comment">% -----------------------</span>
3151     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3152     guiprefs.log_path = the_path;
3153     guiprefs.log_file = the_file;
3154     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
3155     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
3156     
3157     [~,filename,extension] = fileparts(the_file);
3158     savefile = [the_path filename extension];
3159     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
3160         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
3161     
3162     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
3163     [nrows,~]= size(logfile);
3164     fid = fopen(savefile, <span class="string">'w'</span>);
3165     <span class="keyword">for</span> row=1:nrows
3166         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
3167     <span class="keyword">end</span>
3168     fclose(fid);
3169 <span class="keyword">end</span>
3170 <span class="comment">% [EOF] SaveLog_Callback</span>
3171 
3172 <span class="comment">%%%%%%%%%%%%%%%%</span>
3173 <span class="comment">% SUBFUNCTIONS %</span>
3174 <span class="comment">%%%%%%%%%%%%%%%%</span>
3175 
3176 <span class="comment">% --------------------------------------------------------------------</span>
3177 <a name="_sub91" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
3178 
3179 icons = <a href="#_sub107" class="code" title="subfunction icons = getIcons">getIcons</a>;
3180 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
3181 
3182 <span class="comment">% Load data</span>
3183 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
3184 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3185 <span class="comment">% icon(icon==0) = NaN;</span>
3186 handles.toolbarLoadData = <span class="keyword">...</span>
3187     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3188     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
3189     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
3190 
3191 <span class="comment">% Save data</span>
3192 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
3193 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3194 <span class="comment">% icon(icon==0) = NaN;</span>
3195 handles.toolbarSaveMatFile = <span class="keyword">...</span>
3196     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3197     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
3198     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
3199     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3200 
3201 
3202 <span class="comment">% Save bathymetry</span>
3203 <span class="comment">%icon = ones(16,16,3);</span>
3204 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
3205     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3206     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
3207     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
3208 
3209 <span class="comment">% Save figures</span>
3210 <span class="comment">% icon = ones(16,16,3);</span>
3211 handles.toolbarSaveFigures = <span class="keyword">...</span>
3212     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3213     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
3214     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
3215 
3216 <span class="comment">% Save Excel File</span>
3217 <span class="comment">% icon = ones(16,16,3);</span>
3218 handles.toolbarSaveExcel = <span class="keyword">...</span>
3219     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3220     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
3221     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
3222 
3223 
3224 <span class="comment">% Plotting parameters</span>
3225 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
3226 <span class="comment">% icon = ind2rgb(icon,map);</span>
3227 handles.toolbarPlottingParameters = <span class="keyword">...</span>
3228     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3229     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
3230     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3231     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3232 
3233 <span class="comment">% Processing parameters</span>
3234 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3235 <span class="comment">% icon = ind2rgb(icon,map);</span>
3236 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3237     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3238     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3239     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3240 
3241 <span class="comment">% Zoom In</span>
3242 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3243 <span class="comment">% icon = ind2rgb(icon,map);</span>
3244 <span class="comment">% handles.toolbarZoomIn = ...</span>
3245 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3246 <span class="comment">%     'CData',        icons(8).data, ...</span>
3247 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3248 <span class="comment">%     'Separator',     'on');</span>
3249 
3250 <span class="comment">% Zoom Out</span>
3251 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3252 <span class="comment">% icon = ind2rgb(icon,map);</span>
3253 <span class="comment">% handles.toolbarZoomOut = ...</span>
3254 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3255 <span class="comment">%     'CData',        icons(9).data, ...</span>
3256 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3257 
3258 <span class="comment">% Pan</span>
3259 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3260 <span class="comment">% icon = ind2rgb(icon,map);</span>
3261 <span class="comment">% handles.toolbarPan = ...</span>
3262 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3263 <span class="comment">%     'CData',        icons(10).data, ...</span>
3264 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3265 
3266 
3267 
3268 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3269 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3270 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3271 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3272 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub25" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3273 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub53" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3274 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub54" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3275 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3276 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3277 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3278 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3279 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3280 
3281 <span class="comment">% [EOF] buildtoolbar</span>
3282 
3283 
3284 <span class="comment">% --------------------------------------------------------------------</span>
3285 <a name="_sub92" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3286 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3287 <span class="comment">% already exist.</span>
3288 
3289 <span class="comment">% Preferences:</span>
3290 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3291 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3292 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3293 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3294 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3295 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3296 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3297 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3298 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3299 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3300 <span class="comment">% 'renderer'             Default graphics renderer</span>
3301 <span class="comment">% 'units'                Default plotting units</span>
3302 
3303 <span class="comment">% Originals</span>
3304 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3305 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3306 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3307 
3308 <span class="comment">% ASCII</span>
3309 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3310     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3311     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3312         guiprefs.ascii_path = ascii.path;
3313     <span class="keyword">else</span>
3314         guiprefs.ascii_path = pwd;
3315     <span class="keyword">end</span>
3316     does_exist = false(1,length(ascii.file));
3317     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3318         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3319     <span class="keyword">end</span>
3320     <span class="keyword">if</span> any(does_exist)
3321         guiprefs.ascii_file = ascii.file(does_exist);
3322     <span class="keyword">else</span>
3323         guiprefs.ascii_file = {<span class="string">''</span>};
3324     <span class="keyword">end</span>
3325 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3326     guiprefs.ascii_path = pwd;
3327     guiprefs.ascii_file = {<span class="string">''</span>};
3328     
3329     ascii.path = pwd;
3330     ascii.file = {<span class="string">''</span>};
3331     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3332 <span class="keyword">end</span>
3333 
3334 <span class="comment">% MAT</span>
3335 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3336     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3337     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3338         guiprefs.mat_path = mat.path;
3339     <span class="keyword">else</span>
3340         guiprefs.mat_path = pwd;
3341     <span class="keyword">end</span>
3342     
3343     <span class="keyword">if</span> iscell(mat.file)
3344         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3345             guiprefs.mat_file = mat.file;
3346         <span class="keyword">else</span>
3347             guiprefs.mat_file = <span class="string">''</span>;
3348         <span class="keyword">end</span>
3349     <span class="keyword">else</span>
3350         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3351             guiprefs.mat_file = mat.file;
3352         <span class="keyword">else</span>
3353             guiprefs.mat_file = <span class="string">''</span>;
3354         <span class="keyword">end</span>
3355     <span class="keyword">end</span>
3356 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3357     guiprefs.mat_path = pwd;
3358     guiprefs.mat_file = <span class="string">''</span>;
3359     
3360     mat.path = pwd;
3361     mat.file = <span class="string">''</span>;
3362     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3363 <span class="keyword">end</span>
3364 
3365 <span class="comment">% TECPLOT</span>
3366 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3367     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3368     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3369         guiprefs.tecplot_path = tecplot.path;
3370     <span class="keyword">else</span>
3371         guiprefs.tecplot_path = pwd;
3372     <span class="keyword">end</span>
3373     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3374         guiprefs.tecplot_file = tecplot.file;
3375     <span class="keyword">else</span>
3376         guiprefs.tecplot_file = <span class="string">''</span>;
3377     <span class="keyword">end</span>
3378 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3379     guiprefs.tecplot_path = pwd;
3380     guiprefs.tecplot_file = <span class="string">''</span>;
3381     
3382     tecplot.path = pwd;
3383     tecplot.file = <span class="string">''</span>;
3384     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3385 <span class="keyword">end</span>
3386 
3387 <span class="comment">% KMZ</span>
3388 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3389     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3390     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3391         guiprefs.kmz_path = kmz.path;
3392     <span class="keyword">else</span>
3393         guiprefs.kmz_path = pwd;
3394     <span class="keyword">end</span>
3395     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3396         guiprefs.kmz_file = kmz.file;
3397     <span class="keyword">else</span>
3398         guiprefs.kmz_file = <span class="string">''</span>;
3399     <span class="keyword">end</span>
3400 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3401     guiprefs.kmz_path = pwd;
3402     guiprefs.kmz_file = <span class="string">''</span>;
3403     
3404     kmz.path = pwd;
3405     kmz.file = <span class="string">''</span>;
3406     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3407 <span class="keyword">end</span>
3408 
3409 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3410 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3411     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3412     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3413         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3414     <span class="keyword">else</span>
3415         guiprefs.multibeambathymetry_path = pwd;
3416     <span class="keyword">end</span>
3417     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3418         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3419     <span class="keyword">else</span>
3420         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3421     <span class="keyword">end</span>
3422 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3423     guiprefs.multibeambathymetry_path = pwd;
3424     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3425     
3426     multibeambathymetry.path = pwd;
3427     multibeambathymetry.file = <span class="string">''</span>;
3428     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3429 <span class="keyword">end</span>
3430 
3431 <span class="comment">% Log</span>
3432 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3433     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3434     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3435         guiprefs.log_path = log.path;
3436     <span class="keyword">else</span>
3437         guiprefs.log_path = pwd;
3438     <span class="keyword">end</span>
3439     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3440         guiprefs.log_file = log.file;
3441     <span class="keyword">else</span>
3442         guiprefs.log_file = <span class="string">''</span>;
3443     <span class="keyword">end</span>
3444 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3445     guiprefs.log_path = pwd;
3446     guiprefs.log_file = <span class="string">''</span>;
3447     
3448     log.path = pwd;
3449     log.file = <span class="string">''</span>;
3450     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3451 <span class="keyword">end</span>
3452 
3453 <span class="comment">% iRic</span>
3454 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3455     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3456     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3457         guiprefs.iric_path = iric.path;
3458     <span class="keyword">else</span>
3459         guiprefs.iric_path = pwd;
3460     <span class="keyword">end</span>
3461     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3462         guiprefs.iric_file = iric.file;
3463     <span class="keyword">else</span>
3464         guiprefs.iric_file = <span class="string">''</span>;
3465     <span class="keyword">end</span>
3466 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3467     guiprefs.iric_path = pwd;
3468     guiprefs.iric_file = <span class="string">''</span>;
3469     
3470     iric.path = pwd;
3471     iric.file = <span class="string">''</span>;
3472     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3473 <span class="keyword">end</span>
3474 
3475 <span class="comment">% excel</span>
3476 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3477     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3478     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3479         guiprefs.excel_path = excel.path;
3480     <span class="keyword">else</span>
3481         guiprefs.excel_path = pwd;
3482     <span class="keyword">end</span>
3483     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3484         guiprefs.excel_file = excel.file;
3485     <span class="keyword">else</span>
3486         guiprefs.excel_file = <span class="string">''</span>;
3487     <span class="keyword">end</span>
3488 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3489     guiprefs.excel_path = pwd;
3490     guiprefs.excel_file = <span class="string">''</span>;
3491     
3492     excel.path = pwd;
3493     excel.file = <span class="string">''</span>;
3494     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3495 <span class="keyword">end</span>
3496 
3497 <span class="comment">% aerial</span>
3498 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3499     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3500     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3501         guiprefs.aerial_path = aerial.path;
3502     <span class="keyword">else</span>
3503         guiprefs.aerial_path = pwd;
3504     <span class="keyword">end</span>
3505     does_exist = false(1,length(aerial.file));
3506     <span class="keyword">if</span> iscell(aerial.file)
3507     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3508         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3509     <span class="keyword">end</span>
3510     <span class="keyword">else</span>
3511         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3512     <span class="keyword">end</span>
3513     <span class="keyword">if</span> any(does_exist)
3514         guiprefs.aerial_file = aerial.file;
3515     <span class="keyword">else</span>
3516         guiprefs.aerial_file = {<span class="string">''</span>};
3517     <span class="keyword">end</span>
3518 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3519     guiprefs.aerial_path = pwd;
3520     guiprefs.aerial_file = {<span class="string">''</span>};
3521     
3522     aerial.path = pwd;
3523     aerial.file = {<span class="string">''</span>};
3524     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3525 <span class="keyword">end</span>
3526 
3527 <span class="comment">% shoreline</span>
3528 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3529     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3530     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3531         guiprefs.shoreline_path = shoreline.path;
3532     <span class="keyword">else</span>
3533         guiprefs.shoreline_path = pwd;
3534     <span class="keyword">end</span>
3535     
3536     <span class="keyword">if</span> iscell(shoreline.file)
3537         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3538             guiprefs.shoreline_file = shoreline.file;
3539         <span class="keyword">else</span>
3540             guiprefs.shoreline_file = <span class="string">''</span>;
3541         <span class="keyword">end</span>
3542     <span class="keyword">else</span>
3543         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3544             guiprefs.shoreline_file = shoreline.file;
3545         <span class="keyword">else</span>
3546             guiprefs.shoreline_file = <span class="string">''</span>;
3547         <span class="keyword">end</span>
3548     <span class="keyword">end</span>
3549 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3550     guiprefs.shoreline_path = pwd;
3551     guiprefs.shoreline_file = <span class="string">''</span>;
3552     
3553     shoreline.path = pwd;
3554     shoreline.file = <span class="string">''</span>;
3555     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3556 <span class="keyword">end</span>
3557 <span class="comment">% guiprefs.presentation = true;</span>
3558 <span class="comment">% guiprefs.print        = false;</span>
3559 
3560 <span class="comment">% for k = 1:length(prefs)</span>
3561 <span class="comment">%     newpref = '';</span>
3562 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3563 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3564 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3565 <span class="comment">%             newpref = stored_newpref;</span>
3566 <span class="comment">%         else</span>
3567 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3568 <span class="comment">%         end</span>
3569 <span class="comment">%     end</span>
3570 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3571 <span class="comment">% end</span>
3572 
3573 <span class="comment">% RENDERER</span>
3574 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
3575     renderer = getpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>);
3576     guiprefs.renderer = renderer;
3577 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3578     renderer           = <span class="string">'OpenGL'</span>;
3579     guiprefs.renderer  = renderer;
3580     setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3581 <span class="keyword">end</span>
3582 
3583 <span class="comment">% UNITS</span>
3584 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
3585     units = getpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>);
3586     guiprefs.units = units;
3587 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3588     units           = <span class="string">'metric'</span>;
3589     guiprefs.units  = renderer;
3590     setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3591 <span class="keyword">end</span>
3592 
3593 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3594 
3595 <span class="comment">% [EOF] load_prefs</span>
3596 
3597 
3598 <span class="comment">% --------------------------------------------------------------------</span>
3599 <a name="_sub93" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3600 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3601 <span class="comment">% preferences data.</span>
3602 
3603 <span class="comment">% Preferences:</span>
3604 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3605 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3606 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3607 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3608 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3609 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3610 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3611 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3612 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3613 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3614 <span class="comment">% 'renderer'             Default graphics renderer</span>
3615 <span class="comment">% 'units'                Default plotting units</span>
3616 
3617 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3618 
3619 <span class="keyword">switch</span> pref
3620     <span class="keyword">case</span> <span class="string">'ascii'</span>
3621         ascii.path = guiprefs.ascii_path;
3622         ascii.file = guiprefs.ascii_file;
3623         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3624     <span class="keyword">case</span> <span class="string">'mat'</span>
3625         mat.path = guiprefs.mat_path;
3626         mat.file = guiprefs.mat_file;
3627         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3628     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3629         tecplot.path = guiprefs.tecplot_path;
3630         tecplot.file = guiprefs.tecplot_file;
3631         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3632     <span class="keyword">case</span> <span class="string">'kmz'</span>
3633         kmz.path = guiprefs.kmz_path;
3634         kmz.file = guiprefs.kmz_file;
3635         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3636     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3637         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3638         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3639         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3640     <span class="keyword">case</span> <span class="string">'log'</span>
3641         log.path = guiprefs.log_path;
3642         log.file = guiprefs.log_file;
3643         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3644     <span class="keyword">case</span> <span class="string">'iric'</span>
3645         iric.path = guiprefs.iric_path;
3646         iric.file = guiprefs.iric_file;
3647         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3648     <span class="keyword">case</span> <span class="string">'excel'</span>
3649         excel.path = guiprefs.excel_path;
3650         excel.file = guiprefs.excel_file;
3651         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3652     <span class="keyword">case</span> <span class="string">'aerial'</span>
3653         aerial.path = guiprefs.aerial_path;
3654         aerial.file = guiprefs.aerial_file;
3655         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3656     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3657         shoreline.path = guiprefs.shoreline_path;
3658         shoreline.file = guiprefs.shoreline_file;
3659         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3660     <span class="keyword">case</span> <span class="string">'renderer'</span>
3661         renderer = guiprefs.renderer;
3662         setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3663     <span class="keyword">case</span> <span class="string">'units'</span>
3664         units = guiprefs.units;
3665         setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3666     <span class="keyword">otherwise</span>
3667 <span class="keyword">end</span>
3668 
3669 <span class="comment">% if ismember(pref,prefs)</span>
3670 <span class="comment">%     setpref('VMT',pref,value)</span>
3671 <span class="comment">%</span>
3672 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3673 <span class="comment">%     guiprefs.(pref) = value;</span>
3674 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3675 <span class="comment">% end</span>
3676 
3677 <span class="comment">% [EOF] store_prefs</span>
3678 
3679 
3680 <span class="comment">% --------------------------------------------------------------------</span>
3681 <a name="_sub94" href="#_subfunctions" class="code">function initGUI(handles)</a>
3682 <span class="comment">% Initialize the UI controls in the GUI.</span>
3683 
3684 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3685 
3686 <span class="comment">% Set the name and version</span>
3687 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3688     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3689 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3690 
3691 <span class="comment">% Set the PLOT 1 axis labels</span>
3692 axes(handles.Plot1Shiptracks);
3693 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3694 xlabel(<span class="string">'UTM Easting (m)'</span>)
3695 ylabel(<span class="string">'UTM Northing (m)'</span>)
3696 box on
3697 grid on
3698 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3699 
3700 <span class="comment">%%%%%%%%%%%%</span>
3701 <span class="comment">% MENU BAR %</span>
3702 <span class="comment">%%%%%%%%%%%%</span>
3703 <span class="keyword">if</span> guiparams.english_units
3704     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3705     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3706 <span class="keyword">else</span>
3707     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3708     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3709 <span class="keyword">end</span>
3710 
3711 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3712     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3713     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3714 <span class="keyword">else</span>
3715     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3716     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3717 <span class="keyword">end</span>
3718 
3719 
3720 <span class="keyword">if</span> guiparams.print
3721     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3722     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3723     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3724     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3725 <span class="keyword">elseif</span> guiparams.presentation
3726     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3727     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3728     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3729     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3730 <span class="keyword">else</span>
3731 <span class="keyword">end</span>
3732 
3733 <span class="keyword">switch</span> guiparams.renderer
3734     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
3735         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3736         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3737         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3738     <span class="keyword">case</span> <span class="string">'painters'</span>
3739         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3740         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3741         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3742     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
3743         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3744         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3745         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3746 <span class="keyword">end</span>
3747 
3748 
3749 <span class="comment">%%%%%%%%%%%%%%%</span>
3750 <span class="comment">% DATA EXPORT %</span>
3751 <span class="comment">%%%%%%%%%%%%%%%</span>
3752 <span class="comment">% BathymetryPanel</span>
3753 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3754 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3755 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3756 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3757 
3758 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3759 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3760 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3761 <span class="comment">% PlanViewPanel</span>
3762 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3763 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3764 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3765 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3766 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3767 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3768 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3769 
3770 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3771 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3772 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3773 <span class="comment">% ShiptracksPanel</span>
3774 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3775 set(handles.VerticalGridNodeSpacing,    <span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
3776 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3777 
3778 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3779 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3780 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3781 <span class="comment">% CrossSectionsPanel</span>
3782 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3783     <span class="string">'Value'</span>, guiparams.idx_contour)
3784 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3785 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3786 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3787 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3788 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3789 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3790 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3791 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3792     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3793 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3794 
3795 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3796 
3797 <span class="comment">% [EOF] initGUI</span>
3798 
3799 
3800 <span class="comment">% --------------------------------------------------------------------</span>
3801 <a name="_sub95" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3802 
3803 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3804 
3805 <span class="keyword">switch</span> enable_state
3806     <span class="keyword">case</span> <span class="string">'init'</span>
3807         guiparams.gui_state = <span class="string">'init'</span>;
3808         set([handles.menuFile
3809             handles.menuOpen
3810             handles.menuOpenASCII
3811             handles.menuOpenMAT
3812             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3813         
3814         set([handles.toolbarLoadData
3815             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3816         set([handles.toolbarSaveMatFile
3817             handles.toolbarSaveBathymetry
3818             handles.toolbarSaveFigures
3819             handles.toolbarSaveExcel
3820             handles.toolbarPlottingParameters
3821             handles.toolbarProcessingParameters
3822             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3823         
3824         set([handles.DepthRangeMin
3825             handles.DepthRangeMax
3826             handles.VectorScalePlanView
3827             handles.VectorSpacingPlanview
3828             handles.SmoothingWindowSize
3829             handles.DisplayShoreline
3830             handles.AddBackground
3831             handles.PlotPlanView
3832             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3833         
3834         set([handles.HorizontalGridNodeSpacing
3835             handles.VerticalGridNodeSpacing
3836             handles.PlotShiptracks
3837             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3838         
3839         set([handles.Contour
3840             handles.VerticalExaggeration
3841             handles.VectorScaleCrossSection
3842             handles.HorizontalVectorSpacing
3843             handles.VerticalVectorSpacing
3844             handles.HorizontalSmoothingWindow
3845             handles.VerticalSmoothingWindow
3846             handles.PlotSecondaryFlowVectors
3847             handles.SecondaryFlowVectorVariable
3848             handles.IncludeVerticalVelocity
3849             handles.PlotCrossSection
3850             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3851         
3852     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3853         guiparams.gui_state = <span class="string">'fileloaded'</span>;
3854         set([handles.menuFile
3855             handles.menuOpen
3856             handles.menuOpenASCII
3857             handles.menuOpenMAT
3858             handles.menuSaveMAT
3859             handles.menuSaveTecplot
3860             handles.menuSaveKMZFile
3861             handles.menuParameters
3862             handles.menuPlottingParameters
3863             handles.menuMetric
3864             handles.menuEnglish
3865             handles.menuBathymetryExportSettings
3866             handles.menuExportMultibeamBathymetry
3867             handles.menuKMZVerticalOffset
3868             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3869         
3870         set([handles.toolbarLoadData
3871             handles.toolbarSaveMatFile
3872             handles.toolbarSaveBathymetry
3873             handles.toolbarSaveExcel
3874             handles.toolbarSaveFigures
3875             handles.toolbarPlottingParameters
3876             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3877         set([handles.toolbarProcessingParameters
3878             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3879         
3880            
3881         set([handles.DepthRangeMin
3882             handles.DepthRangeMax
3883             handles.VectorScalePlanView
3884             handles.VectorSpacingPlanview
3885             handles.SmoothingWindowSize
3886             handles.DisplayShoreline
3887             handles.PlotPlanView
3888             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3889         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3890             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3891         <span class="keyword">else</span>
3892             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3893         <span class="keyword">end</span>
3894         
3895         set([handles.HorizontalGridNodeSpacing
3896             handles.VerticalGridNodeSpacing
3897             handles.PlotShiptracks
3898             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3899         
3900         set([handles.Contour
3901             handles.VerticalExaggeration
3902             handles.VectorScaleCrossSection
3903             handles.HorizontalVectorSpacing
3904             handles.VerticalVectorSpacing
3905             handles.HorizontalSmoothingWindow
3906             handles.VerticalSmoothingWindow
3907             handles.PlotSecondaryFlowVectors
3908             handles.SecondaryFlowVectorVariable
3909             handles.IncludeVerticalVelocity
3910             handles.PlotCrossSection
3911             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3912     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
3913         guiparams.gui_state = <span class="string">'multiplematfiles'</span>;
3914         set([handles.menuFile
3915             handles.menuOpen
3916             handles.menuOpenASCII
3917             handles.menuOpenMAT
3918             handles.menuParameters
3919             handles.menuPlottingParameters
3920             handles.menuMetric
3921             handles.menuEnglish
3922             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3923         set([handles.menuSaveMAT
3924             handles.menuBathymetryExportSettings
3925             handles.menuExportMultibeamBathymetry
3926             handles.menuKMZVerticalOffset
3927             handles.menuSaveKMZFile
3928             handles.menuSaveTecplot
3929             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3930         
3931         set([handles.toolbarLoadData
3932             handles.toolbarSaveFigures
3933             handles.toolbarPlottingParameters
3934             handles.toolbarSaveExcel
3935             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3936         set([handles.toolbarProcessingParameters
3937             handles.toolbarSaveMatFile
3938             handles.toolbarSaveBathymetry
3939             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3940         
3941         set([handles.DepthRangeMin
3942             handles.DepthRangeMax
3943             handles.VectorScalePlanView
3944             handles.VectorSpacingPlanview
3945             handles.SmoothingWindowSize
3946             handles.DisplayShoreline
3947             handles.PlotPlanView
3948             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3949         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3950             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3951         <span class="keyword">else</span>
3952             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3953         <span class="keyword">end</span>
3954         
3955         set([handles.HorizontalGridNodeSpacing
3956             handles.VerticalGridNodeSpacing
3957             handles.PlotShiptracks
3958             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3959         
3960         set([handles.Contour
3961             handles.VerticalExaggeration
3962             handles.VectorScaleCrossSection
3963             handles.HorizontalVectorSpacing
3964             handles.VerticalVectorSpacing
3965             handles.HorizontalSmoothingWindow
3966             handles.VerticalSmoothingWindow
3967             handles.PlotSecondaryFlowVectors
3968             handles.SecondaryFlowVectorVariable
3969             handles.IncludeVerticalVelocity
3970             handles.PlotCrossSection
3971             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3972     <span class="keyword">otherwise</span>
3973 <span class="keyword">end</span>
3974 
3975 <span class="comment">% Save Application Data</span>
3976 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3977 
3978 <span class="comment">% [EOF] set_enable</span>
3979 
3980 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
3981 
3982 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
3983 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
3984 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
3985 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3986 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3987 
3988 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
3989 
3990 
3991 <span class="comment">% --------------------------------------------------------------------</span>
3992 <a name="_sub96" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
3993     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
3994 
3995 w = 500;
3996 h = 110;
3997 dx = 10;
3998 dy = 35;
3999 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4000 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
4001     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4002     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4003     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4004     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4005     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4006     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4007     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4008     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4009     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4010     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4011 dialog_params.english_units               = english_units;
4012 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
4013 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
4014 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
4015 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4016 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4017 
4018 <span class="comment">% Build the graphics:</span>
4019 <span class="comment">% -------------------</span>
4020 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4021     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
4022     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4023     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
4024 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4025     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4026     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
4027     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4028     <span class="string">'Position'</span>,[15 35 100 22]);
4029 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4030     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4031     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
4032     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4033     <span class="string">'Position'</span>,[15 10 100 22]);
4034 
4035 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4036     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
4037     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4038     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
4039 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4040     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4041     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
4042     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4043     <span class="string">'Position'</span>,[15 35 100 22]);
4044 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4045     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4046     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
4047     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4048     <span class="string">'Position'</span>,[15 10 100 22]);
4049 
4050 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4051     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
4052     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4053     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
4054 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4055     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4056     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
4057     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4058     <span class="string">'Position'</span>,[15 35 100 22]);
4059 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4060     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4061     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
4062     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4063     <span class="string">'Position'</span>,[15 10 100 22]);
4064 
4065 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4066     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4067     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4068     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4069     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4070 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4071     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4072     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4073     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4074     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4075 
4076 <span class="comment">% Update the UI controls:</span>
4077 <span class="comment">% -----------------------</span>
4078 <span class="keyword">if</span> dialog_params.english_units
4079     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4080     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4081 <span class="keyword">else</span>
4082     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4083     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4084 <span class="keyword">end</span>
4085 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
4086     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4087     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4088 <span class="keyword">else</span>
4089     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4090     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4091 <span class="keyword">end</span>
4092 <span class="keyword">if</span> dialog_params.presentation
4093     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
4094     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
4095 <span class="keyword">else</span>
4096     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
4097     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
4098 <span class="keyword">end</span>
>>>>>>> .r93
4099 
<<<<<<< .mine
4100 <span class="comment">% Position the dialog and make it visible:</span>
4101 <span class="comment">% ----------------------------------------</span>
4102 fpos = get(hf,<span class="string">'Position'</span>);
4103 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4104 movegui(handles.Figure,dpos)
4105 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4106 
4107 <span class="comment">% Hold the dialog open:</span>
4108 <span class="comment">% ---------------------</span>
4109 waitfor(handles.OK)
4110 
4111 <span class="comment">% Return the outputs and close the dialog:</span>
4112 <span class="comment">% ----------------------------------------</span>
4113 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4114 english_units = dialog_params.english_units;
4115 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
4116 plot_presentation_style =  dialog_params.presentation;
4117 plot_print_style =  dialog_params.print;
4118 
4119 delete(handles.Figure)
4120 
4121 <span class="comment">% [EOF] plotParametersDialog</span>
4122 
4123 
4124 <span class="comment">% --------------------------------------------------------------------</span>
4125 <a name="_sub97" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
4126 
4127 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4128 <span class="keyword">switch</span> the_units
4129     <span class="keyword">case</span> <span class="string">'metric'</span>
4130         dialog_params.english_units = false;
4131         
4132         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4133         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4134     <span class="keyword">case</span> <span class="string">'english'</span>
4135         dialog_params.english_units = true;
4136         
4137         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4138         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4139     <span class="keyword">otherwise</span>
4140 <span class="keyword">end</span>
4141 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4142 
4143 <span class="comment">% [EOF] dialogUnits</span>
4144 
4145 <span class="comment">% --------------------------------------------------------------------</span>
4146 <a name="_sub98" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
4147 
4148 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4149 <span class="keyword">switch</span> the_endpoints
4150     <span class="keyword">case</span> <span class="string">'auto'</span>
4151         dialog_params.set_cross_section_endpoints = false;
4152         
4153         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4154         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4155     <span class="keyword">case</span> <span class="string">'manual'</span>
4156         dialog_params.set_cross_section_endpoints = true;
4157         
4158         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4159         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4160     <span class="keyword">otherwise</span>
4161 <span class="keyword">end</span>
4162 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4163 
4164 <span class="comment">% [EOF] dialogEnpoints</span>
4165 
4166 <a name="_sub99" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
4167 
4168 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4169 <span class="keyword">switch</span> the_style
4170     <span class="keyword">case</span> <span class="string">'presentation'</span>
4171         dialog_params.presentation  = true;
4172         dialog_params.print         = false;
4173         
4174         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
4175         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
4176     <span class="keyword">case</span> <span class="string">'print'</span>
4177         dialog_params.presentation  = false;
4178         dialog_params.print         = true;
4179         
4180         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
4181         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
4182     <span class="keyword">otherwise</span>
4183 <span class="keyword">end</span>
4184 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4185 
4186 <span class="comment">% [EOF] dialogEnpoints</span>
4187 
4188 <span class="comment">% --------------------------------------------------------------------</span>
4189 <a name="_sub100" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
4190 
4191 delete(h_OK)
4192 
4193 <span class="comment">% [EOF] dialogOK</span>
4194 
4195 <span class="comment">% --------------------------------------------------------------------</span>
4196 <a name="_sub101" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
4197 <span class="comment">% Return the original inputs</span>
4198 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
4199 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4200 delete(handles.OK)
4201 
4202 <span class="comment">% [EOF] dialogCancel</span>
4203 
4204 <span class="comment">% --------------------------------------------------------------------</span>
4205 <a name="_sub102" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
4206 
4207 delete(h_OK)
4208 
4209 <span class="comment">% [EOF] dialogCloseReq</span>
4210 
4211 <a name="_sub103" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
4212 w = 230;
4213 h = 200;
4214 dx = 10;
4215 dy = 35;
4216 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4217 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
4218     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4219     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4220     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4221     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4222     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4223     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4224     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4225     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4226     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4227     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4228 dialog_params.beam_angle             = beam_angle;
4229 dialog_params.magnetic_variation     = magnetic_variation;
4230 dialog_params.wse                    = wse;
4231 dialog_params.output_auxiliary_data = output_auxiliary_data;
4232 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4233 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4234 
4235 <span class="comment">% Build the graphics:</span>
4236 <span class="comment">% -------------------</span>
4237 ph = 150;
4238 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4239     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
4240     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4241     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4242 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4243     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4244     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
4245     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4246     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4247     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4248     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
4249 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4250     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4251     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
4252     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
4253     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4254     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4255     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
4256 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4257     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4258     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4259     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4260     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4261     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4262     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4263 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4264     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4265     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4266     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4267     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4268     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4269     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4270 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4271     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4272     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4273     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4274     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4275     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4276     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4277 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4278     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4279     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4280     <span class="string">'String'</span>,num2str(wse),<span class="keyword">...</span>
4281     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4282     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4283     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4284 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4285     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4286     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4287     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4288     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4289 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4290     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4291     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4292     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4293     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4294 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4295     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4296     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4297     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4298     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4299 
4300 <span class="comment">% Update the UI controls:</span>
4301 <span class="comment">% -----------------------</span>
4302 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4303 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4304 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4305 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4306 
4307 <span class="comment">% Set the callbacks:</span>
4308 <span class="comment">% ------------------</span>
4309 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4310 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4311 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4312 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4313 set(handles.OutputauxiliaryData,         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4314 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4315 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4316 
4317 <span class="comment">% Position the dialog and make it visible:</span>
4318 <span class="comment">% ----------------------------------------</span>
4319 fpos = get(hf,<span class="string">'Position'</span>);
4320 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4321 movegui(handles.Figure,dpos)
4322 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4323 
4324 <span class="comment">% Hold the dialog open:</span>
4325 <span class="comment">% ---------------------</span>
4326 waitfor(handles.OK)
4327 
4328 <span class="comment">% Return the outputs and close the dialog:</span>
4329 <span class="comment">% ----------------------------------------</span>
4330 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4331 beam_angle              = dialog_params.beam_angle;
4332 magnetic_variation      = dialog_params.magnetic_variation;
4333 wse                     = str2double(dialog_params.wse);
4334 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
=======
4100 <span class="comment">% Set the callbacks:</span>
4101 <span class="comment">% ------------------</span>
4102 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
4103 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
4104 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
4105 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
4106 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
4107 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
4108 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
4109 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4110 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4111 
4112 <span class="comment">% Position the dialog and make it visible:</span>
4113 <span class="comment">% ----------------------------------------</span>
4114 fpos = get(hf,<span class="string">'Position'</span>);
4115 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4116 movegui(handles.Figure,dpos)
4117 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4118 
4119 <span class="comment">% Hold the dialog open:</span>
4120 <span class="comment">% ---------------------</span>
4121 waitfor(handles.OK)
4122 
4123 <span class="comment">% Return the outputs and close the dialog:</span>
4124 <span class="comment">% ----------------------------------------</span>
4125 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4126 english_units = dialog_params.english_units;
4127 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
4128 plot_presentation_style =  dialog_params.presentation;
4129 plot_print_style =  dialog_params.print;
4130 
4131 delete(handles.Figure)
4132 
4133 <span class="comment">% [EOF] plotParametersDialog</span>
4134 
4135 
4136 <span class="comment">% --------------------------------------------------------------------</span>
4137 <a name="_sub97" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
4138 
4139 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4140 <span class="keyword">switch</span> the_units
4141     <span class="keyword">case</span> <span class="string">'metric'</span>
4142         dialog_params.english_units = false;
4143         
4144         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4145         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4146     <span class="keyword">case</span> <span class="string">'english'</span>
4147         dialog_params.english_units = true;
4148         
4149         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4150         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4151     <span class="keyword">otherwise</span>
4152 <span class="keyword">end</span>
4153 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4154 
4155 <span class="comment">% [EOF] dialogUnits</span>
4156 
4157 <span class="comment">% --------------------------------------------------------------------</span>
4158 <a name="_sub98" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
4159 
4160 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4161 <span class="keyword">switch</span> the_endpoints
4162     <span class="keyword">case</span> <span class="string">'auto'</span>
4163         dialog_params.set_cross_section_endpoints = false;
4164         
4165         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4166         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4167     <span class="keyword">case</span> <span class="string">'manual'</span>
4168         dialog_params.set_cross_section_endpoints = true;
4169         
4170         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4171         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4172     <span class="keyword">otherwise</span>
4173 <span class="keyword">end</span>
4174 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4175 
4176 <span class="comment">% [EOF] dialogEnpoints</span>
4177 
4178 <a name="_sub99" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
4179 
4180 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4181 <span class="keyword">switch</span> the_style
4182     <span class="keyword">case</span> <span class="string">'presentation'</span>
4183         dialog_params.presentation  = true;
4184         dialog_params.print         = false;
4185         
4186         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
4187         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
4188     <span class="keyword">case</span> <span class="string">'print'</span>
4189         dialog_params.presentation  = false;
4190         dialog_params.print         = true;
4191         
4192         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
4193         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
4194     <span class="keyword">otherwise</span>
4195 <span class="keyword">end</span>
4196 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4197 
4198 <span class="comment">% [EOF] dialogEnpoints</span>
4199 
4200 <span class="comment">% --------------------------------------------------------------------</span>
4201 <a name="_sub100" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
4202 
4203 delete(h_OK)
4204 
4205 <span class="comment">% [EOF] dialogOK</span>
4206 
4207 <span class="comment">% --------------------------------------------------------------------</span>
4208 <a name="_sub101" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
4209 <span class="comment">% Return the original inputs</span>
4210 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
4211 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4212 delete(handles.OK)
4213 
4214 <span class="comment">% [EOF] dialogCancel</span>
4215 
4216 <span class="comment">% --------------------------------------------------------------------</span>
4217 <a name="_sub102" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
4218 
4219 delete(h_OK)
4220 
4221 <span class="comment">% [EOF] dialogCloseReq</span>
4222 
4223 <a name="_sub103" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
4224 w = 230;
4225 h = 200;
4226 dx = 10;
4227 dy = 35;
4228 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4229 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
4230     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4231     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4232     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4233     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4234     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4235     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4236     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4237     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4238     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4239     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4240 dialog_params.beam_angle             = beam_angle;
4241 dialog_params.magnetic_variation     = magnetic_variation;
4242 dialog_params.wse                    = wse;
4243 dialog_params.output_auxiliary_data = output_auxiliary_data;
4244 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4245 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4246 
4247 <span class="comment">% Build the graphics:</span>
4248 <span class="comment">% -------------------</span>
4249 ph = 150;
4250 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4251     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
4252     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4253     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4254 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4255     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4256     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
4257     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4258     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4259     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4260     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
4261 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4262     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4263     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
4264     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
4265     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4266     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4267     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
4268 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4269     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4270     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4271     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4272     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4273     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4274     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4275 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4276     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4277     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4278     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4279     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4280     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4281     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4282 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4283     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4284     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4285     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4286     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4287     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4288     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4289 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4290     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4291     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4292     <span class="string">'String'</span>,num2str(wse),<span class="keyword">...</span>
4293     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4294     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4295     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4296 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4297     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4298     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4299     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4300     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4301 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4302     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4303     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4304     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4305     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4306 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4307     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4308     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4309     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4310     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4311 
4312 <span class="comment">% Update the UI controls:</span>
4313 <span class="comment">% -----------------------</span>
4314 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4315 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4316 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4317 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4318 
4319 <span class="comment">% Set the callbacks:</span>
4320 <span class="comment">% ------------------</span>
4321 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4322 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4323 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4324 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4325 set(handles.OutputauxiliaryData,         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4326 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4327 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4328 
4329 <span class="comment">% Position the dialog and make it visible:</span>
4330 <span class="comment">% ----------------------------------------</span>
4331 fpos = get(hf,<span class="string">'Position'</span>);
4332 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4333 movegui(handles.Figure,dpos)
4334 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
>>>>>>> .r93
4335 
<<<<<<< .mine
4336 delete(handles.Figure)
4337 
4338 <span class="comment">% [EOF] exportSettingsDialog</span>
4339 
4340 <span class="comment">% --------------------------------------------------------------------</span>
4341 <a name="_sub104" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4342 
4343 <span class="comment">% Grab the current data</span>
4344 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4345 
4346 <span class="comment">% Set it according to the dialog box values</span>
4347 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4348 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4349 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4350 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
=======
4336 <span class="comment">% Hold the dialog open:</span>
4337 <span class="comment">% ---------------------</span>
4338 waitfor(handles.OK)
4339 
4340 <span class="comment">% Return the outputs and close the dialog:</span>
4341 <span class="comment">% ----------------------------------------</span>
4342 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4343 beam_angle              = dialog_params.beam_angle;
4344 magnetic_variation      = dialog_params.magnetic_variation;
4345 wse                     = str2double(dialog_params.wse);
4346 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
4347 
4348 delete(handles.Figure)
4349 
4350 <span class="comment">% [EOF] exportSettingsDialog</span>
>>>>>>> .r93
4351 
<<<<<<< .mine
4352 <span class="comment">% Re-store the application data</span>
4353 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4354 
4355 <span class="comment">% [EOF] dialogExportSettings</span>
4356 
4357 <a name="_sub105" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4358 
4359 w = 230;
4360 h = 200;
4361 dx = 10;
4362 dy = 35;
4363 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4364 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4365     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4366     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4367     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4368     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4369     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4370     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4371     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4372     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4373     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4374     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4375 dialog_params.figure_names               = figure_names;
4376 dialog_params.selected_figures           = <span class="string">''</span>;
4377 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4378 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4379 
4380 <span class="comment">% Build the graphics:</span>
4381 <span class="comment">% -------------------</span>
4382 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4383     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4384     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4385     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4386 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4387     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4388     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4389     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4390     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4391     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4392     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4393     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4394 
4395 
4396 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4397     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4398     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4399     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4400     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4401 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4402     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4403     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4404     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4405     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4406 
4407 <span class="comment">% Update the UI controls:</span>
4408 <span class="comment">% -----------------------</span>
4409 
4410 
4411 <span class="comment">% Set the callbacks:</span>
4412 <span class="comment">% ------------------</span>
4413 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4414 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4415 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4416 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4417 
4418 <span class="comment">% Position the dialog and make it visible:</span>
4419 <span class="comment">% ----------------------------------------</span>
4420 fpos = get(hf,<span class="string">'Position'</span>);
4421 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4422 movegui(handles.Figure,dpos)
4423 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4424 
4425 <span class="comment">% Hold the dialog open:</span>
4426 <span class="comment">% ---------------------</span>
4427 waitfor(handles.OK)
4428 
4429 <span class="comment">% Return the outputs and close the dialog:</span>
4430 <span class="comment">% ----------------------------------------</span>
4431 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4432 selected_figures = dialog_params.selected_figures;
4433 
4434 delete(handles.Figure)
4435 
4436 <span class="comment">% [EOF] openFiguresDialog</span>
4437 
4438 <span class="comment">% --------------------------------------------------------------------</span>
4439 <a name="_sub106" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
=======
4352 <span class="comment">% --------------------------------------------------------------------</span>
4353 <a name="_sub104" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4354 
4355 <span class="comment">% Grab the current data</span>
4356 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4357 
4358 <span class="comment">% Set it according to the dialog box values</span>
4359 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4360 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4361 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4362 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
4363 
4364 <span class="comment">% Re-store the application data</span>
4365 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4366 
4367 <span class="comment">% [EOF] dialogExportSettings</span>
4368 
4369 <a name="_sub105" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4370 
4371 w = 230;
4372 h = 200;
4373 dx = 10;
4374 dy = 35;
4375 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4376 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4377     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4378     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4379     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4380     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4381     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4382     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4383     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4384     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4385     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4386     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4387 dialog_params.figure_names               = figure_names;
4388 dialog_params.selected_figures           = <span class="string">''</span>;
4389 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4390 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4391 
4392 <span class="comment">% Build the graphics:</span>
4393 <span class="comment">% -------------------</span>
4394 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4395     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4396     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4397     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4398 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4399     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4400     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4401     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4402     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4403     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4404     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4405     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4406 
4407 
4408 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4409     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4410     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4411     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4412     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4413 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4414     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4415     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4416     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4417     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4418 
4419 <span class="comment">% Update the UI controls:</span>
4420 <span class="comment">% -----------------------</span>
4421 
4422 
4423 <span class="comment">% Set the callbacks:</span>
4424 <span class="comment">% ------------------</span>
4425 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4426 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4427 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4428 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4429 
4430 <span class="comment">% Position the dialog and make it visible:</span>
4431 <span class="comment">% ----------------------------------------</span>
4432 fpos = get(hf,<span class="string">'Position'</span>);
4433 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4434 movegui(handles.Figure,dpos)
4435 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4436 
4437 <span class="comment">% Hold the dialog open:</span>
4438 <span class="comment">% ---------------------</span>
4439 waitfor(handles.OK)
>>>>>>> .r93
4440 
<<<<<<< .mine
4441 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4442 
4443 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4444 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4445 selected     = fig_names(idx_selected);
4446 dialog_params.selected_figures = selected;
=======
4441 <span class="comment">% Return the outputs and close the dialog:</span>
4442 <span class="comment">% ----------------------------------------</span>
4443 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4444 selected_figures = dialog_params.selected_figures;
4445 
4446 delete(handles.Figure)
>>>>>>> .r93
4447 
<<<<<<< .mine
4448 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4449 
4450 
4451 
4452 <span class="comment">% --------------------------------------------------------------------</span>
4453 <a name="_sub107" href="#_subfunctions" class="code">function icons = getIcons</a>
4454 
4455 <span class="comment">% Load data</span>
4456 idx = 1;
4457 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4458     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4459     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4460     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4461     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4462     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4463     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4464     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4465     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4466     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4467     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4468     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4469     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4470     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4471     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4472     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4473     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4474 
4475 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4476     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4477     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4478     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4479     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4480     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4481     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4482     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4483     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4484     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4485     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4486     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4487     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4488     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4489     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4490     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4491     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4492 
4493 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4494     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4495     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4496     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4497     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4498     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4499     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4500     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4501     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4502     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4503     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4504     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4505     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4506     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4507     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4508     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4509     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4510 
4511 <span class="comment">% Save data</span>
4512 idx = idx+1;
4513 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4514     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4515     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4516     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4517     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4518     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4519     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4520     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4521     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4522     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4523     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4524     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4525     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4526     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4527     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4528     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4529     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4530 
4531 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4532     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4533     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4534     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4535     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4536     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4537     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4538     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4539     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4540     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4541     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4542     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4543     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4544     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4545     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4546     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4547     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4548 
4549 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4550     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4551     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4552     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4553     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4554     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4555     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4556     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4557     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4558     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4559     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4560     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4561     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4562     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4563     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4564     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4565     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4566 
4567 <span class="comment">% Plotting parameters</span>
4568 idx = idx+1;
4569 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4570     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4571     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4572     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4573     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4574     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4575     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4576     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4577     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4578     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4579     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4580     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4581     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4582     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4583     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4584     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4585     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4586 
4587 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4588     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4589     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4590     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4591     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4592     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4593     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4594     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4595     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4596     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4597     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4598     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4599     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4600     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4601     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4602     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4603     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4604 
4605 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4606     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4607     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4608     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4609     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4610     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4611     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4612     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4613     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4614     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4615     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4616     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4617     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4618     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4619     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4620     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4621     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4622 
4623 <span class="comment">% Processing parameters</span>
4624 idx = idx+1;
4625 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4626     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4627     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4628     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4629     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4630     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4631     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4632     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4633     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4634     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4635     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4636     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4637     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4638     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4639     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4640     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4641     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4642 
4643 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4644     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4645     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4646     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4647     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4648     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4649     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4650     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4651     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4652     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4653     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4654     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4655     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4656     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4657     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4658     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4659     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4660 
4661 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4662     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4663     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4664     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4665     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4666     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4667     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4668     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4669     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4670     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4671     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4672     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4673     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4674     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4675     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4676     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4677     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4678 
4679 <span class="comment">% Export bathymetry dialog</span>
4680 idx = idx+1;
4681 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4682     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4683     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4684     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4685     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4686     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4687     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4688     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4689     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4690     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4691     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4692     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4693     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4694     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4695     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4696     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4697     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4698     ]/255;
4699 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4700     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4701     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4702     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4703     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4704     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4705     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4706     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4707     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4708     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4709     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4710     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4711     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4712     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4713     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4714     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4715     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4716     ]/255;
4717 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4718     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4719     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4720     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4721     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4722     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4723     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4724     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4725     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4726     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4727     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4728     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4729     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4730     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4731     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4732     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4733     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4734     ]/255;
4735 
4736 <span class="comment">% Export Figures Dialog</span>
4737 idx = idx + 1;
4738 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4739     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4740     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4741     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4742     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4743     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4744     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4745     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4746     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4747     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4748     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4749     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4750     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4751     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4752     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4753     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4754 
4755 
4756 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4757     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4758     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4759     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4760     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4761     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4762     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4763     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4764     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4765     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4766     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4767     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4768     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4769     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4770     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4771     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4772 
4773 
4774 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4775     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4776     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4777     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4778     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4779     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4780     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4781     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4782     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4783     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4784     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4785     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4786     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4787     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4788     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4789     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4790 
4791 <span class="comment">% Export Excel File</span>
4792 idx = idx + 1;
4793 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4794     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4795    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4796    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4797    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4798    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4799    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4800    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4801    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4802    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4803    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4804    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4805    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4806    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4807    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4808    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4809     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4810 
4811 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4812     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4813    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4814    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4815    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4816    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4817    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4818    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4819    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4820    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4821    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4822    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4823    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4824    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4825    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4826    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4827     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4828 
4829 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4830     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4831    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4832    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4833    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4834    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4835    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4836    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4837    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4838    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4839    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4840    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4841    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4842    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4843    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4844    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4845     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4846 
4847 <span class="comment">% Zoom In</span>
4848 idx = idx + 1;
4849 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4850     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4851 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4852     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4853 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4854     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4855 
4856 <span class="comment">% Zoom Out</span>
4857 idx = idx + 1;
4858 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4859     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4860 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4861     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4862 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4863     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4864 
4865 <span class="comment">% Pan</span>
4866 idx = idx + 1;
4867 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4868     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4869 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4870     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4871 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4872     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4873 <span class="comment">% [EOF] getIcons</span>
4874 
4875 <a name="_sub108" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4876 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4877 
4878 <span class="comment">% Check for any stored prefs</span>
4879 <span class="comment">% --------------------------</span>
4880 <span class="comment">% Currently, units and the graphics renderer are stored as persistent prefs</span>
4881 guiprefs = getpref(<span class="string">'VMT'</span>);
4882 
4883 <span class="comment">% Organized by GUI panels</span>
4884 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4885 <span class="comment">% SHIPTRACKS PLOT %</span>
4886 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4887 guiparams.horizontal_grid_node_spacing       = 1.0;
4888 guiparams.vertical_grid_node_spacing         = 0.4;
4889 
4890 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4891 <span class="comment">% CROSS SECTION PLOT %</span>
4892 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4893 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4894 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4895 guiparams.idx_contour                        = 1;
4896 guiparams.vertical_exaggeration              = 10;
4897 guiparams.vector_scale_cross_section         = 0.2;
4898 guiparams.horizontal_vector_spacing          = 1;
4899 guiparams.vertical_vector_spacing            = 1;
4900 guiparams.horizontal_smoothing_window        = 1;
4901 guiparams.vertical_smoothing_window          = 1;
4902 guiparams.plot_secondary_flow_vectors        = true;
4903 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
4904 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
4905 guiparams.idx_secondary_flow_vector_variable = 1;
4906 guiparams.include_vertical_velocity          = true;
4907 
4908 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4909 <span class="comment">% PLAN VIEW PLOT %</span>
4910 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4911 guiparams.depth_range_min                    = 0;
4912 guiparams.depth_range_max                    = inf;
4913 guiparams.vector_scale_plan_view             = 1;
4914 guiparams.vector_spacing_plan_view           = 1;
4915 guiparams.smoothing_window_size              = 1;
4916 guiparams.display_shoreline                  = false;
4917 guiparams.add_background                     = false;
4918 
4919 <span class="comment">%%%%%%%%%%%%%%%</span>
4920 <span class="comment">% DATA EXPORT %</span>
4921 <span class="comment">%%%%%%%%%%%%%%%</span>
4922 guiparams.beam_angle                         = 20.0;
4923 guiparams.magnetic_variation                 = 0.0;
4924 guiparams.wse                                = 0.0;
4925 guiparams.output_auxiliary_data              = false;
4926 
4927 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4928 <span class="comment">% Contour variables %</span>
4929 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4930 idx = 1;
4931 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
4932 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
4933 idx = idx + 1;
4934 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
4935 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
4936 idx = idx + 1;
4937 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
4938 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
4939 idx = idx + 1;
4940 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
4941 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
4942 idx = idx + 1;
4943 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
4944 guiparams.contours(idx).variable = <span class="string">'east'</span>;
4945 idx = idx + 1;
4946 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
4947 guiparams.contours(idx).variable = <span class="string">'north'</span>;
4948 idx = idx + 1;
4949 guiparams.contours(idx).string   = <span class="string">'Error Velocity'</span>;
4950 guiparams.contours(idx).variable = <span class="string">'error'</span>;
4951 idx = idx + 1;
4952 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
4953 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
4954 idx = idx + 1;
4955 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
4956 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
4957 idx = idx + 1;
4958 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
4959 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
4960 idx = idx + 1;
4961 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
4962 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
4963 idx = idx + 1;
4964 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
4965 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
4966 idx = idx + 1;
4967 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
4968 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
4969 idx = idx + 1;
4970 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
4971 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
4972 idx = idx + 1;
4973 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
4974 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
4975 idx = idx + 1;
4976 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
4977 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
4978 idx = idx + 1;
4979 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
4980 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
4981 
4982 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
4983 
4984 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4985 <span class="comment">% Secondary Flow Vector Variables %</span>
4986 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4987 idx = 1;
4988 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
4989 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
4990 idx = idx + 1;
4991 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
4992 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
4993 idx = idx + 1;
4994 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
4995 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
4996 idx = idx + 1;
4997 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
4998 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
4999 idx = idx + 1;
5000 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
5001 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
5002 
5003 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
5004     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
5005 
5006 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5007 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
5008 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5009 <span class="comment">% Menu bar options</span>
5010 guiparams.presentation                       = true;
5011 guiparams.print                              = false;
5012 guiparams.set_cross_section_endpoints        = false;
5013 guiparams.unit_discharge_correction          = false;
5014 
5015 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
5016     <span class="keyword">switch</span> guiprefs.units
5017         <span class="keyword">case</span> <span class="string">'metric'</span>
5018             guiparams.english_units          = false;
5019         <span class="keyword">case</span> <span class="string">'english'</span>
5020             guiparams.english_units          = true;
5021     <span class="keyword">end</span>
5022 <span class="keyword">else</span>
5023     guiparams.english_units                  = false;
5024 <span class="keyword">end</span>
5025 guiparams.vertical_offset                    = 0;
5026 
5027 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
5028     guiparams.renderer                       = guiprefs.renderer;
5029 <span class="keyword">else</span>
5030     guiparams.renderer                       = <span class="string">'OpenGL'</span>;
5031 <span class="keyword">end</span>
5032 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
5033 <span class="comment">% guiparams.plot_planview                      = false;</span>
5034 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
5035 
5036 <span class="comment">% File location defaults</span>
5037 guiparams.ascii_path                        = pwd;
5038 guiparams.ascii_file                        = <span class="string">''</span>;
5039 guiparams.mat_path                          = pwd;
5040 guiparams.mat_file                          = <span class="string">''</span>;
5041 guiparams.tecplot_path                      = pwd;
5042 guiparams.tecplot_file                      = <span class="string">''</span>;
5043 guiparams.kmz_path                          = pwd;
5044 guiparams.kmz_file                          = <span class="string">''</span>;
5045 guiparams.multibeambathymetry_path          = pwd;
5046 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
5047 guiparams.log_path                          = pwd;
5048 guiparams.log_file                          = <span class="string">''</span>;
5049 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
5050 <span class="comment">% application</span>
5051 <span class="keyword">if</span> isdeployed 
5052     guiparams.has_mapping_toolbox           = true;
5053 <span class="keyword">else</span>
5054     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
5055         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
5056 <span class="keyword">end</span>
5057 
5058 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5059 <span class="comment">% IN MEMORY DATA STORAGE %</span>
5060 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5061 guiparams.z                      = [];
5062 guiparams.A                      = [];
5063 guiparams.V                      = [];
5064 guiparams.Map                    = [];
5065 guiparams.savefile               = [];
5066 guiparams.iric_anv_planview_data = [];
5067 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
5068 <span class="comment">% guiparams.zmax = [];</span>
5069 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
5070 guiparams.data_folder = <span class="string">''</span>;
5071 guiparams.data_files  = {<span class="string">''</span>};
5072 guiparams.gui_state   = <span class="string">'init'</span>;
5073 
5074 <span class="comment">% [EOF] createGUIparams</span>
5075 
5076 <a name="_sub109" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
5077 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
5078 
5079 <a name="_sub110" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
5080 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
5081 
5082 <span class="comment">% [EOF] VMT</span>
5083 
5084 
5085 
5086 
5087 
5088 <span class="comment">% --- Hidden keyboard commands</span>
5089 <a name="_sub111" href="#_subfunctions" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a>
5090 <span class="comment">% Used to pass specific hidden keyboard commands to VMT. Currently, the</span>
5091 <span class="comment">% only use for this function is to open Beta support for SonTek M9 data.</span>
5092 <span class="comment">%</span>
5093 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
5094 <span class="comment">% eventdata  structure with the following fields (see FIGURE)</span>
5095 <span class="comment">%    Key: name of the key that was pressed, in lower case</span>
5096 <span class="comment">%    Character: character interpretation of the key(s) that was pressed</span>
5097 <span class="comment">%    Modifier: name(s) of the modifier key(s) (i.e., control, shift) pressed</span>
5098 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
5099 
5100 in1 = eventdata.Modifier; 
5101 in2 = eventdata.Key;
5102 
5103 <span class="keyword">if</span> ~isempty(in1) <span class="comment">% User pressed at least one modifier key</span>
5104     input = [in1{:} in2];
5105 <span class="keyword">else</span>
5106     input = in2;
5107 <span class="keyword">end</span>
5108 
5109 <span class="keyword">switch</span> input
5110     <span class="comment">% Hidden SonTek M9 support</span>
5111     <span class="keyword">case</span> <span class="string">'shiftcontrols'</span>
5112         msgtxt = {<span class="keyword">...</span>
5113             <span class="string">'VMT offers limited support for SonTek M9/S5 data.'</span>;<span class="keyword">...</span>
5114             <span class="string">'SonTek RiverSurveyorLive required data format:'</span>;<span class="keyword">...</span>
5115             <span class="string">'      -ENU coordinates'</span>;<span class="keyword">...</span>
5116             <span class="string">'      -Desired GPS reference (BT/GGA/VTG)'</span>
5117             <span class="string">''</span>;<span class="keyword">...</span>
5118             <span class="string">'Abosolutely NO GUARANTEE is made or implied that this'</span>;<span class="keyword">...</span>
5119             <span class="string">'functionality will work for all cases. Results are'</span>;<span class="keyword">...</span>
5120             <span class="string">'PROVISIONAL at best.'</span>};
5121         msgbox(msgtxt, <span class="string">'Hidden Functionality: Process SonTek M9'</span>, <span class="string">'warn'</span>,<span class="string">'replace'</span>)
5122         
5123         <span class="comment">% Get the Application data:</span>
5124         <span class="comment">% -------------------------</span>
5125         guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
5126         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5127         
5128         <span class="comment">% Ask the user to select files:</span>
5129         <span class="comment">% -----------------------------</span>
5130         <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
5131         <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
5132         <span class="keyword">if</span> iscell(guiprefs.mat_file)
5133             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
5134         <span class="keyword">else</span>
5135             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
5136         <span class="keyword">end</span>
5137         [filename,pathname] = <span class="keyword">...</span>
5138             uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
5139             <span class="string">'Select SonTek RiverSurveyor Live v3.60 MAT File'</span>, <span class="keyword">...</span>
5140             uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
5141         
5142         <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
5143             guiparams.data_folder = pathname;
5144             <span class="keyword">if</span> ischar(filename)
5145                 filename = {filename};
5146             <span class="keyword">end</span>
5147             guiparams.data_files = filename;
5148             guiparams.mat_file = <span class="string">''</span>;
5149             
5150             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5151             
5152             
5153             
5154             <span class="comment">% Update the preferences:</span>
5155             <span class="comment">% -----------------------</span>
5156             guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5157             guiprefs.ascii_path = pathname;
5158             guiprefs.ascii_file = filename;
5159             setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
5160             <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
5161             
5162             <span class="comment">% Push messages to Log Window:</span>
5163             <span class="comment">% ----------------------------</span>
5164             log_text = {<span class="keyword">...</span>
5165                 <span class="string">''</span>;<span class="keyword">...</span>
5166                 [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
5167                 <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
5168                 guiparams.data_folder;
5169                 <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
5170                 char(filename)};
5171             statusLogging(handles.LogWindow, log_text)
5172             
5173             <span class="comment">% Read the file(s)</span>
5174             <span class="comment">% ----------------</span>
5175             <span class="comment">%A = parseSonTekVMT(fullfile(pathname,filename));</span>
5176             
5177             [~,~,savefile,A,z] = <span class="keyword">...</span>
5178                 <a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>(guiparams.data_folder,guiparams.data_files);
5179             guiparams.savefile = savefile;
5180             guiparams.A        = A;
5181             guiparams.z        = z;
5182             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5183             
5184             
5185             <span class="comment">% Update the GUI:</span>
5186             <span class="comment">% ---------------</span>
5187             <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
5188         <span class="keyword">end</span>  
5189     <span class="keyword">case</span> <span class="string">'shiftcontroll'</span> <span class="comment">% Call SontekMAT2KML</span>
5190         SontekMAT2KML;
5191     <span class="keyword">case</span> <span class="string">'f1'</span> <span class="comment">% Call the VMT UsersGuide</span>
5192         <a href="#_sub46" class="code" title="subfunction menuUsersGuide_Callback(hObject, eventdata, handles)">menuUsersGuide_Callback</a>(hObject, eventdata, handles)
5193         
5194     <span class="keyword">case</span> <span class="string">'controlalte'</span>
5195         VMT_BuildCustomFlatFile;
5196     <span class="keyword">otherwise</span>
5197         <span class="comment">%disp(input)</span>
5198 <span class="keyword">end</span>
5199 
5200 
5201 
5202</pre></div>
<hr><address>Generated on Thu 03-Jul-2014 09:27:03 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
=======
4448 <span class="comment">% [EOF] openFiguresDialog</span>
4449 
4450 <span class="comment">% --------------------------------------------------------------------</span>
4451 <a name="_sub106" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4452 
4453 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4454 
4455 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4456 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4457 selected     = fig_names(idx_selected);
4458 dialog_params.selected_figures = selected;
4459 
4460 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4461 
4462 
4463 
4464 <span class="comment">% --------------------------------------------------------------------</span>
4465 <a name="_sub107" href="#_subfunctions" class="code">function icons = getIcons</a>
4466 
4467 <span class="comment">% Load data</span>
4468 idx = 1;
4469 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4470     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4471     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4472     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4473     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4474     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4475     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4476     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4477     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4478     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4479     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4480     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4481     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4482     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4483     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4484     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4485     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4486 
4487 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4488     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4489     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4490     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4491     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4492     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4493     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4494     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4495     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4496     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4497     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4498     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4499     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4500     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4501     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4502     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4503     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4504 
4505 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4506     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4507     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4508     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4509     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4510     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4511     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4512     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4513     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4514     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4515     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4516     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4517     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4518     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4519     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4520     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4521     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4522 
4523 <span class="comment">% Save data</span>
4524 idx = idx+1;
4525 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4526     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4527     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4528     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4529     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4530     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4531     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4532     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4533     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4534     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4535     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4536     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4537     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4538     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4539     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4540     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4541     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4542 
4543 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4544     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4545     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4546     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4547     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4548     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4549     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4550     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4551     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4552     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4553     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4554     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4555     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4556     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4557     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4558     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4559     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4560 
4561 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4562     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4563     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4564     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4565     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4566     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4567     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4568     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4569     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4570     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4571     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4572     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4573     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4574     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4575     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4576     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4577     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4578 
4579 <span class="comment">% Plotting parameters</span>
4580 idx = idx+1;
4581 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4582     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4583     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4584     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4585     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4586     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4587     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4588     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4589     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4590     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4591     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4592     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4593     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4594     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4595     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4596     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4597     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4598 
4599 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4600     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4601     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4602     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4603     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4604     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4605     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4606     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4607     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4608     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4609     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4610     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4611     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4612     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4613     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4614     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4615     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4616 
4617 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4618     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4619     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4620     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4621     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4622     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4623     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4624     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4625     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4626     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4627     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4628     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4629     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4630     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4631     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4632     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4633     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4634 
4635 <span class="comment">% Processing parameters</span>
4636 idx = idx+1;
4637 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4638     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4639     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4640     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4641     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4642     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4643     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4644     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4645     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4646     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4647     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4648     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4649     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4650     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4651     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4652     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4653     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4654 
4655 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4656     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4657     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4658     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4659     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4660     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4661     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4662     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4663     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4664     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4665     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4666     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4667     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4668     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4669     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4670     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4671     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4672 
4673 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4674     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4675     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4676     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4677     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4678     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4679     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4680     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4681     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4682     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4683     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4684     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4685     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4686     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4687     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4688     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4689     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4690 
4691 <span class="comment">% Export bathymetry dialog</span>
4692 idx = idx+1;
4693 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4694     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4695     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4696     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4697     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4698     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4699     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4700     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4701     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4702     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4703     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4704     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4705     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4706     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4707     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4708     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4709     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4710     ]/255;
4711 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4712     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4713     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4714     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4715     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4716     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4717     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4718     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4719     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4720     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4721     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4722     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4723     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4724     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4725     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4726     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4727     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4728     ]/255;
4729 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4730     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4731     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4732     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4733     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4734     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4735     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4736     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4737     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4738     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4739     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4740     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4741     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4742     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4743     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4744     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4745     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4746     ]/255;
4747 
4748 <span class="comment">% Export Figures Dialog</span>
4749 idx = idx + 1;
4750 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4751     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4752     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4753     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4754     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4755     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4756     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4757     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4758     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4759     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4760     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4761     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4762     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4763     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4764     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4765     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4766 
4767 
4768 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4769     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4770     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4771     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4772     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4773     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4774     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4775     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4776     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4777     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4778     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4779     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4780     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4781     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4782     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4783     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4784 
4785 
4786 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4787     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4788     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4789     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4790     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4791     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4792     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4793     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4794     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4795     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4796     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4797     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4798     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4799     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4800     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4801     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4802 
4803 <span class="comment">% Export Excel File</span>
4804 idx = idx + 1;
4805 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4806     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4807    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4808    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4809    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4810    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4811    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4812    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4813    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4814    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4815    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4816    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4817    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4818    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4819    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4820    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4821     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4822 
4823 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4824     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4825    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4826    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4827    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4828    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4829    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4830    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4831    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4832    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4833    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4834    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4835    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4836    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4837    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4838    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4839     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4840 
4841 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4842     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4843    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4844    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4845    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4846    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4847    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4848    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4849    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4850    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4851    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4852    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4853    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4854    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4855    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4856    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4857     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4858 
4859 <span class="comment">% Zoom In</span>
4860 idx = idx + 1;
4861 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4862     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4863 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4864     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4865 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4866     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4867 
4868 <span class="comment">% Zoom Out</span>
4869 idx = idx + 1;
4870 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4871     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4872 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4873     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4874 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4875     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4876 
4877 <span class="comment">% Pan</span>
4878 idx = idx + 1;
4879 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4880     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4881 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4882     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4883 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4884     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4885 <span class="comment">% [EOF] getIcons</span>
4886 
4887 <a name="_sub108" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4888 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4889 
4890 <span class="comment">% Check for any stored prefs</span>
4891 <span class="comment">% --------------------------</span>
4892 <span class="comment">% Currently, units and the graphics renderer are stored as persistent prefs</span>
4893 guiprefs = getpref(<span class="string">'VMT'</span>);
4894 
4895 <span class="comment">% Organized by GUI panels</span>
4896 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4897 <span class="comment">% SHIPTRACKS PLOT %</span>
4898 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4899 guiparams.horizontal_grid_node_spacing       = 1.0;
4900 guiparams.vertical_grid_node_spacing         = 0.4;
4901 
4902 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4903 <span class="comment">% CROSS SECTION PLOT %</span>
4904 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4905 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4906 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4907 guiparams.idx_contour                        = 1;
4908 guiparams.vertical_exaggeration              = 10;
4909 guiparams.vector_scale_cross_section         = 0.2;
4910 guiparams.horizontal_vector_spacing          = 1;
4911 guiparams.vertical_vector_spacing            = 1;
4912 guiparams.horizontal_smoothing_window        = 1;
4913 guiparams.vertical_smoothing_window          = 1;
4914 guiparams.plot_secondary_flow_vectors        = true;
4915 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
4916 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
4917 guiparams.idx_secondary_flow_vector_variable = 1;
4918 guiparams.include_vertical_velocity          = true;
4919 
4920 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4921 <span class="comment">% PLAN VIEW PLOT %</span>
4922 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4923 guiparams.depth_range_min                    = 0;
4924 guiparams.depth_range_max                    = inf;
4925 guiparams.vector_scale_plan_view             = 1;
4926 guiparams.vector_spacing_plan_view           = 1;
4927 guiparams.smoothing_window_size              = 1;
4928 guiparams.display_shoreline                  = false;
4929 guiparams.add_background                     = false;
4930 
4931 <span class="comment">%%%%%%%%%%%%%%%</span>
4932 <span class="comment">% DATA EXPORT %</span>
4933 <span class="comment">%%%%%%%%%%%%%%%</span>
4934 guiparams.beam_angle                         = 20.0;
4935 guiparams.magnetic_variation                 = 0.0;
4936 guiparams.wse                                = 0.0;
4937 guiparams.output_auxiliary_data              = false;
4938 
4939 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4940 <span class="comment">% Contour variables %</span>
4941 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4942 idx = 1;
4943 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
4944 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
4945 idx = idx + 1;
4946 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
4947 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
4948 idx = idx + 1;
4949 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
4950 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
4951 idx = idx + 1;
4952 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
4953 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
4954 idx = idx + 1;
4955 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
4956 guiparams.contours(idx).variable = <span class="string">'east'</span>;
4957 idx = idx + 1;
4958 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
4959 guiparams.contours(idx).variable = <span class="string">'north'</span>;
4960 idx = idx + 1;
4961 guiparams.contours(idx).string   = <span class="string">'Error Velocity'</span>;
4962 guiparams.contours(idx).variable = <span class="string">'error'</span>;
4963 idx = idx + 1;
4964 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
4965 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
4966 idx = idx + 1;
4967 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
4968 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
4969 idx = idx + 1;
4970 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
4971 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
4972 idx = idx + 1;
4973 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
4974 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
4975 idx = idx + 1;
4976 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
4977 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
4978 idx = idx + 1;
4979 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
4980 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
4981 idx = idx + 1;
4982 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
4983 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
4984 idx = idx + 1;
4985 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
4986 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
4987 idx = idx + 1;
4988 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
4989 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
4990 idx = idx + 1;
4991 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
4992 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
4993 
4994 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
4995 
4996 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4997 <span class="comment">% Secondary Flow Vector Variables %</span>
4998 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4999 idx = 1;
5000 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
5001 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
5002 idx = idx + 1;
5003 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
5004 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
5005 idx = idx + 1;
5006 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
5007 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
5008 idx = idx + 1;
5009 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
5010 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
5011 idx = idx + 1;
5012 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
5013 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
5014 
5015 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
5016     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
5017 
5018 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5019 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
5020 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5021 <span class="comment">% Menu bar options</span>
5022 guiparams.presentation                       = true;
5023 guiparams.print                              = false;
5024 guiparams.set_cross_section_endpoints        = false;
5025 guiparams.unit_discharge_correction          = false;
5026 
5027 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
5028     <span class="keyword">switch</span> guiprefs.units
5029         <span class="keyword">case</span> <span class="string">'metric'</span>
5030             guiparams.english_units          = false;
5031         <span class="keyword">case</span> <span class="string">'english'</span>
5032             guiparams.english_units          = true;
5033     <span class="keyword">end</span>
5034 <span class="keyword">else</span>
5035     guiparams.english_units                  = false;
5036 <span class="keyword">end</span>
5037 guiparams.vertical_offset                    = 0;
5038 
5039 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
5040     guiparams.renderer                       = guiprefs.renderer;
5041 <span class="keyword">else</span>
5042     guiparams.renderer                       = <span class="string">'OpenGL'</span>;
5043 <span class="keyword">end</span>
5044 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
5045 <span class="comment">% guiparams.plot_planview                      = false;</span>
5046 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
5047 
5048 <span class="comment">% File location defaults</span>
5049 guiparams.ascii_path                        = pwd;
5050 guiparams.ascii_file                        = <span class="string">''</span>;
5051 guiparams.mat_path                          = pwd;
5052 guiparams.mat_file                          = <span class="string">''</span>;
5053 guiparams.tecplot_path                      = pwd;
5054 guiparams.tecplot_file                      = <span class="string">''</span>;
5055 guiparams.kmz_path                          = pwd;
5056 guiparams.kmz_file                          = <span class="string">''</span>;
5057 guiparams.multibeambathymetry_path          = pwd;
5058 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
5059 guiparams.log_path                          = pwd;
5060 guiparams.log_file                          = <span class="string">''</span>;
5061 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
5062 <span class="comment">% application</span>
5063 <span class="keyword">if</span> isdeployed 
5064     guiparams.has_mapping_toolbox           = true;
5065 <span class="keyword">else</span>
5066     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
5067         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
5068 <span class="keyword">end</span>
5069 
5070 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5071 <span class="comment">% IN MEMORY DATA STORAGE %</span>
5072 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5073 guiparams.z                      = [];
5074 guiparams.A                      = [];
5075 guiparams.V                      = [];
5076 guiparams.Map                    = [];
5077 guiparams.savefile               = [];
5078 guiparams.iric_anv_planview_data = [];
5079 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
5080 <span class="comment">% guiparams.zmax = [];</span>
5081 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
5082 guiparams.data_folder = <span class="string">''</span>;
5083 guiparams.data_files  = {<span class="string">''</span>};
5084 guiparams.gui_state   = <span class="string">'init'</span>;
5085 
5086 <span class="comment">% [EOF] createGUIparams</span>
5087 
5088 <a name="_sub109" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
5089 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
5090 
5091 <a name="_sub110" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
5092 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
5093 
5094 <span class="comment">% [EOF] VMT</span>
5095 
5096 
5097 
5098 
5099 
5100 <span class="comment">% --- Hidden keyboard commands</span>
5101 <a name="_sub111" href="#_subfunctions" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a>
5102 <span class="comment">% Used to pass specific hidden keyboard commands to VMT. Currently, the</span>
5103 <span class="comment">% only use for this function is to open Beta support for SonTek M9 data.</span>
5104 <span class="comment">%</span>
5105 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
5106 <span class="comment">% eventdata  structure with the following fields (see FIGURE)</span>
5107 <span class="comment">%    Key: name of the key that was pressed, in lower case</span>
5108 <span class="comment">%    Character: character interpretation of the key(s) that was pressed</span>
5109 <span class="comment">%    Modifier: name(s) of the modifier key(s) (i.e., control, shift) pressed</span>
5110 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
5111 
5112 in1 = eventdata.Modifier; 
5113 in2 = eventdata.Key;
5114 
5115 <span class="keyword">if</span> ~isempty(in1) <span class="comment">% User pressed at least one modifier key</span>
5116     input = [in1{:} in2];
5117 <span class="keyword">else</span>
5118     input = in2;
5119 <span class="keyword">end</span>
5120 
5121 <span class="keyword">switch</span> input
5122     <span class="comment">% Hidden SonTek M9 support</span>
5123     <span class="keyword">case</span> <span class="string">'shiftcontrols'</span>
5124         msgtxt = {<span class="keyword">...</span>
5125             <span class="string">'VMT offers limited support for SonTek M9/S5 data.'</span>;<span class="keyword">...</span>
5126             <span class="string">'SonTek RiverSurveyorLive required data format:'</span>;<span class="keyword">...</span>
5127             <span class="string">'      -ENU coordinates'</span>;<span class="keyword">...</span>
5128             <span class="string">'      -Desired GPS reference (BT/GGA/VTG)'</span>
5129             <span class="string">''</span>;<span class="keyword">...</span>
5130             <span class="string">'Abosolutely NO GUARANTEE is made or implied that this'</span>;<span class="keyword">...</span>
5131             <span class="string">'functionality will work for all cases. Results are'</span>;<span class="keyword">...</span>
5132             <span class="string">'PROVISIONAL at best.'</span>};
5133         msgbox(msgtxt, <span class="string">'Hidden Functionality: Process SonTek M9'</span>, <span class="string">'warn'</span>,<span class="string">'replace'</span>)
5134         
5135         <span class="comment">% Get the Application data:</span>
5136         <span class="comment">% -------------------------</span>
5137         guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
5138         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5139         
5140         <span class="comment">% Ask the user to select files:</span>
5141         <span class="comment">% -----------------------------</span>
5142         <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
5143         <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
5144         <span class="keyword">if</span> iscell(guiprefs.mat_file)
5145             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
5146         <span class="keyword">else</span>
5147             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
5148         <span class="keyword">end</span>
5149         [filename,pathname] = <span class="keyword">...</span>
5150             uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
5151             <span class="string">'Select SonTek RiverSurveyor Live v3.60 MAT File'</span>, <span class="keyword">...</span>
5152             uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
5153         
5154         <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
5155             guiparams.data_folder = pathname;
5156             <span class="keyword">if</span> ischar(filename)
5157                 filename = {filename};
5158             <span class="keyword">end</span>
5159             guiparams.data_files = filename;
5160             guiparams.mat_file = <span class="string">''</span>;
5161             
5162             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5163             
5164             
5165             
5166             <span class="comment">% Update the preferences:</span>
5167             <span class="comment">% -----------------------</span>
5168             guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5169             guiprefs.ascii_path = pathname;
5170             guiprefs.ascii_file = filename;
5171             setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
5172             <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
5173             
5174             <span class="comment">% Push messages to Log Window:</span>
5175             <span class="comment">% ----------------------------</span>
5176             log_text = {<span class="keyword">...</span>
5177                 <span class="string">''</span>;<span class="keyword">...</span>
5178                 [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
5179                 <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
5180                 guiparams.data_folder;
5181                 <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
5182                 char(filename)};
5183             statusLogging(handles.LogWindow, log_text)
5184             
5185             <span class="comment">% Read the file(s)</span>
5186             <span class="comment">% ----------------</span>
5187             <span class="comment">%A = parseSonTekVMT(fullfile(pathname,filename));</span>
5188             
5189             [~,~,savefile,A,z] = <span class="keyword">...</span>
5190                 <a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>(guiparams.data_folder,guiparams.data_files);
5191             guiparams.savefile = savefile;
5192             guiparams.A        = A;
5193             guiparams.z        = z;
5194             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5195             
5196             
5197             <span class="comment">% Update the GUI:</span>
5198             <span class="comment">% ---------------</span>
5199             <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
5200         <span class="keyword">end</span>  
5201     <span class="keyword">case</span> <span class="string">'shiftcontroll'</span> <span class="comment">% Call SontekMAT2KML</span>
5202         SontekMAT2KML;
5203     <span class="keyword">case</span> <span class="string">'f1'</span> <span class="comment">% Call the VMT UsersGuide</span>
5204         <a href="#_sub46" class="code" title="subfunction menuUsersGuide_Callback(hObject, eventdata, handles)">menuUsersGuide_Callback</a>(hObject, eventdata, handles)
5205         
5206     <span class="keyword">case</span> <span class="string">'controlalte'</span>
5207         VMT_BuildCustomFlatFile;
5208     <span class="keyword">otherwise</span>
5209         <span class="comment">%disp(input)</span>
5210 <span class="keyword">end</span>
5211 
5212 
5213 
5214</pre></div>
<hr><address>Generated on Thu 19-Jun-2014 14:53:56 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
>>>>>>> .r93
</body>
</html>