<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of parseSonTekVMT</title>
  <meta name="keywords" content="parseSonTekVMT">
  <meta name="description" content="PARSESONTEK reads MAT file output from RSL for use in VMT">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html trunk --><!-- menu.html utils -->
<h1>parseSonTekVMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>PARSESONTEK reads MAT file output from RSL for use in VMT</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function A = parseSonTekVMT(fullName) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PARSESONTEK reads MAT file output from RSL for use in VMT
 Currently only supports RSL v3.60 or earlier
 NO WARRANTY OR GUARANTEE OF FUNCTIONALITY

 Dave Mueller, USGS
 Frank L. Engel, USGS

 SEE ALSO:</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="ari2geodeg.html" class="code" title="function [geoAng] = ari2geodeg(ariAng)">ari2geodeg</a>	ARI2GEODEG converts arithmetic angles to geographic angles.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function varargout = fixOldMatFiles(varargin)</a></li><li><a href="#_sub2" class="code">function [Sup,Wat,Nav,Sensor,Q] = initStructures(varargin)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function A = parseSonTekVMT(fullName)</a>
0002 <span class="comment">%PARSESONTEK reads MAT file output from RSL for use in VMT</span>
0003 <span class="comment">% Currently only supports RSL v3.60 or earlier</span>
0004 <span class="comment">% NO WARRANTY OR GUARANTEE OF FUNCTIONALITY</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% Dave Mueller, USGS</span>
0007 <span class="comment">% Frank L. Engel, USGS</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% SEE ALSO:</span>
0010 
0011 <span class="comment">% filesep     = '\';</span>
0012 <span class="comment">% fullName    = [pathname filesep filename{1}];</span>
0013 
0014 load (fullName)
0015 
0016 <span class="comment">% For RSL versions &lt;1.5, the variable units were included in the field</span>
0017 <span class="comment">% names. Check to see if units are in field names, if so ensure SI units</span>
0018 <span class="comment">% and rename.</span>
0019 is_in_eng_units     = isfield(Summary,<span class="string">'Depth_ft'</span>);
0020 is_in_si_units      = isfield(Summary,<span class="string">'Depth_m'</span>);
0021 <span class="keyword">if</span> is_in_eng_units || is_in_si_units
0022 [<span class="keyword">...</span>
0023     BottomTrack,<span class="keyword">...</span>
0024     GPS,<span class="keyword">...</span>
0025     Processing,<span class="keyword">...</span>
0026     RawGPSData,<span class="keyword">...</span>
0027     Setup,<span class="keyword">...</span>
0028     Summary,<span class="keyword">...</span>
0029     System,<span class="keyword">...</span>
0030     Transformation_Matrices,<span class="keyword">...</span>
0031     WaterTrack,<span class="keyword">...</span>
0032     ] = <a href="#_sub1" class="code" title="subfunction varargout = fixOldMatFiles(varargin)">fixOldMatFiles</a>(<span class="keyword">...</span>
0033     BottomTrack,<span class="keyword">...</span>
0034     GPS,<span class="keyword">...</span>
0035     Processing,<span class="keyword">...</span>
0036     RawGPSData,<span class="keyword">...</span>
0037     Setup,<span class="keyword">...</span>
0038     Summary,<span class="keyword">...</span>
0039     System,<span class="keyword">...</span>
0040     Transformation_Matrices,<span class="keyword">...</span>
0041     WaterTrack);
0042 <span class="keyword">end</span>
0043     
0044 
0045 <span class="comment">% Create the output structures</span>
0046 [Sup,Wat,Nav,Sensor,Q] = <a href="#_sub2" class="code" title="subfunction [Sup,Wat,Nav,Sensor,Q] = initStructures(varargin)">initStructures</a>(<span class="keyword">...</span>
0047     BottomTrack,<span class="keyword">...</span>
0048     GPS,<span class="keyword">...</span>
0049     Processing,<span class="keyword">...</span>
0050     RawGPSData,<span class="keyword">...</span>
0051     Setup,<span class="keyword">...</span>
0052     Summary,<span class="keyword">...</span>
0053     System,<span class="keyword">...</span>
0054     Transformation_Matrices,<span class="keyword">...</span>
0055     WaterTrack);
0056 
0057 
0058 <span class="comment">%%%%%%%%%%%%%%</span>
0059 <span class="comment">% PARSE DATA %</span>
0060 <span class="comment">%%%%%%%%%%%%%%</span>
0061 
0062 <span class="comment">% Setup units conversion</span>
0063 <span class="keyword">if</span> strcmpi(Summary.Units.Depth,<span class="string">'ft'</span>)
0064     cf                  = 1./3.281; <span class="comment">% conversion factor</span>
0065     System.Temperature  = (System.Temperature-32)*5/9;
0066 <span class="keyword">else</span>
0067     cf                  = 1; <span class="comment">% conversion factor (for m)</span>
0068     cf2                 = 1;   <span class="comment">% conversion factor (for m)</span>
0069 <span class="keyword">end</span>
0070 
0071 <span class="comment">% Only use in transect data, omit the edge measurements</span>
0072 idx = find(System.Step==3);
0073 
0074 <span class="comment">% Suplemental Data</span>
0075 Sup.nBins       = size(WaterTrack.Velocity,1);
0076 Sup.binSize_cm  = repmat(System.Cell_Size(idx)'.*100.*cf,Sup.nBins,1);
0077 Sup.bins        = repmat(Sup.nBins,size(idx));
0078 Sup.blank_cm    = Setup.screeningDistance.*100.*cf;
0079 Sup.draft_cm    = Setup.sensorDepth.*100.*cf;
0080 Sup.noe         = length(idx);
0081 <span class="keyword">switch</span> Setup.velocityReference
0082     <span class="keyword">case</span> 0
0083         Sup.vRef = <span class="string">'System'</span>;
0084     <span class="keyword">case</span> 1
0085         Sup.vRef = <span class="string">'BT'</span>;
0086     <span class="keyword">case</span> 2
0087         Sup.vRef = <span class="string">'GGA'</span>;
0088     <span class="keyword">case</span> 3
0089         Sup.vRef = <span class="string">'VTG'</span>;
0090 <span class="keyword">end</span>
0091 Sup.units = repmat(<span class="string">'cm'</span>,Sup.noe,1);
0092 Sup.timeElapsed_sec = [0; cumsum(diff(System.Time(idx)))];
0093 Sup.ensNo = idx;
0094 
0095 <span class="comment">% Water track data</span>
0096 <span class="comment">%cellSizeAll = repmat(Sup.binSize_cm',Sup.nBins,1);</span>
0097 top_of_cells        = System.Cell_Start(idx).*cf.*100; <span class="comment">% in cm</span>
0098 Wat.binDepth        =<span class="keyword">...</span>
0099     ((repmat((1:Sup.nBins)',1,Sup.noe)-0.5).*<span class="keyword">...</span>
0100     Sup.binSize_cm+repmat(top_of_cells',Sup.nBins,1))/100; <span class="comment">% in meters</span>
0101 Wat.vEast           =<span class="keyword">...</span>
0102     squeeze(WaterTrack.Velocity(:,1,idx)).*cf.*100; <span class="comment">% in cm/s</span>
0103 Wat.vNorth          =<span class="keyword">...</span>
0104     squeeze(WaterTrack.Velocity(:,2,idx)).*cf.*100; <span class="comment">% in cm/s</span>
0105 Wat.vVert           =<span class="keyword">...</span>
0106     squeeze(WaterTrack.Velocity(:,3,idx)).*cf.*100; <span class="comment">% in cm/s</span>
0107 Wat.vMag            =<span class="keyword">...</span>
0108     sqrt(Wat.vEast.^2 + Wat.vNorth.^2 + Wat.vVert.^2).*100; <span class="comment">% in cm/s</span>
0109 Wat.vDir            =<span class="keyword">...</span>
0110     <a href="ari2geodeg.html" class="code" title="function [geoAng] = ari2geodeg(ariAng)">ari2geodeg</a>(atan2(Wat.vNorth,Wat.vEast).*180/pi);
0111 
0112 <span class="comment">% Navigation data</span>
0113 Nav.bvEast          = Summary.Boat_Vel(idx,1).*cf.*100; <span class="comment">% in cm/s</span>
0114 Nav.bvNorth         = Summary.Boat_Vel(idx,2).*cf.*100; <span class="comment">% in cm/s</span>
0115 Nav.bvVert          = Summary.Boat_Vel(idx,3).*cf.*100; <span class="comment">% in cm/s</span>
0116 Nav.depth           = BottomTrack.BT_Beam_Depth(idx,:).*cf; <span class="comment">% in m</span>
0117 Nav.dsDepth         = BottomTrack.VB_Depth(idx).*cf; <span class="comment">% in m</span>
0118 Nav.altitude        = GPS.Altitude(idx).*cf; <span class="comment">% in m</span>
0119 Nav.altitudeChng    = [0; diff(Nav.altitude)];
0120 Nav.lat_deg         = GPS.Latitude(idx);
0121 Nav.long_deg        = GPS.Longitude(idx);
0122 Nav.nSats           = GPS.Satellites(idx);
0123 Nav.hdop            = GPS.HDOP(idx);
0124 Nav.totDistEast     = Summary.Track(idx,1).*cf; <span class="comment">% in m</span>
0125 Nav.totDistNorth    = Summary.Track(idx,2).*cf; <span class="comment">% in m</span>
0126 Nav.length          = <span class="keyword">...</span>
0127     hypot(<span class="keyword">...</span>
0128     Nav.totDistNorth-Nav.totDistNorth(1),<span class="keyword">...</span>
0129     Nav.totDistEast-Nav.totDistEast(1));
0130 
0131 <span class="comment">% Sensor data</span>
0132 Sensor.pitch_deg    = System.Pitch(idx);
0133 Sensor.roll_deg     = System.Roll(idx);
0134 Sensor.heading_deg  = System.Heading(idx);
0135 Sensor.temp_degC    = System.Temperature(idx);
0136 
0137 <span class="comment">% Discarge data</span>
0138 Q.startDist     = repmat(Setup.Edges_0__DistanceToBank.*cf,Sup.noe,1);
0139 Q.endDist       = repmat(Setup.Edges_1__DistanceToBank.*cf,Sup.noe,1);
0140 Q.bot           = Summary.Bottom_Q(idx).*cf.^3;
0141 Q.top           = Summary.Top_Q(idx).*cf.^3;
0142 <span class="keyword">switch</span> Setup.startEdge
0143     <span class="keyword">case</span> 0 <span class="comment">% left bank</span>
0144         Q.start = Summary.Left_Q.*cf.^3;
0145         Q.end   = Summary.Right_Q.*cf.^3;
0146     <span class="keyword">case</span> 1 <span class="comment">% right bank</span>
0147         Q.start = Summary.Right_Q.*cf.^3;
0148         Q.end   = Summary.Left_Q.*cf.^3;
0149 <span class="keyword">end</span>
0150 Q.meas      = Summary.Middle_Q.*cf.^3;
0151 
0152 <span class="comment">% Deal Result to A structure</span>
0153 A.Sup       = Sup;
0154 A.Wat       = Wat;
0155 A.Nav       = Nav;
0156 A.Sensor    = Sensor;
0157 A.Q         = Q;
0158 
0159 
0160 <span class="comment">%%%%%%%%%%%%%%%%</span>
0161 <span class="comment">% SUBFUNCTIONS %</span>
0162 <span class="comment">%%%%%%%%%%%%%%%%</span>
0163 <a name="_sub1" href="#_subfunctions" class="code">function varargout = fixOldMatFiles(varargin)</a>
0164 disp(<span class="string">'fixOldMatFiles is not implemented yet, use RSL v1.5 or greater.'</span>)
0165 
0166 <span class="comment">% oldField = 'quux';</span>
0167 <span class="comment">% newField = 'corge';</span>
0168 <span class="comment">% [a.(newField)] = a.(oldField);</span>
0169 <span class="comment">% a = rmfield(a,oldField);</span>
0170 <span class="comment">% disp(a)</span>
0171 
0172 <a name="_sub2" href="#_subfunctions" class="code">function [Sup,Wat,Nav,Sensor,Q] = initStructures(varargin)</a>
0173 BottomTrack             = varargin{1};
0174 GPS                     = varargin{2};
0175 Processing              = varargin{3};
0176 RawGPSData              = varargin{4};
0177 Setup                   = varargin{5};
0178 Summary                 = varargin{6};
0179 System                  = varargin{7};
0180 Transformation_Matrices = varargin{8};
0181 WaterTrack              = varargin{9};
0182 
0183 idx  = find(System.Step==3);
0184 noe  = length(idx);
0185 bins = size(WaterTrack.Velocity,1);
0186 
0187 <span class="comment">% Initialize Data Structure.</span>
0188 Sup=struct( <span class="string">'absorption_dbpm'</span>,nan(noe,1),<span class="keyword">...</span>
0189     <span class="string">'bins'</span>,repmat(bins,noe,1),<span class="keyword">...</span>
0190     <span class="string">'binSize_cm'</span>,nan(noe,1),<span class="keyword">...</span>
0191     <span class="string">'nBins'</span>,nan(1),<span class="keyword">...</span>
0192     <span class="string">'blank_cm'</span>,nan(1),<span class="keyword">...</span>
0193     <span class="string">'draft_cm'</span>,nan(1),<span class="keyword">...</span>
0194     <span class="string">'ensNo'</span>,nan(noe,1),<span class="keyword">...</span>
0195     <span class="string">'nPings'</span>,nan(1),<span class="keyword">...</span>
0196     <span class="string">'noEnsInSeg'</span>,nan(noe,1),<span class="keyword">...</span>
0197     <span class="string">'noe'</span>,nan(1),<span class="keyword">...</span>
0198     <span class="string">'note1'</span>,blanks(80),<span class="keyword">...</span>
0199     <span class="string">'note2'</span>,blanks(80),<span class="keyword">...</span>
0200     <span class="string">'intScaleFact_dbpcnt'</span>,nan(noe,1),<span class="keyword">...</span>
0201     <span class="string">'intUnits'</span>,repmat(blanks(5),noe,1),<span class="keyword">...</span>
0202     <span class="string">'vRef'</span>,repmat(blanks(4),noe,1),<span class="keyword">...</span>
0203     <span class="string">'wm'</span>,nan(1),<span class="keyword">...</span>
0204     <span class="string">'units'</span>,repmat(blanks(2),noe,1),<span class="keyword">...</span>
0205     <span class="string">'year'</span>,nan(noe,1),<span class="keyword">...</span>
0206     <span class="string">'month'</span>,nan(noe,1),<span class="keyword">...</span>
0207     <span class="string">'day'</span>,nan(noe,1),<span class="keyword">...</span>
0208     <span class="string">'hour'</span>,nan(noe,1),<span class="keyword">...</span>
0209     <span class="string">'minute'</span>,nan(noe,1),<span class="keyword">...</span>
0210     <span class="string">'second'</span>,nan(noe,1),<span class="keyword">...</span>
0211     <span class="string">'sec100'</span>,nan(noe,1),<span class="keyword">...</span>
0212     <span class="string">'timeElapsed_sec'</span>,nan(noe,1),<span class="keyword">...</span>
0213     <span class="string">'timeDelta_sec100'</span>,nan(1));
0214 
0215 Wat=struct( <span class="string">'binDepth'</span>,nan(bins,noe),<span class="keyword">...</span>
0216     <span class="string">'backscatter'</span>,nan(bins,noe,4),<span class="keyword">...</span>
0217     <span class="string">'vDir'</span>,nan(bins,noe),<span class="keyword">...</span>
0218     <span class="string">'vMag'</span>,nan(bins,noe),<span class="keyword">...</span>
0219     <span class="string">'vEast'</span>,nan(bins,noe),<span class="keyword">...</span>
0220     <span class="string">'vError'</span>,nan(bins,noe),<span class="keyword">...</span>
0221     <span class="string">'vNorth'</span>,nan(bins,noe),<span class="keyword">...</span>
0222     <span class="string">'vVert'</span>,nan(bins,noe),<span class="keyword">...</span>
0223     <span class="string">'percentGood'</span>,nan(bins,noe));
0224 
0225 Nav=struct( <span class="string">'bvEast'</span>,nan(noe,1),<span class="keyword">...</span>
0226     <span class="string">'bvError'</span>,nan(noe,1),<span class="keyword">...</span>
0227     <span class="string">'bvNorth'</span>,nan(noe,1),<span class="keyword">...</span>
0228     <span class="string">'bvVert'</span>,nan(noe,1),<span class="keyword">...</span>
0229     <span class="string">'depth'</span>,nan(noe,4),<span class="keyword">...</span>
0230     <span class="string">'dsDepth'</span>,nan(noe,1),<span class="keyword">...</span>
0231     <span class="string">'dmg'</span>,nan(noe,1),<span class="keyword">...</span>
0232     <span class="string">'length'</span>,nan(noe,1),<span class="keyword">...</span>
0233     <span class="string">'totDistEast'</span>,nan(noe,1),<span class="keyword">...</span>
0234     <span class="string">'totDistNorth'</span>,nan(noe,1),<span class="keyword">...</span>
0235     <span class="string">'altitude'</span>,nan(noe,1),<span class="keyword">...</span>
0236     <span class="string">'altitudeChng'</span>,nan(noe,1),<span class="keyword">...</span>
0237     <span class="string">'gpsTotDist'</span>,nan(noe,1),<span class="keyword">...</span>
0238     <span class="string">'gpsVariable'</span>,nan(noe,1),<span class="keyword">...</span>
0239     <span class="string">'gpsVeast'</span>,nan(noe,1),<span class="keyword">...</span>
0240     <span class="string">'gpsVnorth'</span>,nan(noe,1),<span class="keyword">...</span>
0241     <span class="string">'lat_deg'</span>,nan(noe,1),<span class="keyword">...</span>
0242     <span class="string">'long_deg'</span>,nan(noe,1),<span class="keyword">...</span>
0243     <span class="string">'nSats'</span>,nan(noe,1),<span class="keyword">...</span>
0244     <span class="string">'hdop'</span>,nan(noe,1));
0245 
0246 Sensor=struct(  <span class="string">'pitch_deg'</span>,nan(noe,1),<span class="keyword">...</span>
0247     <span class="string">'roll_deg'</span>,nan(noe,1),<span class="keyword">...</span>
0248     <span class="string">'heading_deg'</span>,nan(noe,1),<span class="keyword">...</span>
0249     <span class="string">'temp_degC'</span>,nan(noe,1));
0250 
0251 Q=struct(   <span class="string">'endDepth'</span>,nan(noe,1),<span class="keyword">...</span>
0252     <span class="string">'endDist'</span>,nan(noe,1),<span class="keyword">...</span>
0253     <span class="string">'bot'</span>,nan(noe,1),<span class="keyword">...</span>
0254     <span class="string">'end'</span>,nan(noe,1),<span class="keyword">...</span>
0255     <span class="string">'meas'</span>,nan(noe,1),<span class="keyword">...</span>
0256     <span class="string">'start'</span>,nan(noe,1),<span class="keyword">...</span>
0257     <span class="string">'top'</span>,nan(noe,1),<span class="keyword">...</span>
0258     <span class="string">'unit'</span>,nan(bins,noe),<span class="keyword">...</span>
0259     <span class="string">'startDepth'</span>,nan(noe,1),<span class="keyword">...</span>
0260     <span class="string">'startDist'</span>,nan(noe,1));
0261 
0262 Sup.noe = noe;
0263 
0264 <span class="comment">% % Read in Selected Files</span>
0265 <span class="comment">% % Initialize the data structure</span>
0266 <span class="comment">% z = length(zFileName);</span>
0267 <span class="comment">% A = initStructure(z);</span>
0268 <span class="comment">%</span>
0269 <span class="comment">% % Begin master loop</span>
0270 <span class="comment">% for zi=1:z</span>
0271 <span class="comment">%     % Open data file, determine input type by extension</span>
0272 <span class="comment">%     [~, ~, ext] = fileparts(zFileName{zi});</span>
0273 <span class="comment">%     fileName = fullfile(zPathName,zFileName{zi});</span>
0274 <span class="comment">%</span>
0275 <span class="comment">%     switch ext</span>
0276 <span class="comment">%         case '.mat' % SonTek</span>
0277 <span class="comment">%             try</span>
0278 <span class="comment">%              [A(zi)]=parseSonTekVMT(fileName);</span>
0279 <span class="comment">%</span>
0280 <span class="comment">%             catch err</span>
0281 <span class="comment">%                 erstg = {'                                                      ',...</span>
0282 <span class="comment">%                     'An unknown error occurred when reading the SonTek file.'};</span>
0283 <span class="comment">%                 if isdeployed</span>
0284 <span class="comment">%                     errLogFileName = fullfile(pwd,...</span>
0285 <span class="comment">%                         ['errorLog' datestr(now,'yyyymmddHHMMSS') '.txt']);</span>
0286 <span class="comment">%                     msgbox({erstg;...</span>
0287 <span class="comment">%                         ['  Error code: ' err.identifier];...</span>
0288 <span class="comment">%                         ['Error details are being written to the following file: '];...</span>
0289 <span class="comment">%                         errLogFileName},...</span>
0290 <span class="comment">%                         'VMT Status: Unexpected Error',...</span>
0291 <span class="comment">%                         'error');</span>
0292 <span class="comment">%                     fid = fopen(errLogFileName,'W');</span>
0293 <span class="comment">%                     fwrite(fid,err.getReport('extended','hyperlinks','off'));</span>
0294 <span class="comment">%                     fclose(fid);</span>
0295 <span class="comment">%                     rethrow(err)</span>
0296 <span class="comment">%                 else</span>
0297 <span class="comment">%                     msgbox(['An unexpected error occurred. Error code: ' err.identifier],...</span>
0298 <span class="comment">%                         'VMT Status: Unexpected Error',...</span>
0299 <span class="comment">%                         'error');</span>
0300 <span class="comment">%                     rethrow(err);</span>
0301 <span class="comment">%                 end</span>
0302 <span class="comment">%             end</span>
0303 <span class="comment">%         otherwise</span>
0304 <span class="comment">%     end</span>
0305 <span class="comment">% end</span>
0306 <span class="comment">%</span>
0307 <span class="comment">%</span>
0308 <span class="comment">% % Create a name for any user saved results</span>
0309 <span class="comment">% switch ext</span>
0310 <span class="comment">%     case '.mat'</span>
0311 <span class="comment">%         % Save data with data/time prefix/suffix from the SonTek</span>
0312 <span class="comment">%         % filenames</span>
0313 <span class="comment">%         file_root_name = zFileName{1}(1:8);     % date string</span>
0314 <span class="comment">%         start_num      = zFileName{1}(9:end-4);   % time string</span>
0315 <span class="comment">%         end_num        = zFileName{end}(9:end-4); % time string</span>
0316 <span class="comment">%         savefile       = [file_root_name '_' start_num '_' end_num '.mat'];</span>
0317 <span class="comment">%         A(1).probeType = 'M9';</span>
0318 <span class="comment">%     otherwise</span>
0319 <span class="comment">%</span>
0320 <span class="comment">% end</span>
0321 <span class="comment">% save_dir = fullfile(zPathName,'VMTProcFiles');</span>
0322 <span class="comment">% [~,mess,~] = mkdir(save_dir);</span>
0323 <span class="comment">% % disp(mess)</span>
0324 <span class="comment">%</span>
0325 <span class="comment">%</span>
0326 <span class="comment">% savefile = fullfile(save_dir,savefile);</span>
0327 
0328 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0329 <span class="comment">% Embedded Functions %</span>
0330 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0331</pre></div>
<hr><address>Generated on Thu 10-Apr-2014 16:02:29 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>